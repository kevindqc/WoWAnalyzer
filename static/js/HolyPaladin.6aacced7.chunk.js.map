{"version":3,"sources":["interface/statistics/components/PlayerHits/images/char1.png","interface/statistics/components/PlayerHits/images/char2.png","interface/statistics/components/PlayerHits/images/char3.png","interface/statistics/components/PlayerHits/images/char4.png","interface/statistics/components/PlayerHits/images/char5.png","interface/statistics/components/PlayerHits/images/char1-active.png","interface/statistics/components/PlayerHits/images/char2-active.png","interface/statistics/components/PlayerHits/images/char3-active.png","interface/statistics/components/PlayerHits/images/char4-active.png","interface/statistics/components/PlayerHits/images/char5-active.png","parser/paladin/holy/normalizers/LightOfDawn.js","parser/paladin/holy/normalizers/BeaconOfVirtue.js","parser/paladin/holy/constants.js","parser/paladin/holy/modules/beacons/BeaconTransferFactor.js","parser/paladin/holy/modules/beacons/BeaconTargets.js","parser/paladin/holy/modules/beacons/BeaconHealSource.js","parser/paladin/holy/modules/beacons/BeaconHealingBreakdown.js","parser/paladin/holy/modules/beacons/BeaconHealingDone.js","parser/paladin/holy/modules/beacons/MissingBeacons.js","parser/paladin/holy/modules/beacons/FailedBeaconTransfers.js","interface/icons/Plus.js","parser/paladin/holy/modules/Abilities.tsx","parser/paladin/holy/modules/core/PaladinAbilityTracker.ts","parser/paladin/holy/modules/beacons/DirectBeaconHealing.js","parser/paladin/holy/modules/beacons/BeaconUptime.js","parser/paladin/shared/spells/HammerOfWrath.tsx","parser/paladin/holy/modules/CastBehavior.js","parser/paladin/holy/modules/Overhealing.js","parser/paladin/holy/modules/FillerLightOfTheMartyrs.tsx","parser/paladin/holy/modules/InefficientLightOfTheMartyrs.tsx","parser/paladin/holy/modules/FillerFlashOfLight.js","interface/statistics/components/PlayerHits/index.js","parser/paladin/holy/modules/LightOfDawn.tsx","parser/paladin/holy/modules/LightOfDawnIndexer.js","parser/paladin/holy/modules/Buffs.js","interface/statistics/components/DistanceRadar/Ring.js","interface/statistics/components/DistanceRadar/index.js","parser/paladin/holy/modules/MasteryEffectiveness.js","parser/paladin/holy/modules/AlwaysBeCasting.js","parser/paladin/holy/modules/checklist/Component.js","parser/paladin/holy/modules/checklist/Module.js","parser/paladin/holy/modules/CooldownThroughputTracker.js","parser/paladin/holy/modules/StatValuesSpellInfo.js","parser/paladin/holy/modules/StatValues.js","parser/paladin/holy/modules/MightOfTheMountain.js","parser/paladin/holy/modules/talents/RuleOfLaw.js","parser/paladin/holy/modules/talents/DevotionAuraDamageReduction.js","parser/paladin/holy/modules/talents/CrusadersMight.js","interface/others/TraitStatisticBox.js","parser/paladin/holy/modules/talents/AvengingCrusader.js","parser/paladin/holy/modules/talents/JudgmentOfLight.js","parser/paladin/holy/modules/talents/GlimmerOfLight.js","parser/paladin/holy/CombatLogParser.js","parser/core/calculateEffectiveDamage.js","interface/statistics/components/BoringValueText/index.tsx","interface/others/TalentStatisticBox.js","interface/statistics/components/DonutChart/index.js","interface/others/charts/OneVariableBinomialChart.js","parser/shared/modules/helpers/Probability.tsx","interface/statistics/components/BoringSpellValue/index.tsx","parser/shared/ExecuteHelper.ts","interface/others/LazyLoadStatisticBox.js","interface/PerformanceBar.tsx","parser/shared/modules/features/images/QE-Logo-New-Small.png","parser/paladin/shared/holypower/HolyPowerTracker.js","interface/others/StatisticWrapper.js","parser/shared/modules/features/SpellInfo.js","parser/shared/modules/features/BaseHealerStatValues.js","interface/statistics/components/Gauge.js","interface/statistics/components/UptimeBar/index.js","parser/shared/modules/AlwaysBeCastingHealing.js","parser/paladin/shared/holypower/HolyPowerDetails.js","parser/shared/modules/resources/mana/ManaUsageGraph.js","parser/shared/modules/resources/mana/ManaUsageChartComponent.js","parser/shared/modules/resources/mana/ManaUsageChart.js","parser/shared/modules/features/LowHealthHealing/Component.js","parser/shared/modules/features/LowHealthHealing/index.js","parser/shared/modules/resources/mana/ManaLevelChartComponent.js","parser/shared/modules/resources/mana/ManaLevelChart.js","interface/others/charts/ManaLevelGraph.js","parser/paladin/shared/talents/HolyAvenger.tsx","parser/paladin/shared/talents/DivinePurpose.tsx","parser/paladin/shared/constants.ts","interface/others/PlayerBreakdown.js","common/indexByProperty.js"],"names":["module","exports","LightOfDawn","events","fixedEvents","forEach","event","eventIndex","push","type","EventType","Cast","ability","guid","SPELLS","LIGHT_OF_DAWN_CAST","id","castTimestamp","timestamp","previousEventIndex","previousEvent","Heal","LIGHT_OF_DAWN_HEAL","sourceID","splice","__modified","EventsNormalizer","BeaconOfVirtue","previousEvents","lastBeaconOfVirtueCastIndex","length","ApplyBuff","BEACON_OF_VIRTUE_TALENT","findPreviousCast","ABILITIES_AFFECTED_BY_HEALING_INCREASES","HOLY_SHOCK_HEAL","FLASH_OF_LIGHT","JUDGMENT_OF_LIGHT_HEAL","LIGHT_OF_THE_MARTYR","LIGHTS_HAMMER_HEAL","HOLY_PRISM_HEAL","HOLY_PRISM_HEAL_DIRECT","AURA_OF_MERCY_HEAL","BEACON_OF_LIGHT_HEAL","LEECH","AVENGING_CRUSADER_HEAL_NORMAL","AVENGING_CRUSADER_HEAL_CRIT","ABILITIES_AFFECTED_BY_MASTERY","HOLY_LIGHT","BESTOW_FAITH_TALENT","GLIMMER_OF_LIGHT_TALENT","BEACON_TRANSFERING_ABILITIES","BEACON_TYPES","BEACON_OF_FATH","BEACON_OF_FAITH_TALENT","DIVINE_PURPOSE_TALENT","BEACON_OF_LIGHT_CAST_AND_BUFF","BEACON_OF_VIRTUE","NUM_BEACONS","BeaconTransferFactor","healEvent","spellId","beaconFactor","spellFactor","this","beaconType","rawHealing","amount","absorbed","overheal","Math","round","getFactor","selectedCombatant","lv50Talent","Analyzer","BEACONS","Object","values","BeaconTargets","options","currentBeaconTargets","addEventListener","Events","applybuff","by","SELECTED_PLAYER","onApplyBuff","removebuff","onRemoveBuff","playerId","includes","targetId","targetID","eventEmitter","fabricateEvent","filter","dependencies","EventEmitter","combatants","Combatants","BeaconHealSource","healBacklog","heal","_onHeal","EventFilter","BeaconTransfer","BeaconTransferFailed","beaconTargets","remainingBeaconTransfers","numBeaconsActive","hasBeacon","processBeaconHealing","beaconTransferEvent","index","removals","owner","currentTimestamp","beacontransferfailed","eventType","_matchByHealSize","_matchByOrder","matchedHeal","originalHeal","error","_dumpBacklog","warn","name","beaconTransferRaw","i","expectedBeaconTransfer","beaconTransferFactor","getExpectedTransfer","debug","raw","actual","difference","abs","rawBeaconTransfer","findIndex","beaconOfVirtueNormalizer","BeaconHealingBreakdown","state","absolute","props","totalHealingDone","totalBeaconHealing","beaconHealingBySource","fightDuration","currentTotal","effective","highestHealing","keys","map","key","reduce","highest","source","max","healing","sort","a","b","style","width","SpellLink","icon","abilityIcon","paddingRight","textAlign","whiteSpace","formatPercentage","className","Tooltip","content","formatNumber","fontWeight","textTransform","colSpan","defaultChecked","icons","onChange","setState","target","checked","htmlFor","marginLeft","renderTableBody","React","Component","BeaconHealingDone","_totalBeaconHealing","HealingValue","_beaconHealingBySource","beaconHealSource","beacontransfer","_onBeaconTransfer","add","sourceHealing","Panel","title","explanation","position","pad","healingDone","total","HealingDone","MissingBeacons","lostBeaconHealing","onHeal","numMissingBeacons","numMaxBeacons","formatItemHealingDone","StatisticBox","STATISTIC_ORDER","UNIMPORTANT","SpellIcon","value","fontSize","label","tooltip","FailedBeaconTransfers","_onBeaconTransferFailed","Icon","other","viewBox","xmlns","transform","d","Abilities","combatant","hasSanctifiedWrath","hasTalent","SANCTIFIED_WRATH_TALENT","spell","HOLY_SHOCK_CAST","category","SPELL_CATEGORIES","ROTATIONAL","cooldown","haste","hasBuff","AVENGING_WRATH","gcd","base","castEfficiency","suggestion","extraSuggestion","timelineSortIndex","isDefensive","JUDGMENT_CAST_HOLY","JUDGMENT_CAST","AVENGING_CRUSADER_TALENT","JUDGMENT_OF_LIGHT_TALENT","recommendedEfficiency","LIGHTS_HAMMER_TALENT","CRUSADERS_MIGHT_TALENT","enabled","CRUSADER_STRIKE","charges","HOLY_PRISM_TALENT","RULE_OF_LAW_TALENT","COOLDOWNS","undefined","DIVINE_PROTECTION","UNBREAKABLE_SPIRIT_TALENT","importance","ISSUE_IMPORTANCE","MINOR","DIVINE_SHIELD","HOLY_AVENGER_TALENT","AURA_MASTERY","BLESSING_OF_SACRIFICE","LAY_ON_HANDS","OTHERS","channel","casts","castCount","healingIolHits","INFUSION_OF_LIGHT","WORD_OF_GLORY","DIVINE_STEED","UTILITY","CAVALIER_TALENT","CLEANSE","BLESSING_OF_FREEDOM","BLESSING_OF_PROTECTION","HEALER_DAMAGING_SPELL","CONSECRATION_CAST","BLINDING_LIGHT_TALENT","HAMMER_OF_JUSTICE","HAND_OF_RECKONING","SERAPHIM_TALENT","buffSpellId","SEMI_DEFENSIVE","CoreAbilities","PaladinAbilityTracker","abilityInfo","cast","getAbility","healingIolHealing","healingIolOverheal","healingIolAbsorbed","healingBeaconHits","healingBeaconHealing","healingBeaconAbsorbed","healingBeaconOverheal","AbilityTracker","DirectBeaconHealing","when","suggestionThresholds","isGreaterThan","minor","addSuggestion","suggest","recommended","regular","average","major","Statistic","CORE","size","Plus","UpArrow","marginTop","marginRight","totalHealsOnBeaconPercentage","totalFoLHLOnBeaconPercentage","totalOtherSpellsOnBeaconPercentage","abilities","activeAbilities","abilityTracker","castsOnBeacon","beaconTransferingAbilities","healingHits","BeaconUptime","args","missingBoLPrepull","missingBoFPrepull","missingBoL","missingBoF","missingBoV","fightStart","fight","start_time","fightEnd","end_time","fightLength","lastBoLtimestamp","lastBoFtimestamp","lastBoVtimestamp","uptimeBoL","uptimeBoF","uptimeBoV","countBoL","countBoF","_onBuff","_offBuff","fightend","_endOfFight","hasBoL","hasBoF","hasBoV","idBoL","idBoF","idBoV","BuffEventType","freeze","REMOVEBUFF","PREPULL","POSTPULL","UPDATE","ENDOFFIGHT","_updateBoL","_updateBoF","getBuffHistory","end","start","_handleBoLEvents","_handleBoFEvents","_handleBoVEvents","prepull","_onPrepull","boringSpellValueContainer","display","flexDirection","missingPrepullContainer","color","margin","BoringSpellValue","uptimeBoLPerc","uptimeBoFPerc","uptimeBoVPerc","isEqual","isLessThan","HammerofWrath","maxCasts","adjustMaxCasts","HAMMER_OF_WRATH","ceil","totalExecuteDuration","ExecuteHelper","executeSpells","executeSources","lowerThreshold","executeOutsideRangeEnablers","CRUSADE_TALENT","modifiesDamage","CastBehavior","flashOfLight","holyLight","holyShockCast","holyShockHeal","holyShockDamage","HOLY_SHOCK_DAMAGE","iolFlashOfLights","iolHolyLights","totalIolUsages","holyShockCasts","holyShockCrits","healingCriticalHits","damageCriticalHits","totalIolProcs","iolProcsPerHolyShockCrit","unusedProcs","items","DonutChart","lightOfTheMartyr","flashOfLightHeals","holyLightHeals","lightOfTheMartyrHeals","fillerFlashOfLights","fillerHolyLights","StatisticGroup","ultrawide","iolCastRatioChart","fillerCastRatioChart","Overhealing","divinePurposeActive","healingEffective","healingAbsorbed","healingOverheal","getRawHealing","lightOfDawnSuggestionThresholds","i18n","_","holyShockSuggestionThresholds","flashOfLightSuggestionThresholds","bestowFaithSuggestionThresholds","getOverhealingPercentage","lightOfDawnOverhealing","holyShockOverhealing","flashOfLightOverhealing","bestowFaithOverhealing","FillerLightOfTheMartyrs","spellUsable","inefficientCasts","handleCast","isAvailable","cooldownRemaining","meta","isInefficientCast","inefficientCastReason","cpmSuggestionThresholds","cpm","toFixed","inefficientCpmSuggestionThresholds","formatTimestamp","join","HOLY_SHOCK_COOLDOWN_WAIT_TIME","ThresholdStyle","NUMBER","inefficientCpm","SpellUsable","InefficientLightOfTheMartyrs","lastCast","lastHeal","lastDamage","handleHeal","damage","to","LIGHT_OF_THE_MARTYR_DAMAGE_TAKEN","handleDamage","check","console","log","Error","FillerFlashOfLight","_isCurrentCastInefficient","begincast","onBeginCast","onCast","_isInefficientCastEvent","CharacterHitPerCast","performance","backgroundImage","char1","char2","char3","char4","char5","char1Active","min","char2Active","char3Active","char4Active","char5Active","heals","playersHitPerCast","extra","LightOfDawnIndexer","_lightOfDawnHealIndex","lightOfDawnHealIndex","Buffs","triggeredBySpellId","timelineHighlight","DIVINE_STEED_BUFF","DIVINE_STEED_BUFF_ALT","DIVINE_STEED_BUFF_ALT_2","DIVINE_STEED_BUFF_ALT_3","BLOODLUST_BUFFS","item","Number","CoreBuffs","Ring","innerRef","others","top","left","height","border","borderRadius","ref","defaultProps","Radar","distance","playerColor","pixelsPerYard","opacity","background","boxShadow","pointerEvents","MasteryEffectiveness","_lastPlayerPositionUpdate","distanceSum","distanceCount","rawMasteryEffectivenessSum","rawMasteryEffectivenessCount","masteryEffectivenessRawMasteryGainSum","masteryEffectivenessRawPotentialMasteryGainSum","totalMasteryHealingDone","masteryHealEvents","onDamageTaken","energize","onEnergize","onHealToPlayer","onHealByPlayer","updatePlayerPosition","processForMasteryEffectiveness","getPlayerDistance","isRuleOfLawActive","masteryEffectiveness","constructor","calculateMasteryEffectiveness","applicableMasteryPercentage","statTracker","currentMasteryPercentage","baseHealing","rawMasteryGain","actualMasteryHealingDone","maxPotentialRawMasteryHealing","effectiveHealing","x","y","verifyPlayerPositionUpdate","lastPositionUpdate","forWho","calculateDistance","timeSince","masteryEffectivenessMasteryHealingGainAverage","right","lineHeight","PlayerBreakdown","report","players","obj","healingReceived","healingFromMastery","maxPotentialHealingFromMastery","playerStats","x1","y1","x2","y2","sqrt","fullEffectivenessRadius","falloffRadius","StatTracker","AlwaysBeCasting","HEALING_ABILITIES_ON_GCD","trigger","targetIsFriendly","CoreAlwaysBeCastingHealing","HolyPaladinChecklist","thresholds","AbilityRequirement","GenericCastEfficiencyRequirement","getCastEfficiencyForSpellId","Rule","description","href","rel","Requirement","fillerFlashOfLight","ARCANE_TORRENT_MANA1","onClick","e","preventDefault","fillerLightOfTheMartyrsCpm","fillerLightOfTheMartyrsInefficientCpm","directBeaconHealing","MASTERY_LIGHTBRINGER","ResourceLink","RESOURCE_TYPES","MANA","manaLeft","nonHealingTimeSuggestionThresholds","downtimeSuggestionThresholds","overhealing","holyShock","lightOfDawn","bestowFaith","beaconUptimeBoL","beaconUptimeBoLUptime","beaconUptimeBoF","beaconUptimeBoFUptime","PreparationRule","Checklist","selected","preparationRuleAnalyzer","alwaysBeCasting","beaconUptime","suggestionThresholdsBoL","suggestionThresholdsBoLUptime","suggestionThresholdsBoF","suggestionThresholdsBoFUptime","fillerLightOfTheMartyrs","manaValues","BaseChecklist","CastEfficiency","ManaValues","PreparationRuleAnalyzer","CooldownThroughputTracker","CoreCooldownThroughputTracker","cooldownSpells","summary","BUILT_IN_SUMMARY_TYPES","HEALING","OVERHEALING","int","crit","hasteHpct","mastery","vers","ignored","GLIMMER_OF_LIGHT_HEAL_TALENT","StatValues","spellInfo","SPELL_INFO","qeLive","active","moreInformationLink","onBeaconTransfer","_getSpellInfo","healVal","targetHealthPercentage","hitPoints","maxHitPoints","_handleHeal","baseCritChance","ratingCritChance","AVENGING_WRATH_GUARANTEED_CRIT_BUFF","hitType","HIT_TYPES","CRIT","_criticalStrikeInfusionOfLightProcs","regularHeal","effectiveIolHealing","_getCritChance","totalCritChance","ratingNeededForNextPercentage","currentHasteRating","statBaselineRatingPerPercent","STAT","CRITICAL_STRIKE","currentCritRating","healIncreaseFromOneMastery","statMultiplier","currentMasteryRating","MASTERY","spec","masteryCoefficient","INTELLECT","stat","HASTE_HPCT","VERSATILITY","VERSATILITY_DR","BaseHealerStatValues","critEffectBonus","CritEffectBonus","MightOfTheMountain","isApplicableHeal","rawDrapeHealing","getBonus","CRIT_EFFECT","BaseMightOfTheMountain","RuleOfLaw","uptimeSuggestionThresholds","history","StatisticBar","wide","uptime","padding","UptimeBar","uptimeHistory","getBuffUptime","DevotionAuraDamageReduction","passiveDamageReduced","activeDamageReduced","buffsActive","totalDamageReduced","damageReduced","totalPassiveDamageReduction","DEVOTION_AURA_BUFF","toPlayer","isApplicableBuffEvent","fetchWcl","code","then","json","totalDamageTaken","entries","damageTaken","entry","formatThousands","passiveDrps","activeDrps","LazyLoadStatisticBox","OPTIONAL","loader","load","bind","DEVOTION_AURA","totalDrps","drilldown","makeWclUrl","fightId","pins","view","singleTargetDamageReduction","buffHistory","buff","playerName","player","RemoveBuff","DEVOTION_AURA_ACTIVE_DAMAGE_REDUCTION","CrusadersMight","effectiveHolyShockReductionMs","wastedHolyShockReductionMs","wastedHolyShockReductionCount","holyShocksCastsLost","isOnCooldown","reductionMs","reduceCooldown","holyShockCooldown","hastePercentage","builds","GLIMMER","holyShocksMissedThresholds","floor","seconds","holyShocksLost","wastedLightOfDawnReductionCount","TraitStatisticBox","trait","STATISTIC_CATEGORY","ITEMS","AvengingCrusader","healingTransfered","hits","crits","overHealing","beaconOverhealing","onHit","onCrit","ItemHealingDone","totalHealing","critRate","JudgmentOfLight","counter","wasted","resetCounter","handleHeals","TalentStatisticBox","talent","GlimmerOfLight","earlyRefresh","glimmerBuffs","glimmerHits","overCapHealing","overCap","wastedEarlyRefresh","wastedOverCap","GLIMMER_OF_LIGHT_DAMAGE_TALENT","onDamage","GLIMMER_OF_LIGHT_BUFF","applydebuff","removedebuff","unshift","g","BUFF_DURATION","GLIMMER_CAP","TALENTS","ItemDamageDone","hitsPerCast","holyShocksPerMinute","earlyGlimmerRefreshLoss","overCapGlimmerLoss","suggestEarlyRefresh","CombatLogParser","CoreCombatLogParser","abilitiesAffectedByHealingIncreases","specModules","lightOfDawnNormalizer","LightOfDawnNormalizer","BeaconOfVirtueNormalizer","lowHealthHealing","LowHealthHealing","beaconHealingDone","missingBeacons","failedBeaconTransfers","castBehavior","inefficientLightOfTheMartyrs","lightOfDawnIndexer","hammerOfWrath","HammerOfWrath","manaLevelChart","ManaLevelChart","manaUsageChart","ManaUsageChart","checklist","buffs","cooldownThroughputTracker","statValues","mightOfTheMountain","ruleOfLaw","devotionAuradamageReduction","holyAvenger","HolyAvenger","divinePurpose","DivinePurpose","crusadersMight","avengingCrusader","judgmentOfLight","glimmerOfLight","holyPowerTracker","HolyPowerTracker","holyPowerDetails","HolyPowerDetails","calculateEffectiveDamage","increase","BoringValue","children","sum","valueTooltip","chartSize","innerRadiusFactor","data","mark","innerRadius","encoding","theta","field","legend","scale","domain","range","stroke","renderLegend","renderChart","PureComponent","OneVariableBinomialChart","hover","probabilities","actualEvent","xAxis","yAxis","yDomain","axis","grid","format","tickFormat","layer","line","strokeWidth","filled","disableHeight","BaseChart","expectedProcCount","procChance","procAttempts","binomialPMF","k","n","p","numerator","denominator","binomialDistribution","pow","binomialCDF","probability","findMax","pmf","maxP","resetProbabilityArray","actualProcs","Array","from","_x","poissonBinomialPMF","setMinMaxProbabilities","threshold","procProbabilities","rangeMin","rangeMax","slice","Ekj","j","lookup","fill","plotOneVariableBinomChart","trackedName","tooltipText","actualEventY","inExecuteWindow","inHealthExecuteWindow","executeWindowStart","lastExecuteHitTimestamp","totalExecuteWindowDuration","castsWithExecute","onGeneralDamage","onExecuteCast","onExecuteDamage","applyExecuteEnablerBuff","removeExecuteEnablerBuff","onFightEnd","upperThreshold","isTargetInExecuteRange","isTargetInReverseExecuteRange","usable","allOnCD","areExecuteSpellsOnCD","isExecuteUsableOutsideExecuteRange","isTargetInHealthExecuteWindow","damageModifier","loaded","loading","handleClick","result","context","updateResults","cursor","contextTypes","PropTypes","func","isRequired","PerformanceBar","percent","transition","backgroundColor","colorForPerformance","resource","HOLY_POWER","getResource","cost","FIRES_OF_JUSTICE_BUFF","ResourceTracker","StatisticWrapper","multiplier","HEALTHSTONE","MARK_OF_THE_ANCIENT_PRIESTESS","fallbackSpellInfo","hasteHpm","sharedSpellInfo","CORE_SPELL_INFO","mentioned","totalAdjustedHealing","totalOneInt","totalOneCrit","totalOneHasteHpct","totalOneHasteHpm","totalOneMastery","totalOneVers","totalOneVersDr","totalOneLeech","playerHealthMissing","scaleWeightsWithHealth","SELECTED_PLAYER_PET","onAbsorb","onHealTaken","onFightend","specSpecific","shared","_handleHealEvent","absorb","eventForWeights","_adjustGain","_leech","_intellect","_criticalStrike","_hasteHpct","_hasteHpm","_mastery","_versatility","gain","mult","currentLeechPercentage","_leechHasLeech","_leechPrediction","currentLeechRating","healIncreaseFromOneLeech","leech","healIncreaseFromOneInt","intellect","currentIntellectRating","rating","baseCritPercentage","_isCrit","ratingCritChanceContribution","critMult","rawBaseHealing","effectiveCritHealing","currHastePerc","currentHastePercentage","healIncreaseFromOneHaste","HASTE","currVersPerc","currentVersatilityPercentage","healIncreaseFromOneVers","versatility","currentVersatilityRating","_updateMissingHealth","damageVal","DamageValue","blocked","overkill","_versatilityDamageReduction","baseStats","itemLevel","hps","primary","calculatePrimaryStat","hpsPerIntellect","criticalStrike","calculateSecondaryStatDefault","hpsPerCriticalStrike","hpsPerHaste","hpsPerMastery","hpsPerVersatility","hpsPerLeech","oneRatingHealing","HASTE_HPM","results","_prepareResults","urlParts","statValue","weight","_getGain","statName","getName","replace","data-place","Info","minWidth","row","_getTooltip","ratingForOne","_ratingPerOnePercent","getIcon","gainPerSecond","Infinity","informationIconTooltip","getClassNameColor","getNameTranslated","Information","hpsPerHasteHPCT","hpsPerHasteHPM","Gauge","render","paddingTop","strokeLinecap","fillRule","clipRule","transformOrigin","paddingLeft","AlwaysBeCastingHealing","healingTime","_lastHealingCastFinishedTimestamp","showStatistic","countsAsHealingAbility","duration","activeTimePercentage","healingTimePercentage","downtimePercentage","nonHealingTimePercentage","CoreAlwaysBeCasting","activeTime","downtime","wastedHolyPowerPercent","tracker","resourceName","showSpenders","generated","COLORS","ManaUsageGraph","mana","manaUsed","baseEncoding","labelExpr","formatTime","zero","nice","scheme","orient","combined","kind","HealingDoneGraph","healingBySecond","interval","second","offset","manaUpdates","healingPerFrame","groupHealingBySeconds","current","manaUsagePerFrame","0","manaLevelPerFrame","frame","used","fightDurationSec","labels","lastKnown","marginBottom","reportCode","actorId","offset_time","ManaUsageChartComponent","bySecond","maxPlayerHealthPercentage","minHealOfMaxHealthPercentage","healEvents","count","totalBigHealing","bigHealCount","sliderProps","step","marks","0.1","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1","defaultValue","hitPointsBeforeHeal","healthPercentage","getEntity","SPECS","specId","specClassName","formatDuration","alt","SpecIcon","url","eventHistory","byPlayer","byPlayerPet","ManaLevelChartComponent","bossHealth","prevProps","sourceclass","hostility","abilityid","initial","bossData","series","health","deaths","death","Boolean","killingAbility","ManaLevelGraph","colors","tickCount","flatten","calculate","as","interpolate","bosses","wastedHolyPower","gainedHolyPower","getHolyPower","resourceChangeType","baseAmount","resourceChange","formHA","waste","HEALING_HOLY_POWER_SPELLS","DAMAGE_HOLY_POWER_SPELLS","SHIELD_OF_THE_RIGHTEOUS","TEMPLARS_VERDICT","TEMPLARS_VERDICT_DAMAGE","DIVINE_STORM","DIVINE_STORM_DAMAGE","EXECUTION_SENTENCE_TALENT","JUSTICARS_VENGEANCE_TALENT","BUFF_HOLY_POWER_SPELLS","ALL_HOLY_POWER_SPELLS","averageTimeTillBuffConsumed","hasProc","procsWasted","procsGained","overhealingDone","damageDone","buffAppliedTimestamp","buffRemovedTimestamp","totalChances","castCounter","holyPowerDamage","holyPowerHeal","DIVINE_PURPOSE_BUFF","applyBuff","removeBuff","BoringSpellValueText","showPlayers","statsByTargetId","friendlyStats","playersById","arr","objByKey","indexByProperty","playerInfo","statsBySpellId","spellStats","spellreport","calculatePlayerBreakdown","totalEffectiveHealing","highestEffectiveHealing","highestMasteryEffectiveness","totalSpellEffectiveHealing","highestSpellEffectiveHealing","highestSpellMasteryEffectiveness","calculateSpellBreakdown","performanceBarMasteryEffectiveness","performanceBarHealingDonePercentage","actualHealingDonePercentage","performanceBarHealingReceivedPercentage","actualHealingReceivedPercentage"],"mappings":"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","file":"static/js/HolyPaladin.6aacced7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABFCAYAAAAIGLXIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABQFJREFUeNrMWmuITVEU3sydcT0GM2O8H2GQZ96U9ysNUhIlrx8kP6SkpCQRIuKHf1LeyaNIQmp+oLwVQxhGjLfxGG/jMTPW6n6nrtN9nHX23ufMqq+5c8895+y1z9prfevbp46yZzmEbEITQpTwk/CK8BHHGxEa4/sK3ZvV0Ti3LqEFBlmNAf0g1CdMIkwjdMNgswjlhKeEbYT7hDWE0YRjhFUqRMslXCJ8Jbwn3CAcwHd/CTVJ8IlQEvf/bhODiWicm0FojxBh5BEGeDivCeDYbxOO1NU49xvhjIExfArbEV4T6wiHNGc1omqJNSfsSbEm0uE6oVeYT8QxzkZnMSg/xutqQm1wpDNhgUYq5/P6IWGEZlwjdmmElQNeY9sJPQ1Nrti6Ej4YcMTBGxTTUBx5Z9ARLqTXwnCGudQpg4444Mo/XlqdJYkhPjMNJwwldAenMmnMEoYRMgkPCJUmL14Y93kE4TSY7E8LT8TBL8JRTJix9Nss7nMfMNccsF9bloUa09YUPehLKELOH0mYDboeVIovMHWxevjLheuqxVBKhrUmQqsdYrUlYSlhcAhpvrUwMaW0GZYXdircQnhrL/Z8whTLCzuVtUq34L060sZj92fLoumSixdHekMwKAjRkcau9lg8C7wu7oW0Lhy8Rktd6Dcmd6RRQ2yjinCRMAeRI+53OIT2h/wUGG9BhXx3iKMIY2qBFsCqZLGOIw00+m+TVgLxz7cj0Vog0ZQRtqqYFOvbkbwQC58j2G1RMQlWyxYRnoe0wF8SZpriVZ1UTCEP2gnmccv9DjqR51+gZuQizBrEHXtMKCU0VbEthMsQH+ob6E8egUG8NqW7ciE6T7iLLrAAzrCDVwjPCOPQR5+Cw+sJczUdyYWYEZqxQrjXUHhtcEVAoMak8qEhR4r9KjIm5MlsdJEmrMAlcogc0XUmCv3JVN+R7deRas2b9zHYTzPDne5nYnSfBp/f0fCamwXiGqgNVP/v0JpCEXqiQIxr0CGLUunmOD3Nqi20LA9xAV5s24leAfXyTCIn2wypnQGSyeOEhjYcmapi2wk2B897iuegMFZh8Q8zSV84z28K4Cl8hd7bL+6724iEickGJrHuUFhsq45cpFeiLzqp/n+h4AX0thpQGi7Gn6U3mI/ZCmJt7IK6eDTBsQvoX5z//0hFhpYquI39/oR5kEtrXNHj1rsiUkcyVHDG66ODiu3jV6brQKWOVAl/zzNZDum1jc+uMdfLfaWk8Q4UQIk+xdvYqzWfTrpIqJE6cgUkUaJRVUDEsJrlpKH1EaqJV+MYP4KFa9My/PQjktrD+/BjVezlzRVgy39s8aYgmrHTkEGbQxMrNDT+Bwj3sX5OlqqQzJe6uASGx8rMK1GDQCiH+nHksOBmZbiZ2/aBhug4UqoTJqxw5AtqCLPW6wmObUKhk9QjFtafxH1X7pcNR1APvO4rMhVfkuRaWS6u5AXLMIn8tvcZ0JeIn8XO3g8W0JQIVMhk7PaSkm95c+qfo5uBviONStL0kCTH+KkehMjg1TJNpVLmO8+EM5gFrpTIipXsDW5HSGyI62rVBG6qbgp+zzWjRwr+VCZs6tpjQqt1HSkVOhJRyV+9yBTSnXw4X4nQ1K7SnLm8blRWpPgtN0wtBPdtlCo5+XGE8/cGVFYvWeZtkmNRJXtRhgloO5OOsJ0gbEz0iF32KE2PIbl/Xqon+E+AAQB9xE8sSIXsTAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABFCAYAAAAIGLXIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABXtJREFUeNrMmmmIVWUcxt97Z+k6zdI4M5mVSjYoWSNlmG1a2WaLLVRgZFFURF8kCiILaaEiLAqqDxV9CMKESAiJFioiIlGm1SJHnLLJtpkW29NxvNPzdJ6B6+0u513OOf3hx9y595x7z/Oe9/1v582NvmKSsk7QBjpAAfwNvgU/6/NW0K73d7r+SNOS8X//NnpcaB5M0UUWdUF/gUngXHAxmK2LbQYj4EvwMNgC7gSnghfAHb6j5iPkALAO9IHdusgBMBMcBxrKju8Gc8BJYBjM0vsHh7j9PkJ4odM1RUgXODbGeR1iwkZDCMl7nPsHCLHCfslaCNfEPWCt56g2Zi2EtgPcJDGutggclbUQI2/0Khh3PJ/r6sz/g5DDwbUg53g+zztGDiOz+ckYsRKc4fk9y8BP4GnFmGLad+QgBT5fa9JaexMsyWpqFU04Y9C8S5lBqkK+A5sCCmGQnQ8esZ2ueY9jTwYXgr0JJJxMX54Atyj5DCrk7JLXC8Ht4FFwVkLZM73h/eApcHxIId0lr+cqc+1U9puUNSvGHBrK/R4tj5JTJL5C6XoaRhffG0rIFqXqDFyrlaanZbk4gxZnak2TCMaMFSmLMCU1S4OvkB0lC3yZycbmq4DzXuw94PyEF3Ytm1pvwccVckjM6i8pK9RbJ3GE9Klh0JuhkPay8tjKa3EUloK7wREZivgefAS+cREyVZH7xnreIkFjMroBPAmeq1e4VRLCKcSe03KTrf2owXzHNdc6BZxmsjd2JTf7ZL8tHvV3SNsKfvcRUgjVovGwIfCQTdFWSUhXhoGPxobdg+A938LqCxN1EbNaFzeoqPIudd8IXL7GtV0KvM+7VJ2NVebnY+psnFhWUH2uts2RYA/4EOwvlz3ZU8h28JbryZWEcDTeBp+qCuyVJ/sNbARfgdM1gi9JwL3gSk8h/J62kEImjCO/rspnz5T9H8JdT1H932+iB0aptoNoh4ETAq2TpSrkTBZC2lx/vEp61O0qxFdMQY4hVN3R5irEt+U5N2CGzEbDJS4D43s38lojIe1yJa6pCplnHLvnNYxxaaVqolSE0HWzNzsrgSjPvjIfM+yXhpCrwUUJpSvNqk6vSVoIH17enHCWTO+1CpyXlBBOqRUpNSTYYbxO6ya4ED5NujRhAUxIXwcfgwvAehNt/WhxybWq+XlmxJ0JC9mtNcj86wOwWBF/k/K/1/5zYZbbnDidnjXJdx0ZpG8z0c6h9WbfDQVfg8uUqPYqGP9qe0fYiZ+dwtrI63e4t2ugTAh7wKsVZya6n2O2QvhoodWkYwy2V5moXTpu9t2QsLB8idgKSbPryIdKM1QXsYib5FpYmSrVo41xJLlXZcxEHX2XqnFynN+1db+fqNMR14aUbqzyvDv1ZsK4rRDW7FstjmePihsvu5L2crZTi17kB4vjZ6i9My9hIQ0ukd1mO1Onghk767eaaIPaniSUuPR4XcS/bKI26IEm2p16TqDrH9B0X5xGs5r50uN6PaKEkynGTM/vHVac+Qz0uQixccFs5l0PtpW8NwjeVYmc8xDC/nS/dmJvtJ0mrBF6LGIIt330V/jsAQU6m3jE5/3bS94bKc2G85brieXnopjHjylzrWSDxm6/L+8c93AtAGtMtBmUHftRl8XeYipvFa8lvK9GdrvB2D/yputf7uuB/pQbtRnFBTXu1hrVHXGtKZQr3avFa9tEqPa4YbOx28FdLGkXNfvGBBZV71scz5gxp0b+NGRZ1E3XgBZ9hQxaCuE66agxVWzSnR6J36Wp6R2lmcnGfVC5s8ax7arJ41prLefkIoT++z4T7RGJ42WGq3xWMHU2ylRIQKeFFEJ70UQ7QMfqHLetTo1h8/tdte7gPwIMAJuL8bAEEcRPAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAABECAYAAADTJCixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABt9JREFUeNrkXAlsFFUYfrullJZeBKSwYkVEiRfxQEGpeNtqPCKaKCpiNCooimfEIxqvEAUPTCSCHCYaNBok4kViohwqGiOCIkI1VAOmSqWgbKDnrv+X/SrjZrf73uy8mdn4J1+67c7Mm/nmf+///vf+10jHR6rQbaDgIcF1gjsES01OLm5IZv2uT4ESUiToFpwkmC04i39/WtAuWOZFI4VGTongbMGxgm2CuwTjHd8PE7wuSAiW/9/IGSJ4WRDr5d77CWYJooKNJDHhprFogZEDz6jVeKmjBK8IrhBEvPQcNH45xirBCsGWAMkYygH3UMEIwYUG51YK1nNs8oSc4WT8XP5+vOBjwWq6p207WjBJ0F9QITiY5BxCokysRbDBqzGnTHCDgxjYZYLR9B6b5JwmuF5wgmCMR9fcJOj0ihy8pckZBrdmwW+WSDlGcJXgSsERHl63lWH9by/IwaB1EbtVpoZOZqTYSB2Rj6GNxwRHssscbiEwlAo25zPeOMnBYDc9yzENFFnt1A73C/azG3YbkFVEBTud7dm0Uka2lny6VpSa4clebhij/kFsrF5wFLvBKsFLBsQ8nKMdr+19wQIOF64sIrnVPPk5TfP4JN9GBd9Ok+AMwfYcxMBbnuB5ftvPlAA/meZWUQ662mQKBpMYRY+6RzC2l3NwYw8ERAxsJIeDajfdCid+5rLhcsGMDFHO+f0UQU3AyhqD/91uyHlPcKdgseB3l42PZzKYbuelJYZBGdT++W5zq28EN3JccKMNoKQXCY5Lc+dplABhsEEUma4TzyWCOS7D3ynMhkfTY+bzZ1gMeurWfHIr6JfnmeLfJ6gyvIF6ji8Qd4eFNKvPa8oiLnhGMFHwgqEi7sPcKIzEKNPpi2zzIuhWnwjWCd6mGoYgOFEw1Uch57W1eEGOs5t94fgdhL1LtXuNKrzJsni+3SqXQm6kZvigAD1nqE1yeuxPhv9kgZEzgMLUKjlFPDdSYORg6uV22+REqDoLzUpNhKBbcrqZj60rQIIitsnBWPOhSq02thcYOUhxTrVJTo/Be74LwQNjxf8NQZvGsVjTusQPcvYIXtT0HkiADgvEQIfdTKzWPOdiwTm2yYGSfktwk+DTDCRtZQpytUpVQSzzOPzHmSzv4Ocdmudh1SPnAqEXa+XwhtfYxbAyWcJQ30G5vsVB2k6PveZ7wRp+PlMwwTCoWCenx5qIbFbM6QwvtVFfdWDKFpNqJmtfUdvdyjSEDvP4mrUcYJUym4pN6ORZfpITM5HumjaI14XtNhzEl4aJHESHSgveGKMHxQzOayR8G3N0IkSpheti6uRSpT/Bhjny9ToH+klOpSVPjRkev1aw0A8R6Mf0iNe2Xzfl8TtahcH2hvFttqngJ8eg2BeEkZyOEHgPCh6+DBs5QxxiLShDhdq8MA6SKCY4PWBykOMtDyM5SAjLAiQGNTrXhjW8lgTsNRjvWk2f1y9ygtY4o+g9M6mk/0Xnykh50DedCJgczC+hNvApwY9pqA86fejr4hyU9e5SqV0yNrt4nXgPIhlmNf8SNBU3JDvDJOkz2Uxm8nM9CuPZSvtQ1YYaAEzSo4Cr2M9udYFKTZ+aWNKR/+DmZ6n8loB+EDyew5tQU1Tl5MQ2OSjuRq1yreF5r6r/7tZ5UKWKF7a6vI8qqvNcSzdYlRjsFzlTlHkh0zskoznt71C3U5W7ylfMLT9Cgt5UqRWTbEq+2g9yJqoDey91DRtQnlPZq1pXCe5V5guJeGDszMEuPxSM38aXkCk5HmGbnHEqtWPXtDvhrX6b45ivVGpjyW7Da2OL0aOMgBi/Wjh90cxkFCumvziVvK1QjqLokS7Ow6LcPo3jUF02XPCsodYZwHDdySg4n5/jJArjzU7b5JS7yKV6dIaOYUGu0fD6+xwP3kYBmL73YZcfCrnMBfHYuLHZ4HjTvRRdml5pnRw3k1oQYl8bHB+zfU+2yDHNpVoZiUzO6zC8n01hIcdke0Cc4dn0XyyYFCVAGiw0eoCVkaitAbnakJglll9Aq9KcOxZSsIcMdUdJW4ts4zRveAbDqRvbwGRRN4xHcpBSI0Agwea8iESxLhuegzKTMRpvHRJ+cR7tbCOxdRqRa4/KsiwkhFTzfqIM7dtt6Zxies3AHMdBnc72oL3PVWqj6ySNMcdpeO5SKmVopoSQkp7LeUYO3BZ9FYWIkzW8Zo3y5j8coJJ+bQ5yEhy8+/F54WV/8D5Ayl6b0QrXGMvcZC6z8GgvKhXblRZ5pKUiDNG/5lDTdUw4KxgEElTJXb014IXnoM9iB9wEDbIRMeYow90rGe4ZbfanN5SToBqVeaczujrKX24hiSt0G/pHgAEAXldoyDcBQC4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","import SPELLS from 'common/SPELLS';\r\n\r\nimport EventsNormalizer from 'parser/core/EventsNormalizer';\r\nimport { EventType } from 'parser/core/Events';\r\n\r\n// the max delay between the heal and cast events never looks to be more than this.\r\nconst MAX_DELAY = 100; // XdVPajNB8vpJkyCF/16-Mythic+Antoran+High+Command+-+Kill+(7:17)/177/events has one of 83ms\r\n\r\nclass LightOfDawn extends EventsNormalizer {\r\n  /**\r\n   * when you cast Light of Dawn and you yourself are one of the targets the heal event will be in the events log before the cast event. This can make parsing certain things rather hard, so we need to swap them around.\r\n   * @param {Array} events\r\n   * @returns {Array}\r\n   */\r\n  normalize(events) {\r\n    const fixedEvents = [];\r\n    events.forEach((event, eventIndex) => {\r\n      fixedEvents.push(event);\r\n\r\n      if (event.type === EventType.Cast && event.ability.guid === SPELLS.LIGHT_OF_DAWN_CAST.id) {\r\n        const castTimestamp = event.timestamp;\r\n\r\n        // Loop through the event history in reverse to detect if there was a `heal` event on the same player that was the result of this cast and thus misordered\r\n        for (\r\n          let previousEventIndex = eventIndex;\r\n          previousEventIndex >= 0;\r\n          previousEventIndex -= 1\r\n        ) {\r\n          const previousEvent = fixedEvents[previousEventIndex];\r\n          if (castTimestamp - previousEvent.timestamp > MAX_DELAY) {\r\n            break;\r\n          }\r\n          if (\r\n            previousEvent.type === EventType.Heal &&\r\n            previousEvent.ability.guid === SPELLS.LIGHT_OF_DAWN_HEAL.id &&\r\n            previousEvent.sourceID === event.sourceID\r\n          ) {\r\n            fixedEvents.splice(previousEventIndex, 1);\r\n            fixedEvents.push(previousEvent);\r\n            previousEvent.__modified = true;\r\n            break; // I haven't seen a log with multiple `heal` events before the `cast` yet\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    return fixedEvents;\r\n  }\r\n}\r\n\r\nexport default LightOfDawn;\r\n","import SPELLS from 'common/SPELLS';\r\n\r\nimport EventsNormalizer from 'parser/core/EventsNormalizer';\r\nimport { EventType } from 'parser/core/Events';\r\n\r\n// the max delay between the cast and buff events never looks to be more than this, nor should it be possible to cast twice within this time. Actually it seems to always be the same frame, but accounting for a delay nonetheless.\r\nconst MAX_DELAY = 100;\r\n\r\n/**\r\n * It is considered best practice to cast Flash of Light and immediately following it up with a Beacon of Virtue. This usually causes the precast FoL heal to still be replicated by BoV. But the combat log records it like this:\r\n * 0000 FoL begincast\r\n * 1500 FoL cast\r\n * 1500 BoV cast\r\n * 1500 FoL heal\r\n * 1500 BoV applybuff x4\r\n * I figured the heal still replicating may be caused by either:\r\n * 1. If the game instead of calculating beacon healing right as the heal lands, it might delay it for the next tick. This would make sense from an optimization PoV where Blizz assume the original heal could take a while to process, and if the next tick has the buffs applied then it would indeed replicate that healing.\r\n * 2. The combatlog is wrongly ordered and the `applybuff` actually happens at the exact same time as the `cast` on the server. I figured this would be less likely, as it would be weird for this to be the behavior for `applybuff` while `heal` obviously doesn't act this way (if it did we could never precast a FoL into a BoV).\r\n *\r\n * However after analyzing Disc Priest's Atonement interactions with PW:R and Evangelism (PW:R is cast, then Evangelism, then Atonement lands in the combatlog but in-game its duration was properly extended), it seems most likely to be that 2 is the case.\r\n *\r\n * Because of the wrong ordering of the combatlog where the `heal` is prior to the `applybuff` events, our beacon healing tracking modules are off. Because it seems most likely that the game treats `applybuff`s as if they happened on the `cast` event, I think it best we try to recreate that. That's what this normalizer does.\r\n *\r\n * Example log that is fixed by this:\r\n * https://wowanalyzer.com/report/yJXmz31TMnCZN2b9/4-Mythic+Garothi+Worldbreaker+-+Kill+(3:33)/12-Ubpal\r\n */\r\nclass BeaconOfVirtue extends EventsNormalizer {\r\n  findPreviousCast(previousEvents, event) {\r\n    const timestamp = event.timestamp;\r\n    // Loop through the event history in reverse to detect if there was a `cast` event by the same source\r\n    let lastBeaconOfVirtueCastIndex = null;\r\n    for (\r\n      let previousEventIndex = previousEvents.length - 1;\r\n      previousEventIndex >= 0;\r\n      previousEventIndex -= 1\r\n    ) {\r\n      const previousEvent = previousEvents[previousEventIndex];\r\n      if (timestamp - previousEvent.timestamp > MAX_DELAY) {\r\n        break;\r\n      }\r\n      // The reason we check for both cast and applybuff is that we don't want to re-order applybuffs, so if the order is \"cast, applybuff1, applybuff2\", we want it to stay the way. If we moved everything to just the cast, the applybuff order would be reversed resulting it \"cast, applybuff2, applybuff1\".\r\n      if (previousEvent.type !== EventType.Cast && previousEvent.type !== EventType.ApplyBuff) {\r\n        continue;\r\n      }\r\n      if (previousEvent.ability.guid !== SPELLS.BEACON_OF_VIRTUE_TALENT.id) {\r\n        continue;\r\n      }\r\n      if (previousEvent.sourceID !== event.sourceID) {\r\n        // Play nice when there are two Holy Paladins casting BoV at the same time\r\n        continue;\r\n      }\r\n      lastBeaconOfVirtueCastIndex = previousEventIndex;\r\n      break;\r\n    }\r\n    return lastBeaconOfVirtueCastIndex;\r\n  }\r\n  normalize(events) {\r\n    const fixedEvents = [];\r\n    events.forEach((event, eventIndex) => {\r\n      if (\r\n        event.type === EventType.ApplyBuff &&\r\n        event.ability.guid === SPELLS.BEACON_OF_VIRTUE_TALENT.id\r\n      ) {\r\n        const lastBeaconOfVirtueCastIndex = this.findPreviousCast(fixedEvents, event);\r\n\r\n        if (lastBeaconOfVirtueCastIndex !== null) {\r\n          event.__modified = true;\r\n          fixedEvents.splice(lastBeaconOfVirtueCastIndex + 1, 0, event);\r\n          return;\r\n        }\r\n      }\r\n\r\n      fixedEvents.push(event);\r\n    });\r\n\r\n    return fixedEvents;\r\n  }\r\n}\r\n\r\nexport default BeaconOfVirtue;\r\n","import SPELLS from 'common/SPELLS';\r\n\r\nexport const ABILITIES_AFFECTED_BY_HEALING_INCREASES = [\r\n  SPELLS.HOLY_SHOCK_HEAL.id,\r\n  SPELLS.LIGHT_OF_DAWN_HEAL.id,\r\n  SPELLS.FLASH_OF_LIGHT.id,\r\n  SPELLS.JUDGMENT_OF_LIGHT_HEAL.id,\r\n  SPELLS.LIGHT_OF_THE_MARTYR.id,\r\n  SPELLS.LIGHTS_HAMMER_HEAL.id,\r\n  SPELLS.HOLY_PRISM_HEAL.id,\r\n  SPELLS.HOLY_PRISM_HEAL_DIRECT.id,\r\n  SPELLS.AURA_OF_MERCY_HEAL.id,\r\n  // While the following spells don't double dip in healing increases, they gain the same percentual bonus from the transfer\r\n  SPELLS.BEACON_OF_LIGHT_HEAL.id,\r\n  SPELLS.LEECH.id,\r\n\r\n  // There trinkets are confirmed to also be increased:\r\n  // Proof: https://www.warcraftlogs.com/reports/4AVZqJTgyhG2F368/#fight=46&source=4&view=events&pins=2%24Off%24%23244F4B%24auras-gained%24-1%240.0.0.Any%240.0.0.Any%24true%240.0.0.Any%24true%24216331%24true%24true see the events at 00:03:39.013 and 00:03:40.369.\r\n  SPELLS.AVENGING_CRUSADER_HEAL_NORMAL.id,\r\n  SPELLS.AVENGING_CRUSADER_HEAL_CRIT.id,\r\n  271682, // Harmonious Chord - https://www.warcraftlogs.com/reports/cXnPABVbLjk68qyM#fight=6&type=healing&source=10&ability=271682&view=events\r\n];\r\n\r\n// TODO: Feed this with the SpellInfo config\r\nexport const ABILITIES_AFFECTED_BY_MASTERY = [\r\n  SPELLS.HOLY_SHOCK_HEAL.id,\r\n  SPELLS.LIGHT_OF_DAWN_HEAL.id,\r\n  SPELLS.HOLY_LIGHT.id,\r\n  SPELLS.FLASH_OF_LIGHT.id,\r\n  SPELLS.LIGHT_OF_THE_MARTYR.id,\r\n  SPELLS.HOLY_PRISM_HEAL.id,\r\n  SPELLS.HOLY_PRISM_HEAL_DIRECT.id,\r\n  SPELLS.LIGHTS_HAMMER_HEAL.id,\r\n  SPELLS.JUDGMENT_OF_LIGHT_HEAL.id,\r\n  SPELLS.BESTOW_FAITH_TALENT.id,\r\n  SPELLS.GLIMMER_OF_LIGHT_TALENT.id,\r\n];\r\n\r\nexport const BEACON_TRANSFERING_ABILITIES = {\r\n  [SPELLS.HOLY_SHOCK_HEAL.id]: 1,\r\n  [SPELLS.LIGHT_OF_DAWN_HEAL.id]: 0.5,\r\n  [SPELLS.HOLY_LIGHT.id]: 1,\r\n  [SPELLS.FLASH_OF_LIGHT.id]: 1,\r\n  [SPELLS.HOLY_PRISM_HEAL.id]: 0.5,\r\n  [SPELLS.HOLY_PRISM_HEAL_DIRECT.id]: 1,\r\n  [SPELLS.LIGHTS_HAMMER_HEAL.id]: 0.5,\r\n  [SPELLS.BESTOW_FAITH_TALENT.id]: 1,\r\n  [SPELLS.AVENGING_CRUSADER_HEAL_NORMAL.id]: 1,\r\n  [SPELLS.AVENGING_CRUSADER_HEAL_CRIT.id]: 1,\r\n  [SPELLS.GLIMMER_OF_LIGHT_TALENT.id]: 0.5,\r\n};\r\n\r\nexport const BEACON_TYPES = {\r\n  BEACON_OF_FATH: SPELLS.BEACON_OF_FAITH_TALENT.id,\r\n  DIVINE_PURPOSE_TALENT: SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF.id,\r\n  BEACON_OF_VIRTUE: SPELLS.BEACON_OF_VIRTUE_TALENT.id,\r\n};\r\nexport const NUM_BEACONS = {\r\n  [SPELLS.BEACON_OF_FAITH_TALENT.id]: 2,\r\n  [SPELLS.DIVINE_PURPOSE_TALENT.id]: 1,\r\n  [SPELLS.BEACON_OF_VIRTUE_TALENT.id]: 4,\r\n};\r\n","import Analyzer from 'parser/core/Analyzer';\r\n\r\nimport { BEACON_TRANSFERING_ABILITIES, BEACON_TYPES } from '../../constants';\r\n\r\nclass BeaconTransferFactor extends Analyzer {\r\n  get beaconType() {\r\n    return this.selectedCombatant.lv50Talent;\r\n  }\r\n\r\n  getFactor(healEvent, beaconHealEvent = null) {\r\n    const spellId = healEvent.ability.guid;\r\n    // base beacon transfer factor\r\n    let beaconFactor = 0.4;\r\n    // Spell specific transfer factor\r\n    const spellFactor = BEACON_TRANSFERING_ABILITIES[spellId];\r\n    if (!spellFactor) {\r\n      return 0;\r\n    }\r\n    beaconFactor *= spellFactor;\r\n    // Passive adjustments\r\n    if (this.beaconType === BEACON_TYPES.BEACON_OF_FATH) {\r\n      beaconFactor *= 0.7;\r\n    }\r\n\r\n    return beaconFactor;\r\n  }\r\n  getExpectedTransfer(healEvent) {\r\n    // Beacons work off raw healing\r\n    const rawHealing = healEvent.amount + (healEvent.absorbed || 0) + (healEvent.overheal || 0);\r\n    return Math.round(rawHealing * this.getFactor(healEvent));\r\n  }\r\n}\r\n\r\nexport default BeaconTransferFactor;\r\n","import Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport EventEmitter from 'parser/core/modules/EventEmitter';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\nimport Events from 'parser/core/Events';\r\n\r\nimport { BEACON_TYPES, NUM_BEACONS } from '../../constants';\r\n\r\nconst BEACONS = Object.values(BEACON_TYPES);\r\n\r\nconst debug = false;\r\n\r\nclass BeaconTargets extends Analyzer {\r\n  static dependencies = {\r\n    eventEmitter: EventEmitter,\r\n    combatants: Combatants,\r\n  };\r\n\r\n  currentBeaconTargets = [];\r\n\r\n  hasBeacon(playerId) {\r\n    return this.currentBeaconTargets.includes(playerId);\r\n  }\r\n  get numBeaconsActive() {\r\n    return this.currentBeaconTargets.length;\r\n  }\r\n  get numMaxBeacons() {\r\n    return NUM_BEACONS[this.selectedCombatant.lv50Talent];\r\n  }\r\n\r\n  constructor(options){\r\n    super(options);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER), this.onApplyBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER), this.onRemoveBuff);\r\n  }\r\n\r\n  onApplyBuff(event) {\r\n    const spellId = event.ability.guid;\r\n    if (!BEACONS.includes(spellId)) {\r\n      return;\r\n    }\r\n    const targetId = event.targetID;\r\n    if (!this.currentBeaconTargets.includes(targetId)) {\r\n      this.currentBeaconTargets.push(targetId);\r\n      debug &&\r\n        console.log(\r\n          `%c${this.combatants.players[targetId].name} gained a beacon`,\r\n          'color:green',\r\n          this.currentBeaconTargets,\r\n        );\r\n      this.eventEmitter.fabricateEvent(\r\n        {\r\n          type: 'beacon_applied',\r\n          timestamp: event.timestamp,\r\n          sourceID: event.sourceID,\r\n          targetID: event.targetID,\r\n        },\r\n        event,\r\n      );\r\n    } else {\r\n      debug &&\r\n        console.error(\r\n          `Trying to assign a beacon to ${\r\n            this.combatants.players[event.sourceID].name\r\n          }, but he already has one.`,\r\n          this.currentBeaconTargets,\r\n        );\r\n    }\r\n  }\r\n  onRemoveBuff(event) {\r\n    const spellId = event.ability.guid;\r\n    if (!BEACONS.includes(spellId)) {\r\n      return;\r\n    }\r\n    const targetId = event.targetID;\r\n    this.currentBeaconTargets = this.currentBeaconTargets.filter(id => id !== targetId);\r\n    debug &&\r\n      console.log(\r\n        `%c${this.combatants.players[targetId].name} lost a beacon`,\r\n        'color:red',\r\n        this.currentBeaconTargets,\r\n      );\r\n    this.eventEmitter.fabricateEvent(\r\n      {\r\n        type: 'beacon_removed',\r\n        timestamp: event.timestamp,\r\n        sourceID: event.sourceID,\r\n        targetID: event.targetID,\r\n      },\r\n      event,\r\n    );\r\n  }\r\n}\r\n\r\nexport default BeaconTargets;\r\n","import SPELLS from 'common/SPELLS';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport EventEmitter from 'parser/core/modules/EventEmitter';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\nimport EventFilter from 'parser/core/EventFilter';\r\nimport Events, { EventType } from 'parser/core/Events';\r\n\r\nimport BeaconTargets from './BeaconTargets';\r\nimport BeaconTransferFactor from './BeaconTransferFactor';\r\nimport { BEACON_TRANSFERING_ABILITIES } from '../../constants';\r\nimport BeaconOfVirtue from '../../normalizers/BeaconOfVirtue';\r\n\r\nconst debug = false;\r\n\r\n/**\r\n * @property {EventEmitter} eventEmitter\r\n * @property {Combatants} combatants\r\n * @property {BeaconTargets} beaconTargets\r\n * @property {BeaconTransferFactor} beaconTransferFactor\r\n * @property {BeaconOfVirtue} beaconOfVirtueNormalizer\r\n */\r\nclass BeaconHealSource extends Analyzer {\r\n  static dependencies = {\r\n    eventEmitter: EventEmitter,\r\n    combatants: Combatants,\r\n    beaconTargets: BeaconTargets,\r\n    beaconTransferFactor: BeaconTransferFactor,\r\n    // This relies on the BeaconOfVirtueNormalizer so precasting FoL into BoV is accounted for properly.\r\n    beaconOfVirtueNormalizer: BeaconOfVirtue,\r\n  };\r\n\r\n  get beacontransfer() {\r\n    return new EventFilter(EventType.BeaconTransfer);\r\n  }\r\n  get beacontransferfailed() {\r\n    return new EventFilter(EventType.BeaconTransferFailed);\r\n  }\r\n\r\n  constructor(options) {\r\n    super(options);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this._onHeal);\r\n  }\r\n\r\n  healBacklog = [];\r\n\r\n  _onHeal(event) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === SPELLS.BEACON_OF_LIGHT_HEAL.id) {\r\n      this.processBeaconHealing(event);\r\n      return;\r\n    }\r\n    // Not all spells transfer\r\n    const spellBeaconTransferFactor = BEACON_TRANSFERING_ABILITIES[spellId];\r\n    if (!spellBeaconTransferFactor) {\r\n      return;\r\n    }\r\n\r\n    const beaconTargets = this.beaconTargets;\r\n\r\n    let remainingBeaconTransfers = beaconTargets.numBeaconsActive;\r\n    // TODO: If numBeaconsActive < max add to lostBeaconHealing (better to track separately for showing both stats)\r\n    if (beaconTargets.hasBeacon(event.targetID)) {\r\n      remainingBeaconTransfers -= 1;\r\n      debug &&\r\n        this.debug(\r\n          `${\r\n            this.combatants.players[event.targetID].name\r\n          } has beacon, remaining beacon transfers reduced by 1 and is now ${remainingBeaconTransfers}`,\r\n        );\r\n    }\r\n\r\n    if (remainingBeaconTransfers > 0) {\r\n      // TODO: Ask BeaconTargets for the target ids and match by that too, that should be more accurate (less likely to match the wrong heal) and allow us to say *who* was out of line of sight\r\n      this.healBacklog.push({\r\n        ...event,\r\n        remainingBeaconTransfers,\r\n      });\r\n    }\r\n  }\r\n\r\n  processBeaconHealing(beaconTransferEvent) {\r\n    if (debug) {\r\n      this.sanityChecker(beaconTransferEvent);\r\n    }\r\n    // This should make it near impossible to match the wrong spells as we usually don't cast multiple heals within 500ms while the beacon transfer usually happens within 100ms\r\n    // Note: this is REQUIRED to account for line of sighting beacons. LoSed beacons don't transfer, without this filter heals would stay stuck in the queue indefinitely and appoint a lot of beacon healing to the wrong spells. Example log: https://www.warcraftlogs.com/reports/Mc1zG8rytgBHYj2X/#fight=5&source=6\r\n    // This may lead to an issue where sometimes the beacon replication of LoD self-heals can be delayed by a long time and don't properly assign source, but this should be much rarer. (see commit db5dd9a7b8eb3b935abd4d617b400c27abdd7b61) Account for this once we find a source to verify this.\r\n    let removals = 0;\r\n    this.healBacklog.forEach((healEvent, index) => {\r\n      const age = this.owner.currentTimestamp - healEvent.timestamp;\r\n      if (age > 500) {\r\n        debug &&\r\n          this.warn(\r\n            'No beacon transfer found for heal:',\r\n            healEvent,\r\n            'This is usually caused by line of sighting the beacon target.',\r\n          );\r\n\r\n        this.eventEmitter.fabricateEvent({\r\n          ...healEvent,\r\n          // Set the timestamp so we don't jump around in time (since healEvent's timestamp will be atleast 500ms in the past)\r\n          timestamp: beaconTransferEvent.timestamp,\r\n          type: this.beacontransferfailed.eventType,\r\n        });\r\n\r\n        // Remove the heal from the backlog as it is not going to be relevant this late\r\n        this.healBacklog.splice(index - removals, 1);\r\n        removals += 1; // adjust for the index shifting after removals (can't use filter since we need to report this to the console)\r\n      }\r\n    });\r\n\r\n    let index;\r\n    index = this._matchByHealSize(beaconTransferEvent);\r\n    if (index === -1) {\r\n      debug &&\r\n        this.warn(\r\n          'Failed to match a heal by size (this might be caused by \"increased healing received\" buffs on a target) for',\r\n          beaconTransferEvent,\r\n          '. Falling back to order-based heal selection.',\r\n        );\r\n      if (debug) {\r\n        this._dumpBacklog(beaconTransferEvent);\r\n      }\r\n      index = this._matchByOrder(beaconTransferEvent);\r\n    }\r\n    const matchedHeal = this.healBacklog[index];\r\n    if (!matchedHeal) {\r\n      this.error('No heal found for beacon transfer:', beaconTransferEvent);\r\n      return;\r\n    }\r\n\r\n    // Fabricate a new event to make it easy to listen to just beacon heal events while being away of the original heals. While we could also modify the original heal event and add a reference to the original heal, this would be less clean as mutating objects makes things harder and more confusing to use, and may lead to conflicts.\r\n    this.eventEmitter.fabricateEvent(\r\n      {\r\n        ...beaconTransferEvent,\r\n        type: EventType.BeaconTransfer,\r\n        originalHeal: matchedHeal,\r\n      },\r\n      beaconTransferEvent,\r\n    );\r\n\r\n    matchedHeal.remainingBeaconTransfers -= 1;\r\n    if (matchedHeal.remainingBeaconTransfers < 1) {\r\n      this.healBacklog.splice(index, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Verify that the beacon transfer matches what we would expect. This isn't 100% reliable due to weird interactions with stuff like Blood Death Knights (Vampiric Blood and probably other things), and other healing received increasers.\r\n   */\r\n  sanityChecker(beaconTransferEvent) {\r\n    const index = this._matchByHealSize(beaconTransferEvent);\r\n\r\n    if (index === -1) {\r\n      // Here's a fun fact for you. Fury Warriors with the legendary \"Kazzalax, Fujieda's Fury\" (http://www.wowhead.com/item=137053/kazzalax-fujiedas-fury)\r\n      // get a 8% healing received increase for almost the entire fight (tooltip states it's 1%, this is a tooltip bug). What's messed up\r\n      // is that this healing increase doesn't beacon transfer. So we won't be able to recognize the heal in here since it's off by 8%, so\r\n      // this will be triggered. While I could implement code to track it, I chose not to because things would get way more complicated and\r\n      // fragile and the accuracy loss for not including this kind of healing is minimal. I expect other healing received increases likely\r\n      // also don't beacon transfer, but right now this isn't common. Fury warrior log:\r\n      // https://www.warcraftlogs.com/reports/TLQ14HfhjRvNrV2y/#view=events&type=healing&source=10&start=7614145&end=7615174&fight=39\r\n      this.error('Failed to match', beaconTransferEvent, 'to a heal at all. Backlog:');\r\n      this._dumpBacklog(beaconTransferEvent);\r\n    } else if (index !== 0) {\r\n      const matchedHeal = this.healBacklog[index];\r\n      this.warn(\r\n        'Matched [',\r\n        'Beacon transfer',\r\n        beaconTransferEvent,\r\n        '] to [',\r\n        matchedHeal.ability.name,\r\n        matchedHeal,\r\n        `] but it wasn't the first heal in the Backlog (it was #${index}). Something is likely wrong. Backlog:`,\r\n      );\r\n      this._dumpBacklog(beaconTransferEvent);\r\n    }\r\n  }\r\n  _dumpBacklog(beaconTransferEvent) {\r\n    const beaconTransferRaw =\r\n      beaconTransferEvent.amount +\r\n      (beaconTransferEvent.absorbed || 0) +\r\n      (beaconTransferEvent.overheal || 0);\r\n    this.healBacklog.forEach((healEvent, i) => {\r\n      const expectedBeaconTransfer = this.beaconTransferFactor.getExpectedTransfer(\r\n        healEvent,\r\n        beaconTransferEvent,\r\n      );\r\n\r\n      this.debug(i, {\r\n        ability: healEvent.ability.name,\r\n        healEvent,\r\n        raw: healEvent.amount + (healEvent.absorbed || 0) + (healEvent.overheal || 0),\r\n        expectedBeaconTransfer,\r\n        actual: beaconTransferRaw,\r\n        difference: Math.abs(expectedBeaconTransfer - beaconTransferRaw),\r\n        beaconTransferFactor: this.beaconTransferFactor.getFactor(healEvent),\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * @returns {number} Gets the next heal in the backlog without any extra checks. This usually works since beacon healing is ordered in the combat log right after the heal that triggered it, and, while there's a delay before the beacon transfer happens, it's extremely rare for there to be multiple heals happening within short time spans - short enough to be before the beacon transfer.\r\n   * It does sometimes happen though, such as with Light of Dawn heals as well as Azerite Powers that apply hots and beacon transfer.\r\n   * @private\r\n   */\r\n  _matchByOrder(beaconTransferEvent) {\r\n    return 0;\r\n  }\r\n  /**\r\n   * @returns {number} Gets the next heal in the backlog that matches the expected source heal amount through simply reversing the transfer formula.\r\n   */\r\n  _matchByHealSize(beaconTransferEvent) {\r\n    const rawBeaconTransfer =\r\n      beaconTransferEvent.amount +\r\n      (beaconTransferEvent.absorbed || 0) +\r\n      (beaconTransferEvent.overheal || 0);\r\n\r\n    return this.healBacklog.findIndex(healEvent => {\r\n      const expectedBeaconTransfer = this.beaconTransferFactor.getExpectedTransfer(\r\n        healEvent,\r\n        beaconTransferEvent,\r\n      );\r\n\r\n      return Math.abs(expectedBeaconTransfer - rawBeaconTransfer) <= 2; // allow for rounding errors on Blizzard's end\r\n    });\r\n  }\r\n}\r\n\r\nexport default BeaconHealSource;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Toggle from 'react-toggle';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport Icon from 'common/Icon';\r\nimport SpellLink from 'common/SpellLink';\r\nimport { formatNumber, formatPercentage } from 'common/format';\r\nimport { TooltipElement } from 'common/Tooltip';\r\nimport HealingValue from 'parser/shared/modules/HealingValue';\r\n\r\nclass BeaconHealingBreakdown extends React.Component {\r\n  static propTypes = {\r\n    totalHealingDone: PropTypes.instanceOf(HealingValue).isRequired,\r\n    totalBeaconHealing: PropTypes.instanceOf(HealingValue).isRequired,\r\n    beaconHealingBySource: PropTypes.object.isRequired,\r\n    fightDuration: PropTypes.number.isRequired,\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      absolute: false,\r\n    };\r\n  }\r\n\r\n  renderTableBody() {\r\n    const {\r\n      totalHealingDone,\r\n      totalBeaconHealing,\r\n      beaconHealingBySource,\r\n      fightDuration,\r\n    } = this.props;\r\n\r\n    const currentTotal = this.state.absolute\r\n      ? totalHealingDone.effective\r\n      : totalBeaconHealing.effective;\r\n    const highestHealing = Object.keys(beaconHealingBySource)\r\n      .map(key => beaconHealingBySource[key])\r\n      .reduce((highest, source) => Math.max(highest, source.healing.effective), 1);\r\n\r\n    return (\r\n      <tbody>\r\n        {beaconHealingBySource &&\r\n          Object.keys(beaconHealingBySource)\r\n            .sort(\r\n              (a, b) =>\r\n                beaconHealingBySource[b].healing.effective -\r\n                beaconHealingBySource[a].healing.effective,\r\n            )\r\n            .map(spellId => {\r\n              const { ability, healing } = beaconHealingBySource[spellId];\r\n\r\n              return (\r\n                <tr key={ability.guid}>\r\n                  <td style={{ width: '30%' }}>\r\n                    <SpellLink id={ability.guid} icon={false}>\r\n                      <Icon icon={ability.abilityIcon} /> {ability.name}\r\n                    </SpellLink>\r\n                  </td>\r\n                  <td\r\n                    style={{\r\n                      paddingRight: 5,\r\n                      textAlign: 'right',\r\n                      whiteSpace: 'nowrap',\r\n                    }}\r\n                  >\r\n                    {formatPercentage(healing.effective / currentTotal)} %\r\n                  </td>\r\n                  <td style={{ width: '70%' }}>\r\n                    {/* TODO: Color the bar based on the damage type, physical = yellow, chaos = gradient, etc. idk */}\r\n                    <div\r\n                      className=\"performance-bar\"\r\n                      style={{\r\n                        width: `${(healing.effective / highestHealing) * 100}%`,\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td style={{ textAlign: 'right', whiteSpace: 'nowrap' }}>\r\n                    <TooltipElement\r\n                      content={<Trans id=\"paladin.holy.modules.beacons.beaconHealingBreakdown.total\">Total: {formatNumber(healing.effective)}</Trans>}\r\n                    >\r\n                      <Trans id=\"paladin.holy.modules.beacons.beaconHealingBreakdown.hps\">{formatNumber((healing.effective / fightDuration) * 1000)} HPS</Trans>\r\n                    </TooltipElement>\r\n                  </td>\r\n                  <td style={{ textAlign: 'right', whiteSpace: 'nowrap' }}>\r\n                    {formatPercentage(healing.overheal / healing.raw)} %\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n      </tbody>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <table className=\"data-table\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{ fontWeight: 700, textTransform: 'uppercase' }}>\r\n              <Trans id=\"paladin.holy.modules.beacons.beaconHealingBreakdown.name\">Name</Trans>\r\n            </th>\r\n            <th colSpan=\"3\">\r\n              <span style={{ fontWeight: 700, textTransform: 'uppercase' }}>\r\n                <Trans id=\"paladin.holy.modules.beacons.beaconHealingBreakdown.beaconHealingCaused\">Beacon healing caused</Trans>\r\n              </span>\r\n              <div className=\"pull-right toggle-control\">\r\n                <Toggle\r\n                  defaultChecked={false}\r\n                  icons={false}\r\n                  onChange={event => this.setState({ absolute: event.target.checked })}\r\n                  id=\"absolute-toggle\"\r\n                />\r\n                <label htmlFor=\"absolute-toggle\" style={{ marginLeft: '0.5em' }}>\r\n                  <Trans id=\"paladin.holy.modules.beacons.beaconHealingBreakdown.relativeToTotalHealing\">relative to total healing</Trans>\r\n                </label>\r\n              </div>\r\n            </th>\r\n            <th style={{ fontWeight: 700, textTransform: 'uppercase' }}>\r\n              <Trans id=\"paladin.holy.modules.beacons.beaconHealingBreakdown.overheal\">Overheal</Trans>\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        {this.renderTableBody()}\r\n      </table>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BeaconHealingBreakdown;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport Panel from 'interface/statistics/Panel';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport HealingValue from 'parser/shared/modules/HealingValue';\r\nimport HealingDone from 'parser/shared/modules/throughput/HealingDone';\r\n\r\nimport BeaconHealSource from './BeaconHealSource';\r\nimport BeaconHealingBreakdown from './BeaconHealingBreakdown';\r\n\r\nclass BeaconHealingDone extends Analyzer {\r\n  static dependencies = {\r\n    beaconHealSource: BeaconHealSource,\r\n    healingDone: HealingDone,\r\n  };\r\n\r\n  _totalBeaconHealing = new HealingValue();\r\n  _beaconHealingBySource = {};\r\n\r\n  constructor(options) {\r\n    super(options);\r\n    this.addEventListener(\r\n      this.beaconHealSource.beacontransfer.by(SELECTED_PLAYER),\r\n      this._onBeaconTransfer,\r\n    );\r\n  }\r\n\r\n  _onBeaconTransfer(event) {\r\n    this._totalBeaconHealing = this._totalBeaconHealing.add(\r\n      event.amount,\r\n      event.absorbed,\r\n      event.overheal,\r\n    );\r\n\r\n    const source = event.originalHeal;\r\n    const spellId = source.ability.guid;\r\n    let sourceHealing = this._beaconHealingBySource[spellId];\r\n    if (!sourceHealing) {\r\n      sourceHealing = this._beaconHealingBySource[spellId] = {\r\n        ability: source.ability,\r\n        healing: new HealingValue(),\r\n      };\r\n    }\r\n    sourceHealing.healing = sourceHealing.healing.add(event.amount, event.absorbed, event.overheal);\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Panel\r\n        title={<Trans id=\"paladin.holy.modules.beacons.beaconHealingDone.beaconHealingSources\">Beacon healing sources</Trans>}\r\n        explanation={\r\n          <Trans id=\"paladin.holy.modules.beacons.beaconHealingDone.beaconHealingSources.explanation\">\r\n            Beacon healing is triggered by the <b>raw</b> healing done of your primary spells. This\r\n            breakdown shows the amount of effective beacon healing replicated by each beacon\r\n            transfering heal.\r\n          </Trans>\r\n        }\r\n        position={120}\r\n        pad={false}\r\n      >\r\n        <BeaconHealingBreakdown\r\n          totalHealingDone={this.healingDone.total}\r\n          totalBeaconHealing={this._totalBeaconHealing}\r\n          beaconHealingBySource={this._beaconHealingBySource}\r\n          fightDuration={this.owner.fightDuration}\r\n        />\r\n      </Panel>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BeaconHealingDone;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport SPELLS from 'common/SPELLS';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport StatisticBox, { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\n\r\nimport Events from 'parser/core/Events';\r\n\r\nimport BeaconTargets from './BeaconTargets';\r\nimport { BEACON_TRANSFERING_ABILITIES } from '../../constants';\r\nimport BeaconTransferFactor from './BeaconTransferFactor';\r\n\r\nclass MissingBeacons extends Analyzer {\r\n  static dependencies = {\r\n    beaconTargets: BeaconTargets,\r\n    beaconTransferFactor: BeaconTransferFactor,\r\n  };\r\n\r\n  lostBeaconHealing = 0;\r\n\r\n  constructor(options){\r\n    super(options);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this.onHeal);\r\n  }\r\n\r\n  onHeal(event) {\r\n    const spellId = event.ability.guid;\r\n    const spellBeaconTransferFactor = BEACON_TRANSFERING_ABILITIES[spellId];\r\n    if (!spellBeaconTransferFactor) {\r\n      return;\r\n    }\r\n\r\n    const numMissingBeacons =\r\n      this.beaconTargets.numMaxBeacons - this.beaconTargets.numBeaconsActive;\r\n    if (numMissingBeacons > 0) {\r\n      this.lostBeaconHealing +=\r\n        this.beaconTransferFactor.getExpectedTransfer(event) * numMissingBeacons;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    if (this.lostBeaconHealing === 0) {\r\n      // Normally we don't want optional statistics, but this is an exception as this giving any results is very rare.\r\n      return null;\r\n    }\r\n\r\n    const lostBeaconHealing = this.owner.formatItemHealingDone(this.lostBeaconHealing);\r\n\r\n    return (\r\n      <StatisticBox\r\n        position={STATISTIC_ORDER.UNIMPORTANT(0)}\r\n        icon={<SpellIcon id={SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF.id} />}\r\n        value={\r\n          <span style={{ fontSize: '75%' }}>\r\n            <Trans id=\"paladin.holy.modules.beacons.missingBeacons.lostBeaconHealing\">Up to {lostBeaconHealing}</Trans>\r\n          </span>\r\n        }\r\n        label={<Trans id=\"paladin.holy.modules.beacons.missingBeacons.lostBeaconHealingLabel\">Beacon healing lost (missing beacon)</Trans>}\r\n        tooltip={\r\n          <Trans id=\"paladin.holy.modules.beacons.missingBeacons.lostBeaconHealingTooltip\">\r\n            The amount of <strong>raw</strong> healing that didn't transfer to one or more beacon\r\n            targets due to a missing beacon. When a beacon drops, re-apply it quickly.\r\n          </Trans>\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default MissingBeacons;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport StatisticBox, { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\n\r\nimport BeaconTransferFactor from './BeaconTransferFactor';\r\nimport BeaconHealSource from './BeaconHealSource';\r\n\r\n/**\r\n * @property {BeaconTransferFactor} beaconTransferFactor\r\n * @property {BeaconHealSource} beaconHealSource\r\n */\r\nclass FailedBeaconTransfers extends Analyzer {\r\n  static dependencies = {\r\n    beaconTransferFactor: BeaconTransferFactor,\r\n    beaconHealSource: BeaconHealSource, // for the events\r\n  };\r\n\r\n  lostBeaconHealing = 0;\r\n  constructor(options) {\r\n    super(options);\r\n    this.addEventListener(\r\n      this.beaconHealSource.beacontransferfailed.by(SELECTED_PLAYER),\r\n      this._onBeaconTransferFailed,\r\n    );\r\n  }\r\n\r\n  _onBeaconTransferFailed(event) {\r\n    this.lostBeaconHealing += this.beaconTransferFactor.getExpectedTransfer(event);\r\n  }\r\n\r\n  statistic() {\r\n    if (this.lostBeaconHealing === 0) {\r\n      // Normally we don't want optional statistics, but this is an exception as this giving any results is very rare.\r\n      return null;\r\n    }\r\n\r\n    const lostBeaconHealing = this.owner.formatItemHealingDone(this.lostBeaconHealing);\r\n\r\n    return (\r\n      <StatisticBox\r\n        position={STATISTIC_ORDER.UNIMPORTANT(0)}\r\n        icon={<SpellIcon id={SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF.id} />}\r\n        value={\r\n          <span style={{ fontSize: '75%' }}>\r\n            <Trans id=\"paladin.holy.modules.beacons.failedBeaconTransfers.lostBeaconHealing\">Up to {lostBeaconHealing}</Trans>\r\n          </span>\r\n        }\r\n        label={<Trans id=\"paladin.holy.modules.beacons.failedBeaconTransfers.lostBeaconHealingLabel\">Beacon healing lost (line of sight)</Trans>}\r\n        tooltip={\r\n          <Trans id=\"paladin.holy.modules.beacons.failedBeaconTransfers.lostBeaconHealingTooltip\">\r\n            The amount of <strong>raw</strong> healing that didn't transfer to one or more beacon\r\n            targets due to an issue such as Line of Sight or phasing.\r\n          </Trans>\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default FailedBeaconTransfers;\r\n","import React from 'react';\r\n\r\n// https://thenounproject.com/term/plus/674201/\r\n// Plus by Galaxicon from the Noun Project\r\nconst Icon = ({ ...other }) => (\r\n  <svg viewBox=\"9 9 81 81\" xmlns=\"http://www.w3.org/2000/svg\" className=\"icon\" {...other}>\r\n    <g transform=\"translate(0,-952.36218)\">\r\n      <path d=\"m 36,964.36216 0,24.00005 -24,0 c -1.04717,10e-5 -1.9999,0.9528 -2,2 l 0,23.99999 c 10e-5,1.0472 0.95283,1.9999 2,2 l 24,0 0,24 c 1e-4,1.0472 0.95283,1.9999 2,2 l 24,0 c 1.04717,-10e-5 1.9999,-0.9528 2,-2 l 0,-24 24,0 c 1.04717,-10e-5 1.9999,-0.9528 2,-2 l 0,-23.99999 c -1e-4,-1.0472 -0.95283,-1.9999 -2,-2 l -24,0 0,-24.00005 c -1e-4,-1.04717 -0.95283,-1.9999 -2,-2 l -24,0 c -1.04299,0.007 -1.97542,1.09908 -2,2 z\" />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nexport default Icon;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellLink from 'common/SpellLink';\r\nimport CoreAbilities from 'parser/core/modules/Abilities';\r\nimport { SpellbookAbility } from 'parser/core/modules/Ability';\r\nimport ISSUE_IMPORTANCE from 'parser/core/ISSUE_IMPORTANCE';\r\n\r\nimport { TrackedPaladinAbility } from './core/PaladinAbilityTracker';\r\n\r\nclass Abilities extends CoreAbilities {\r\n  spellbook(): Array<SpellbookAbility<TrackedPaladinAbility>> {\r\n    const combatant = this.selectedCombatant;\r\n    const hasSanctifiedWrath = combatant.hasTalent(SPELLS.SANCTIFIED_WRATH_TALENT.id);\r\n    return [\r\n      {\r\n        spell: SPELLS.HOLY_SHOCK_CAST,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: haste => {\r\n          const swCdr = hasSanctifiedWrath && combatant.hasBuff(SPELLS.AVENGING_WRATH.id) ? 0.5 : 0;\r\n          return (7.5 / (1 + haste)) * (1 - swCdr);\r\n        },\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          extraSuggestion: (\r\n            <Trans id=\"paladin.holy.modules.abilities.castHolyShockRegularly\">Casting Holy Shock regularly is very important for performing well.</Trans>\r\n          ),\r\n        },\r\n        timelineSortIndex: 0,\r\n        isDefensive: true,\r\n      },\r\n      {\r\n        spell: SPELLS.LIGHT_OF_DAWN_CAST,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 1,\r\n      },\r\n      {\r\n        spell: [SPELLS.JUDGMENT_CAST_HOLY, SPELLS.JUDGMENT_CAST],\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: haste => {\r\n          const cdr = combatant.hasBuff(SPELLS.AVENGING_CRUSADER_TALENT.id) ? 0.3 : 0;\r\n          return (12 / (1 + haste)) * (1 - cdr);\r\n        },\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: combatant.hasTalent(SPELLS.JUDGMENT_OF_LIGHT_TALENT.id),\r\n          extraSuggestion: (\r\n            <Trans id=\"paladin.holy.modules.abilities.judgmentOfLightTalent\">\r\n              You should cast it whenever <SpellLink id={SPELLS.JUDGMENT_OF_LIGHT_TALENT.id} /> has\r\n              dropped, which is usually on cooldown without delay. Alternatively you can ignore the\r\n              debuff and just cast it whenever Judgment is available; there's nothing wrong with\r\n              ignoring unimportant things to focus on important things.\r\n            </Trans>\r\n          ),\r\n          recommendedEfficiency: 0.85, // this rarely overheals, so keeping this on cooldown is pretty much always best\r\n        },\r\n        timelineSortIndex: 20,\r\n      },\r\n      {\r\n        spell: SPELLS.BESTOW_FAITH_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 12,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.7,\r\n          extraSuggestion: (\r\n            <Trans id=\"paladin.holy.modules.abilities.bestowFaithTalent\">\r\n              If you can't or don't want to cast it more consider using{' '}\r\n              <SpellLink id={SPELLS.LIGHTS_HAMMER_TALENT.id} /> or{' '}\r\n              <SpellLink id={SPELLS.CRUSADERS_MIGHT_TALENT.id} /> instead.\r\n            </Trans>\r\n          ),\r\n        },\r\n        timelineSortIndex: 3,\r\n        enabled: combatant.hasTalent(SPELLS.BESTOW_FAITH_TALENT.id),\r\n      },\r\n      {\r\n        spell: SPELLS.LIGHTS_HAMMER_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 60,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 3,\r\n        enabled: combatant.hasTalent(SPELLS.LIGHTS_HAMMER_TALENT.id),\r\n      },\r\n      {\r\n        spell: SPELLS.BEACON_OF_VIRTUE_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 15,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 25,\r\n        enabled: combatant.hasTalent(SPELLS.BEACON_OF_VIRTUE_TALENT.id),\r\n      },\r\n      {\r\n        spell: SPELLS.CRUSADER_STRIKE,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: haste => {\r\n          const cdr = combatant.hasBuff(SPELLS.AVENGING_CRUSADER_TALENT.id) ? 0.3 : 0;\r\n          return (6 / (1 + haste)) * (1 - cdr);\r\n        },\r\n        charges: 2,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          extraSuggestion: (\r\n            <Trans id=\"paladin.holy.modules.abilities.crusadersMightTalent\">\r\n              When you are using <SpellLink id={SPELLS.CRUSADERS_MIGHT_TALENT.id} /> it is important\r\n              to use <SpellLink id={SPELLS.CRUSADER_STRIKE.id} /> often enough to benefit from the\r\n              talent. Use a different talent if you are unable to.\r\n            </Trans>\r\n          ),\r\n          recommendedEfficiency: 0.35,\r\n        },\r\n        timelineSortIndex: 50,\r\n        enabled: combatant.hasTalent(SPELLS.CRUSADERS_MIGHT_TALENT.id),\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_PRISM_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 20,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 4,\r\n        enabled: combatant.hasTalent(SPELLS.HOLY_PRISM_TALENT.id),\r\n        isDefensive: true,\r\n      },\r\n      {\r\n        spell: SPELLS.RULE_OF_LAW_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 30,\r\n        gcd: undefined,\r\n        charges: 2,\r\n        timelineSortIndex: 11,\r\n        enabled: combatant.hasTalent(SPELLS.RULE_OF_LAW_TALENT.id),\r\n      },\r\n      {\r\n        spell: SPELLS.DIVINE_PROTECTION,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 60 * (1 - (combatant.hasTalent(SPELLS.UNBREAKABLE_SPIRIT_TALENT.id) ? 0.3 : 0)),\r\n        gcd: undefined,\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.6,\r\n          importance: ISSUE_IMPORTANCE.MINOR,\r\n        },\r\n        timelineSortIndex: 45,\r\n        isDefensive: true,\r\n      },\r\n      {\r\n        spell: SPELLS.DIVINE_SHIELD,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown:\r\n          5 * 60 * (1 - (combatant.hasTalent(SPELLS.UNBREAKABLE_SPIRIT_TALENT.id) ? 0.3 : 0)),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 46,\r\n        isDefensive: true,\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_AVENGER_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 90,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n        enabled: combatant.hasTalent(SPELLS.HOLY_AVENGER_TALENT.id),\r\n        timelineSortIndex: 33,\r\n      },\r\n      {\r\n        spell: SPELLS.AVENGING_WRATH,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 120,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n        timelineSortIndex: 32,\r\n        enabled: !combatant.hasTalent(SPELLS.AVENGING_CRUSADER_TALENT.id),\r\n      },\r\n      {\r\n        spell: SPELLS.AVENGING_CRUSADER_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 120,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n        timelineSortIndex: 32,\r\n        enabled: combatant.hasTalent(SPELLS.AVENGING_CRUSADER_TALENT.id),\r\n      },\r\n      {\r\n        spell: SPELLS.AURA_MASTERY,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 180,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.6,\r\n        },\r\n        timelineSortIndex: 34,\r\n      },\r\n      {\r\n        spell: SPELLS.BLESSING_OF_SACRIFICE,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 120,\r\n        gcd: undefined,\r\n        timelineSortIndex: 101,\r\n      },\r\n      {\r\n        spell: SPELLS.LAY_ON_HANDS,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 600 * (1 - (combatant.hasTalent(SPELLS.UNBREAKABLE_SPIRIT_TALENT.id) ? 0.3 : 0)),\r\n        gcd: undefined,\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.1,\r\n        },\r\n        timelineSortIndex: 101,\r\n        isDefensive: true,\r\n      },\r\n      {\r\n        spell: SPELLS.LIGHT_OF_THE_MARTYR,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 19,\r\n      },\r\n      {\r\n        spell: SPELLS.FLASH_OF_LIGHT,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        channel: haste => 1.5 / (1 + haste),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          name: `Filler ${SPELLS.FLASH_OF_LIGHT.name}`,\r\n          casts: castCount => castCount.casts - (castCount.healingIolHits || 0),\r\n        },\r\n        timelineSortIndex: 9,\r\n      },\r\n      {\r\n        spell: SPELLS.FLASH_OF_LIGHT,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        channel: haste => 1.5 / (1 + haste),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          name: `${SPELLS.INFUSION_OF_LIGHT.name} ${SPELLS.FLASH_OF_LIGHT.name}`,\r\n          casts: castCount => castCount.healingIolHits || 0,\r\n        },\r\n        timelineSortIndex: 10,\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_LIGHT,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          name: `Filler ${SPELLS.HOLY_LIGHT.name}`,\r\n          casts: castCount => castCount.casts - (castCount.healingIolHits || 0),\r\n        },\r\n        timelineSortIndex: 2,\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_LIGHT,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          name: `${SPELLS.INFUSION_OF_LIGHT.name} ${SPELLS.HOLY_LIGHT.name}`,\r\n          casts: castCount => castCount.healingIolHits || 0,\r\n        },\r\n        timelineSortIndex: 2,\r\n      },\r\n      {\r\n        spell: SPELLS.WORD_OF_GLORY,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 2,\r\n      },\r\n      {\r\n        spell: SPELLS.DIVINE_STEED,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        charges: combatant.hasTalent(SPELLS.CAVALIER_TALENT.id) ? 2 : 1,\r\n        cooldown: 45,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 44,\r\n        isDefensive: true,\r\n      },\r\n      {\r\n        spell: SPELLS.CLEANSE,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 8,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 100,\r\n        isDefensive: true,\r\n      },\r\n      {\r\n        spell: SPELLS.BLESSING_OF_FREEDOM,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 25,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 102,\r\n        isDefensive: true,\r\n      },\r\n      {\r\n        spell: SPELLS.BLESSING_OF_PROTECTION,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 5 * 60,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 103,\r\n        isDefensive: true,\r\n      },\r\n      {\r\n        spell: SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 110,\r\n        enabled: combatant.hasTalent(SPELLS.DIVINE_PURPOSE_TALENT.id),\r\n      },\r\n      {\r\n        // The primary beacon cast is registered as BEACON_OF_LIGHT_CAST_AND_BUFF\r\n        spell: [SPELLS.BEACON_OF_FAITH_TALENT, SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF],\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        timelineSortIndex: 110,\r\n        enabled: combatant.hasTalent(SPELLS.BEACON_OF_FAITH_TALENT.id),\r\n      },\r\n      {\r\n        spell: SPELLS.CRUSADER_STRIKE,\r\n        category: Abilities.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,\r\n        cooldown: haste => {\r\n          const cdr = combatant.hasBuff(SPELLS.AVENGING_CRUSADER_TALENT.id) ? 0.3 : 0;\r\n          return (6 / (1 + haste)) * (1 - cdr);\r\n        },\r\n        charges: 2,\r\n        timelineSortIndex: 50,\r\n        enabled: !combatant.hasTalent(SPELLS.CRUSADERS_MIGHT_TALENT.id),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.CONSECRATION_CAST,\r\n        category: Abilities.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,\r\n        cooldown: haste => 4.5 / (1 + haste),\r\n        timelineSortIndex: 51,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.BLINDING_LIGHT_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 90,\r\n        timelineSortIndex: 104,\r\n        enabled: combatant.hasTalent(SPELLS.BLINDING_LIGHT_TALENT.id),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.HAMMER_OF_JUSTICE,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 60,\r\n        timelineSortIndex: 105,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.HAND_OF_RECKONING,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 8,\r\n        gcd: undefined,\r\n        timelineSortIndex: 106,\r\n      },\r\n      {\r\n        spell: SPELLS.SERAPHIM_TALENT,\r\n        buffSpellId: SPELLS.SERAPHIM_TALENT.id,\r\n        category: Abilities.SPELL_CATEGORIES.SEMI_DEFENSIVE,\r\n        cooldown: 45,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        enabled: combatant.hasTalent(SPELLS.SERAPHIM_TALENT.id),\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n      },\r\n    ];\r\n  }\r\n}\r\n\r\nexport default Abilities;\r\n","import SPELLS from 'common/SPELLS';\r\nimport { Ability, AbsorbedEvent, EventType, HealEvent } from 'parser/core/Events';\r\nimport AbilityTracker, { TrackedAbility } from 'parser/shared/modules/AbilityTracker';\r\n\r\nimport BeaconTargets from '../beacons/BeaconTargets';\r\n\r\nconst INFUSION_OF_LIGHT_BUFF_EXPIRATION_BUFFER = 150; // the buff expiration can occur several MS before the heal event is logged, this is the buffer time that an IoL charge may have dropped during which it will still be considered active.\r\nconst INFUSION_OF_LIGHT_BUFF_MINIMAL_ACTIVE_TIME = 200; // if someone heals with FoL and then immediately casts a HS race conditions may occur. This prevents that (although the buff is probably not applied before the FoL).\r\n\r\nexport interface TrackedPaladinAbility extends TrackedAbility {\r\n  healingIolHits?: number;\r\n  healingIolHealing?: number;\r\n  healingIolAbsorbed?: number;\r\n  healingIolOverheal?: number;\r\n  healingBeaconHits?: number;\r\n  healingBeaconHealing?: number;\r\n  healingBeaconAbsorbed?: number;\r\n  healingBeaconOverheal?: number;\r\n}\r\n\r\nclass PaladinAbilityTracker extends AbilityTracker {\r\n  static dependencies = {\r\n    ...AbilityTracker.dependencies,\r\n    beaconTargets: BeaconTargets,\r\n  };\r\n  protected beaconTargets!: BeaconTargets;\r\n\r\n  getAbility(spellId: number, abilityInfo: Ability | null = null): TrackedPaladinAbility {\r\n    return super.getAbility(spellId, abilityInfo);\r\n  }\r\n\r\n  onHeal(event: HealEvent | AbsorbedEvent) {\r\n    super.onHeal(event);\r\n\r\n    const spellId = event.ability.guid;\r\n    const cast = this.getAbility(spellId, event.ability);\r\n\r\n    if (spellId === SPELLS.FLASH_OF_LIGHT.id || spellId === SPELLS.HOLY_LIGHT.id) {\r\n      const hasIol = this.selectedCombatant.hasBuff(\r\n        SPELLS.INFUSION_OF_LIGHT.id,\r\n        event.timestamp,\r\n        INFUSION_OF_LIGHT_BUFF_EXPIRATION_BUFFER,\r\n        INFUSION_OF_LIGHT_BUFF_MINIMAL_ACTIVE_TIME,\r\n      );\r\n\r\n      if (hasIol) {\r\n        cast.healingIolHits = (cast.healingIolHits || 0) + 1;\r\n        cast.healingIolHealing = (cast.healingIolHealing || 0) + (event.amount || 0);\r\n        if (event.type === EventType.Heal) {\r\n          cast.healingIolOverheal = (cast.healingIolOverheal || 0) + (event.overheal || 0);\r\n          cast.healingIolAbsorbed = (cast.healingIolAbsorbed || 0) + (event.absorbed || 0);\r\n        }\r\n      }\r\n    }\r\n\r\n    const hasBeacon = this.beaconTargets.hasBeacon(event.targetID);\r\n    if (hasBeacon) {\r\n      cast.healingBeaconHits = (cast.healingBeaconHits || 0) + 1;\r\n      cast.healingBeaconHealing = (cast.healingBeaconHealing || 0) + (event.amount || 0);\r\n      if (event.type === EventType.Heal) {\r\n        cast.healingBeaconAbsorbed = (cast.healingBeaconAbsorbed || 0) + (event.absorbed || 0);\r\n        cast.healingBeaconOverheal = (cast.healingBeaconOverheal || 0) + (event.overheal || 0);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default PaladinAbilityTracker;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport { formatPercentage } from 'common/format';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\nimport UpArrowIcon from 'interface/icons/UpArrow';\r\nimport PlusIcon from 'interface/icons/Plus';\r\nimport Analyzer from 'parser/core/Analyzer';\r\n\r\nimport Abilities from '../Abilities';\r\nimport PaladinAbilityTracker from '../core/PaladinAbilityTracker';\r\nimport { BEACON_TRANSFERING_ABILITIES } from '../../constants';\r\n\r\nclass DirectBeaconHealing extends Analyzer {\r\n  static dependencies = {\r\n    abilityTracker: PaladinAbilityTracker,\r\n    abilities: Abilities,\r\n  };\r\n\r\n  get beaconTransferingAbilities() {\r\n    return this.abilities.activeAbilities.filter(\r\n      ability => BEACON_TRANSFERING_ABILITIES[ability.spell.id] !== undefined,\r\n    );\r\n  }\r\n  get totalFoLHLOnBeaconPercentage() {\r\n    const abilityTracker = this.abilityTracker;\r\n    const getCastCount = spellId => abilityTracker.getAbility(spellId);\r\n\r\n    let casts = 0;\r\n    let castsOnBeacon = 0;\r\n\r\n    this.beaconTransferingAbilities\r\n      .filter(ability =>\r\n        [SPELLS.FLASH_OF_LIGHT.id, SPELLS.HOLY_LIGHT.id].includes(ability.spell.id),\r\n      )\r\n      .forEach(ability => {\r\n        const castCount = getCastCount(ability.spell.id);\r\n        casts += castCount.healingHits || 0;\r\n        castsOnBeacon += castCount.healingBeaconHits || 0;\r\n      });\r\n\r\n    return castsOnBeacon / casts;\r\n  }\r\n  get totalOtherSpellsOnBeaconPercentage() {\r\n    const abilityTracker = this.abilityTracker;\r\n    const getCastCount = spellId => abilityTracker.getAbility(spellId);\r\n\r\n    let casts = 0;\r\n    let castsOnBeacon = 0;\r\n\r\n    this.beaconTransferingAbilities\r\n      .filter(\r\n        ability => ![SPELLS.FLASH_OF_LIGHT.id, SPELLS.HOLY_LIGHT.id].includes(ability.spell.id),\r\n      )\r\n      .forEach(ability => {\r\n        const castCount = getCastCount(ability.spell.id);\r\n        casts += castCount.healingHits || 0;\r\n        castsOnBeacon += castCount.healingBeaconHits || 0;\r\n      });\r\n\r\n    return castsOnBeacon / casts;\r\n  }\r\n  get totalHealsOnBeaconPercentage() {\r\n    const abilityTracker = this.abilityTracker;\r\n    const getCastCount = spellId => abilityTracker.getAbility(spellId);\r\n\r\n    let casts = 0;\r\n    let castsOnBeacon = 0;\r\n\r\n    this.beaconTransferingAbilities.forEach(ability => {\r\n      const castCount = getCastCount(ability.spell.id);\r\n      casts += castCount.healingHits || 0;\r\n      castsOnBeacon += castCount.healingBeaconHits || 0;\r\n    });\r\n\r\n    return castsOnBeacon / casts;\r\n  }\r\n\r\n  get suggestionThresholds() {\r\n    return {\r\n      actual: this.totalHealsOnBeaconPercentage,\r\n      isGreaterThan: {\r\n        minor: 0.2,\r\n        average: 0.25,\r\n        major: 0.35,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n  suggestions(when) {\r\n    when(this.suggestionThresholds.actual)\r\n      .isGreaterThan(this.suggestionThresholds.isGreaterThan.minor)\r\n      .addSuggestion((suggest, actual, recommended) => suggest(\r\n          <Trans id=\"paladin.holy.modules.beacons.directBeaconHealing.suggestion\">\r\n            You cast a lot of direct heals on beacon targets. Direct healing beacon targets is\r\n            inefficient. Try to only cast on beacon targets when they would otherwise die.\r\n          </Trans>,\r\n        )\r\n          .icon('ability_paladin_beaconoflight')\r\n          .actual(\r\n            <Trans id=\"paladin.holy.modules.beacons.directBeaconHealing.actual\">\r\n              {formatPercentage(actual)}% of all your healing spell casts were on a beacon target\r\n            </Trans>,\r\n          )\r\n          .recommended(<Trans id=\"paladin.holy.modules.beacons.directBeaconHealing.recommended\">&lt;{formatPercentage(recommended)}% is recommended</Trans>)\r\n          .regular(this.suggestionThresholds.isGreaterThan.average)\r\n          .major(this.suggestionThresholds.isGreaterThan.major));\r\n  }\r\n  statistic() {\r\n    return (\r\n      <Statistic position={STATISTIC_ORDER.CORE(50)} size=\"small\">\r\n        <div className=\"pad\">\r\n          <div className=\"pull-right\">\r\n            <PlusIcon /> <UpArrowIcon style={{ transform: 'rotate(90deg)' }} />{' '}\r\n            <SpellIcon id={SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF.id} />\r\n          </div>\r\n          <label>\r\n            <Trans id=\"paladin.holy.modules.beacons.directBeaconHealing.directBeaconHealing\">Direct beacon healing</Trans>\r\n          </label>\r\n\r\n          <div className=\"flex\" style={{ marginTop: -10 }}>\r\n            <div className=\"flex-main value\" style={{ marginRight: 15 }}>\r\n              {formatPercentage(this.totalHealsOnBeaconPercentage, 0)}%\r\n            </div>\r\n            <div className=\"flex-main\">\r\n              <div className=\"flex pull-right text-center\" style={{ whiteSpace: 'nowrap' }}>\r\n                <div className=\"flex-main\" style={{ marginRight: 15 }}>\r\n                  <small>\r\n                    <Trans id=\"paladin.holy.modules.beacons.directBeaconHealing.hlFol\">HL/FoL</Trans>\r\n                  </small>\r\n                  <div className=\"value\" style={{ fontSize: '1em' }}>\r\n                    {formatPercentage(this.totalFoLHLOnBeaconPercentage, 0)}%\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex-main\">\r\n                  <small>\r\n                    <Trans id=\"paladin.holy.modules.beacons.directBeaconHealing.otherSpells\">Other spells</Trans>\r\n                  </small>\r\n                  <div className=\"value\" style={{ fontSize: '1em' }}>\r\n                    {formatPercentage(this.totalOtherSpellsOnBeaconPercentage, 0)}%\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DirectBeaconHealing;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport Events from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport BoringSpellValue from 'interface/statistics/components/BoringSpellValue';\r\n\r\n/* ---------------------------- Log URLs for testing --------------------------\r\n\r\nfor DIVINE_PURPOSE testing (A):\r\n\r\n    A1: 100% uptime with precast:\r\n        https://www.warcraftlogs.com/reports/wgfFpV4zrckHdhYt#fight=4&type=auras&sourceclass=Any&target=1&ability=53563\r\n        Results Expected: 100%, precasted BoL: true, precasted BoF: null\r\n        Passed: true\r\n    A2: < 100% uptime with precast:\r\n        https://www.warcraftlogs.com/reports/wgfFpV4zrckHdhYt#fight=6&type=auras&source=1&by=target&ability=53563\r\n        Results Expected: 92%, precasted BoL: true, precasted BoF: null\r\n        passed: true\r\n    A3: < 100% without precast:\r\n        https://www.warcraftlogs.com/reports/MPFA4THXv6gmG1VD#fight=30&type=auras&source=3&by=target&ability=53563\r\n        Results Expected: 88%, precasted BoL: true, precasted BoF: null\r\n        Passed: true\r\n    A4: 100% uptime with precast with BoL swap:\r\n        https://www.warcraftlogs.com/reports/MPFA4THXv6gmG1VD#fight=12&type=auras&source=3&by=target&ability=53563\r\n        Results Expected: 100%, precasted BoL: true, precasted BoF: null\r\n        Passed: true\r\n    A5: < 100% uptime with precast with BoL swap:\r\n        https://www.warcraftlogs.com/reports/MPFA4THXv6gmG1VD#fight=12&type=auras&source=3&by=target&ability=53563\r\n        Results Expected: 100%, precasted BoL: true, precasted BoF: null\r\n        Passed: true\r\n    A6: < 100% without precast with BoL swap:\r\n\r\n        Results Expected: %, precasted BoL: , precasted BoF: null\r\n        Passed:\r\n\r\nfor BEACON_OF_FAITH testing (B):\r\n\r\n    BoF uptime (B1*):\r\n        B11: 100% uptime with precast:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=2&source=7&type=auras&by=target&ability=53563\r\n            Results Expected: BoL uptime 100%, BoF uptime 100%, precasted BoL: true, precasted BoF: true\r\n            Passed: true\r\n        B12: < 100% uptime with precast:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=13&source=7&type=auras&by=target&ability=156910\r\n            Results Expected: BoL uptime 95%, BoF uptime 94%, precasted BoL: true, precasted BoF: true\r\n            Passed: true\r\n        B13: < 100% without precast:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=10&source=7&type=auras&by=target&ability=156910\r\n            Results Expected: BoL uptime 46%, BoF uptime 74%, precasted BoL: false, precasted BoF: false\r\n            Passed: true\r\n        B14: 100% uptime with precast with BoF swap:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=11&source=7&type=auras&by=target&ability=156910\r\n            Results Expected: BoL uptime 100%, BoF uptime 100%, precasted BoL: true, precasted BoF: true\r\n            Passed: true\r\n        B15: < 100% uptime with precast with BoF swap:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=8&source=7&type=auras&by=target&ability=156910\r\n            Results Expected: BoL uptime 100%, BoF uptime 82%, precasted BoL: true, precasted BoF: true\r\n            Passed: true\r\n        B16: < 100% without precast with BoF swap:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=14&source=7&type=auras&by=target&ability=156910\r\n            Results Expected: BoL uptime 73%, BoF uptime 99%, precasted BoL: false, precasted BoF: false\r\n            Passed: true\r\n    BoL uptime (B2*):\r\n        B21: 100% uptime with precast:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=2&source=7&type=auras&by=target&ability=53563\r\n            Results Expected: BoL uptime 100%, BoF uptime 100%, precasted BoL: true, precasted BoF: true\r\n            Passed: true\r\n        B22: < 100% uptime with precast:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=9&source=7&type=auras&by=target&ability=53563\r\n            Results Expected: BoL uptime 83%, BoF uptime 90%, precasted BoL: true, precasted BoF: true\r\n            Passed: true\r\n        B23: < 100% without precast:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=14&source=7&type=auras&by=target&ability=53563\r\n            Results Expected: BoL uptime 73%, BoF uptime 99%, precasted BoL: false, precasted BoF: false\r\n            Passed: true\r\n        B24: 100% uptime with precast with BoL swap:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=8&source=7&type=auras&by=target&ability=53563\r\n            Results Expected: BoL uptime 100%, BoF uptime 82%, precasted BoL: true, precasted BoF: true\r\n            Passed: true\r\n        B25: < 100% uptime with precast with BoL swap:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=19&source=7&type=auras&by=target&ability=53563\r\n            Results Expected: BoL uptime 97%, BoF uptime 98%, precasted BoL: true, precasted BoF: true\r\n            Passed: true\r\n        B26: < 100% without precast with BoL swap:\r\n            https://www.warcraftlogs.com/reports/DPwyKpWBZ6F947mx/#fight=10&source=7&type=auras&by=target&ability=53563\r\n            Results Expected: BoL uptime 46%, BoF uptime 74%, precasted BoL: false, precasted BoF: false\r\n            Passed: true\r\n\r\nFor Beacon of Virtue (C)\r\n    C:\r\n        https://www.warcraftlogs.com/reports/pW4kHGPwYKL8ryvm/#fight=1&source=14&type=auras&ability=200025\r\n        Results Expected: 31%\r\n        Passed: true\r\n\r\n\r\n-----------------------------------------------------------------------------*/\r\n\r\nclass BeaconUptime extends Analyzer {\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER), this._onBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER), this._offBuff);\r\n\r\n    // Due to getBuffHistory for BoV, uptime is calculated at the end of the fight\r\n    this.addEventListener(Events.fightend, this._endOfFight);\r\n\r\n    // this is really has divine purpose talent\r\n    this.hasBoL = this.selectedCombatant.hasTalent(SPELLS.GLIMMER_OF_LIGHT_TALENT.id);\r\n\r\n    this.hasBoF = this.selectedCombatant.hasTalent(SPELLS.BEACON_OF_FAITH_TALENT.id);\r\n    this.hasBoV = this.selectedCombatant.hasTalent(SPELLS.BEACON_OF_VIRTUE_TALENT.id);\r\n\r\n    this.idBoL = SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF.id;\r\n    this.idBoF = SPELLS.BEACON_OF_FAITH_TALENT.id;\r\n    this.idBoV = SPELLS.BEACON_OF_VIRTUE_TALENT.id;\r\n\r\n    this.BuffEventType = Object.freeze({\r\n      REMOVEBUFF: 0,\r\n      PREPULL: 1,\r\n      POSTPULL: 2,\r\n      UPDATE: 3,\r\n      ENDOFFIGHT: 4,\r\n    });\r\n  }\r\n\r\n  missingBoLPrepull = true;\r\n  missingBoFPrepull = true;\r\n  missingBoL = true;\r\n  missingBoF = true;\r\n  missingBoV = true;\r\n\r\n  fightStart = this.owner.fight.start_time;\r\n  fightEnd = this.owner.fight.end_time;\r\n  fightLength = this.fightEnd - this.fightStart;\r\n\r\n  lastBoLtimestamp = null;\r\n  lastBoFtimestamp = null;\r\n  lastBoVtimestamp = null;\r\n\r\n  uptimeBoL = 0;\r\n  uptimeBoF = 0;\r\n  uptimeBoV = 0;\r\n\r\n  // BoL is placed on a new target before it is removed from old target\r\n  // so if the count is 2 then it will not set missingBoL to true\r\n  countBoL = 0;\r\n  countBoF = 0;\r\n\r\n  get uptimeBoLPerc() {\r\n    return Math.round((this.uptimeBoL / this.fightLength) * 100);\r\n  }\r\n\r\n  get uptimeBoFPerc() {\r\n    return Math.round((this.uptimeBoF / this.fightLength) * 100);\r\n  }\r\n\r\n  get uptimeBoVPerc() {\r\n    return Math.round((this.uptimeBoV / this.fightLength) * 100);\r\n  }\r\n\r\n  get suggestionThresholdsBoL() {\r\n    return {\r\n      actual: !this.missingBoLPrepull,\r\n      isEqual: false,\r\n      style: 'boolean',\r\n    };\r\n  }\r\n\r\n  get suggestionThresholdsBoLUptime() {\r\n    return {\r\n      actual: this.uptimeBoLPerc / 100,\r\n      isLessThan: {\r\n        minor: 0.9,\r\n        average: 0.8,\r\n        major: 0.6,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n\r\n  get suggestionThresholdsBoF() {\r\n    return {\r\n      actual: !this.missingBoFPrepull,\r\n      isEqual: false,\r\n      style: 'boolean',\r\n    };\r\n  }\r\n\r\n  get suggestionThresholdsBoFUptime() {\r\n    return {\r\n      actual: this.uptimeBoFPerc / 100,\r\n      isLessThan: {\r\n        minor: 0.9,\r\n        average: 0.8,\r\n        major: 0.6,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n\r\n  _updateBoL(event, type) {\r\n    const { REMOVEBUFF, PREPULL, POSTPULL, UPDATE, ENDOFFIGHT } = this.BuffEventType;\r\n\r\n    // buff removed\r\n    if (type === REMOVEBUFF && this.countBoL < 2) {\r\n      this.missingBoL = true;\r\n      this.uptimeBoL += event.timestamp - this.lastBoLtimestamp;\r\n      this.lastBoLtimestamp = event.timestamp;\r\n      this.countBoL -= 1;\r\n      return;\r\n    }\r\n    // checks for overlap of beacon application with beacon removal\r\n    // should never be >2 but just in case\r\n    if (type === REMOVEBUFF && this.countBoL >= 2) {\r\n      this.countBoL -= 1;\r\n      return;\r\n    }\r\n    //buff applied prepull\r\n    if (type === PREPULL) {\r\n      this.missingBoLPrepull = false;\r\n      this.missingBoL = false;\r\n      this.lastBoLtimestamp = this.fightStart;\r\n      this.countBoL += 1;\r\n      return;\r\n    }\r\n    // buff applied post pull, if death occurs and reapply happens before old buff goes away\r\n    // wont override lastBoLtimestamp if countBoL > 0\r\n    if (type === POSTPULL && this.countBoL === 0) {\r\n      this.lastBoLtimestamp = event.timestamp;\r\n      this.missingBoL = false;\r\n      this.countBoL += 1;\r\n      return;\r\n    }\r\n    // increases count without overriding lastBoLtimestamp to track double applications\r\n    if (type === POSTPULL && this.countBoL > 0) {\r\n      this.countBoL += 1;\r\n      return;\r\n    }\r\n    //buff not changed but updated\r\n    if (type === UPDATE || type === ENDOFFIGHT) {\r\n      this.uptimeBoL += event.timestamp - this.lastBoLtimestamp;\r\n      this.lastBoLtimestamp = event.timestamp;\r\n      return;\r\n    }\r\n  }\r\n\r\n  _updateBoF(event, type) {\r\n    const { REMOVEBUFF, PREPULL, POSTPULL, UPDATE, ENDOFFIGHT } = this.BuffEventType;\r\n\r\n    // buff removed\r\n    if (type === REMOVEBUFF && this.countBoF < 2) {\r\n      this.missingBoF = true;\r\n      this.uptimeBoF += event.timestamp - this.lastBoFtimestamp;\r\n      this.lastBoFtimestamp = event.timestamp;\r\n      this.countBoF -= 1;\r\n    }\r\n    // checks for overlap of beacon application with beacon removal\r\n    // should never be >2 but just in case\r\n    if (type === REMOVEBUFF && this.countBoF >= 2) {\r\n      this.countBoF -= 1;\r\n      return;\r\n    }\r\n    // buff applied prepull\r\n    if (type === PREPULL) {\r\n      this.missingBoFPrepull = false;\r\n      this.missingBoF = false;\r\n      this.lastBoFtimestamp = this.fightStart;\r\n      this.countBoF += 1;\r\n      return;\r\n    }\r\n    // buff applied post pull, if death occurs and reapply happens before old buff goes away\r\n    // wont override lastBoFtimestamp if countBoF > 0\r\n    if (type === POSTPULL && this.countBoF === 0) {\r\n      this.lastBoFtimestamp = event.timestamp;\r\n      this.missingBoF = false;\r\n      this.countBoF += 1;\r\n      return;\r\n    }\r\n    // increases count without overriding lastBoFtimestamp to track double applications\r\n    if (type === POSTPULL && this.countBoF > 0) {\r\n      this.countBoF += 1;\r\n      return;\r\n    }\r\n    //buff not changed but updated\r\n    if (type === UPDATE || type === ENDOFFIGHT) {\r\n      this.uptimeBoF += event.timestamp - this.lastBoFtimestamp;\r\n      this.lastBoFtimestamp = event.timestamp;\r\n      return;\r\n    }\r\n  }\r\n\r\n  _handleBoLEvents(event) {\r\n    const { POSTPULL, UPDATE, ENDOFFIGHT } = this.BuffEventType;\r\n\r\n    // end of fight\r\n    if (!event.ability && !this.missingBoL) {\r\n      this._updateBoL(event, ENDOFFIGHT);\r\n      return;\r\n    }\r\n    //post pull beacon of light cast\r\n    if (event.ability !== undefined && event.ability.guid === this.idBoL) {\r\n      this._updateBoL(event, POSTPULL);\r\n      return;\r\n    }\r\n\r\n    //any buff even if it isn't BoL\r\n    if (!this.missingBoL) {\r\n      this._updateBoL(event, UPDATE);\r\n      return;\r\n    }\r\n  }\r\n\r\n  _handleBoFEvents(event) {\r\n    const { POSTPULL, UPDATE, ENDOFFIGHT } = this.BuffEventType;\r\n\r\n    // end of fight\r\n    if (!event.ability && !this.missingBoF) {\r\n      this._updateBoF(event, ENDOFFIGHT);\r\n      return;\r\n    }\r\n\r\n    // post pull BoF buff applied\r\n    if (event.ability && event.ability.guid === this.idBoF) {\r\n      this._updateBoF(event, POSTPULL);\r\n      return;\r\n    }\r\n    if (event.ability && event.ability.guid === this.idBoL) {\r\n      this._updateBoL(event, POSTPULL);\r\n      return;\r\n    }\r\n    // if both BoL and BoF are active\r\n    if (!this.missingBoL && !this.missingBoF) {\r\n      this._updateBoL(event, UPDATE);\r\n      this._updateBoF(event, UPDATE);\r\n      return;\r\n    }\r\n    // if BoF is active and BoL is not active\r\n    if (!this.missingBoF && this.missingBoL) {\r\n      this._updateBoF(event, UPDATE);\r\n      return;\r\n    }\r\n    // if BoF is not active and BoL not active\r\n    if (this.missingBoF && !this.missingBoL) {\r\n      this._updateBoL(event, UPDATE);\r\n      return;\r\n    }\r\n    // if BoF and BoL are not active do nothing\r\n  }\r\n\r\n  _handleBoVEvents() {\r\n    const historyBoV = this.selectedCombatant.getBuffHistory(this.idBoV);\r\n    historyBoV.forEach(event => {\r\n      this.uptimeBoV += event.end - event.start;\r\n    });\r\n    return;\r\n  }\r\n\r\n  _endOfFight(event) {\r\n    if (this.hasBoL) {\r\n      this._handleBoLEvents(event);\r\n      return;\r\n    }\r\n\r\n    if (this.hasBoF) {\r\n      this._handleBoLEvents(event);\r\n      this._handleBoFEvents(event);\r\n      return;\r\n    }\r\n\r\n    if (this.hasBoV) {\r\n      this._handleBoVEvents();\r\n      return;\r\n    }\r\n  }\r\n\r\n  _offBuff(event) {\r\n    const { REMOVEBUFF } = this.BuffEventType;\r\n\r\n    if (\r\n      event.ability.guid !== this.idBoL &&\r\n      event.ability.guid !== this.idBoF &&\r\n      event.ability.guid !== this.idBoV\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if ((this.hasBoL || this.hasBoF) && event.ability.guid === this.idBoL) {\r\n      this._updateBoL(event, REMOVEBUFF);\r\n      return;\r\n    }\r\n    if (this.hasBoF && event.ability.guid === this.idBoF) {\r\n      this._updateBoF(event, REMOVEBUFF);\r\n      return;\r\n    }\r\n  }\r\n\r\n  _onPrepull(event) {\r\n    const { PREPULL } = this.BuffEventType;\r\n\r\n    // prepull check for BoL active\r\n    if (this.hasBoL && event.ability.guid === this.idBoL) {\r\n      this._updateBoL(event, PREPULL);\r\n      return;\r\n    }\r\n\r\n    // prepull check for BoF active\r\n    if (this.hasBoF && event.ability.guid === this.idBoF) {\r\n      this._updateBoF(event, PREPULL);\r\n      return;\r\n    }\r\n    if (this.hasBoF && event.ability.guid === this.idBoL) {\r\n      this._updateBoL(event, PREPULL);\r\n      return;\r\n    }\r\n  }\r\n\r\n  _onBuff(event) {\r\n    if (\r\n      event.ability.guid !== this.idBoL &&\r\n      event.ability.guid !== this.idBoF &&\r\n      event.ability.guid !== this.idBoV\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // prepull check\r\n    if (event.prepull && event.timestamp <= this.fightStart) {\r\n      this._onPrepull(event);\r\n      return;\r\n    }\r\n\r\n    // all postpull checks\r\n\r\n    if (this.hasBoL) {\r\n      this._handleBoLEvents(event);\r\n      return;\r\n    }\r\n\r\n    if (this.hasBoF) {\r\n      this._handleBoFEvents(event);\r\n      return;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    const boringSpellValueContainer = { display: 'flex', flexDirection: 'row' };\r\n    const missingPrepullContainer = (\r\n      <div style={{ color: 'red', margin: 'auto', textAlign: 'center' }}>\r\n        <Trans id=\"paladin.holy.modules.beacons.beaconUptime.notCastedPrepull\">\r\n          Not\r\n          <br />\r\n          casted\r\n          <br />\r\n          prepull\r\n        </Trans>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <Statistic position={STATISTIC_ORDER.CORE(60)} size=\"flexible\">\r\n        <label style={{ margin: '10px' }}>\r\n          <Trans id=\"paladin.holy.modules.beacons.beaconUptime.beaconUptime\">Beacon Uptime</Trans>\r\n        </label>\r\n\r\n        {/*  adds a section for BoL stats if BoV talent is not taken */}\r\n        {!this.hasBoV && (\r\n          <div style={boringSpellValueContainer}>\r\n            <BoringSpellValue\r\n              spell={SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF}\r\n              value={`${this.uptimeBoLPerc}%`}\r\n              label={<Trans id=\"paladin.holy.modules.beacons.beaconUptime.bolUptime\">BoL Uptime</Trans>}\r\n            />\r\n            {this.missingBoLPrepull && missingPrepullContainer}\r\n          </div>\r\n        )}\r\n\r\n        {/* adds a section for BoF stats if BoF talent taken */}\r\n        {this.hasBoF && (\r\n          <div style={boringSpellValueContainer}>\r\n            <BoringSpellValue\r\n              spell={SPELLS.BEACON_OF_FAITH_TALENT}\r\n              value={`${this.uptimeBoFPerc}%`}\r\n              label={<Trans id=\"paladin.holy.modules.beacons.beaconUptime.bofUptime\">BoF Uptime</Trans>}\r\n            />\r\n\r\n            {this.missingBoFPrepull && missingPrepullContainer}\r\n          </div>\r\n        )}\r\n\r\n        {/* adds a section for BoV stats if BoV talent taken */}\r\n        {this.hasBoV && (\r\n          <div style={boringSpellValueContainer}>\r\n            <BoringSpellValue\r\n              spell={SPELLS.BEACON_OF_VIRTUE_TALENT}\r\n              value={`${this.uptimeBoVPerc}%`}\r\n              label={<Trans id=\"paladin.holy.modules.beacons.beaconUptime.bovUptime\">BoV Uptime</Trans>}\r\n            />\r\n          </div>\r\n        )}\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BeaconUptime;\r\n","import { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Abilities from 'parser/core/modules/Abilities';\r\nimport SPELLS from 'common/SPELLS';\r\nimport Events, { FightEndEvent } from 'parser/core/Events';\r\nimport ExecuteHelper from 'parser/shared/ExecuteHelper';\r\nimport Spell from 'common/SPELLS/Spell';\r\n\r\nclass HammerofWrath extends ExecuteHelper {\r\n  static dependencies = {\r\n    ...ExecuteHelper.dependencies,\r\n    abilities: Abilities,\r\n  };\r\n\r\n  static executeSpells: Spell[] = [\r\n    SPELLS.HAMMER_OF_WRATH,\r\n  ];\r\n  static executeSources: number = SELECTED_PLAYER;\r\n  static lowerThreshold: number = 0.2;\r\n  static executeOutsideRangeEnablers: Spell[] = [\r\n    SPELLS.AVENGING_WRATH,\r\n    SPELLS.AVENGING_CRUSADER_TALENT,\r\n    SPELLS.CRUSADE_TALENT,\r\n  ];\r\n  static modifiesDamage: boolean = false;\r\n\r\n  maxCasts: number = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(Events.fightend, this.adjustMaxCasts);\r\n\r\n    //FIXME added reduction from legendary when we can get that info\r\n    (options.abilities as Abilities).add({\r\n        spell: SPELLS.HAMMER_OF_WRATH,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 7.5,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.85,\r\n          maxCasts: () => this.maxCasts || 0,\r\n        },\r\n      });\r\n  }\r\n\r\n  adjustMaxCasts(event: FightEndEvent) {\r\n    super.onFightEnd(event);\r\n    this.maxCasts += Math.ceil(this.totalExecuteDuration / 7500);\r\n  }\r\n}\r\n\r\nexport default HammerofWrath;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellLink from 'common/SpellLink';\r\nimport { formatPercentage } from 'common/format';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\nimport StatisticGroup from 'interface/statistics/StatisticGroup';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport DonutChart from 'interface/statistics/components/DonutChart';\r\n\r\nimport PaladinAbilityTracker from './core/PaladinAbilityTracker';\r\n\r\nclass CastBehavior extends Analyzer {\r\n  static dependencies = {\r\n    abilityTracker: PaladinAbilityTracker,\r\n  };\r\n\r\n  get iolProcsPerHolyShockCrit() {\r\n    return 1;\r\n  }\r\n\r\n  iolCastRatioChart() {\r\n    const abilityTracker = this.abilityTracker;\r\n    const getAbility = spellId => abilityTracker.getAbility(spellId);\r\n\r\n    const flashOfLight = getAbility(SPELLS.FLASH_OF_LIGHT.id);\r\n    const holyLight = getAbility(SPELLS.HOLY_LIGHT.id);\r\n    const holyShockCast = getAbility(SPELLS.HOLY_SHOCK_CAST.id);\r\n    const holyShockHeal = getAbility(SPELLS.HOLY_SHOCK_HEAL.id);\r\n    const holyShockDamage = getAbility(SPELLS.HOLY_SHOCK_DAMAGE.id);\r\n\r\n    const iolFlashOfLights = flashOfLight.healingIolHits || 0;\r\n    const iolHolyLights = holyLight.healingIolHits || 0;\r\n    const totalIolUsages = iolFlashOfLights + iolHolyLights;\r\n\r\n    const holyShockCasts = holyShockCast.casts || 0;\r\n    const holyShockCrits =\r\n      (holyShockHeal.healingCriticalHits || 0) + (holyShockDamage.damageCriticalHits || 0);\r\n    const iolProcsPerHolyShockCrit = this.iolProcsPerHolyShockCrit;\r\n    const totalIolProcs = holyShockCrits * iolProcsPerHolyShockCrit;\r\n    const unusedProcs = totalIolProcs - totalIolUsages;\r\n\r\n    const items = [\r\n      {\r\n        color: '#FFFDE7',\r\n        label: SPELLS.FLASH_OF_LIGHT.name,\r\n        spellId: SPELLS.FLASH_OF_LIGHT.id,\r\n        value: iolFlashOfLights,\r\n      },\r\n      {\r\n        color: '#F57C00',\r\n        label: SPELLS.HOLY_LIGHT.name,\r\n        spellId: SPELLS.HOLY_LIGHT.id,\r\n        value: iolHolyLights,\r\n      },\r\n      {\r\n        color: '#A93226',\r\n        label: <Trans id=\"paladin.holy.modules.castBehavior.wastedProcs\">Wasted procs</Trans>,\r\n        tooltip: (\r\n          <Trans id=\"paladin.holy.modules.castBehavior.wastedProcsDetails\">\r\n            The amount of Infusion of Lights you did not use out of the total available. You cast{' '}\r\n            {holyShockCasts} Holy Shocks with a {formatPercentage(holyShockCrits / holyShockCasts)}%\r\n            crit ratio. This gave you {totalIolProcs} Infusion of Light procs, of which you used{' '}\r\n            {totalIolUsages}.\r\n          </Trans>\r\n        ),\r\n        value: unusedProcs,\r\n      },\r\n    ];\r\n\r\n    return <DonutChart items={items} />;\r\n  }\r\n\r\n  fillerCastRatioChart() {\r\n    const abilityTracker = this.abilityTracker;\r\n    const getAbility = spellId => abilityTracker.getAbility(spellId);\r\n\r\n    const flashOfLight = getAbility(SPELLS.FLASH_OF_LIGHT.id);\r\n    const holyLight = getAbility(SPELLS.HOLY_LIGHT.id);\r\n    const lightOfTheMartyr = getAbility(SPELLS.LIGHT_OF_THE_MARTYR.id);\r\n\r\n    const iolFlashOfLights = flashOfLight.healingIolHits || 0;\r\n    const iolHolyLights = holyLight.healingIolHits || 0;\r\n\r\n    const flashOfLightHeals = flashOfLight.casts || 0;\r\n    const holyLightHeals = holyLight.casts || 0;\r\n    const lightOfTheMartyrHeals = lightOfTheMartyr.casts || 0;\r\n    const fillerFlashOfLights = flashOfLightHeals - iolFlashOfLights;\r\n    const fillerHolyLights = holyLightHeals - iolHolyLights;\r\n\r\n    const items = [\r\n      {\r\n        color: '#FFFDE7',\r\n        label: SPELLS.FLASH_OF_LIGHT.name,\r\n        spellId: SPELLS.FLASH_OF_LIGHT.id,\r\n        value: fillerFlashOfLights,\r\n      },\r\n      {\r\n        color: '#F57C00',\r\n        label: SPELLS.HOLY_LIGHT.name,\r\n        spellId: SPELLS.HOLY_LIGHT.id,\r\n        value: fillerHolyLights,\r\n      },\r\n      {\r\n        color: '#A93226',\r\n        label: SPELLS.LIGHT_OF_THE_MARTYR.name,\r\n        spellId: SPELLS.LIGHT_OF_THE_MARTYR.id,\r\n        value: lightOfTheMartyrHeals,\r\n      },\r\n    ];\r\n\r\n    return <DonutChart items={items} />;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <StatisticGroup position={STATISTIC_ORDER.CORE(40)}>\r\n        <Statistic ultrawide>\r\n          <div className=\"pad\">\r\n            <label>\r\n              <Trans id=\"paladin.holy.modules.castBehavior.infusionOfLightUsage\">\r\n                <SpellLink id={SPELLS.INFUSION_OF_LIGHT.id} /> usage\r\n              </Trans>\r\n            </label>\r\n\r\n            {this.iolCastRatioChart()}\r\n          </div>\r\n        </Statistic>\r\n        <Statistic ultrawide>\r\n          <div className=\"pad\">\r\n            <label>\r\n              <Trans id=\"paladin.holy.modules.castBehavior.fillers\">Fillers</Trans>\r\n            </label>\r\n\r\n            {this.fillerCastRatioChart()}\r\n          </div>\r\n        </Statistic>\r\n      </StatisticGroup>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CastBehavior;\r\n","import React from 'react';\r\nimport { Trans, t } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellLink from 'common/SpellLink';\r\nimport { formatPercentage } from 'common/format';\r\nimport { i18n } from 'interface/RootLocalizationProvider';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport AbilityTracker from 'parser/shared/modules/AbilityTracker';\r\nimport HealingDone from 'parser/shared/modules/throughput/HealingDone';\r\n\r\nclass Overhealing extends Analyzer {\r\n  static dependencies = {\r\n    abilityTracker: AbilityTracker,\r\n    healingDone: HealingDone,\r\n  };\r\n\r\n  divinePurposeActive = this.selectedCombatant.hasTalent(SPELLS.DIVINE_PURPOSE_TALENT.id);\r\n\r\n  getRawHealing(ability) {\r\n    return ability.healingEffective + ability.healingAbsorbed + ability.healingOverheal;\r\n  }\r\n  getOverhealingPercentage(spellId) {\r\n    const ability = this.abilityTracker.getAbility(spellId);\r\n    return ability.healingOverheal / this.getRawHealing(ability);\r\n  }\r\n\r\n  get lightOfDawnOverhealing() {\r\n    return this.getOverhealingPercentage(SPELLS.LIGHT_OF_DAWN_HEAL.id);\r\n  }\r\n  get lightOfDawnSuggestionThresholds() {\r\n    const base = this.divinePurposeActive ? 0.45 : 0.4;\r\n    return {\r\n      actual: this.lightOfDawnOverhealing,\r\n      isGreaterThan: {\r\n        minor: base,\r\n        average: base + 0.1,\r\n        major: base + 0.2,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n  get holyShockOverhealing() {\r\n    return this.getOverhealingPercentage(SPELLS.HOLY_SHOCK_HEAL.id);\r\n  }\r\n  get holyShockSuggestionThresholds() {\r\n    const base = this.divinePurposeActive ? 0.4 : 0.35;\r\n    return {\r\n      actual: this.holyShockOverhealing,\r\n      isGreaterThan: {\r\n        minor: base,\r\n        average: base + 0.1,\r\n        major: base + 0.2,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n  get flashOfLightOverhealing() {\r\n    return this.getOverhealingPercentage(SPELLS.FLASH_OF_LIGHT.id);\r\n  }\r\n  get flashOfLightSuggestionThresholds() {\r\n    return {\r\n      actual: this.flashOfLightOverhealing,\r\n      isGreaterThan: {\r\n        minor: 0.25,\r\n        average: 0.4,\r\n        major: 0.5,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n  get bestowFaithOverhealing() {\r\n    return this.getOverhealingPercentage(SPELLS.BESTOW_FAITH_TALENT.id);\r\n  }\r\n  get bestowFaithSuggestionThresholds() {\r\n    return {\r\n      actual: this.bestowFaithOverhealing,\r\n      isGreaterThan: {\r\n        minor: 0.4,\r\n        average: 0.5,\r\n        major: 0.6,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n\r\n  suggestions(when) {\r\n    when(this.lightOfDawnSuggestionThresholds).addSuggestion((suggest, actual, recommended) => suggest(\r\n        <Trans id=\"paladin.holy.modules.overhealing.lightOfDawnSuggestion\">\r\n          Try to avoid overhealing with <SpellLink id={SPELLS.LIGHT_OF_DAWN_CAST.id} />. Save it for\r\n          when people are missing health.\r\n        </Trans>,\r\n      )\r\n        .icon(SPELLS.LIGHT_OF_DAWN_CAST.icon)\r\n        .actual(i18n._(t('paladin.holy.modules.overhealing.lightOfDawnSuggestion.actual')`${formatPercentage(actual)}% overhealing`))\r\n        .recommended(i18n._(t('paladin.holy.modules.overhealing.lightOfDawnSuggestion.recommended')`<${formatPercentage(recommended)}% is recommended`)));\r\n\r\n    when(this.holyShockSuggestionThresholds).addSuggestion((suggest, actual, recommended) => suggest(\r\n        <Trans id=\"paladin.holy.modules.overhealing.holyShockSuggestion\">\r\n          Try to avoid overhealing with <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} />. Save it for\r\n          when people are missing health.\r\n        </Trans>,\r\n      )\r\n        .icon(SPELLS.HOLY_SHOCK_HEAL.icon)\r\n        .actual(i18n._(t('paladin.holy.modules.overhealing.holyShockSuggestion.actual')`${formatPercentage(actual)}% overhealing`))\r\n        .recommended(i18n._(t('paladin.holy.modules.overhealing.holyShockSuggestion.recommended')`<${formatPercentage(recommended)}% is recommended`)));\r\n\r\n    when(this.flashOfLightSuggestionThresholds).addSuggestion((suggest, actual, recommended) => suggest(\r\n        <Trans id=\"paladin.holy.modules.overhealing.flashOfLightSuggestion\">\r\n          Try to avoid overhealing with <SpellLink id={SPELLS.FLASH_OF_LIGHT.id} />. If Flash of\r\n          Light would overheal it is generally advisable to cast a{' '}\r\n          <SpellLink id={SPELLS.HOLY_LIGHT.id} /> instead.\r\n        </Trans>,\r\n      )\r\n        .icon(SPELLS.FLASH_OF_LIGHT.icon)\r\n        .actual(i18n._(t('paladin.holy.modules.overhealing.flashOfLightSuggestion.actual')`${formatPercentage(actual)}% overhealing`))\r\n        .recommended(i18n._(t('paladin.holy.modules.overhealing.flashOfLightSuggestion.recommended')`<${formatPercentage(recommended)}% is recommended`)));\r\n\r\n    when(this.bestowFaithSuggestionThresholds).addSuggestion((suggest, actual, recommended) => suggest(\r\n        <Trans id=\"paladin.holy.modules.overhealing.bestowFaithSuggestion\">\r\n          Try to avoid overhealing with <SpellLink id={SPELLS.BESTOW_FAITH_TALENT.id} />. Cast it\r\n          just before someone is about to take damage and consider casting it on targets other than\r\n          tanks.\r\n        </Trans>,\r\n      )\r\n        .icon(SPELLS.BESTOW_FAITH_TALENT.icon)\r\n        .actual(i18n._(t('paladin.holy.modules.overhealing.bestowFaithSuggestion.actual')`${formatPercentage(actual)}% overhealing`))\r\n        .recommended(i18n._(t('paladin.holy.modules.overhealing.bestowFaithSuggestion.recommended')`<${formatPercentage(recommended)}% is recommended`)));\r\n  }\r\n}\r\n\r\nexport default Overhealing;\r\n","import React from 'react';\r\nimport { t, Trans } from '@lingui/macro';\r\nimport { i18n } from 'interface/RootLocalizationProvider';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellLink from 'common/SpellLink';\r\nimport { TooltipElement } from 'common/Tooltip';\r\nimport Analyzer, { SELECTED_PLAYER, Options } from 'parser/core/Analyzer';\r\nimport { When, ThresholdStyle } from 'parser/core/ParseResults';\r\nimport SpellUsable from 'parser/shared/modules/SpellUsable';\r\nimport Events, { CastEvent } from 'parser/core/Events';\r\n\r\n/** @type {number} (ms) When Holy Shock has less than this as cooldown remaining you should wait and still not cast that filler FoL. */\r\nconst HOLY_SHOCK_COOLDOWN_WAIT_TIME = 200;\r\n\r\nclass FillerLightOfTheMartyrs extends Analyzer {\r\n  static dependencies = {\r\n    spellUsable: SpellUsable,\r\n  };\r\n  protected spellUsable!: SpellUsable;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(\r\n      Events.cast.by(SELECTED_PLAYER).spell(SPELLS.LIGHT_OF_THE_MARTYR),\r\n      this.handleCast,\r\n    );\r\n  }\r\n\r\n  protected casts = 0;\r\n  protected inefficientCasts: CastEvent[] = [];\r\n  handleCast(event: CastEvent) {\r\n    this.casts += 1;\r\n\r\n    const hasHolyShockAvailable = this.spellUsable.isAvailable(SPELLS.HOLY_SHOCK_CAST.id);\r\n    if (!hasHolyShockAvailable) {\r\n      // We can't cast it, but check how long until it comes off cooldown. We should wait instead of casting a filler if it becomes available really soon.\r\n      const cooldownRemaining = this.spellUsable.cooldownRemaining(SPELLS.HOLY_SHOCK_CAST.id);\r\n      if (cooldownRemaining > HOLY_SHOCK_COOLDOWN_WAIT_TIME) {\r\n        return;\r\n      }\r\n    }\r\n    this.inefficientCasts.push(event);\r\n    event.meta = event.meta || {};\r\n    event.meta.isInefficientCast = true;\r\n    event.meta.inefficientCastReason =i18n._(t('paladin.holy.modules.fillerLightOfTheMatyrs.holyShockWasAvailable')`Holy Shock was available and should have been cast instead as it is a much more efficient spell.`);\r\n  }\r\n\r\n  get cpm() {\r\n    return (this.casts / (this.owner.fightDuration / 1000)) * 60;\r\n  }\r\n  get inefficientCpm() {\r\n    return (this.inefficientCasts.length / (this.owner.fightDuration / 1000)) * 60;\r\n  }\r\n\r\n  get cpmSuggestionThresholds() {\r\n    return {\r\n      actual: this.cpm,\r\n      isGreaterThan: {\r\n        minor: 1.5,\r\n        average: 2,\r\n        major: 3,\r\n      },\r\n      style: ThresholdStyle.NUMBER,\r\n    };\r\n  }\r\n  get inefficientCpmSuggestionThresholds() {\r\n    return {\r\n      actual: this.inefficientCpm,\r\n      isGreaterThan: {\r\n        minor: 0,\r\n        average: 0.25,\r\n        major: 0.5,\r\n      },\r\n      style: ThresholdStyle.NUMBER,\r\n    };\r\n  }\r\n\r\n  suggestions(when: When) {\r\n    when(this.cpmSuggestionThresholds).addSuggestion(\r\n      (suggest, actual, recommended) => suggest(\r\n          <Trans id=\"paladin.holy.modules.fillerLightOfTheMatyrs.suggestion\">\r\n            You cast many <SpellLink id={SPELLS.LIGHT_OF_THE_MARTYR.id} />\r\n            s. Light of the Martyr is an inefficient spell to cast, try to only cast Light of the\r\n            Martyr when it will save someone's life or when moving and all other instant cast spells\r\n            are on cooldown.\r\n          </Trans>,\r\n        )\r\n          .icon(SPELLS.LIGHT_OF_THE_MARTYR.icon)\r\n          .actual(\r\n            <Trans id=\"paladin.holy.modules.fillerLightOfTheMatyrs.actual\">\r\n              {this.cpm.toFixed(2)} casts per minute - {this.casts} casts total\r\n            </Trans>,\r\n          )\r\n          .recommended(<Trans id=\"paladin.holy.modules.fillerLightOfTheMatyrs.recommended\">&lt;{recommended} casts per minute is recommended</Trans>),\r\n    );\r\n\r\n    when(this.inefficientCpmSuggestionThresholds).addSuggestion((suggest, actual) => suggest(\r\n        <Trans id=\"paladin.holy.modules.fillerLightOfTheMatyrs.inefficientSuggestion\">\r\n          You cast {this.inefficientCasts.length} <SpellLink id={SPELLS.LIGHT_OF_THE_MARTYR.id} />s\r\n          while <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} /> was{' '}\r\n          <TooltipElement\r\n            content={\r\n              <Trans id=\"paladin.holy.modules.fillerLightOfTheMatyrs.inefficientSuggestion.availableWithin\">\r\n                It was either already available or going to be available within{' '}\r\n                {HOLY_SHOCK_COOLDOWN_WAIT_TIME}ms.\r\n              </Trans>\r\n            }\r\n          >\r\n            available\r\n          </TooltipElement>{' '}\r\n          (at{' '}\r\n          {this.inefficientCasts\r\n            .map(event => this.owner.formatTimestamp(event.timestamp))\r\n            .join(', ')}\r\n          ). Try to <b>never</b> cast <SpellLink id={SPELLS.LIGHT_OF_THE_MARTYR.id} /> when\r\n          something else is available\r\n          <TooltipElement\r\n            content={\r\n              <Trans id=\"paladin.holy.modules.fillerLightOfTheMatyrs.inefficientSuggestion.exceptions\">\r\n                There are very rare exceptions to this. For example it may be worth saving Holy\r\n                Shock when you know you're going to be moving soon and you may have to heal\r\n                yourself.\r\n              </Trans>\r\n            }\r\n          >\r\n            *\r\n          </TooltipElement>\r\n          .\r\n        </Trans>,\r\n      )\r\n        .icon(SPELLS.LIGHT_OF_THE_MARTYR.icon)\r\n        .actual(<Trans id=\"paladin.holy.modules.fillerLightOfTheMatyrs.inefficientSuggestion.actual\">{this.inefficientCasts.length} casts while Holy Shock was available</Trans>)\r\n        .recommended(<Trans id=\"paladin.holy.modules.fillerLightOfTheMatyrs.inefficientSuggestion.recommended\">No inefficient casts is recommended</Trans>));\r\n  }\r\n}\r\n\r\nexport default FillerLightOfTheMartyrs;\r\n","import { t } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport { i18n } from 'interface/RootLocalizationProvider';\r\nimport Analyzer, { SELECTED_PLAYER, Options } from 'parser/core/Analyzer';\r\nimport Events, { CastEvent, DamageEvent, HealEvent } from 'parser/core/Events';\r\n\r\nclass InefficientLightOfTheMartyrs extends Analyzer {\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(\r\n      Events.cast.by(SELECTED_PLAYER).spell(SPELLS.LIGHT_OF_THE_MARTYR),\r\n      this.handleCast,\r\n    );\r\n    this.addEventListener(\r\n      Events.heal.by(SELECTED_PLAYER).spell(SPELLS.LIGHT_OF_THE_MARTYR),\r\n      this.handleHeal,\r\n    );\r\n    this.addEventListener(\r\n      Events.damage.to(SELECTED_PLAYER).spell(SPELLS.LIGHT_OF_THE_MARTYR_DAMAGE_TAKEN),\r\n      this.handleDamage,\r\n    );\r\n  }\r\n\r\n  protected lastCast: CastEvent | undefined;\r\n  protected handleCast(event: CastEvent) {\r\n    this.lastCast = event;\r\n  }\r\n  protected lastHeal: HealEvent | undefined;\r\n  protected handleHeal(event: HealEvent) {\r\n    this.lastHeal = event;\r\n  }\r\n  protected lastDamage: DamageEvent | undefined;\r\n  protected handleDamage(event: DamageEvent) {\r\n    this.lastDamage = event;\r\n    this.check();\r\n  }\r\n\r\n  protected check() {\r\n    const cast = this.lastCast;\r\n    const heal = this.lastHeal;\r\n    const damage = this.lastDamage;\r\n    if (!cast || !heal || !damage) {\r\n      console.log(cast, heal, damage);\r\n      throw new Error('Missing an event');\r\n    }\r\n\r\n    const healingDone = heal.amount + (heal.absorbed || 0);\r\n    const damageTaken = damage.amount + (damage.absorbed || 0);\r\n\r\n    const effectiveHealing = healingDone - damageTaken;\r\n    if (effectiveHealing <= 0) {\r\n      cast.meta = cast.meta || {};\r\n      cast.meta.isInefficientCast = true;\r\n      cast.meta.inefficientCastReason = i18n._(t(\"paladin.holy.timeline.badLotM\")`This cast dealt more damage to you than it healed the target. If there is nothing to heal, you should deal damage instead.`);\r\n    }\r\n\r\n    this.lastCast = undefined;\r\n    this.lastHeal = undefined;\r\n    this.lastDamage = undefined;\r\n  }\r\n}\r\n\r\nexport default InefficientLightOfTheMartyrs;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellLink from 'common/SpellLink';\r\nimport { TooltipElement } from 'common/Tooltip';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SpellUsable from 'parser/shared/modules/SpellUsable';\r\n\r\nimport Events from 'parser/core/Events';\r\n\r\nimport AbilityTracker from './core/PaladinAbilityTracker';\r\n\r\n/** @type {number} (ms) When Holy Shock has less than this as cooldown remaining you should wait and still not cast that filler FoL. */\r\nconst HOLY_SHOCK_COOLDOWN_WAIT_TIME = 200;\r\n\r\n/**\r\n * First there was a check that you shouldn't cast a filler FoL when HS is ready because it is inefficient because HS is that much more efficient a spell (see the statistics in the Holy Paladin spreadsheet). I figured that waiting a fraction of a second for HS to become available would have the same result.\r\n *\r\n * The question is how much of a fraction of a second? I am fairly confident feelycrafting that waiting 200ms is more efficient, and I think up to 300ms is also going to be more efficient, maybe a bit further but hard to say.\r\n *\r\n * So then the question is what is a reasonable amount to ask of a player? I think 200ms is an amount that is very hard to differentiate from a spell just coming off cooldown. It's a delay similar to latency during raid fights. Spamming HS while its icon is as good as off cooldown would be the best course of action here and not take any uber skills form the player. So I reckon it's reasonable to include casts as being inefficient casts at this interval.\r\n *\r\n * Example log with 16 inefficient casts: report/kzKnrR4qdhXGjB38/16-Heroic+Aggramar+-+Kill+(6:50)/13-Seedÿ\r\n */\r\nclass FillerFlashOfLight extends Analyzer {\r\n  static dependencies = {\r\n    abilityTracker: AbilityTracker,\r\n    spellUsable: SpellUsable,\r\n  };\r\n\r\n  inefficientCasts = [];\r\n  _isCurrentCastInefficient = false;\r\n  constructor(options){\r\n    super(options);\r\n    this.addEventListener(Events.begincast.by(SELECTED_PLAYER).spell(SPELLS.FLASH_OF_LIGHT), this.onBeginCast);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.FLASH_OF_LIGHT), this.onCast);\r\n  }\r\n  onBeginCast(event) {\r\n    if (this._isInefficientCastEvent(event)) {\r\n      this.inefficientCasts.push(event);\r\n      this._isCurrentCastInefficient = true;\r\n    } else {\r\n      this._isCurrentCastInefficient = false;\r\n    }\r\n  }\r\n  _isInefficientCastEvent(event) {\r\n    // If there is a lot of healing to be done in short window of time using your IoL proc before casting HS makes sense.\r\n    // The `-1` buffer time is to properly handle chain-casting and IoL buffs; when chain casting the first FoL will consume the IoL buff on the `cast` event and that exact same frame will have the `begincast` event. Because `hasBuff` looks at the timestamp rather than event order, it would otherwise include the buff.\r\n    const hasIol = this.selectedCombatant.hasBuff(SPELLS.INFUSION_OF_LIGHT.id, event.timestamp, -1);\r\n    if (hasIol) {\r\n      return false;\r\n    }\r\n\r\n    const hasHolyShockAvailable = this.spellUsable.isAvailable(SPELLS.HOLY_SHOCK_CAST.id);\r\n    if (!hasHolyShockAvailable) {\r\n      // We can't cast it, but check how long until it comes off cooldown. We should wait instead of casting a filler if it becomes available really soon.\r\n      const cooldownRemaining = this.spellUsable.cooldownRemaining(SPELLS.HOLY_SHOCK_CAST.id);\r\n      if (cooldownRemaining > HOLY_SHOCK_COOLDOWN_WAIT_TIME) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  /**\r\n   * This marks spells as inefficient casts in the timeline.\r\n   * @param event\r\n   */\r\n  onCast(event) {\r\n    if (this._isCurrentCastInefficient) {\r\n      event.meta = event.meta || {};\r\n      event.meta.isInefficientCast = true;\r\n      event.meta.inefficientCastReason = (\r\n        <Trans id=\"paladin.holy.modules.fillerFlashOfLight.inefficientCastReason\">\r\n          Holy Shock was off cooldown when you started casting this unbuffed Flash of Light. You\r\n          should cast Holy Shock instead.\r\n        </Trans>\r\n      );\r\n    }\r\n  }\r\n\r\n  get inefficientCpm() {\r\n    return (this.inefficientCasts.length / (this.owner.fightDuration / 1000)) * 60;\r\n  }\r\n\r\n  get suggestionThresholds() {\r\n    return {\r\n      actual: this.inefficientCasts.length,\r\n      isGreaterThan: {\r\n        minor: 0,\r\n        average: (0.25 * this.owner.fightDuration) / 1000 / 60,\r\n        major: (0.5 * this.owner.fightDuration) / 1000 / 60,\r\n      },\r\n      style: 'number',\r\n    };\r\n  }\r\n\r\n  suggestions(when) {\r\n    when(this.suggestionThresholds).addSuggestion((suggest, actual) => suggest(\r\n        <Trans id=\"paladin.holy.modules.fillerFlashOfLight.suggestion\">\r\n          You started casting {this.inefficientCasts.length} filler{' '}\r\n          <SpellLink id={SPELLS.FLASH_OF_LIGHT.id} />s while{' '}\r\n          <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} /> was{' '}\r\n          <TooltipElement\r\n            content={\r\n              <Trans id=\"paladin.holy.modules.fillerFlashOfLight.suggestion.tooltip\">\r\n                It was either already available or going to be available within{' '}\r\n                {HOLY_SHOCK_COOLDOWN_WAIT_TIME}ms.\r\n              </Trans>\r\n            }\r\n          >\r\n            available\r\n          </TooltipElement>{' '}\r\n          (at{' '}\r\n          {this.inefficientCasts\r\n            .map(event => this.owner.formatTimestamp(event.timestamp))\r\n            .join(', ')}\r\n          ). <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} /> is a much more efficient spell and should\r\n          be prioritized\r\n          <TooltipElement\r\n            content={\r\n              <Trans id=\"paladin.holy.modules.fillerFlashOfLight.suggestion.exceptions\">\r\n                There are very rare exceptions to this. For example it may be worth saving Holy\r\n                Shock when you know you're going to be moving soon and you may have to heal\r\n                yourself.\r\n              </Trans>\r\n            }\r\n          >\r\n            *\r\n          </TooltipElement>\r\n          .\r\n        </Trans>,\r\n      )\r\n        .icon(SPELLS.FLASH_OF_LIGHT.icon)\r\n        .actual(<Trans id=\"paladin.holy.modules.fillerFlashOfLight.actualInefficient\">{actual} casts while Holy Shock was available</Trans>)\r\n        .recommended(<Trans id=\"paladin.holy.modules.fillerFlashOfLight.recommendedInefficient\">No inefficient casts is recommended</Trans>));\r\n  }\r\n}\r\n\r\nexport default FillerFlashOfLight;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport char1 from './images/char1.png';\r\nimport char2 from './images/char2.png';\r\nimport char3 from './images/char3.png';\r\nimport char4 from './images/char4.png';\r\nimport char5 from './images/char5.png';\r\nimport char1Active from './images/char1-active.png';\r\nimport char2Active from './images/char2-active.png';\r\nimport char3Active from './images/char3-active.png';\r\nimport char4Active from './images/char4-active.png';\r\nimport char5Active from './images/char5-active.png';\r\n\r\nimport './PlayerHits.scss';\r\n\r\nconst CharacterHitPerCast = props => {\r\n  const { performance } = props;\r\n\r\n  return (\r\n    <div className=\"characters-hit-per-cast\">\r\n      <div className=\"backdrop\">\r\n        <div style={{ backgroundImage: `url(${char1})` }} />\r\n        <div style={{ backgroundImage: `url(${char2})` }} />\r\n        <div style={{ backgroundImage: `url(${char3})` }} />\r\n        <div style={{ backgroundImage: `url(${char4})` }} />\r\n        <div style={{ backgroundImage: `url(${char5})` }} />\r\n      </div>\r\n      <div className=\"active\">\r\n        <div\r\n          style={{\r\n            backgroundImage: `url(${char1Active})`,\r\n            '--p': Math.max(0, Math.min(1, performance / 0.2)),\r\n          }}\r\n        />\r\n        <div\r\n          style={{\r\n            backgroundImage: `url(${char2Active})`,\r\n            '--p': Math.max(0, Math.min(1, (performance - 0.2) / 0.2)),\r\n          }}\r\n        />\r\n        <div\r\n          style={{\r\n            backgroundImage: `url(${char3Active})`,\r\n            '--p': Math.max(0, Math.min(1, (performance - 0.4) / 0.2)),\r\n          }}\r\n        />\r\n        <div\r\n          style={{\r\n            backgroundImage: `url(${char4Active})`,\r\n            '--p': Math.max(0, Math.min(1, (performance - 0.6) / 0.2)),\r\n          }}\r\n        />\r\n        <div\r\n          style={{\r\n            backgroundImage: `url(${char5Active})`,\r\n            '--p': Math.max(0, Math.min(1, (performance - 0.8) / 0.2)),\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nCharacterHitPerCast.propTypes = {\r\n  performance: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default CharacterHitPerCast;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport BoringSpellValue from 'interface/statistics/components/BoringSpellValue';\r\nimport PlayerHits from 'interface/statistics/components/PlayerHits';\r\nimport Analyzer, { SELECTED_PLAYER, Options } from 'parser/core/Analyzer';\r\nimport Events from 'parser/core/Events';\r\n\r\nimport './LightOfDawn.scss';\r\n\r\nclass LightOfDawn extends Analyzer {\r\n  protected casts = 0;\r\n  protected heals = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(\r\n      Events.cast.by(SELECTED_PLAYER).spell(SPELLS.LIGHT_OF_DAWN_CAST),\r\n      this.handleCast,\r\n    );\r\n    this.addEventListener(\r\n      Events.heal.by(SELECTED_PLAYER).spell(SPELLS.LIGHT_OF_DAWN_HEAL),\r\n      this.handleHeal,\r\n    );\r\n  }\r\n\r\n  protected handleCast() {\r\n    this.casts += 1;\r\n  }\r\n  protected handleHeal() {\r\n    this.heals += 1;\r\n  }\r\n\r\n  statistic() {\r\n    const playersHitPerCast = this.heals / this.casts || 0;\r\n    const performance = playersHitPerCast / 5;\r\n\r\n    return (\r\n      <Statistic position={STATISTIC_ORDER.CORE(60)} size=\"small\">\r\n        <BoringSpellValue\r\n          spell={SPELLS.LIGHT_OF_DAWN_CAST}\r\n          value={playersHitPerCast.toFixed(2)}\r\n          label={<Trans id=\"paladin.holy.modules.lightOfDawn.avgHitPerCast\">Average targets hit per cast</Trans>}\r\n          className=\"light-of-dawn-hits-per-cast\"\r\n          extra={<PlayerHits performance={performance} />}\r\n        />\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LightOfDawn;\r\n","import SPELLS from 'common/SPELLS';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Events from 'parser/core/Events';\r\n\r\nclass LightOfDawnIndexer extends Analyzer {\r\n  _lightOfDawnHealIndex = 0;\r\n  constructor(options){\r\n    super(options);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.LIGHT_OF_DAWN_CAST), this.onCast);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.LIGHT_OF_DAWN_HEAL), this.onHeal);\r\n  }\r\n  onCast(event) {\r\n    this._lightOfDawnHealIndex = 0;\r\n  }\r\n\r\n  onHeal(event) {\r\n    event.lightOfDawnHealIndex = this._lightOfDawnHealIndex;\r\n    this._lightOfDawnHealIndex += 1;\r\n  }\r\n}\r\n\r\nexport default LightOfDawnIndexer;\r\n","import SPELLS from 'common/SPELLS';\r\nimport CoreBuffs from 'parser/core/modules/Buffs';\r\nimport BLOODLUST_BUFFS from 'game/BLOODLUST_BUFFS';\r\n\r\nclass Buffs extends CoreBuffs {\r\n  buffs() {\r\n    const combatant = this.selectedCombatant;\r\n\r\n    // This should include ALL buffs that can be applied by your spec.\r\n    // This data can be used by various kinds of modules to improve their results, and modules added in the future may rely on buffs that aren't used today.\r\n    return [\r\n      {\r\n        spellId: SPELLS.BESTOW_FAITH_TALENT.id,\r\n        enabled: combatant.hasTalent(SPELLS.BESTOW_FAITH_TALENT),\r\n      },\r\n      {\r\n        spellId: SPELLS.INFUSION_OF_LIGHT.id,\r\n        triggeredBySpellId: SPELLS.HOLY_SHOCK_CAST.id,\r\n        timelineHighlight: true,\r\n      },\r\n      {\r\n        spellId: SPELLS.RULE_OF_LAW_TALENT.id,\r\n        enabled: combatant.hasTalent(SPELLS.RULE_OF_LAW_TALENT),\r\n      },\r\n      {\r\n        spellId: SPELLS.DIVINE_PURPOSE_TALENT.id,\r\n        enabled: combatant.hasTalent(SPELLS.DIVINE_PURPOSE_TALENT),\r\n        timelineHighlight: true,\r\n      },\r\n      // Throughput cooldowns\r\n      {\r\n        spellId: SPELLS.AVENGING_CRUSADER_TALENT.id,\r\n        enabled: combatant.hasTalent(SPELLS.AVENGING_CRUSADER_TALENT),\r\n        timelineHighlight: true,\r\n        triggeredBySpellId: SPELLS.AVENGING_CRUSADER_TALENT.id,\r\n      },\r\n      {\r\n        spellId: SPELLS.AVENGING_WRATH.id,\r\n        enabled: !combatant.hasTalent(SPELLS.AVENGING_CRUSADER_TALENT),\r\n        timelineHighlight: true,\r\n        triggeredBySpellId: SPELLS.AVENGING_WRATH.id,\r\n      },\r\n      {\r\n        spellId: SPELLS.HOLY_AVENGER_TALENT.id,\r\n        enabled: combatant.hasTalent(SPELLS.HOLY_AVENGER_TALENT),\r\n        timelineHighlight: true,\r\n      },\r\n      // Beacons\r\n      {\r\n        spellId: SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF.id,\r\n        // TODO: recommendedUptime: 1.0,\r\n      },\r\n      {\r\n        spellId: SPELLS.BEACON_OF_FAITH_TALENT.id,\r\n        // TODO: recommendedUptime: 1.0,\r\n        enabled: combatant.hasTalent(SPELLS.BEACON_OF_FAITH_TALENT),\r\n      },\r\n      {\r\n        spellId: SPELLS.BEACON_OF_VIRTUE_TALENT.id,\r\n        enabled: combatant.hasTalent(SPELLS.BEACON_OF_VIRTUE_TALENT),\r\n      },\r\n      // Utility\r\n      {\r\n        spellId: [\r\n          SPELLS.DIVINE_STEED_BUFF.id,\r\n          SPELLS.DIVINE_STEED_BUFF_ALT.id,\r\n          SPELLS.DIVINE_STEED_BUFF_ALT_2.id,\r\n          SPELLS.DIVINE_STEED_BUFF_ALT_3.id,\r\n        ],\r\n        triggeredBySpellId: SPELLS.DIVINE_STEED.id,\r\n      },\r\n      {\r\n        spellId: SPELLS.DIVINE_PROTECTION.id,\r\n      },\r\n      {\r\n        spellId: SPELLS.DIVINE_SHIELD.id,\r\n      },\r\n      {\r\n        spellId: SPELLS.AURA_MASTERY.id,\r\n      },\r\n      {\r\n        spellId: SPELLS.BLESSING_OF_FREEDOM.id,\r\n      },\r\n      {\r\n        spellId: SPELLS.BLESSING_OF_PROTECTION.id,\r\n      },\r\n      {\r\n        spellId: SPELLS.BLESSING_OF_SACRIFICE.id,\r\n      },\r\n      {\r\n        spellId: Object.keys(BLOODLUST_BUFFS).map(item => Number(item)),\r\n        timelineHighlight: true,\r\n      },\r\n    ];\r\n  }\r\n}\r\n\r\nexport default Buffs;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Ring = ({ innerRef, size, color, style, ...others }) => (\r\n  <div\r\n    style={{\r\n      position: 'absolute',\r\n      top: '50%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -50%)',\r\n      width: size,\r\n      height: size,\r\n      border: `2px solid ${color}`,\r\n      borderRadius: '50%',\r\n      ...style,\r\n    }}\r\n    ref={innerRef}\r\n    {...others}\r\n  />\r\n);\r\nRing.propTypes = {\r\n  size: PropTypes.number.isRequired,\r\n  color: PropTypes.string,\r\n  style: PropTypes.object,\r\n  innerRef: PropTypes.any,\r\n};\r\nRing.defaultProps = {\r\n  color: '#9c9c9c',\r\n};\r\n\r\nexport default Ring;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { formatNumber } from 'common/format';\r\nimport Tooltip from 'common/Tooltip';\r\n\r\nimport Ring from './Ring';\r\n\r\nconst Radar = ({ distance, size, style, playerColor }) => {\r\n  const pixelsPerYard = size / 40;\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'relative',\r\n        width: size,\r\n        height: size,\r\n        ...style,\r\n      }}\r\n    >\r\n      <Ring size={40 * pixelsPerYard} style={{ opacity: 0.25, background: 'rgba(255, 255, 255, 0.05)' }} />\r\n      <Ring size={30 * pixelsPerYard} style={{ opacity: 0.5 }} />\r\n      <Ring size={20 * pixelsPerYard} style={{ opacity: 0.75 }} />\r\n      <Ring size={10 * pixelsPerYard} style={{ opacity: 1 }} />\r\n      <Tooltip content={`${formatNumber(distance)} yards`}>\r\n        <Ring\r\n          size={distance * pixelsPerYard}\r\n          color=\"#f8b700\"\r\n          style={{\r\n            background: 'rgba(248, 183, 0, 0.3)',\r\n            boxShadow: '0 0 4px #f8b700',\r\n          }}\r\n        />\r\n      </Tooltip>\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '50%',\r\n          width: 5,\r\n          height: 5,\r\n          borderRadius: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n          background: playerColor,\r\n          pointerEvents: 'none',\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\nRadar.propTypes = {\r\n  distance: PropTypes.number.isRequired,\r\n  size: PropTypes.number,\r\n  style: PropTypes.object,\r\n  playerColor: PropTypes.string,\r\n};\r\nRadar.defaultProps = {\r\n  size: 100,\r\n  playerColor: '#f8b700',\r\n};\r\n\r\nexport default Radar;\r\n","import React from 'react';\r\nimport { Trans, t } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport { formatPercentage } from 'common/format';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\nimport StatTracker from 'parser/shared/modules/StatTracker';\r\nimport HealingValue from 'parser/shared/modules/HealingValue';\r\nimport { i18n } from 'interface/RootLocalizationProvider';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport Panel from 'interface/statistics/Panel';\r\nimport Radar from 'interface/statistics/components/DistanceRadar';\r\nimport PlayerBreakdown from 'interface/others/PlayerBreakdown';\r\n\r\nimport Events from 'parser/core/Events';\r\n\r\nimport BeaconTargets from './beacons/BeaconTargets';\r\nimport { ABILITIES_AFFECTED_BY_MASTERY } from '../constants';\r\n\r\nconst debug = false;\r\n\r\n/**\r\n * Options:\r\n *\r\n * A. Get average regardless of health or amount.\r\n * This gets the average based on just the range per heal. This ignores the heal amount and ignores the health pool of the target. A 999 tiny heals and 1 huge heal will get a linear average based on the 1000 heals. This means the result will lean more towards the tiny heals.\r\n *\r\n * B. Get average adjusted for healing amount.\r\n * This gets the average based on the amount healed. This ignores the health pool of the target (and thus overhealing). A 999 tiny heals and 1 huge heal will lean more towards the huge heal.\r\n *\r\n * C. Get average adjusted for target health.\r\n * This gets the average based on the target's health and potential overhealing. Any overhealing is excluded for the max potential. Image you cast a heal where the mastery gain was 90 healing at 50% effectiveness (based on range). After the heal, the target only has 10 health missing. In this situation the total potential mastery gain would be considered 100. This gives you a 90% adjusted effectiveness (instead of the 50% based on range).\r\n *\r\n * D. Get average adjusted for target health and amount.\r\n * Combines B and C so that 100 potential mastery gain is valued much less than 1,000 potential.\r\n *\r\n * Option A might incorrectly inflate the mastery effectiveness due to certain tiny heals having high effectiveness while they might unevenly contribute to total healing. In addition other tools using this to calculate stat weights do so based on total average healing done and have no idea about tiny heals potentially having better mastery effectiveness.\r\n * Option C doesn't have any benefits for this statistic or outside of it. This mastery effectiveness can not be used for stat weights as stat weights already account for overhealing and it would throw off the calculation. It's also misleading for analysis for various reasons.\r\n * Option D suffers from the same problems as option C, but with the benefits from option B.\r\n * Option B is the best choice. It gets the right average both for analysis and for stat weights. It's the most natural.\r\n *\r\n * @property {Combatants} combatants\r\n * @property {BeaconTargets} beaconTargets\r\n * @property {StatTracker} statTracker\r\n */\r\nclass MasteryEffectiveness extends Analyzer {\r\n  static dependencies = {\r\n    combatants: Combatants,\r\n    beaconTargets: BeaconTargets,\r\n    statTracker: StatTracker,\r\n  };\r\n\r\n  _lastPlayerPositionUpdate = null;\r\n  distanceSum = 0;\r\n  distanceCount = 0;\r\n  get averageDistance() {\r\n    return this.distanceSum / this.distanceCount;\r\n  }\r\n  rawMasteryEffectivenessSum = 0;\r\n  rawMasteryEffectivenessCount = 0;\r\n  /**\r\n   * @return {number} The mastery effectiveness based solely on your range to the target being healed. Health levels and healing amounts are not included. This means if you do 999 tiny heals and 1 big one, it still takes the average range-based mastery effectiveness of the 1000 heals.\r\n   */\r\n  get averageRawMasteryEffectiveness() {\r\n    return this.rawMasteryEffectivenessSum / this.rawMasteryEffectivenessCount;\r\n  }\r\n  masteryEffectivenessRawMasteryGainSum = 0;\r\n  masteryEffectivenessRawPotentialMasteryGainSum = 0;\r\n  /**\r\n   * @return {number} The mastery effectiveness based on your range to the target being healed and the amount healed. Smaller heals weigh less than bigger heals (linearly).\r\n   */\r\n  get masteryEffectivenessMasteryHealingGainAverage() {\r\n    return (\r\n      this.masteryEffectivenessRawMasteryGainSum /\r\n      this.masteryEffectivenessRawPotentialMasteryGainSum\r\n    );\r\n  }\r\n  /**\r\n   * @type {number} The total amount of healing done by just the mastery gain. Precisely calculated for every spell.\r\n   */\r\n  totalMasteryHealingDone = 0;\r\n\r\n  masteryHealEvents = [];\r\n\r\n  constructor(options){\r\n    super(options);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER), this.onCast);\r\n    this.addEventListener(Events.damage.to(SELECTED_PLAYER), this.onDamageTaken);\r\n    this.addEventListener(Events.energize.to(SELECTED_PLAYER), this.onEnergize);\r\n    this.addEventListener(Events.heal.to(SELECTED_PLAYER), this.onHealToPlayer);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this.onHealByPlayer);\r\n  }\r\n\r\n  onCast(event) {\r\n    this.updatePlayerPosition(event);\r\n  }\r\n  onDamageTaken(event) {\r\n    // Damage coordinates are for the target, so they are only accurate when done TO player\r\n    this.updatePlayerPosition(event);\r\n  }\r\n  onEnergize(event) {\r\n    this.updatePlayerPosition(event);\r\n  }\r\n  onHealToPlayer(event) {\r\n    // Do this before checking if this was done by player so that self-heals will apply full mastery properly\r\n    this.updatePlayerPosition(event);\r\n  }\r\n  onHealByPlayer(event) {\r\n    this.processForMasteryEffectiveness(event);\r\n  }\r\n\r\n  processForMasteryEffectiveness(event) {\r\n    if (!this._lastPlayerPositionUpdate) {\r\n      console.error(\r\n        \"Received a heal before we know the player location. Can't process since player location is still unknown.\",\r\n        event,\r\n      );\r\n      return;\r\n    }\r\n    const isAbilityAffectedByMastery = ABILITIES_AFFECTED_BY_MASTERY.includes(event.ability.guid);\r\n    if (!isAbilityAffectedByMastery) {\r\n      return;\r\n    }\r\n\r\n    const distance = this.getPlayerDistance(event);\r\n    const isRuleOfLawActive = this.selectedCombatant.hasBuff(\r\n      SPELLS.RULE_OF_LAW_TALENT.id,\r\n      event.timestamp,\r\n    );\r\n\r\n    this.distanceSum += distance;\r\n    this.distanceCount += 1;\r\n\r\n    const masteryEffectiveness = this.constructor.calculateMasteryEffectiveness(\r\n      distance,\r\n      isRuleOfLawActive,\r\n    );\r\n    // Raw is the mastery effectiveness regardless of health pool and heal amount.\r\n    this.rawMasteryEffectivenessSum += masteryEffectiveness;\r\n    this.rawMasteryEffectivenessCount += 1;\r\n\r\n    const heal = new HealingValue(event.amount, event.absorbed, event.overheal);\r\n    const applicableMasteryPercentage =\r\n      this.statTracker.currentMasteryPercentage * masteryEffectiveness;\r\n\r\n    // The base healing of the spell (excluding any healing added by mastery)\r\n    const baseHealing = heal.raw / (1 + applicableMasteryPercentage);\r\n    const rawMasteryGain = heal.raw - baseHealing;\r\n    const actualMasteryHealingDone = Math.max(0, heal.effective - baseHealing);\r\n    this.totalMasteryHealingDone += actualMasteryHealingDone;\r\n\r\n    // The max potential mastery healing if we had a mastery effectiveness of 100% on this spell. This does NOT include the base healing. Example: a heal that did 1,324 healing with 32.4% mastery with 100% mastery effectiveness will have a max potential mastery healing of 324.\r\n    const maxPotentialRawMasteryHealing = baseHealing * this.statTracker.currentMasteryPercentage; // * 100% mastery effectiveness\r\n\r\n    this.masteryEffectivenessRawMasteryGainSum += rawMasteryGain;\r\n    this.masteryEffectivenessRawPotentialMasteryGainSum += maxPotentialRawMasteryHealing;\r\n\r\n    this.masteryHealEvents.push({\r\n      ...event,\r\n      effectiveHealing: heal.effective,\r\n      rawMasteryGain,\r\n      maxPotentialRawMasteryHealing,\r\n    });\r\n    // Update the event information to include the heal's mastery effectiveness in case we want to use this elsewhere (hint: StatValues)\r\n    event.masteryEffectiveness = masteryEffectiveness;\r\n  }\r\n\r\n  updatePlayerPosition(event) {\r\n    if (!event.x || !event.y) {\r\n      return;\r\n    }\r\n    this.verifyPlayerPositionUpdate(event, this._lastPlayerPositionUpdate, 'player');\r\n    this._lastPlayerPositionUpdate = event;\r\n  }\r\n  verifyPlayerPositionUpdate(event, lastPositionUpdate, forWho) {\r\n    if (!event.x || !event.y || !lastPositionUpdate) {\r\n      return;\r\n    }\r\n    const distance = this.constructor.calculateDistance(\r\n      lastPositionUpdate.x,\r\n      lastPositionUpdate.y,\r\n      event.x,\r\n      event.y,\r\n    );\r\n    const timeSince = event.timestamp - lastPositionUpdate.timestamp;\r\n    const maxDistance = Math.max(1, (timeSince / 1000) * 10 * 1.5); // 10 yards per second + 50% margin of error\r\n    if (distance > maxDistance) {\r\n      debug &&\r\n        console.warn(\r\n          forWho,\r\n          `distance since previous event (${Math.round(timeSince / 100) / 10}s ago) was ${\r\n            Math.round(distance * 10) / 10\r\n          } yards:`,\r\n          event.type,\r\n          event,\r\n          lastPositionUpdate.type,\r\n          lastPositionUpdate,\r\n        );\r\n    }\r\n  }\r\n\r\n  getPlayerDistance(event) {\r\n    return this.constructor.calculateDistance(\r\n      this._lastPlayerPositionUpdate.x,\r\n      this._lastPlayerPositionUpdate.y,\r\n      event.x,\r\n      event.y,\r\n    );\r\n  }\r\n  static calculateDistance(x1, y1, x2, y2) {\r\n    return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2)) / 100;\r\n  }\r\n  static calculateMasteryEffectiveness(distance, isRuleOfLawActive) {\r\n    // https://docs.google.com/spreadsheets/d/1kcIuIYgn61tZoAM6nS_vzGllOuIuMxBZXunDodBTvC0/edit?usp=sharing\r\n    const fullEffectivenessRadius = isRuleOfLawActive ? 15 : 10;\r\n    const falloffRadius = isRuleOfLawActive ? 60 : 40;\r\n\r\n    return Math.min(\r\n      1,\r\n      Math.max(\r\n        0,\r\n        1 - (distance - fullEffectivenessRadius) / (falloffRadius - fullEffectivenessRadius),\r\n      ),\r\n    );\r\n  }\r\n\r\n  get report() {\r\n    const statsByTargetId = this.masteryHealEvents.reduce((obj, event) => {\r\n      // Update the player-totals\r\n      if (!obj[event.targetID]) {\r\n        const combatant = this.combatants.players[event.targetID];\r\n        obj[event.targetID] = {\r\n          combatant,\r\n          effectiveHealing: 0,\r\n          healingReceived: 0,\r\n          healingFromMastery: 0,\r\n          maxPotentialHealingFromMastery: 0,\r\n        };\r\n      }\r\n      const playerStats = obj[event.targetID];\r\n      playerStats.effectiveHealing += event.effectiveHealing;\r\n      playerStats.healingReceived += event.amount;\r\n      playerStats.healingFromMastery += event.rawMasteryGain;\r\n      playerStats.maxPotentialHealingFromMastery += event.maxPotentialRawMasteryHealing;\r\n\r\n      return obj;\r\n    }, {});\r\n\r\n    return statsByTargetId;\r\n  }\r\n\r\n  statistic() {\r\n    // console.log('total mastery healing done', this.owner.formatItemHealingDone(this.totalMasteryHealingDone));\r\n\r\n    return [\r\n      <Statistic key=\"Statistic\" position={STATISTIC_ORDER.CORE(10)}>\r\n        <div className=\"pad\" style={{ position: 'relative' }}>\r\n          <label>\r\n            <Trans id=\"paladin.holy.modules.masteryEffectiveness.masteryEffectiveness\">Mastery effectiveness</Trans>\r\n          </label>\r\n          <div className=\"value\">\r\n            {formatPercentage(this.masteryEffectivenessMasteryHealingGainAverage, 0)}%\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              top: 12,\r\n              right: 0,\r\n              textAlign: 'center',\r\n            }}\r\n          >\r\n            <Radar\r\n              distance={this.distanceSum / this.distanceCount}\r\n              style={{\r\n                display: 'inline-block',\r\n              }}\r\n              playerColor=\"#f58cba\" // Paladin color\r\n            />\r\n            <div\r\n              style={{\r\n                opacity: 0.5,\r\n                lineHeight: 1,\r\n                marginTop: -4,\r\n                fontSize: 13,\r\n              }}\r\n            >\r\n              <Trans id=\"paladin.holy.modules.masteryEffectiveness.averageDistance\">Average distance</Trans>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Statistic>,\r\n      <Panel\r\n        key=\"Panel\"\r\n        title={<Trans id=\"paladin.holy.modules.masteryEffectiveness.masteryEffectivenessBreakdown\">Mastery effectiveness breakdown</Trans>}\r\n        explanation={\r\n          <Trans id=\"paladin.holy.modules.masteryEffectiveness.masteryEffectivenessBreakdownDetails\">\r\n            This shows you your mastery effectiveness on each individual player and the amount of\r\n            healing done to those players.\r\n          </Trans>\r\n        }\r\n        position={200}\r\n        pad={false}\r\n      >\r\n        <PlayerBreakdown report={this.report} players={this.owner.players} />\r\n      </Panel>,\r\n    ];\r\n  }\r\n\r\n  get suggestionThresholds() {\r\n    return {\r\n      actual: this.masteryEffectivenessMasteryHealingGainAverage,\r\n      isLessThan: {\r\n        minor: 0.75,\r\n        average: 0.7,\r\n        major: 0.6,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n  suggestions(when) {\r\n    when(this.suggestionThresholds).addSuggestion((suggest, actual, recommended) =>\r\n      suggest(\r\n        <Trans id=\"paladin.holy.modules.masteryEffectiveness.suggestion\">\r\n          Your Mastery Effectiveness can be improved. Try to improve your positioning, usually by\r\n          sticking with melee.\r\n        </Trans>,\r\n      )\r\n        .icon('inv_hammer_04')\r\n        .actual(i18n._(t('paladin.holy.modules.masteryEffectiveness.suggestion.actual')`${formatPercentage(actual)}% mastery effectiveness`))\r\n        .recommended(i18n._(t('paladin.holy.modules.masteryEffectiveness.suggestion.recommended')`>${formatPercentage(recommended)}% is recommended`)),\r\n    );\r\n  }\r\n}\r\n\r\nexport default MasteryEffectiveness;\r\n","import SPELLS from 'common/SPELLS';\r\nimport CoreAlwaysBeCastingHealing from 'parser/shared/modules/AlwaysBeCastingHealing';\r\n\r\nconst debug = false;\r\n\r\nclass AlwaysBeCasting extends CoreAlwaysBeCastingHealing {\r\n  static HEALING_ABILITIES_ON_GCD = [\r\n    SPELLS.FLASH_OF_LIGHT.id,\r\n    SPELLS.HOLY_LIGHT.id,\r\n    SPELLS.HOLY_SHOCK_CAST.id,\r\n    SPELLS.LIGHT_OF_DAWN_CAST.id,\r\n    SPELLS.LIGHT_OF_THE_MARTYR.id,\r\n    SPELLS.BESTOW_FAITH_TALENT.id,\r\n    SPELLS.HOLY_PRISM_TALENT.id,\r\n    SPELLS.LIGHTS_HAMMER_TALENT.id,\r\n  ];\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n\r\n    if (this.selectedCombatant.hasTalent(SPELLS.AVENGING_CRUSADER_TALENT.id)) {\r\n      this.constructor.HEALING_ABILITIES_ON_GCD.push(SPELLS.JUDGMENT_CAST.id);\r\n      this.constructor.HEALING_ABILITIES_ON_GCD.push(SPELLS.CRUSADER_STRIKE.id);\r\n    } else {\r\n      if (this.selectedCombatant.hasTalent(SPELLS.CRUSADERS_MIGHT_TALENT.id)) {\r\n        this.constructor.HEALING_ABILITIES_ON_GCD.push(SPELLS.CRUSADER_STRIKE.id);\r\n      }\r\n      if (this.selectedCombatant.hasTalent(SPELLS.JUDGMENT_OF_LIGHT_TALENT.id)) {\r\n        this.constructor.HEALING_ABILITIES_ON_GCD.push(SPELLS.JUDGMENT_CAST.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  countsAsHealingAbility(event) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === SPELLS.HOLY_SHOCK_CAST.id && !event.trigger.targetIsFriendly) {\r\n      debug &&\r\n        console.log(\r\n          `%cABC: ${event.ability.name} (${spellId}) skipped for healing time; target is not friendly`,\r\n          'color: orange',\r\n        );\r\n      return false;\r\n    }\r\n\r\n    // using crusdars might, count Crusader Strike healing spell, or if Avenging Crusdaer is active, count for healing //\r\n    if (\r\n      spellId === SPELLS.CRUSADER_STRIKE.id &&\r\n      !this.selectedCombatant.hasBuff(SPELLS.AVENGING_CRUSADER_TALENT.id, event.timestamp) &&\r\n      !this.selectedCombatant.hasTalent(SPELLS.CRUSADERS_MIGHT_TALENT.id)\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    // if judging light, always count as healing spell, or if Avenging Crusdaer is active, count for healing //\r\n    if (\r\n      spellId === SPELLS.JUDGMENT_CAST.id &&\r\n      !this.selectedCombatant.hasBuff(SPELLS.AVENGING_CRUSADER_TALENT.id, event.timestamp) &&\r\n      !this.selectedCombatant.hasTalent(SPELLS.JUDGMENT_OF_LIGHT_TALENT.id)\r\n    ) {\r\n      return false;\r\n    }\r\n    return super.countsAsHealingAbility(event);\r\n  }\r\n}\r\n\r\nexport default AlwaysBeCasting;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport RESOURCE_TYPES from 'game/RESOURCE_TYPES';\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellLink from 'common/SpellLink';\r\nimport ResourceLink from 'common/ResourceLink';\r\nimport { TooltipElement } from 'common/Tooltip';\r\nimport Checklist from 'parser/shared/modules/features/Checklist';\r\nimport Rule from 'parser/shared/modules/features/Checklist/Rule';\r\nimport Requirement from 'parser/shared/modules/features/Checklist/Requirement';\r\nimport PreparationRule from 'parser/shared/modules/features/Checklist/PreparationRule';\r\nimport GenericCastEfficiencyRequirement from 'parser/shared/modules/features/Checklist/GenericCastEfficiencyRequirement';\r\n\r\nconst HolyPaladinChecklist = ({ combatant, castEfficiency, thresholds, owner }) => {\r\n  const AbilityRequirement = props => (\r\n    <GenericCastEfficiencyRequirement\r\n      castEfficiency={castEfficiency.getCastEfficiencyForSpellId(props.spell)}\r\n      {...props}\r\n    />\r\n  );\r\n  AbilityRequirement.propTypes = {\r\n    spell: PropTypes.number.isRequired,\r\n  };\r\n\r\n  return (\r\n    <Checklist>\r\n      <Rule\r\n        name={<Trans id=\"paladin.holy.modules.checklist.usePrimarySpells\">Use your primary healing spells as often as possible</Trans>}\r\n        description={\r\n          <Trans id=\"paladin.holy.modules.checklist.usePrimarySpells.description\">\r\n            <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} />\r\n            {combatant.hasTalent(SPELLS.BESTOW_FAITH_TALENT) ? (\r\n              <SpellLink id={SPELLS.BESTOW_FAITH_TALENT.id} />\r\n            ) : (\r\n              ''\r\n            )}\r\n            {combatant.hasTalent(SPELLS.JUDGMENT_OF_LIGHT_TALENT) ? (\r\n              <SpellLink id={SPELLS.JUDGMENT_CAST.id} />\r\n            ) : (\r\n              ''\r\n            )}\r\n            {combatant.hasTalent(SPELLS.JUDGMENT_OF_LIGHT_TALENT) ? ' when using ' : ''}\r\n            {combatant.hasTalent(SPELLS.JUDGMENT_OF_LIGHT_TALENT) ? (\r\n              <SpellLink id={SPELLS.JUDGMENT_OF_LIGHT_HEAL.id} />\r\n            ) : (\r\n              ''\r\n            )}\r\n            {combatant.hasTalent(SPELLS.CRUSADERS_MIGHT_TALENT) ? (\r\n              <SpellLink id={SPELLS.CRUSADER_STRIKE.id} />\r\n            ) : (\r\n              ''\r\n            )}\r\n            are your most efficient healing spells available. Try to cast them as much as possible\r\n            without overhealing.\r\n            <TooltipElement content={<Trans id=\"paladin.holy.modules.checklist.usePrimarySpells.descriptionTooltipElement\">When you're not bringing too many healers.</Trans>}>\r\n              On Mythic\r\n            </TooltipElement>{' '}\r\n            you can often still cast these spells more even if you were overhealing by casting it\r\n            quicker when it comes off cooldown and improving your target selection.{' '}\r\n            <a\r\n              href=\"https://www.wowhead.com/holy-paladin-rotation-guide#gameplay-and-priority-list\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              More info.\r\n            </a>\r\n          </Trans>\r\n        }\r\n      >\r\n        <AbilityRequirement spell={SPELLS.HOLY_SHOCK_CAST.id} />\r\n        <AbilityRequirement spell={SPELLS.HAMMER_OF_WRATH.id} />\r\n        {combatant.hasTalent(SPELLS.JUDGMENT_OF_LIGHT_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.JUDGMENT_CAST.id} />\r\n        )}\r\n        {combatant.hasTalent(SPELLS.BESTOW_FAITH_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.BESTOW_FAITH_TALENT.id} />\r\n        )}\r\n        {combatant.hasTalent(SPELLS.LIGHTS_HAMMER_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.LIGHTS_HAMMER_TALENT.id} />\r\n        )}\r\n        {combatant.hasTalent(SPELLS.CRUSADERS_MIGHT_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.CRUSADER_STRIKE.id} />\r\n        )}\r\n        {combatant.hasTalent(SPELLS.HOLY_PRISM_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.HOLY_PRISM_TALENT.id} />\r\n        )}\r\n        <Requirement\r\n          name={\r\n            <Trans id=\"paladin.holy.modules.checklist.totalFillerWhileHolyShock\">\r\n              Total filler <SpellLink id={SPELLS.FLASH_OF_LIGHT.id} />s cast while{' '}\r\n              <span style={{ whiteSpace: 'nowrap' }}>\r\n                <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} />\r\n              </span>{' '}\r\n              was available\r\n            </Trans>\r\n          }\r\n          thresholds={thresholds.fillerFlashOfLight}\r\n        />\r\n      </Rule>\r\n      <Rule\r\n        name={<Trans id=\"paladin.holy.modules.checklist.useCooldownsEffectively\">Use your cooldowns effectively</Trans>}\r\n        description={\r\n          <Trans id=\"paladin.holy.modules.checklist.useCooldownsEffectively.description\">\r\n            Your cooldowns are an important contributor to your healing throughput. Try to get in as\r\n            many efficient casts as the fight allows.{' '}\r\n            <a\r\n              href=\"https://www.wowhead.com/holy-paladin-rotation-guide#gameplay-and-priority-list\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              More info.\r\n            </a>\r\n          </Trans>\r\n        }\r\n      >\r\n        {/* Avenging Crusader replaces Avenging Wrath */}\r\n        {!combatant.hasTalent(SPELLS.AVENGING_CRUSADER_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.AVENGING_WRATH.id} />\r\n        )}\r\n        {combatant.hasTalent(SPELLS.AVENGING_CRUSADER_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.AVENGING_CRUSADER_TALENT.id} />\r\n        )}\r\n        {combatant.hasTalent(SPELLS.HOLY_AVENGER_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.HOLY_AVENGER_TALENT.id} />\r\n        )}\r\n        <AbilityRequirement spell={SPELLS.AURA_MASTERY.id} />\r\n        {/* We can't detect race, so disable this when it has never been cast. */}\r\n        {castEfficiency.getCastEfficiencyForSpellId(SPELLS.ARCANE_TORRENT_MANA1.id) && (\r\n          <AbilityRequirement spell={SPELLS.ARCANE_TORRENT_MANA1.id} />\r\n        )}\r\n      </Rule>\r\n      <Rule\r\n        name={\r\n          <Trans id=\"paladin.holy.modules.checklist.useLightOfTheMartyrOnlyWhenNecessary\">\r\n            Only use{' '}\r\n            <SpellLink id={SPELLS.LIGHT_OF_THE_MARTYR.id} onClick={e => e.preventDefault()} /> when\r\n            absolutely necessary\r\n          </Trans>\r\n        }\r\n        description={\r\n          <Trans id=\"paladin.holy.modules.checklist.useLightOfTheMartyrOnlyWhenNecessary.description\">\r\n            <SpellLink id={SPELLS.LIGHT_OF_THE_MARTYR.id} /> is an inefficient spell to cast\r\n            compared to the alternatives. Try to only cast{' '}\r\n            <SpellLink id={SPELLS.LIGHT_OF_THE_MARTYR.id} /> when it will save someone's life or\r\n            when you have to move and all other instant cast spells are on cooldown.\r\n          </Trans>\r\n        }\r\n      >\r\n        <Requirement\r\n          name={<Trans id=\"paladin.holy.modules.checklist.totalFillerPerMinute\">Total filler casts per minute</Trans>}\r\n          thresholds={thresholds.fillerLightOfTheMartyrsCpm}\r\n        />\r\n        <Requirement\r\n          name={\r\n            <Trans id=\"paladin.holy.modules.checklist.totalFillerPerMinuteWhileHolyShock\">\r\n              Total filler casts while <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} /> was available\r\n            </Trans>\r\n          }\r\n          thresholds={thresholds.fillerLightOfTheMartyrsInefficientCpm}\r\n        />\r\n      </Rule>\r\n      <Rule\r\n        name={<Trans id=\"paladin.holy.modules.checklist.dontTunnelTanks\">Don't tunnel the tanks</Trans>}\r\n        description={\r\n          <Trans id=\"paladin.holy.modules.checklist.dontTunnelTanks.description\">\r\n            A common misconception about Holy Paladins is that we should focus tanks when healing.\r\n            This is actually inefficient. Let your beacons do most of the work, ask your co-healers\r\n            to keep efficient HoTs on the tanks and only directly heal the tanks when they would\r\n            otherwise die.\r\n          </Trans>\r\n        }\r\n      >\r\n        <Requirement\r\n          name={<Trans id=\"paladin.holy.modules.checklist.directBeaconHealing\">Direct beacon healing</Trans>}\r\n          thresholds={thresholds.directBeaconHealing}\r\n        />\r\n      </Rule>\r\n      <Rule\r\n        name={\r\n          <Trans id=\"paladin.holy.modules.checklist.positionWell\">\r\n            Position yourself well to maximize{' '}\r\n            <SpellLink id={SPELLS.MASTERY_LIGHTBRINGER.id} onClick={e => e.preventDefault()} />\r\n          </Trans>\r\n        }\r\n        description={\r\n          <Trans id=\"paladin.holy.modules.checklist.positionWell.description\">\r\n            <SpellLink id={SPELLS.MASTERY_LIGHTBRINGER.id} /> has a big impact on the strength of\r\n            your heals. Try to stay close to the people you are healing to benefit the most from\r\n            your Mastery. Use <SpellLink id={SPELLS.RULE_OF_LAW_TALENT.id} /> when healing people\r\n            further away.\r\n          </Trans>\r\n        }\r\n      >\r\n        <Requirement\r\n          name={<Trans id=\"paladin.holy.modules.checklist.masteryEffectiveness\">Mastery effectiveness</Trans>}\r\n          thresholds={thresholds.masteryEffectiveness}\r\n        />\r\n      </Rule>\r\n      <Rule\r\n        name={\r\n          <Trans id=\"paladin.holy.modules.checklist.useAllOfMana\">\r\n            Use all of your{' '}\r\n            <ResourceLink id={RESOURCE_TYPES.MANA.id} onClick={e => e.preventDefault()} />\r\n          </Trans>\r\n        }\r\n        description={\r\n          <Trans id=\"paladin.holy.modules.checklist.useAllOfMana.description\">\r\n            If you have a large amount of mana left at the end of the fight that's mana you could\r\n            have turned into healing. Try to use all your mana during a fight. A good rule of\r\n            thumb is to try to match your mana level with the boss's health.\r\n          </Trans>\r\n        }\r\n      >\r\n        <Requirement name={<Trans id=\"paladin.holy.modules.checklist.manaLeft\">Mana left</Trans>} thresholds={thresholds.manaLeft} />\r\n      </Rule>\r\n      <Rule\r\n        name={<Trans id=\"paladin.holy.modules.checklist.avoidBeingInactive\">Try to avoid being inactive for a large portion of the fight</Trans>}\r\n        description={\r\n          <Trans id=\"paladin.holy.modules.checklist.avoidBeingInactive.description\">\r\n            While it's suboptimal to always be casting as a healer you should still try to always be\r\n            doing something during the entire fight and high downtime is inexcusable. You can reduce\r\n            your downtime by reducing the delay between casting spells, anticipating movement,\r\n            moving during the GCD, and{' '}\r\n            <TooltipElement\r\n              content={\r\n                <Trans id=\"paladin.holy.modules.checklist.avoidBeingInactive.description.ignoreDamage\">\r\n                  While helping with damage would be optimal, it's much less important as a healer\r\n                  than any of the other suggestions on this checklist. You should ignore this\r\n                  suggestion while you are having difficulties with anything else.\r\n                </Trans>\r\n              }\r\n            >\r\n              when you're not healing try to contribute some damage*\r\n            </TooltipElement>\r\n            .\r\n          </Trans>\r\n        }\r\n      >\r\n        <Requirement\r\n          name={<Trans id=\"paladin.holy.modules.checklist.nonHealingTime\">Non healing time</Trans>}\r\n          thresholds={thresholds.nonHealingTimeSuggestionThresholds}\r\n        />\r\n        <Requirement\r\n          name={<Trans id=\"paladin.holy.modules.checklist.downtime\">Downtime</Trans>}\r\n          thresholds={thresholds.downtimeSuggestionThresholds}\r\n        />\r\n      </Rule>\r\n      <Rule\r\n        name={<Trans id=\"paladin.holy.modules.checklist.avoidOverhealing\">Avoid overhealing</Trans>}\r\n        description={\r\n          <Trans id=\"paladin.holy.modules.checklist.avoidOverhealing.description\">\r\n            Pick the right targets when healing and use the right abilities at the right time. While\r\n            overhealing still transfers to your beacons, it remains inefficient. Overhealing might\r\n            be unavoidable when there's not a lot of damage taken (such as in normal mode) or when\r\n            bringing too many healers.\r\n          </Trans>\r\n        }\r\n      >\r\n        <Requirement\r\n          name={<SpellLink id={SPELLS.HOLY_SHOCK_HEAL.id} />}\r\n          thresholds={thresholds.overhealing.holyShock}\r\n        />\r\n        <Requirement\r\n          name={<SpellLink id={SPELLS.LIGHT_OF_DAWN_HEAL.id} />}\r\n          thresholds={thresholds.overhealing.lightOfDawn}\r\n        />\r\n        <Requirement\r\n          name={<SpellLink id={SPELLS.FLASH_OF_LIGHT.id} />}\r\n          thresholds={thresholds.overhealing.flashOfLight}\r\n        />\r\n        {combatant.hasTalent(SPELLS.BESTOW_FAITH_TALENT.id) && (\r\n          <Requirement\r\n            name={<SpellLink id={SPELLS.BESTOW_FAITH_TALENT.id} />}\r\n            thresholds={thresholds.overhealing.bestowFaith}\r\n          />\r\n        )}\r\n      </Rule>\r\n      {!combatant.hasTalent(SPELLS.BEACON_OF_VIRTUE_TALENT.id) && (\r\n        <Rule\r\n          name={<Trans id=\"paladin.holy.modules.checklist.keepBeaconsActive\">Keep your beacons active</Trans>}\r\n          description={\r\n            <Trans id=\"paladin.holy.modules.checklist.keepBeaconsActive.description\">\r\n              Beacon of Light and Beacon of Faith, if talented, should be applied prior to the fight\r\n              starting and maintained active for as long as the paladin is alive. Any beacon\r\n              downtime will result in lost healing and efficiency.\r\n            </Trans>\r\n          }\r\n        >\r\n          {!combatant.hasTalent(SPELLS.BEACON_OF_VIRTUE_TALENT.id) && (\r\n            <Requirement\r\n              name={\r\n                <Trans id=\"paladin.holy.modules.checklist.beaconOfLightAppliedPrepull\">\r\n                  <SpellLink\r\n                    id={SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF.id}\r\n                    onClick={e => e.preventDefault()}\r\n                  />{' '}\r\n                  applied prepull\r\n                </Trans>\r\n              }\r\n              thresholds={thresholds.beaconUptimeBoL}\r\n            />\r\n          )}\r\n          {!combatant.hasTalent(SPELLS.BEACON_OF_VIRTUE_TALENT.id) && (\r\n            <Requirement\r\n              name={\r\n                <Trans id=\"paladin.holy.modules.checklist.beaconOfVirtueTalentUptime\">\r\n                  <SpellLink\r\n                    id={SPELLS.BEACON_OF_LIGHT_CAST_AND_BUFF.id}\r\n                    onClick={e => e.preventDefault()}\r\n                  />{' '}\r\n                  Uptime\r\n                </Trans>\r\n              }\r\n              thresholds={thresholds.beaconUptimeBoLUptime}\r\n            />\r\n          )}\r\n          {combatant.hasTalent(SPELLS.BEACON_OF_FAITH_TALENT.id) && (\r\n            <Requirement\r\n              name={\r\n                <Trans id=\"paladin.holy.modules.checklist.beaconOfFaithTalentAppliedPrepull\">\r\n                  <SpellLink\r\n                    id={SPELLS.BEACON_OF_FAITH_TALENT.id}\r\n                    onClick={e => e.preventDefault()}\r\n                  />{' '}\r\n                  applied prepull\r\n                </Trans>\r\n              }\r\n              thresholds={thresholds.beaconUptimeBoF}\r\n            />\r\n          )}\r\n          {combatant.hasTalent(SPELLS.BEACON_OF_FAITH_TALENT.id) && (\r\n            <Requirement\r\n              name={\r\n                <Trans id=\"paladin.holy.modules.checklist.beaconOfFaithTalentUptime\">\r\n                  <SpellLink\r\n                    id={SPELLS.BEACON_OF_FAITH_TALENT.id}\r\n                    onClick={e => e.preventDefault()}\r\n                  />{' '}\r\n                  Uptime\r\n                </Trans>\r\n              }\r\n              thresholds={thresholds.beaconUptimeBoFUptime}\r\n            />\r\n          )}\r\n        </Rule>\r\n      )}\r\n      <PreparationRule thresholds={thresholds} />\r\n      <Rule\r\n        name={<Trans id=\"paladin.holy.modules.checklist.useSupportiveAbilities\">Use your supportive abilities</Trans>}\r\n        description={\r\n          <Trans id=\"paladin.holy.modules.checklist.useSupportiveAbilities.description\">\r\n            While you shouldn't aim to cast defensives and externals on cooldown, be aware of them\r\n            and try to use them whenever effective. Not using them at all indicates you might not be\r\n            aware of them enough or not utilizing them optimally.\r\n          </Trans>\r\n        }\r\n      >\r\n        {combatant.hasTalent(SPELLS.RULE_OF_LAW_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.RULE_OF_LAW_TALENT.id} />\r\n        )}\r\n        <AbilityRequirement spell={SPELLS.DIVINE_STEED.id} />\r\n        <AbilityRequirement spell={SPELLS.DIVINE_PROTECTION.id} />\r\n        <AbilityRequirement spell={SPELLS.BLESSING_OF_SACRIFICE.id} />\r\n        <AbilityRequirement spell={SPELLS.LAY_ON_HANDS.id} />\r\n      </Rule>\r\n    </Checklist>\r\n  );\r\n};\r\n\r\nHolyPaladinChecklist.propTypes = {\r\n  castEfficiency: PropTypes.object.isRequired,\r\n  combatant: PropTypes.shape({\r\n    hasTalent: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n  thresholds: PropTypes.object.isRequired,\r\n  owner: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default HolyPaladinChecklist;\r\n","import React from 'react';\r\n\r\nimport BaseChecklist from 'parser/shared/modules/features/Checklist/Module';\r\nimport CastEfficiency from 'parser/shared/modules/CastEfficiency';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\nimport ManaValues from 'parser/shared/modules/ManaValues';\r\nimport PreparationRuleAnalyzer from 'parser/shared/modules/features/Checklist/PreparationRuleAnalyzer';\r\n\r\nimport MasteryEffectiveness from '../MasteryEffectiveness';\r\nimport AlwaysBeCasting from '../AlwaysBeCasting';\r\nimport DirectBeaconHealing from '../beacons/DirectBeaconHealing';\r\nimport BeaconUptime from '../beacons/BeaconUptime';\r\nimport FillerLightOfTheMartyrs from '../FillerLightOfTheMartyrs';\r\nimport FillerFlashOfLight from '../FillerFlashOfLight';\r\nimport Overhealing from '../Overhealing';\r\n\r\nimport Component from './Component';\r\n\r\nclass Checklist extends BaseChecklist {\r\n  static dependencies = {\r\n    combatants: Combatants,\r\n    castEfficiency: CastEfficiency,\r\n    masteryEffectiveness: MasteryEffectiveness,\r\n    alwaysBeCasting: AlwaysBeCasting,\r\n    directBeaconHealing: DirectBeaconHealing,\r\n    beaconUptime: BeaconUptime,\r\n    fillerLightOfTheMartyrs: FillerLightOfTheMartyrs,\r\n    fillerFlashOfLight: FillerFlashOfLight,\r\n    manaValues: ManaValues,\r\n    preparationRuleAnalyzer: PreparationRuleAnalyzer,\r\n    overhealing: Overhealing,\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Component\r\n        combatant={this.combatants.selected}\r\n        castEfficiency={this.castEfficiency}\r\n        owner={this.owner}\r\n        thresholds={{\r\n          ...this.preparationRuleAnalyzer.thresholds,\r\n\r\n          fillerFlashOfLight: this.fillerFlashOfLight.suggestionThresholds,\r\n          masteryEffectiveness: this.masteryEffectiveness.suggestionThresholds,\r\n          nonHealingTimeSuggestionThresholds: this.alwaysBeCasting\r\n            .nonHealingTimeSuggestionThresholds,\r\n          downtimeSuggestionThresholds: this.alwaysBeCasting.downtimeSuggestionThresholds,\r\n          directBeaconHealing: this.directBeaconHealing.suggestionThresholds,\r\n          beaconUptimeBoL: this.beaconUptime.suggestionThresholdsBoL,\r\n          beaconUptimeBoLUptime: this.beaconUptime.suggestionThresholdsBoLUptime,\r\n          beaconUptimeBoF: this.beaconUptime.suggestionThresholdsBoF,\r\n          beaconUptimeBoFUptime: this.beaconUptime.suggestionThresholdsBoFUptime,\r\n          fillerLightOfTheMartyrsCpm: this.fillerLightOfTheMartyrs.cpmSuggestionThresholds,\r\n          fillerLightOfTheMartyrsInefficientCpm: this.fillerLightOfTheMartyrs\r\n            .inefficientCpmSuggestionThresholds,\r\n          manaLeft: this.manaValues.suggestionThresholds,\r\n          overhealing: {\r\n            holyShock: this.overhealing.holyShockSuggestionThresholds,\r\n            lightOfDawn: this.overhealing.lightOfDawnSuggestionThresholds,\r\n            flashOfLight: this.overhealing.flashOfLightSuggestionThresholds,\r\n            bestowFaith: this.overhealing.bestowFaithSuggestionThresholds,\r\n          },\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Checklist;\r\n","import SPELLS from 'common/SPELLS';\r\n\r\nimport CoreCooldownThroughputTracker, {\r\n  BUILT_IN_SUMMARY_TYPES,\r\n} from 'parser/shared/modules/CooldownThroughputTracker';\r\n\r\nclass CooldownThroughputTracker extends CoreCooldownThroughputTracker {\r\n  static cooldownSpells = [\r\n    ...CoreCooldownThroughputTracker.cooldownSpells,\r\n    {\r\n      spell: SPELLS.AVENGING_WRATH,\r\n      summary: [\r\n        BUILT_IN_SUMMARY_TYPES.HEALING,\r\n        BUILT_IN_SUMMARY_TYPES.OVERHEALING,\r\n        BUILT_IN_SUMMARY_TYPES.MANA,\r\n      ],\r\n    },\r\n    {\r\n      spell: SPELLS.AVENGING_CRUSADER_TALENT,\r\n      summary: [\r\n        BUILT_IN_SUMMARY_TYPES.HEALING,\r\n        BUILT_IN_SUMMARY_TYPES.OVERHEALING,\r\n        BUILT_IN_SUMMARY_TYPES.MANA,\r\n      ],\r\n    },\r\n    {\r\n      spell: SPELLS.HOLY_AVENGER_TALENT,\r\n      summary: [\r\n        BUILT_IN_SUMMARY_TYPES.HEALING,\r\n        BUILT_IN_SUMMARY_TYPES.OVERHEALING,\r\n        BUILT_IN_SUMMARY_TYPES.MANA,\r\n      ],\r\n    },\r\n    {\r\n      spell: SPELLS.AURA_MASTERY,\r\n      summary: [\r\n        BUILT_IN_SUMMARY_TYPES.HEALING,\r\n        BUILT_IN_SUMMARY_TYPES.OVERHEALING,\r\n        BUILT_IN_SUMMARY_TYPES.MANA,\r\n      ],\r\n    },\r\n  ];\r\n}\r\n\r\nexport default CooldownThroughputTracker;\r\n","import SPELLS from 'common/SPELLS';\r\n\r\n/*\r\n * Fields:\r\n * int: spell scales with Intellect\r\n * crit: spell scales with (is able to or procced from) Critical Strike\r\n * hasteHpm: spell does more healing due to Haste, e.g. HoTs that gain more ticks\r\n * hasteHpct: spell can be cast more frequently due to Haste, basically any spell except for non haste scaling CDs\r\n * mastery: spell is boosted by Mastery\r\n * masteryStack: spell's HoT counts as a Mastery Stack\r\n * vers: spell scales with Versatility\r\n * multiplier: spell scales with whatever procs it, should be ignored for purpose of weights and for 'total healing' number\r\n * ignored: spell should be ignored for purpose of stat weights\r\n */\r\n\r\n// This only works with actual healing events; casts are not recognized.\r\nexport default {\r\n  [SPELLS.HOLY_SHOCK_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.LIGHT_OF_DAWN_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.JUDGMENT_OF_LIGHT_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.BESTOW_FAITH_TALENT.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: false, // static CD\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.LIGHTS_HAMMER_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: false, // static CD\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.HOLY_PRISM_HEAL_DIRECT.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: false, // static CD\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.HOLY_PRISM_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: false, // static CD\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.LIGHT_OF_THE_MARTYR.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.FLASH_OF_LIGHT.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.HOLY_LIGHT.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.AURA_OF_MERCY_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: false,\r\n    mastery: false, // confirmed many times this doesn't scale with Mastery\r\n    vers: true,\r\n  },\r\n  [SPELLS.AVENGING_CRUSADER_HEAL_NORMAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: false, // it just raw scales off of the damage done\r\n    vers: true,\r\n  },\r\n  [SPELLS.AVENGING_CRUSADER_HEAL_CRIT.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: false, // it just raw scales off of the damage done\r\n    vers: true,\r\n  },\r\n  [SPELLS.BEACON_OF_LIGHT_HEAL.id]: {\r\n    // This gets special treatment with the `on_beacontransfer` event\r\n    ignored: true,\r\n  },\r\n  [SPELLS.LAY_ON_HANDS.id]: {\r\n    ignored: true,\r\n  },\r\n  [SPELLS.WORD_OF_GLORY.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n  [SPELLS.GLIMMER_OF_LIGHT_HEAL_TALENT.id]: {\r\n    // Holy Paladin Talent\r\n    int: true,\r\n    crit: true,\r\n    hasteHpct: true,\r\n    mastery: true,\r\n    vers: true,\r\n  }\r\n};\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport HIT_TYPES from 'game/HIT_TYPES';\r\nimport BaseHealerStatValues from 'parser/shared/modules/features/BaseHealerStatValues';\r\nimport STAT from 'parser/shared/modules/features/STAT';\r\nimport HealingValue from 'parser/shared/modules/HealingValue';\r\nimport CritEffectBonus from 'parser/shared/modules/helpers/CritEffectBonus';\r\nimport StatTracker from 'parser/shared/modules/StatTracker';\r\n\r\nimport Events from 'parser/core/Events';\r\n\r\nimport SPELL_INFO from './StatValuesSpellInfo';\r\nimport MasteryEffectiveness from './MasteryEffectiveness';\r\nimport BeaconHealSource from './beacons/BeaconHealSource';\r\n\r\nconst INFUSION_OF_LIGHT_BUFF_EXPIRATION_BUFFER = 150; // the buff expiration can occur several MS before the heal event is logged, this is the buffer time that an IoL charge may have dropped during which it will still be considered active.\r\nconst INFUSION_OF_LIGHT_BUFF_MINIMAL_ACTIVE_TIME = 200; // if someone heals with FoL and then immediately casts a HS race conditions may occur. This prevents that (although the buff is probably not applied before the FoL).\r\nconst INFUSION_OF_LIGHT_FOL_HEALING_INCREASE = 0.4;\r\n\r\n/**\r\n * Holy Paladin Stat Values Methodology\r\n *\r\n * A full explanation of this approach can be read in the issue linked below. This was written for theorycrafters without needing to understand code.\r\n * (but it might be outdated, that's always the risk of documentation)\r\n * https://github.com/WoWAnalyzer/WoWAnalyzer/issues/657\r\n */\r\nclass StatValues extends BaseHealerStatValues {\r\n  static dependencies = {\r\n    critEffectBonus: CritEffectBonus,\r\n    statTracker: StatTracker,\r\n    masteryEffectiveness: MasteryEffectiveness, // this added the `masteryEffectiveness` property to spells that are affected by Mastery\r\n    beaconHealSource: BeaconHealSource, // for the events\r\n  };\r\n\r\n  spellInfo = SPELL_INFO;\r\n  qeLive = true;\r\n  active = true;\r\n\r\n  constructor(options){\r\n    super(options);\r\n    this.addEventListener(Events.beacontransfer, this.onBeaconTransfer);\r\n  }\r\n\r\n  onHeal(event) {\r\n    if (event.ability.guid === SPELLS.BEACON_OF_LIGHT_HEAL.id) {\r\n      // Handle this via the `on_beacontransfer` event\r\n      return;\r\n    }\r\n    super.onHeal(event);\r\n  }\r\n  onBeaconTransfer(event) {\r\n    const spellInfo = this._getSpellInfo(event.originalHeal);\r\n    const healVal = new HealingValue(event.amount, event.absorbed, event.overheal);\r\n    const targetHealthPercentage = (event.hitPoints - healVal.effective) / event.maxHitPoints; // hitPoints contains HP *after* the heal\r\n    this._handleHeal(spellInfo, event.originalHeal, healVal, targetHealthPercentage);\r\n  }\r\n  _getCritChance(event) {\r\n    const spellId = event.ability.guid;\r\n\r\n    // eslint-disable-next-line prefer-const\r\n    let { baseCritChance, ratingCritChance } = super._getCritChance(event);\r\n\r\n    if (this.selectedCombatant.hasBuff(SPELLS.AVENGING_WRATH.id)) {\r\n      // Avenging Wrath increases the crit chance by 30%, this 30% does not add to the rating contribution since it's unaffected by stats.\r\n      baseCritChance += 0.3;\r\n    }\r\n    if (spellId === SPELLS.HOLY_SHOCK_HEAL.id) {\r\n      // Holy Shock has a base 30% crit chance\r\n      baseCritChance += 0.3;\r\n\r\n      if (this.selectedCombatant.hasBuff(SPELLS.AVENGING_WRATH_GUARANTEED_CRIT_BUFF.id)) {\r\n        // Avenging Wrath guarantees the first Holy Shock crits.\r\n        baseCritChance = 1;\r\n      }\r\n    }\r\n\r\n    return { baseCritChance, ratingCritChance };\r\n  }\r\n  _isCrit(event) {\r\n    // Avenging Crusader has two spell ids, one for normal hits and one for crits. Their hit types also reflect this so it is handled automatically.\r\n    return event.hitType === HIT_TYPES.CRIT;\r\n  }\r\n  _criticalStrike(event, healVal) {\r\n    return (\r\n      super._criticalStrike(event, healVal) +\r\n      this._criticalStrikeInfusionOfLightProcs(event, healVal)\r\n    );\r\n  }\r\n  _criticalStrikeInfusionOfLightProcs(event, healVal) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId !== SPELLS.FLASH_OF_LIGHT.id && spellId !== SPELLS.HOLY_LIGHT.id) {\r\n      return 0;\r\n    }\r\n    const hasIol = this.selectedCombatant.hasBuff(\r\n      SPELLS.INFUSION_OF_LIGHT.id,\r\n      event.timestamp,\r\n      INFUSION_OF_LIGHT_BUFF_EXPIRATION_BUFFER,\r\n      INFUSION_OF_LIGHT_BUFF_MINIMAL_ACTIVE_TIME,\r\n    );\r\n    if (!hasIol) {\r\n      return 0;\r\n    }\r\n\r\n    if (spellId === SPELLS.FLASH_OF_LIGHT.id) {\r\n      const regularHeal = healVal.raw / (1 + INFUSION_OF_LIGHT_FOL_HEALING_INCREASE);\r\n      const effectiveIolHealing = Math.max(0, healVal.effective - regularHeal);\r\n\r\n      const { baseCritChance, ratingCritChance } = this._getCritChance(event);\r\n\r\n      const totalCritChance = baseCritChance + ratingCritChance;\r\n      if (totalCritChance > 1 + 1 / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentHasteRating, this.statTracker.statBaselineRatingPerPercent[STAT.CRITICAL_STRIKE])) {\r\n        // If the crit chance was more than 100%+1 rating, then the last rating was over the cap and worth 0.\r\n        return 0;\r\n      }\r\n      const ratingCritChanceContribution = 1 - baseCritChance / totalCritChance;\r\n\r\n      return (\r\n        (effectiveIolHealing * ratingCritChanceContribution) / this.statTracker.currentCritRating\r\n      );\r\n    }\r\n    if (spellId === SPELLS.HOLY_LIGHT.id) {\r\n      // TODO: We might be able to use the Haste stat value to value the CDR\r\n      return 0;\r\n    }\r\n    return 0;\r\n  }\r\n  _mastery(event, healVal) {\r\n    if (healVal.overheal) {\r\n      // If a spell overheals, it could not have healed for more. Seeing as Mastery only adds HP on top of the existing heal we can skip it as increasing the power of this heal would only be more overhealing.\r\n      return 0;\r\n    }\r\n    if (event.masteryEffectiveness === undefined) {\r\n      console.error(\r\n        'This spell does not have a known masteryEffectiveness:',\r\n        event.ability.guid,\r\n        event.ability.name,\r\n      );\r\n      return 0;\r\n    }\r\n\r\n    const masteryEffectiveness = event.masteryEffectiveness;\r\n    const healIncreaseFromOneMastery =\r\n      (this.statTracker.statMultiplier.mastery / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentMasteryRating, this.statTracker.statBaselineRatingPerPercent[STAT.MASTERY], this.selectedCombatant.spec.masteryCoefficient)) *\r\n      masteryEffectiveness;\r\n    const baseHeal =\r\n      healVal.effective / (1 + this.statTracker.currentMasteryPercentage * masteryEffectiveness);\r\n\r\n    return baseHeal * healIncreaseFromOneMastery;\r\n  }\r\n\r\n  moreInformationLink =\r\n    'https://github.com/WoWAnalyzer/WoWAnalyzer/blob/master/src/parser/paladin/holy/modules/StatValues.md';\r\n  _prepareResults() {\r\n    return [\r\n      STAT.INTELLECT,\r\n      STAT.CRITICAL_STRIKE,\r\n      {\r\n        stat: STAT.HASTE_HPCT,\r\n        tooltip: (\r\n          <Trans id=\"paladin.holy.modules.statValues.hpct\">\r\n            HPCT stands for \"Healing per Cast Time\". This is the max value that Haste would be worth\r\n            if you would cast everything you are already casting (that scales with Haste) faster.\r\n            Mana and overhealing are not accounted for in any way.\r\n            <br />\r\n            <br />\r\n            The real value of Haste (HPCT) will be between 0 and the shown value. It depends on\r\n            various things, such as if you have the mana left to spend, if the gained casts would\r\n            overheal, and how well you are at casting spells end-to-end. If you are going OOM before\r\n            the end of the fight you might instead want to drop some Haste or cast fewer bad heals.\r\n            If you had mana left-over, Haste could help you convert that into healing. If your Haste\r\n            usage is optimal Haste will then be worth the shown max value.\r\n            <br />\r\n            <br />\r\n            Haste can also help you safe lives during intense damage phases. If you notice you're\r\n            GCD capped when people are dying, Haste might help you land more heals. This may\r\n            contribute more towards actually getting the kill.\r\n            <br />\r\n            <br />\r\n            <b>\r\n              The easiest advice here is to get Haste to a point you're comfortable at. Experiment\r\n              with different Haste levels, and don't drop a lot of item level for it.\r\n            </b>\r\n          </Trans>\r\n        ),\r\n      },\r\n      // STAT.HASTE_HPM, this is always 0 for Holy Paladins\r\n      STAT.MASTERY,\r\n      STAT.VERSATILITY,\r\n      STAT.VERSATILITY_DR,\r\n      STAT.LEECH,\r\n    ];\r\n  }\r\n}\r\n\r\nexport default StatValues;\r\n","import SPELLS from 'common/SPELLS';\r\nimport BaseMightOfTheMountain, {\r\n  CRIT_EFFECT,\r\n} from 'parser/shared/modules/racials/dwarf/MightOfTheMountain';\r\n\r\nimport Events from 'parser/core/Events';\r\n\r\nimport BeaconHealSource from './beacons/BeaconHealSource';\r\n\r\nclass MightOfTheMountain extends BaseMightOfTheMountain {\r\n  static dependencies = {\r\n    ...BaseMightOfTheMountain.dependencies,\r\n    // We use its \"beacontransfer\" event\r\n    beaconHealSource: BeaconHealSource,\r\n  };\r\n  constructor(options){\r\n    super(options);\r\n    this.addEventListener(Events.beacontransfer, this.onBeaconTransfer);\r\n  }\r\n\r\n  onHeal(event) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === SPELLS.BEACON_OF_LIGHT_HEAL.id) {\r\n      return;\r\n    }\r\n    super.onHeal(event);\r\n  }\r\n  onBeaconTransfer(event) {\r\n    if (!this.isApplicableHeal(event.originalHeal)) {\r\n      return;\r\n    }\r\n    const spellId = event.originalHeal.ability.guid;\r\n    if (spellId === SPELLS.BEACON_OF_LIGHT_HEAL.id) {\r\n      return;\r\n    }\r\n\r\n    const amount = event.amount;\r\n    const absorbed = event.absorbed || 0;\r\n    const overheal = event.overheal || 0;\r\n    const raw = amount + absorbed + overheal;\r\n    const rawNormalPart = raw / this.critEffectBonus.getBonus(event.originalHeal);\r\n    const rawDrapeHealing = rawNormalPart * CRIT_EFFECT;\r\n\r\n    const effectiveHealing = Math.max(0, rawDrapeHealing - overheal);\r\n\r\n    this.healing += effectiveHealing;\r\n  }\r\n}\r\n\r\nexport default MightOfTheMountain;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellLink from 'common/SpellLink';\r\nimport { formatPercentage } from 'common/format';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport StatisticBar from 'interface/statistics/StatisticBar';\r\nimport UptimeBar from 'interface/statistics/components/UptimeBar';\r\nimport SpellIcon from 'common/SpellIcon';\r\n\r\nclass RuleOfLaw extends Analyzer {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.RULE_OF_LAW_TALENT.id);\r\n  }\r\n\r\n  get uptime() {\r\n    return (\r\n      this.selectedCombatant.getBuffUptime(SPELLS.RULE_OF_LAW_TALENT.id) / this.owner.fightDuration\r\n    );\r\n  }\r\n\r\n  get uptimeSuggestionThresholds() {\r\n    return {\r\n      actual: this.uptime,\r\n      isLessThan: {\r\n        minor: 0.25,\r\n        average: 0.2,\r\n        major: 0.1,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n  suggestions(when) {\r\n    when(this.uptimeSuggestionThresholds).addSuggestion((suggest, actual, recommended) => suggest(\r\n        <Trans id=\"paladin.holy.modules.talents.ruleOfLaw.suggestion\">\r\n          Your <SpellLink id={SPELLS.RULE_OF_LAW_TALENT.id} /> uptime can be improved. Try keeping\r\n          at least 1 charge on cooldown; you should (almost) never be at max charges.\r\n        </Trans>,\r\n      )\r\n        .icon(SPELLS.RULE_OF_LAW_TALENT.icon)\r\n        .actual(<Trans id=\"paladin.holy.modules.talents.ruleOfLaw.actual\">{formatPercentage(actual)}% uptime</Trans>)\r\n        .recommended(<Trans id=\"paladin.holy.modules.talents.ruleOfLaw.recommended\">&gt;{formatPercentage(recommended)}% is recommended</Trans>));\r\n  }\r\n  statistic() {\r\n    const history = this.selectedCombatant.getBuffHistory(SPELLS.RULE_OF_LAW_TALENT.id);\r\n\r\n    return (\r\n      <StatisticBar position={STATISTIC_ORDER.CORE(31)} wide size=\"small\">\r\n        <div className=\"flex\">\r\n          <div className=\"flex-sub icon\">\r\n            <SpellIcon id={SPELLS.RULE_OF_LAW_TALENT.id} />\r\n          </div>\r\n          <div className=\"flex-sub value\">\r\n            <Trans id=\"paladin.holy.modules.talents.ruleOfLaw.smallUptime\">\r\n              {formatPercentage(this.uptime, 0)}% <small>uptime</small>\r\n            </Trans>\r\n          </div>\r\n          <div className=\"flex-main chart\" style={{ padding: 15 }}>\r\n            <UptimeBar\r\n              uptimeHistory={history}\r\n              start={this.owner.fight.start_time}\r\n              end={this.owner.fight.end_time}\r\n              style={{ height: '100%' }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </StatisticBar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RuleOfLaw;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport fetchWcl from 'common/fetchWclApi';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport { formatThousands, formatNumber } from 'common/format';\r\n\r\nimport LazyLoadStatisticBox, { STATISTIC_ORDER } from 'interface/others/LazyLoadStatisticBox';\r\n\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\nimport makeWclUrl from 'common/makeWclUrl';\r\nimport SpellLink from 'common/SpellLink';\r\nimport Events, { EventType } from 'parser/core/Events';\r\n\r\n// Source: https://github.com/MartijnHols/HolyPaladin/blob/master/Spells/Talents/60/DevotionAura.md#about-the-passive-effect\r\nconst DEVOTION_AURA_PASSIVE_DAMAGE_REDUCTION = .03;\r\nconst DEVOTION_AURA_ACTIVE_DAMAGE_REDUCTION = 0.2;\r\n\r\n/**\r\n * Falling damage is considered \"pure\" or w/e damage meaning it doesn't get reduced by damage reductions. The ability description of such an event can look like this: {\r\n\t\t\"name\": \"Falling\",\r\n\t\t\"guid\": 3,\r\n\t\t\"type\": 1,\r\n\t\t\"abilityIcon\": \"inv_axe_02.jpg\"\r\n\t},\r\n * `type: 1` seems to only be used by Falling, but I was unable to verify this. I want to ignore this kind of damage taken. I figured the savest solution would be to filter by ability id instead of type, but if you find another such ability that needs to be ignored and it has `type: 1` while nothing else does, we may want to refactor this.\r\n */\r\n// const THIS_MIGHT_BE_PURE_ABILITY_TYPE_ID = 1;\r\nconst FALLING_DAMAGE_ABILITY_ID = 3;\r\n\r\n/**\r\n * Devotion Aura\r\n * Damage dealt to allies within 10 yards is reduced by up to 10%, diminishing as more allies enter the aura.\r\n * While Aura Mastery is active, all affected allies gain 20% damage reduction.\r\n * ---\r\n * See the markdown file next to this module for info about how this is analyzed.\r\n */\r\nclass DevotionAuraDamageReduction extends Analyzer {\r\n  static dependencies = {\r\n    combatants: Combatants,\r\n  };\r\n\r\n  passiveDamageReduced = 0;\r\n  get passiveDrps() {\r\n    return (this.passiveDamageReduced / this.owner.fightDuration) * 1000;\r\n  }\r\n  activeDamageReduced = 0;\r\n  get activeDrps() {\r\n    return (this.activeDamageReduced / this.owner.fightDuration) * 1000;\r\n  }\r\n  get totalDamageReduced() {\r\n    return this.passiveDamageReduced + this.activeDamageReduced;\r\n  }\r\n  get totalDrps() {\r\n    return (this.totalDamageReduced / this.owner.fightDuration) * 1000;\r\n  }\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.addEventListener(Events.damage.to(SELECTED_PLAYER), this.onDamageTaken);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER), this.onApplyBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER), this.onRemoveBuff);\r\n  }\r\n\r\n  onDamageTaken(event) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === FALLING_DAMAGE_ABILITY_ID) {\r\n      return;\r\n    }\r\n\r\n    const isAuraMasteryActive = this.selectedCombatant.hasBuff(\r\n      SPELLS.AURA_MASTERY.id,\r\n      event.timestamp,\r\n      0,\r\n      0,\r\n      this.owner.playerId,\r\n    );\r\n\r\n    if (!isAuraMasteryActive) {\r\n      const damageTaken = event.amount + (event.absorbed || 0);\r\n      const damageReduced =\r\n        (damageTaken / (1 - this.totalPassiveDamageReduction)) * this.totalPassiveDamageReduction;\r\n      this.passiveDamageReduced += damageReduced;\r\n    }\r\n  }\r\n\r\n  buffsActive = 1;\r\n  get singleTargetDamageReduction() {\r\n    return DEVOTION_AURA_PASSIVE_DAMAGE_REDUCTION * this.buffsActive;\r\n  }\r\n  get totalPassiveDamageReduction() {\r\n    return this.singleTargetDamageReduction * this.buffsActive;\r\n  }\r\n  isApplicableBuffEvent(event) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId !== SPELLS.DEVOTION_AURA_BUFF.id) {\r\n      return false;\r\n    }\r\n    if (this.owner.toPlayer(event)) {\r\n      // We already include the selected player by default, if he dies the buff might show up. So to make sure it's not accidentally considered, we exclude it here.\r\n      return false;\r\n    }\r\n    const combatant = this.combatants.players[event.targetID];\r\n    if (!combatant) {\r\n      // Only players scale the buff, while pets can get it they do not affect the DR split\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n  onApplyBuff(event) {\r\n    if (!this.isApplicableBuffEvent(event)) {\r\n      return;\r\n    }\r\n    this.buffsActive += 1;\r\n    // this.debug('devo applied to', this.combatants.players[event.targetID].name, this.buffsActive);\r\n  }\r\n  onRemoveBuff(event) {\r\n    if (!this.isApplicableBuffEvent(event)) {\r\n      return;\r\n    }\r\n    this.buffsActive -= 1;\r\n    // this.debug('devo removed from', this.combatants.players[event.targetID].name, this.buffsActive);\r\n    if (this.buffsActive === 0) {\r\n      console.error(\r\n        'We lost more Devotion Aura buffs than we gained, this should not be possible as applybuffs are fabricated for all removebuffs.',\r\n      );\r\n      this.buffsActive = 1;\r\n    }\r\n  }\r\n\r\n  get auraMasteryUptimeFilter() {\r\n    const buffHistory = this.selectedCombatant.getBuffHistory(\r\n      SPELLS.AURA_MASTERY.id,\r\n      this.owner.playerId,\r\n    );\r\n    if (buffHistory.length === 0) {\r\n      return null;\r\n    }\r\n    // WCL's filter requires the timestamp to be relative to fight start\r\n    return buffHistory\r\n      .map(\r\n        buff =>\r\n          `(timestamp>=${buff.start - this.owner.fight.start_time} AND timestamp<=${buff.end -\r\n            this.owner.fight.start_time})`,\r\n      )\r\n      .join(' OR ');\r\n  }\r\n  get filter() {\r\n    const playerName = this.owner.player.name;\r\n    // Include any damage while selected player has AM, and is above the health requirement,\r\n    // and the mitigation percentage is greater than 19% (we use this to reduce the false positives. We use DR-1% to account for rounding)\r\n    return `(IN RANGE FROM target.name='${playerName}' AND type='${\r\n      EventType.ApplyBuff\r\n    }' AND ability.id=${SPELLS.AURA_MASTERY.id} TO target.name='${playerName}' AND type='${\r\n      EventType.RemoveBuff\r\n    }' AND ability.id=${SPELLS.AURA_MASTERY.id} END)\r\n      AND (mitigatedDamage/rawDamage*100)>${DEVOTION_AURA_ACTIVE_DAMAGE_REDUCTION * 100 - 1}`;\r\n  }\r\n\r\n  load() {\r\n    return fetchWcl(`report/tables/damage-taken/${this.owner.report.code}`, {\r\n      start: this.owner.fight.start_time,\r\n      end: this.owner.fight.end_time,\r\n      filter: this.filter,\r\n    }).then(json => {\r\n      console.log('Received AM damage taken', json);\r\n      const totalDamageTaken = json.entries.reduce(\r\n        (damageTaken, entry) => damageTaken + entry.total,\r\n        0,\r\n      );\r\n      this.activeDamageReduced =\r\n        (totalDamageTaken / (1 - DEVOTION_AURA_ACTIVE_DAMAGE_REDUCTION)) *\r\n        DEVOTION_AURA_ACTIVE_DAMAGE_REDUCTION;\r\n    });\r\n  }\r\n\r\n  statistic() {\r\n    const tooltip = (\r\n      <Trans id=\"paladin.holy.modules.talents.devotionAuraDamageReduction.tooltip\">\r\n        The total estimated damage reduced <strong>by the passive</strong> was{' '}\r\n        {formatThousands(this.passiveDamageReduced)} ({formatNumber(this.passiveDrps)} DRPS). This\r\n        has high accuracy.\r\n        <br />\r\n        The total estimated damage reduced <strong>during Aura Mastery</strong> was{' '}\r\n        {formatThousands(this.activeDamageReduced)} ({formatNumber(this.activeDrps)} DRPS). This has\r\n        a 99% accuracy.\r\n        <br />\r\n        <br />\r\n        This value is calculated using the <i>Optional DRs</i> method. This results in the lowest\r\n        possible damage reduction value being shown. This should be the correct value in most\r\n        circumstances.\r\n        <br />\r\n        <br />\r\n        Calculating the exact damage reduced by Devotion Aura is very time and resource consuming.\r\n        This method uses a very close estimation. The active damage reduced is calculated by taking\r\n        the total damage taken of the entire raid during <SpellLink\r\n          id={SPELLS.AURA_MASTERY.id}\r\n        />{' '}\r\n        and calculating the damage reduced during this time. The passive damage reduction is\r\n        calculated by taking the exact damage reduction factor applicable and calculating the damage\r\n        reduced if that full effect was applied to the Paladin. Even though the passive damage\r\n        reduction is split among other nearby players, using your personal damage taken should\r\n        average it out very closely. More extensive tests that go over all damage events have shown\r\n        that this is usually a close approximation.\r\n      </Trans>\r\n    );\r\n\r\n    return (\r\n      <LazyLoadStatisticBox\r\n        position={STATISTIC_ORDER.OPTIONAL(60)}\r\n        loader={this.load.bind(this)}\r\n        icon={<SpellIcon id={SPELLS.DEVOTION_AURA.id} />}\r\n        value={<Trans id=\"paladin.holy.modules.talents.devotionAuraDamageReduction.drps\">≈{formatNumber(this.totalDrps)} DRPS</Trans>}\r\n        label={<Trans id=\"paladin.holy.modules.talents.devotionAuraDamageReduction.damageReduction\">Damage reduction</Trans>}\r\n        tooltip={tooltip}\r\n        drilldown={makeWclUrl(this.owner.report.code, {\r\n          fight: this.owner.fightId,\r\n          type: 'damage-taken',\r\n          pins: `2$Off$#244F4B$expression$${this.filter}`,\r\n          view: 'events',\r\n        })}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default DevotionAuraDamageReduction;\r\n","import React from 'react';\r\nimport { t, Trans } from '@lingui/macro';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport SpellLink from 'common/SpellLink';\r\n\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport StatTracker from 'parser/shared/modules/StatTracker';\r\nimport SpellUsable from 'parser/shared/modules/SpellUsable';\r\nimport Events from 'parser/core/Events';\r\n\r\nimport StatisticBox, { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\n\r\nconst COOLDOWN_REDUCTION_MS = 1500;\r\n\r\nclass CrusadersMight extends Analyzer {\r\n  static dependencies = {\r\n    spellUsable: SpellUsable,\r\n    statTracker: StatTracker,\r\n  };\r\n\r\n  effectiveHolyShockReductionMs = 0;\r\n  wastedHolyShockReductionMs = 0;\r\n  wastedHolyShockReductionCount = 0;\r\n  holyShocksCastsLost = 0;\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.CRUSADERS_MIGHT_TALENT.id);\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    this.addEventListener(\r\n      Events.cast.by(SELECTED_PLAYER).spell(SPELLS.CRUSADER_STRIKE),\r\n      this.onCast,\r\n    );\r\n  }\r\n\r\n  onCast(event) {\r\n    const holyShockisOnCooldown = this.spellUsable.isOnCooldown(SPELLS.HOLY_SHOCK_CAST.id);\r\n    if (holyShockisOnCooldown) {\r\n      const reductionMs = this.spellUsable.reduceCooldown(\r\n        SPELLS.HOLY_SHOCK_CAST.id,\r\n        COOLDOWN_REDUCTION_MS,\r\n      );\r\n      this.effectiveHolyShockReductionMs += reductionMs;\r\n      this.wastedHolyShockReductionMs += COOLDOWN_REDUCTION_MS - reductionMs;\r\n    } else {\r\n      const holyShockCooldown =\r\n        7500 / (1 + this.statTracker.hastePercentage(this.statTracker.currentHasteRating));\r\n      if (\r\n        this.selectedCombatant.hasTalent(SPELLS.SANCTIFIED_WRATH_TALENT.id) &&\r\n        this.selectedCombatant.hasBuff(SPELLS.AVENGING_WRATH.id, event.timestamp)\r\n      ) {\r\n        this.holyShocksCastsLost += 1;\r\n      } else {\r\n        this.holyShocksCastsLost += COOLDOWN_REDUCTION_MS / holyShockCooldown;\r\n      }\r\n      this.wastedHolyShockReductionMs += COOLDOWN_REDUCTION_MS;\r\n      this.wastedHolyShockReductionCount += 1;\r\n\r\n      // mark the event on the timeline //\r\n      event.meta = event.meta || {};\r\n      event.meta.isInefficientCast = true;\r\n      event.meta.inefficientCastReason = (\r\n        <Trans id=\"paladin.holy.modules.talents.crusadersMight.inefficientCast\">\r\n          Holy Shock was off cooldown when you cast Crusader Strike. You should cast Holy Shock\r\n          before Crusader Strike for maximum healing or damage.\r\n        </Trans>\r\n      );\r\n    }\r\n  }\r\n\r\n  get holyShocksMissedThresholds() {\r\n    return {\r\n      actual: this.wastedHolyShockReductionCount,\r\n      isGreaterThan: {\r\n        minor: 0,\r\n        average: 2,\r\n        major: 5,\r\n      },\r\n      style: 'number',\r\n    };\r\n  }\r\n\r\n  suggestions(when) {\r\n    if (this.owner.builds.GLIMMER.active) {\r\n      when(this.holyShocksMissedThresholds).addSuggestion((suggest, actual, recommended) => suggest(\r\n          <>\r\n            <Trans id=\"paladin.holy.modules.talents.crusadersMight.suggestion\">\r\n              You cast <SpellLink id={SPELLS.CRUSADER_STRIKE.id} />{' '}\r\n              {this.wastedHolyShockReductionCount} times when\r\n              <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} /> was off cooldown.{' '}\r\n              <SpellLink id={SPELLS.CRUSADER_STRIKE.id} /> should be used to reduce the cooldown of\r\n              <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} /> and should never be cast when{' '}\r\n              <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} /> is avalible. This is a core component of\r\n              the <SpellLink id={SPELLS.GLIMMER_OF_LIGHT_TALENT.id} />{' '}\r\n              <a\r\n                href=\"https://questionablyepic.com/glimmer-of-light/\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                build.\r\n              </a>\r\n            </Trans>\r\n          </>,\r\n        )\r\n          .icon(SPELLS.HOLY_SHOCK_CAST.icon)\r\n          .actual(\r\n            t('paladin.holy.modules.talents.crusadersMight.actual')`${Math.floor(this.holyShocksCastsLost)} Holy Shock cast${\r\n              Math.floor(this.holyShocksCastsLost) === 1 ? '' : 's'\r\n            } missed.`,\r\n          )\r\n          .recommended(t('paladin.holy.modules.talents.crusadersMight.recommended')`Casting Holy Shock on cooldown is recommended.`));\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    const formatSeconds = seconds => <Trans id=\"paladin.holy.modules.talents.crusadersMight.formatSeconds\">{seconds}s</Trans>;\r\n\r\n    return (\r\n      <StatisticBox\r\n        position={STATISTIC_ORDER.OPTIONAL(75)}\r\n        icon={<SpellIcon id={SPELLS.CRUSADERS_MIGHT_TALENT.id} />}\r\n        value={\r\n          <>\r\n            {formatSeconds((this.effectiveHolyShockReductionMs / 1000).toFixed(1))}{' '}\r\n            <SpellIcon\r\n              id={SPELLS.HOLY_SHOCK_CAST.id}\r\n              style={{\r\n                height: '1.3em',\r\n                marginTop: '-.1em',\r\n              }}\r\n            />{' '}\r\n          </>\r\n        }\r\n        label={<Trans id=\"paladin.holy.modules.talents.crusadersMight.cdr\">Cooldown reduction</Trans>}\r\n        tooltip={\r\n          <>\r\n            <Trans id=\"paladin.holy.modules.talents.crusadersMight.tooltip\">\r\n            You cast Crusader Strike <b>{this.wastedHolyShockReductionCount}</b> time\r\n            {this.wastedHolyShockReductionCount === 1 ? '' : 's'} when Holy Shock was off cooldown.\r\n            <br />\r\n            This wasted <b>{(this.wastedHolyShockReductionMs / 1000).toFixed(1)}</b> seconds of Holy\r\n            Shock cooldown reduction,\r\n            <br />\r\n            preventing you from <b>{Math.floor(this.holyShocksCastsLost)}</b> additional Holy Shock\r\n            cast\r\n            {this.holyShocksLost === 1 ? '' : 's'}.\r\n            <br />\r\n            {this.wastedLightOfDawnReductionCount === 1 ? '' : 's'} when Light of Dawn\r\n            {this.owner.builds.GLIMMER.active ? ' and Holy Shock were' : ' was'} off cooldown.\r\n            </Trans>\r\n          </>\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default CrusadersMight;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport SpellLink from 'common/SpellLink';\r\nimport SpellIcon from 'common/SpellIcon';\r\n\r\nimport STATISTIC_CATEGORY from './STATISTIC_CATEGORY';\r\nimport StatisticBox from './StatisticBox';\r\n\r\nexport { default as STATISTIC_ORDER } from './STATISTIC_ORDER';\r\n\r\n/**\r\n * @deprecated Use `interface/statistic/Statistic` instead.\r\n */\r\nconst TraitStatisticBox = ({ trait, icon, label, ...others }) => (\r\n  <StatisticBox\r\n    {...others}\r\n    icon={icon || <SpellIcon id={trait} />}\r\n    label={label || <SpellLink id={trait} icon={false} />}\r\n  />\r\n);\r\nTraitStatisticBox.propTypes = {\r\n  trait: PropTypes.number,\r\n  /**\r\n   * Override the trait's icon.\r\n   */\r\n  icon: PropTypes.node,\r\n  /**\r\n   * Override the trait's label.\r\n   */\r\n  label: PropTypes.node,\r\n};\r\nTraitStatisticBox.defaultProps = {\r\n  category: STATISTIC_CATEGORY.ITEMS, // combine with the items category since they're related and items never has more than 2 so keeping them separate is unnecessary\r\n};\r\n\r\nexport default TraitStatisticBox;\r\n","import React from 'react';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport { formatNumber, formatPercentage } from 'common/format';\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport TraitStatisticBox, { STATISTIC_ORDER } from 'interface/others/TraitStatisticBox';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport Events from 'parser/core/Events';\r\n\r\nimport BeaconHealSource from '../beacons/BeaconHealSource.js';\r\n\r\n/**\r\n * Avenging Crusader\r\n *\r\n *  You become the ultimate crusader of light, increasing your Crusader Strike, Judgment, and auto-attack damage by 30%.\r\n *  Crusader Strike and Judgment cool down 30% faster and heal up to 3 injured allies for 250% of the damage they deal. Lasts 20 sec.\r\n *  Example Log: https://www.warcraftlogs.com/reports/QNJxrchLwB3WtXqP#fight=last&type=healing&source=7\r\n */\r\nclass AvengingCrusader extends Analyzer {\r\n  static dependencies = {\r\n    beaconHealSource: BeaconHealSource,\r\n  };\r\n\r\n  healing = 0;\r\n  healingTransfered = 0;\r\n  hits = 0;\r\n  crits = 0;\r\n  overHealing = 0;\r\n  beaconOverhealing = 0;\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.AVENGING_CRUSADER_TALENT.id);\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    this.addEventListener(\r\n      Events.heal.by(SELECTED_PLAYER).spell(SPELLS.AVENGING_CRUSADER_HEAL_NORMAL),\r\n      this.onHit,\r\n    );\r\n    this.addEventListener(\r\n      Events.heal.by(SELECTED_PLAYER).spell(SPELLS.AVENGING_CRUSADER_HEAL_CRIT),\r\n      this.onCrit,\r\n    );\r\n    this.addEventListener(\r\n      this.beaconHealSource.beacontransfer.by(SELECTED_PLAYER),\r\n      this.onBeaconTransfer,\r\n    );\r\n  }\r\n\r\n  onHit(event) {\r\n    this.hits += 1;\r\n    this.healing += event.amount + (event.absorbed || 0);\r\n    this.overHealing += event.overheal || 0;\r\n  }\r\n\r\n  onCrit(event) {\r\n    this.crits += 1;\r\n    this.onHit(event);\r\n  }\r\n\r\n  onBeaconTransfer(event) {\r\n    const spellId = event.originalHeal.ability.guid;\r\n    if (\r\n      spellId !== SPELLS.AVENGING_CRUSADER_HEAL_NORMAL.id &&\r\n      spellId !== SPELLS.AVENGING_CRUSADER_HEAL_CRIT.id\r\n    ) {\r\n      return;\r\n    }\r\n    this.healingTransfered += event.amount + (event.absorbed || 0);\r\n    this.beaconOverhealing += event.overheal || 0;\r\n  }\r\n\r\n  get critRate() {\r\n    return this.crits / this.hits || 0;\r\n  }\r\n  get totalHealing() {\r\n    return this.healing + this.healingTransfered;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <TraitStatisticBox\r\n        position={STATISTIC_ORDER.OPTIONAL()}\r\n        trait={SPELLS.AVENGING_CRUSADER_TALENT.id}\r\n        value={\r\n          <>\r\n            <ItemHealingDone amount={this.totalHealing} />\r\n            <br />\r\n            {formatPercentage(this.critRate)}% Crit Rate\r\n          </>\r\n        }\r\n        tooltip={\r\n          <>\r\n            Hits: <b>{this.hits}</b> Crits: <b>{this.crits}</b>\r\n            <br />\r\n            Overhealed:{' '}\r\n            <b>{formatPercentage(this.overHealing / (this.healing + this.overHealing))}%</b>\r\n            <br />\r\n            Beacon healing: <b>{formatNumber(this.healingTransfered)}</b>\r\n            <br />\r\n            Beacon overhealed:{' '}\r\n            <b>\r\n              {formatPercentage(\r\n                this.beaconOverhealing / (this.beaconOverhealing + this.healingTransfered),\r\n              )}\r\n              %\r\n            </b>\r\n            <br />\r\n          </>\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default AvengingCrusader;\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\n\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Events from 'parser/core/Events';\r\nimport TalentStatisticBox from 'interface/others/TalentStatisticBox';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport { formatNumber } from 'common/format';\r\n\r\nconst JUDGEMENT_HEALS = 25;\r\n\r\nclass JudgmentOfLight extends Analyzer {\r\n  counter = JUDGEMENT_HEALS;\r\n  wasted = 0;\r\n  casts = 0;\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.JUDGMENT_OF_LIGHT_TALENT.id);\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    this.addEventListener(\r\n      Events.cast.by(SELECTED_PLAYER).spell(SPELLS.JUDGMENT_CAST_HOLY),\r\n      this.resetCounter,\r\n    );\r\n    this.addEventListener(\r\n      Events.heal.by(SELECTED_PLAYER).spell(SPELLS.JUDGMENT_OF_LIGHT_HEAL),\r\n      this.handleHeals,\r\n    );\r\n  }\r\n\r\n  resetCounter(event) {\r\n    this.wasted += JUDGEMENT_HEALS - this.counter;\r\n    this.casts += 1;\r\n    this.counter = 0;\r\n  }\r\n\r\n  handleHeals(event) {\r\n    if (this.counter < JUDGEMENT_HEALS) {\r\n      this.counter += 1;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    this.wasted += JUDGEMENT_HEALS - this.counter;\r\n    return (\r\n      <TalentStatisticBox\r\n        talent={SPELLS.JUDGMENT_OF_LIGHT_TALENT.id}\r\n        position={STATISTIC_ORDER.CORE(10)}\r\n        value={`${formatNumber(this.wasted)} Wasted Stacks`}\r\n        label=\"Judgment Of Light\"\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default JudgmentOfLight;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SpellLink from 'common/SpellLink';\r\n\r\nimport { formatNumber } from 'common/format';\r\nimport { formatPercentage } from 'common/format';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport TraitStatisticBox, { STATISTIC_ORDER } from 'interface/others/TraitStatisticBox';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport ItemDamageDone from 'interface/ItemDamageDone';\r\nimport Events from 'parser/core/Events';\r\n\r\nimport BeaconHealSource from '../beacons/BeaconHealSource.js';\r\n\r\n/**\r\n * Glimmer of Light,\tAzerite Power\r\n * Requires Paladin (Holy, Holy)\r\n * Holy Shock leaves a Glimmer of Light on the target for 30 sec.\r\n * When you Holy Shock, all targets with Glimmer of Light are damaged for 1076 or healed for 1587. (at ilvl 400)\r\n * Example Log: https://www.warcraftlogs.com/reports/TX4nzPy8WwrfLv97#fight=19&type=auras&source=5&ability=287280\r\n */\r\n\r\nconst BUFF_DURATION = 30;\r\nconst GLIMMER_CAP = 8;\r\n\r\nclass GlimmerOfLight extends Analyzer {\r\n  static dependencies = {\r\n    beaconHealSource: BeaconHealSource,\r\n  };\r\n\r\n  casts = 0;\r\n  damage = 0;\r\n  earlyRefresh = 0;\r\n  glimmerBuffs /*: Array<ApplyBuffEvent | ApplyDebuffEvent>*/ = [];\r\n  glimmerHits = 0;\r\n  healing = 0;\r\n  overCapHealing = 0;\r\n  healingTransfered = 0;\r\n  overCap = 0;\r\n  wastedEarlyRefresh = 0;\r\n  wastedOverCap = 0;\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.GLIMMER_OF_LIGHT_TALENT.id);\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    this.addEventListener(\r\n      Events.cast.by(SELECTED_PLAYER).spell(SPELLS.HOLY_SHOCK_CAST),\r\n      this.onCast,\r\n    );\r\n    this.addEventListener(\r\n      Events.heal.by(SELECTED_PLAYER).spell(SPELLS.GLIMMER_OF_LIGHT_HEAL_TALENT),\r\n      this.onHeal,\r\n    );\r\n    this.addEventListener(\r\n      this.beaconHealSource.beacontransfer.by(SELECTED_PLAYER),\r\n      this.onBeaconTransfer,\r\n    );\r\n    this.addEventListener(\r\n      Events.damage.by(SELECTED_PLAYER).spell(SPELLS.GLIMMER_OF_LIGHT_DAMAGE_TALENT),\r\n      this.onDamage,\r\n    );\r\n    this.addEventListener(\r\n      Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.GLIMMER_OF_LIGHT_BUFF),\r\n      this.onApplyBuff,\r\n    );\r\n    this.addEventListener(\r\n      Events.applydebuff.by(SELECTED_PLAYER).spell(SPELLS.GLIMMER_OF_LIGHT_BUFF),\r\n      this.onApplyBuff,\r\n    );\r\n    this.addEventListener(\r\n      Events.removebuff.by(SELECTED_PLAYER).spell(SPELLS.GLIMMER_OF_LIGHT_BUFF),\r\n      this.onRemoveBuff,\r\n    );\r\n    this.addEventListener(\r\n      Events.removedebuff.by(SELECTED_PLAYER).spell(SPELLS.GLIMMER_OF_LIGHT_BUFF),\r\n      this.onRemoveBuff,\r\n    );\r\n  }\r\n\r\n  onBeaconTransfer(event) {\r\n    const spellId = event.originalHeal.ability.guid;\r\n    if (spellId !== SPELLS.GLIMMER_OF_LIGHT_TALENT.id) {\r\n      return;\r\n    }\r\n    this.healingTransfered += event.amount + (event.absorbed || 0);\r\n  }\r\n\r\n  onApplyBuff(event /*: ApplyBuffEvent | ApplyDebuffEvent*/) {\r\n    this.glimmerBuffs.unshift(event);\r\n  }\r\n  onRemoveBuff(event /*: RemoveBuffEvent | RemoveDebuffEvent*/) {\r\n    this.glimmerBuffs = this.glimmerBuffs.filter(buff => buff.targetID !== event.targetID);\r\n  }\r\n\r\n  onCast(event) {\r\n    this.casts += 1;\r\n\r\n    const index = this.glimmerBuffs.findIndex(g => g.targetID === event.targetID);\r\n\r\n    if (this.glimmerBuffs.length >= GLIMMER_CAP) {\r\n      // Cast a new one while at cap (applybuff will occur later, so this will be accurate)\r\n      this.overCap += 1;\r\n      if (index < 0) {\r\n        this.wastedOverCap +=\r\n          BUFF_DURATION * 1000 - (event.timestamp - this.glimmerBuffs[GLIMMER_CAP - 1].timestamp);\r\n      } else {\r\n        this.wastedOverCap +=\r\n          BUFF_DURATION * 1000 - (event.timestamp - this.glimmerBuffs[index].timestamp);\r\n      }\r\n    } else if (index >= 0) {\r\n      // if an active glimmer was overwritten //\r\n      this.wastedEarlyRefresh +=\r\n        BUFF_DURATION * 1000 - (event.timestamp - this.glimmerBuffs[index].timestamp);\r\n      this.earlyRefresh += 1;\r\n    }\r\n  }\r\n\r\n  onDamage(event) {\r\n    this.damage += event.amount + (event.absorbed || 0);\r\n    this.glimmerHits += 1;\r\n  }\r\n\r\n  onHeal(event) {\r\n    this.healing += event.amount + (event.absorbed || 0);\r\n    this.glimmerHits += 1;\r\n  }\r\n\r\n  get hitsPerCast() {\r\n    return this.glimmerHits / this.casts;\r\n  }\r\n\r\n  get holyShocksPerMinute() {\r\n    return this.casts / (this.owner.fightDuration / 60000);\r\n  }\r\n\r\n  get totalHealing() {\r\n    return this.healing + this.healingTransfered;\r\n  }\r\n\r\n  get earlyGlimmerRefreshLoss() {\r\n    return this.wastedEarlyRefresh / (this.casts * BUFF_DURATION * 1000);\r\n  }\r\n\r\n  get overCapGlimmerLoss() {\r\n    return this.wastedOverCap / (this.casts * BUFF_DURATION * 1000);\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <TraitStatisticBox\r\n        position={STATISTIC_ORDER.OPTIONAL()}\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        trait={SPELLS.GLIMMER_OF_LIGHT_TALENT.id}\r\n        value={\r\n          <>\r\n            <ItemHealingDone amount={this.totalHealing} />\r\n            <br />\r\n            <ItemDamageDone amount={this.damage} />\r\n            <br />\r\n            {this.hitsPerCast.toFixed(1)} Triggers/Cast\r\n          </>\r\n        }\r\n        tooltip={\r\n          <>\r\n            Total healing done: <b>{formatNumber(this.totalHealing)}</b>\r\n            <br />\r\n            Beacon healing transfered: <b>{formatNumber(this.healingTransfered)}</b>\r\n            <br />\r\n            Glimmer damage: <b>{formatNumber(this.damage)}</b>\r\n            <br />\r\n            Holy Shocks/minute: <b>{this.holyShocksPerMinute.toFixed(1)}</b>\r\n            <br />\r\n            Early refresh(s): <b>{this.earlyRefresh}</b>\r\n            <br />\r\n            Lost to early refresh:{' '}\r\n            <b>\r\n              {(this.wastedEarlyRefresh / 1000).toFixed(1)}(sec){' '}\r\n              {(this.earlyGlimmerRefreshLoss * 100).toFixed(1)}%\r\n            </b>\r\n            <br />\r\n            Glimmer of Lights over {GLIMMER_CAP} buff cap: <b>{this.overCap}</b>\r\n            <br />\r\n            Lost to over capping:{' '}\r\n            <b>\r\n              {(this.wastedOverCap / 1000).toFixed(1)}(sec){' '}\r\n              {(this.overCapGlimmerLoss * 100).toFixed(1)}%\r\n            </b>\r\n            <br />\r\n          </>\r\n        }\r\n      />\r\n    );\r\n  }\r\n\r\n  get suggestEarlyRefresh() {\r\n    return {\r\n      actual: this.earlyGlimmerRefreshLoss,\r\n      isGreaterThan: {\r\n        minor: 0.15,\r\n        average: 0.25,\r\n        major: 0.35,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n\r\n  get suggestGlimmerCap() {\r\n    return {\r\n      actual: this.overCapGlimmerLoss,\r\n      isGreaterThan: {\r\n        minor: 0.15,\r\n        average: 0.25,\r\n        major: 0.35,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n\r\n  suggestions(when) {\r\n    if (this.owner.builds.GLIMMER.active) {\r\n      when(this.suggestEarlyRefresh).addSuggestion((suggest, actual, recommended) => suggest(\r\n          <Trans id=\"paladin.holy.modules.azeritetraits.glimmerOfLight\">\r\n            Your usage of <SpellLink id={SPELLS.GLIMMER_OF_LIGHT_TALENT.id} /> can be improved. To maximize\r\n            the healing/damage done by <SpellLink id={SPELLS.GLIMMER_OF_LIGHT_TALENT.id} />, try to keep as\r\n            many buffs up as possible. Avoid overwritting buffs early, this suggestion does not take\r\n            priority over healing targets with low health. If two targets have similar health pools\r\n            priorize the target without a glimmer as your{' '}\r\n            <SpellLink id={SPELLS.HOLY_SHOCK_CAST.id} /> will heal all players with active buffs.\r\n          </Trans>,\r\n        )\r\n          .icon(SPELLS.GLIMMER_OF_LIGHT_TALENT.icon)\r\n          .actual(\r\n            `Uptime lost to early Glimmer refresh was ${formatPercentage(\r\n              this.earlyGlimmerRefreshLoss,\r\n            )}%`,\r\n          )\r\n          .recommended(`< ${this.suggestEarlyRefresh.isGreaterThan.minor * 100}% is recommended`));\r\n    }\r\n  }\r\n}\r\n\r\nexport default GlimmerOfLight;\r\n","import CoreCombatLogParser from 'parser/core/CombatLogParser';\r\nimport LowHealthHealing from 'parser/shared/modules/features/LowHealthHealing';\r\nimport ManaLevelChart from 'parser/shared/modules/resources/mana/ManaLevelChart';\r\nimport ManaUsageChart from 'parser/shared/modules/resources/mana/ManaUsageChart';\r\n\r\nimport LightOfDawnNormalizer from './normalizers/LightOfDawn';\r\nimport BeaconOfVirtueNormalizer from './normalizers/BeaconOfVirtue';\r\n\r\nimport BeaconTransferFactor from './modules/beacons/BeaconTransferFactor';\r\nimport BeaconHealSource from './modules/beacons/BeaconHealSource';\r\nimport BeaconHealingDone from './modules/beacons/BeaconHealingDone';\r\nimport BeaconTargets from './modules/beacons/BeaconTargets';\r\nimport MissingBeacons from './modules/beacons/MissingBeacons';\r\nimport FailedBeaconTransfers from './modules/beacons/FailedBeaconTransfers';\r\nimport DirectBeaconHealing from './modules/beacons/DirectBeaconHealing';\r\nimport BeaconUptime from './modules/beacons/BeaconUptime';\r\nimport HammerOfWrath from '../shared/spells/HammerOfWrath';\r\n\r\nimport PaladinAbilityTracker from './modules/core/PaladinAbilityTracker';\r\nimport CastBehavior from './modules/CastBehavior';\r\nimport Overhealing from './modules/Overhealing';\r\nimport FillerLightOfTheMartyrs from './modules/FillerLightOfTheMartyrs';\r\nimport InefficientLightOfTheMartyrs from './modules/InefficientLightOfTheMartyrs';\r\nimport FillerFlashOfLight from './modules/FillerFlashOfLight';\r\nimport LightOfDawn from './modules/LightOfDawn';\r\nimport LightOfDawnIndexer from './modules/LightOfDawnIndexer';\r\n\r\nimport Abilities from './modules/Abilities';\r\nimport Buffs from './modules/Buffs';\r\nimport Checklist from './modules/checklist/Module';\r\nimport MasteryEffectiveness from './modules/MasteryEffectiveness';\r\nimport AlwaysBeCasting from './modules/AlwaysBeCasting';\r\nimport CooldownThroughputTracker from './modules/CooldownThroughputTracker';\r\nimport StatValues from './modules/StatValues';\r\n\r\nimport MightOfTheMountain from './modules/MightOfTheMountain';\r\n\r\nimport RuleOfLaw from './modules/talents/RuleOfLaw';\r\nimport DevotionAuraDamageReduction from './modules/talents/DevotionAuraDamageReduction';\r\nimport HolyAvenger from '../shared/talents/HolyAvenger';\r\nimport DivinePurpose from '../shared/talents/DivinePurpose';\r\nimport CrusadersMight from './modules/talents/CrusadersMight';\r\nimport AvengingCrusader from './modules/talents/AvengingCrusader';\r\nimport JudgmentOfLight from './modules/talents/JudgmentOfLight';\r\nimport GlimmerOfLight from './modules/talents/GlimmerOfLight';\r\n\r\nimport HolyPowerTracker from '../shared/holypower/HolyPowerTracker';\r\nimport HolyPowerDetails from '../shared/holypower/HolyPowerDetails';\r\n\r\nimport { ABILITIES_AFFECTED_BY_HEALING_INCREASES } from './constants';\r\n\r\nclass CombatLogParser extends CoreCombatLogParser {\r\n  static abilitiesAffectedByHealingIncreases = ABILITIES_AFFECTED_BY_HEALING_INCREASES;\r\n\r\n  static specModules = {\r\n    // Normalizers\r\n    lightOfDawnNormalizer: LightOfDawnNormalizer,\r\n    beaconOfVirtueNormalizer: BeaconOfVirtueNormalizer,\r\n\r\n    // Override the ability tracker so we also get stats for IoL and beacon healing\r\n    abilityTracker: PaladinAbilityTracker,\r\n    lowHealthHealing: LowHealthHealing,\r\n\r\n    // PaladinCore\r\n    beaconTransferFactor: BeaconTransferFactor,\r\n    beaconHealSource: BeaconHealSource,\r\n    beaconHealingDone: BeaconHealingDone,\r\n    beaconTargets: BeaconTargets,\r\n    missingBeacons: MissingBeacons,\r\n    failedBeaconTransfers: FailedBeaconTransfers,\r\n    directBeaconHealing: DirectBeaconHealing,\r\n    beaconUptime: BeaconUptime,\r\n    castBehavior: CastBehavior,\r\n    overhealing: Overhealing,\r\n    fillerLightOfTheMartyrs: FillerLightOfTheMartyrs,\r\n    inefficientLightOfTheMartyrs: InefficientLightOfTheMartyrs,\r\n    fillerFlashOfLight: FillerFlashOfLight,\r\n    lightOfDawn: LightOfDawn,\r\n    lightOfDawnIndexer: LightOfDawnIndexer,\r\n    hammerOfWrath: HammerOfWrath,\r\n\r\n    // Generic healer things\r\n    manaLevelChart: ManaLevelChart,\r\n    manaUsageChart: ManaUsageChart,\r\n\r\n    // Features\r\n    checklist: Checklist,\r\n    abilities: Abilities,\r\n    buffs: Buffs,\r\n    masteryEffectiveness: MasteryEffectiveness,\r\n    alwaysBeCasting: AlwaysBeCasting,\r\n    cooldownThroughputTracker: CooldownThroughputTracker,\r\n    statValues: StatValues,\r\n\r\n    // Racials\r\n    mightOfTheMountain: MightOfTheMountain,\r\n\r\n    // Talents\r\n    ruleOfLaw: RuleOfLaw,\r\n    devotionAuradamageReduction: DevotionAuraDamageReduction,\r\n    holyAvenger: HolyAvenger,\r\n    divinePurpose: DivinePurpose,\r\n    crusadersMight: CrusadersMight,\r\n    avengingCrusader: AvengingCrusader,\r\n    judgmentOfLight: JudgmentOfLight,\r\n    glimmerOfLight: GlimmerOfLight,\r\n\r\n    // HolyPower\r\n    holyPowerTracker: HolyPowerTracker,\r\n    holyPowerDetails: HolyPowerDetails,\r\n  };\r\n}\r\n\r\nexport default CombatLogParser;\r\n","export default function calculateEffectiveDamage(event, increase) {\r\n  const raw = (event.amount || 0) + (event.absorbed || 0);\r\n  return raw - (raw / (1 + increase));\r\n}\r\n","/**\r\n * A simple component that shows a value in the most plain way possible.\r\n * Use this only as the very last resort.\r\n */\r\nimport React from 'react';\r\n\r\ntype Props = {\r\n  label: React.ReactNode;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nconst BoringValue = ({ label, children, className }: Props) => (\r\n  <div className={`pad boring-text ${className || ''}`}>\r\n    <label>\r\n      {label}\r\n    </label>\r\n    <div className=\"value\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default BoringValue;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport SpellLink from 'common/SpellLink';\r\nimport SpellIcon from 'common/SpellIcon';\r\n\r\nimport STATISTIC_CATEGORY from './STATISTIC_CATEGORY';\r\nimport StatisticBox from './StatisticBox';\r\n\r\nexport { default as STATISTIC_ORDER } from './STATISTIC_ORDER';\r\n\r\n/**\r\n * @deprecated Use `interface/statistic/Statistic` instead.\r\n */\r\nconst TalentStatisticBox = ({ talent, icon, label, ...others }) => (\r\n  <StatisticBox\r\n    {...others}\r\n    icon={icon || <SpellIcon id={talent} />}\r\n    label={label || <SpellLink id={talent} icon={false} />}\r\n  />\r\n);\r\nTalentStatisticBox.propTypes = {\r\n  talent: PropTypes.number.isRequired,\r\n  /**\r\n   * Override the trait's icon.\r\n   */\r\n  icon: PropTypes.node,\r\n  /**\r\n   * Override the trait's label.\r\n   */\r\n  label: PropTypes.node,\r\n};\r\nTalentStatisticBox.defaultProps = {\r\n  category: STATISTIC_CATEGORY.TALENTS,\r\n};\r\n\r\nexport default TalentStatisticBox;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport BaseChart from 'interface/others/BaseChart';\r\n\r\nimport { formatPercentage } from 'common/format';\r\nimport SpellLink from 'common/SpellLink';\r\nimport { TooltipElement } from 'common/Tooltip';\r\n\r\nimport './style.scss';\r\n\r\nclass DonutChart extends React.PureComponent {\r\n  static propTypes = {\r\n    items: PropTypes.arrayOf(PropTypes.shape({\r\n      value: PropTypes.number.isRequired,\r\n      label: PropTypes.node.isRequired,\r\n      color: PropTypes.string.isRequired,\r\n      tooltip: PropTypes.node,\r\n      spellId: PropTypes.number,\r\n      valueTooltip: PropTypes.node,\r\n    })).isRequired,\r\n    // While you could change the chart size, I strongly recommend you do not for consistency and to avoid breaking whenever this component is modified. Do you really need to adjust the size?\r\n    chartSize: PropTypes.number,\r\n    innerRadiusFactor: PropTypes.number,\r\n  };\r\n  static defaultProps = {\r\n    chartSize: 90,\r\n    innerRadiusFactor: 0.28,\r\n  };\r\n\r\n  renderLegend(items) {\r\n    const total = items.reduce((sum, item) => sum + item.value, 0);\r\n\r\n    return (\r\n      <div className=\"legend\">\r\n        {items.map(({ color, label, tooltip, value, spellId, valueTooltip }, index) => {\r\n          label = tooltip ? (\r\n            <TooltipElement content={tooltip}>{label}</TooltipElement>\r\n          ) : label;\r\n          label = spellId ? (\r\n            <SpellLink id={spellId}>{label}</SpellLink>\r\n          ) : label;\r\n          return (\r\n            <div key={index} className=\"flex\">\r\n              <div className=\"flex-sub\">\r\n                <div className=\"circle\" style={{ background: color }} />\r\n              </div>\r\n              <div className=\"flex-main\">\r\n                {label}\r\n              </div>\r\n              <div className=\"flex-sub\">\r\n                <TooltipElement content={valueTooltip ? valueTooltip : value}>\r\n                  {formatPercentage(value / total, 0)}%\r\n                </TooltipElement>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n  renderChart(items, chartSize, innerRadiusFactor) {\r\n    const innerRadius = chartSize * innerRadiusFactor;\r\n\r\n    const data = {\r\n      items,\r\n    };\r\n    const spec = {\r\n      data: {\r\n        name: 'items',\r\n      },\r\n      mark: {\r\n        type: 'arc',\r\n        innerRadius,\r\n      },\r\n      encoding: {\r\n        theta: {\r\n          field: 'value',\r\n          type: 'quantitative',\r\n        },\r\n        color: {\r\n          field: 'label',\r\n          type: 'nominal',\r\n          legend: null,\r\n          scale: {\r\n            domain: items.map(({label}) => label),\r\n            range: items.map(({color}) => color),\r\n          },\r\n        },\r\n      },\r\n      view: {\r\n        stroke: null,\r\n      },\r\n    };\r\n    return (\r\n      <div className=\"chart\">\r\n        <BaseChart\r\n          width={chartSize}\r\n          height={chartSize}\r\n          spec={spec}\r\n          data={data}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  render() {\r\n    const { items, chartSize, innerRadiusFactor } = this.props;\r\n\r\n    return (\r\n      <div className=\"donut-chart\">\r\n        {this.renderLegend(items)}\r\n        {this.renderChart(items, chartSize, innerRadiusFactor)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DonutChart;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { AutoSizer } from 'react-virtualized';\r\nimport BaseChart from 'interface/others/BaseChart';\r\n\r\nclass OneVariableBinomialChart extends React.Component {\r\n  static propTypes = {\r\n    probabilities: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        x: PropTypes.number.isRequired,\r\n        y: PropTypes.number.isRequired,\r\n      }),\r\n    ).isRequired,\r\n    actualEvent: PropTypes.shape({\r\n      x: PropTypes.number.isRequired,\r\n      y: PropTypes.number.isRequired,\r\n    }).isRequired,\r\n    xAxis: PropTypes.shape({\r\n      title: PropTypes.string.isRequired,\r\n      tickFormat: PropTypes.string.isRequired,\r\n    }).isRequired,\r\n    yAxis: PropTypes.shape({\r\n      title: PropTypes.string.isRequired,\r\n    }),\r\n    yDomain: PropTypes.arrayOf(PropTypes.number),\r\n    tooltip: PropTypes.string.isRequired,\r\n  };\r\n\r\n  state = {\r\n    hover: null,\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      probabilities,\r\n      actualEvent,\r\n      xAxis,\r\n      yAxis,\r\n      yDomain,\r\n      tooltip,\r\n    } = this.props;\r\n\r\n    const data = {\r\n      probabilities,\r\n      actual: actualEvent,\r\n    };\r\n\r\n    const spec = {\r\n      encoding: {\r\n        x: {\r\n          field: 'x',\r\n          type: 'quantitative',\r\n          title: xAxis.title,\r\n          axis: {\r\n            grid: false,\r\n            format: xAxis.tickFormat,\r\n          },\r\n        },\r\n        y: {\r\n          field: 'y',\r\n          type: 'quantitative',\r\n          title: yAxis.title,\r\n          axis: {\r\n            grid: false,\r\n            format: '.0%',\r\n          },\r\n          scale: {\r\n            domain: yDomain,\r\n          },\r\n        },\r\n      },\r\n      layer: [\r\n        {\r\n          data: {\r\n            name: 'probabilities',\r\n          },\r\n          mark: {\r\n            type: 'area',\r\n            color: 'rgba(250, 183, 0, 0.15)',\r\n            line: {\r\n              color: '#fab700',\r\n              strokeWidth: 1,\r\n            },\r\n          },\r\n        },\r\n        {\r\n          data: {\r\n            name: 'actual',\r\n          },\r\n          mark: {\r\n            type: 'point',\r\n            filled: true,\r\n            color: '#00ff96',\r\n            size: 60,\r\n          },\r\n          encoding: {\r\n            tooltip: [\r\n              { field: 'x', title: tooltip },\r\n            ],\r\n          },\r\n        },\r\n      ],\r\n    };\r\n\r\n\r\n    return (\r\n      <AutoSizer disableHeight>\r\n        {({width}) => (\r\n          <BaseChart\r\n            height={150}\r\n            width={width}\r\n            spec={spec}\r\n            data={data}\r\n          />\r\n        )}\r\n      </AutoSizer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OneVariableBinomialChart;\r\n","import OneVariableBinomialChart from 'interface/others/charts/OneVariableBinomialChart';\r\nimport React from 'react';\r\n\r\n/**\r\n * pn is the mean value of procs\r\n * @param procChance\r\n * @param procAttempts\r\n */\r\nexport function expectedProcCount(procChance: number, procAttempts: number) {\r\n  return procChance * procAttempts;\r\n}\r\n\r\n/**\r\n * Calculates the probability that out of n tries with probability p, we get exactly k positive outcomes\r\n * @param k {Number} Number of desired positive outcomes\r\n * @param n {Number} Number of tries\r\n * @param p {Number} Probability of positive outcome\r\n */\r\nexport function binomialPMF(k: number, n: number, p: number) {\r\n  return binomialDistribution(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k);\r\n}\r\n\r\n/**\r\n * Calculates the probability that out of n tries with probability p, we get k or less positive outcomes\r\n * @param k {Number} Number of desired positive outcomes\r\n * @param n {Number} Number of tries\r\n * @param p {Number} Probability of positive outcome\r\n */\r\nexport function binomialCDF(k: number, n: number, p: number) {\r\n  let probability = 0;\r\n  for (let i = 0; i <= k; i += 1) {\r\n    probability += binomialPMF(i, n, p);\r\n  }\r\n  return probability;\r\n}\r\n\r\n/**\r\n * Finds the maximum of PMF of given distribution.\r\n * @param n {Number} Maximum number of tries for given event\r\n * @param {Function} pmf Callback that returns probability of exactly K events happening in N tries. Parameters - K, N\r\n * @returns {{ max: Number, p: Number }} Maximum of given PMF function - argument and probability itself\r\n */\r\nexport function findMax(n: number, pmf: (i: number, n: any) => any) {\r\n  let max = -1;\r\n  let maxP = 0;\r\n  for (let i = 0; i <= n; i += 1) {\r\n    const probability = pmf(i, n);\r\n    if (probability > maxP) {\r\n      max = i;\r\n      maxP = probability;\r\n    }\r\n  }\r\n  return {\r\n    max,\r\n    p: maxP,\r\n  };\r\n}\r\n\r\nfunction binomialDistribution(n: number, k: number) {\r\n  // n! / (k! * (n - k)!)\r\n  // factorials are awful, let's simplify a bit\r\n  // we know k < n:\r\n  // numerator: n! = 1 * 2 * ... * (n - k) * (n - k + 1) * (n - k + 2 ) * ... * n\r\n  // denominator: k! * (n - k)! = k! * 1 * 2 * ... * (n - k)\r\n  // cancelling out 1 * 2 * ... * (n - k) from both we get:\r\n  // (n - k + 1) * (n - k + 2) * ... n / k!\r\n  let numerator = 1;\r\n  let denominator = 1;\r\n  for (let i = n - k + 1; i <= n; i += 1) {\r\n    numerator *= i;\r\n  }\r\n  for (let i = 1; i <= k; i += 1) {\r\n    denominator *= i;\r\n  }\r\n  return numerator / denominator;\r\n}\r\n\r\nfunction resetProbabilityArray(actualProcs: number, procAttempts: number, procChance: number | number[]) {\r\n  const procProbabilities: Array<{ x: number; y: number; }> = Array.from({ length: procAttempts }, (_x, i: number) => {\r\n    if (typeof procChance === 'number') {\r\n      return { x: i, y: binomialPMF(i, procAttempts, procChance) };\r\n    } else {\r\n      return { x: i, y: poissonBinomialPMF(i, procAttempts, procChance) };\r\n    }\r\n  });\r\n\r\n  return procProbabilities;\r\n}\r\n\r\nfunction setMinMaxProbabilities(actualProcs: number, procAttempts: number, procChance: number | number[], threshold: number = 0.001) {\r\n  const procProbabilities = resetProbabilityArray(actualProcs, procAttempts, procChance);\r\n  const rangeMin = procProbabilities.findIndex(({ y }) => y >= threshold);\r\n  const rangeMax = rangeMin + procProbabilities.slice(rangeMin).findIndex(({ y }) => y < threshold);\r\n\r\n  return {\r\n    procProbabilities,\r\n    rangeMin,\r\n    rangeMax,\r\n  };\r\n}\r\n\r\n/**\r\n * Recursive formula for calculating the PMF (probability mass function) of Poisson's Binomial Distribution\r\n * @param k {Number} Number of desired positive outcomes\r\n * @param j {Number} Number of total tries\r\n * @param p {[Number]} Probability vector\r\n * @param lookup {Array} Lookup table\r\n * @returns {Number} Probability\r\n */\r\nfunction Ekj(k: number, j: number, p: number[], lookup: any[][]) {\r\n  if (k === -1) {\r\n    return 0;\r\n  }\r\n  if (k === j + 1) {\r\n    return 0;\r\n  }\r\n  if (k === 0 && j === 0) {\r\n    return 1;\r\n  }\r\n  if (lookup[k][j] !== null) {\r\n    return lookup[k][j];\r\n  }\r\n  // literature uses 1-based indices for probabilities, as we're using an array, we have to use 0 based\r\n  const value: number = (1 - p[j - 1]) * Ekj(k, j - 1, p, lookup) + p[j - 1] * Ekj(k - 1, j - 1, p, lookup);\r\n  lookup[k][j] = value;\r\n  return value;\r\n}\r\n\r\n// Poisson's Binomial Distribution\r\n// Methods based on Wikipedia page and this research paper:\r\n// https://www.researchgate.net/publication/257017356_On_computing_the_distribution_function_for_the_Poisson_binomial_distribution\r\n\r\n/**\r\n * Calculates the probability that out of n tries with p probabilities, we get exactly k positive outcomes\r\n * @param k {Number} Number of desired positive outcomes\r\n * @param n {Number} Number of total tries\r\n * @param p {[Number]} Probability vector\r\n */\r\nexport function poissonBinomialPMF(k: number, n: number, p: any[]) {\r\n  // denoted in the paper as ξk, I'll call it Ek for simplicity\r\n  // using the recursive formula in chapter 2.5\r\n  if (p.length !== n) {\r\n    throw new Error('You must supply a probability vector with the same length as the number of total tries into Poisson Binomial PMF');\r\n  }\r\n  // Using a lookup table to simplify recursion a little bit\r\n  // construct an (n+1) x (n+1) lookup table (because Ek,j uses indexes from 0 to n INCLUSIVE, with this we don't have to subtract indexes all the time)\r\n  // intentionally set tu nulls so we know which values are computed or not\r\n  const lookup = [...Array(n + 1)].map(_ => Array(n + 1).fill(null));\r\n  return Ekj(k, n, p, lookup);\r\n}\r\n\r\n/**\r\n * Calculates the probability that out of n tries with p probabilities, we get less than or equal k positive outcomes\r\n * @param k {Number} Number of desired positive outcomes\r\n * @param n {Number} Number of total tries\r\n * @param p {[Number]} Probability vector\r\n */\r\nexport function poissonBinomialCDF(k: number, n: number, p: number[]) {\r\n  // While technically equal to summing Ei from i = 0 to k, since we use recursion, a better solution is a lookup table\r\n  if (p.length !== n) {\r\n    throw new Error('You must supply a probability vector with the same length as the number of total tries into Poisson Binomial CDF');\r\n  }\r\n  // see comments in poissonBinomialPMF\r\n  const lookup = [...Array(n + 1)].map(_ => Array(n + 1).fill(null));\r\n  let probability = 0;\r\n  // since Ekj uses the values from \"previous row\" (Ekj(k - 1, j - 1, ...)), it's better to iterate from 0\r\n  // this way, it produces the least necessary amount of calculations with the lookup table (only the Ekj(k, j - 1) parts)\r\n  for (let i = 0; i <= k; i += 1) {\r\n    probability += Ekj(i, n, p, lookup);\r\n  }\r\n  return probability;\r\n}\r\n\r\nexport function plotOneVariableBinomChart(\r\n  actualProcs: number,\r\n  procAttempts: number,\r\n  procChance: number | number[],\r\n  trackedName: string = 'Procs',\r\n  tooltipText: string = trackedName,\r\n  yDomain: number[] = [0, 0.4],\r\n  xAxis: any = {\r\n    title: trackedName,\r\n    tickFormat: '~k',\r\n  },\r\n  yAxis: any = {\r\n    title: 'Likelihood',\r\n  },\r\n) {\r\n\r\n  const { procProbabilities, rangeMin, rangeMax } = setMinMaxProbabilities(actualProcs, procAttempts, procChance);\r\n  const actualEventY = typeof procChance === 'number' ? binomialPMF(actualProcs, procAttempts, procChance) : poissonBinomialPMF(actualProcs, procAttempts, procChance);\r\n  return (\r\n    <OneVariableBinomialChart\r\n      probabilities={procProbabilities.slice(rangeMin, rangeMax + 1)}\r\n      actualEvent={{ x: actualProcs, y: actualEventY }}\r\n      yDomain={yDomain}\r\n      xAxis={xAxis}\r\n      yAxis={yAxis}\r\n      tooltip={tooltipText}\r\n    />\r\n  );\r\n}\r\n","/**\r\n * A simple component that shows the spell icon left and a value right.\r\n * Use this only for things that the player certainly should be familiar with, such as their own spells.\r\n * Do NOT use for items or azerite powers.\r\n */\r\nimport React from 'react';\r\n\r\nimport SpellIcon from 'common/SpellIcon';\r\n\r\nimport '../BoringValue.scss';\r\nimport Spell from 'common/SPELLS/Spell';\r\n\r\ntype Props = {\r\n  spell: Spell;\r\n  value: React.ReactNode;\r\n  label: React.ReactNode;\r\n  extra?: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nconst BoringSpellValue = ({ spell, value, label, extra, className }: Props) => (\r\n  <div className={`flex boring-value ${className || ''}`}>\r\n    <div className=\"flex-sub icon\">\r\n      <SpellIcon id={spell.id} />\r\n    </div>\r\n    <div className=\"flex-main value\">\r\n      <div>{value}</div>\r\n      <small>{label}</small>\r\n      {extra}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default BoringSpellValue;\r\n","import Events, { ApplyBuffEvent, DamageEvent, FightEndEvent, RemoveBuffEvent } from 'parser/core/Events';\r\nimport Analyzer, { Options } from 'parser/core/Analyzer';\r\nimport { formatDuration } from 'common/format';\r\nimport calculateEffectiveDamage from 'parser/core/calculateEffectiveDamage';\r\nimport Spell from 'common/SPELLS/Spell';\r\nimport SpellUsable from 'parser/shared/modules/SpellUsable';\r\n\r\nconst debug = false;\r\n\r\nconst MS_BUFFER = 500;\r\n\r\nclass ExecuteHelper extends Analyzer {\r\n  static dependencies = {\r\n    spellUsable: SpellUsable,\r\n  };\r\n\r\n  protected spellUsable!: SpellUsable;\r\n\r\n  //region IMPLEMENTME statics\r\n  /**\r\n   * Array of objects from common/SPELLS\r\n   * This should contain any execute spells such as Kill Shot, Execute etc.\r\n   */\r\n  static executeSpells: Spell[] = [];\r\n\r\n  /**\r\n   * SELECTED_PLAYER or SELECTED_PLAYER_PET for usage in the eventfilter\r\n   */\r\n  static executeSources: number;\r\n\r\n  /**\r\n   * Array of objects from common/SPELLS\r\n   * This should contain any SPELLS object that allows execute to be used outside normal execute range\r\n   */\r\n  static executeOutsideRangeEnablers: Spell[] = [];\r\n\r\n  /**\r\n   * The lower threshold where execute is enabled, shown in decimals.\r\n   */\r\n  static lowerThreshold: number;\r\n\r\n  /**\r\n   * The upper threshold where an execute can be enabled immediately at a pull, shown in decimals.\r\n   */\r\n  static upperThreshold: number;\r\n\r\n  /**\r\n   * A boolean representing if the given execute modifies the damage of an existing spell.\r\n   * An execute spell should be labelled as false, whereas a talent that modifies an existing spell should be labelled as true.\r\n   */\r\n  static modifiesDamage: boolean;\r\n\r\n  /**\r\n   * represents the modifier of of a talent (or some other effect) that modifies the damage done by an existing spell\r\n   */\r\n  static damageModifier: number;\r\n  //endregion\r\n\r\n  //region Generic Variables\r\n  /**\r\n   * Is true if we're in an execute window either because of a buff giving access to execute spells or because of health windows\r\n   */\r\n  inExecuteWindow: boolean = false;\r\n\r\n  /**\r\n   * Is true if we're in an execute window due to health on a target, so a buff granting access to execute is pointless at this point\r\n   */\r\n  inHealthExecuteWindow: boolean = false;\r\n\r\n  /**\r\n   * A variable marking the timestamp of the start of the current execute window\r\n   */\r\n  executeWindowStart: number = 0;\r\n\r\n  /**\r\n   * A variable marking the timestamp of the last damage event within the execute window\r\n   */\r\n  lastExecuteHitTimestamp: number = 0;\r\n\r\n  /**\r\n   * The amount of time spent inside executewindows, either caused by health or by buffs giving access to execute\r\n   */\r\n  totalExecuteWindowDuration: number = 0;\r\n\r\n  /**\r\n   * Amount of damage done by the spells defined in executeSpells\r\n   */\r\n  damage: number = 0;\r\n\r\n  /**\r\n   * returns the total amount of casts of the executes listed in executeSpells\r\n   */\r\n  casts: number = 0;\r\n\r\n  /**\r\n   * returns the amount of casts of the executes listed in executeSpells that were cast whilst being in an execute window\r\n   */\r\n  castsWithExecute: number = 0;\r\n  //endregion\r\n\r\n  //region Execute helpers\r\n  /**\r\n   * Returns true if the event has less HP than the threshold.\r\n   * This is useful for any generic execute.\r\n   * @param event\r\n   */\r\n  isTargetInExecuteRange(event: DamageEvent) {\r\n    if (!event.hitPoints || !event.maxHitPoints) {\r\n      return false;\r\n    }\r\n    return (event.hitPoints / event.maxHitPoints) < this.lowerThreshold;\r\n  }\r\n\r\n  /**\r\n   * Returns true if the event has more HP than the threshold.\r\n   * This is useful for things like Firestarter and Flashpoint.\r\n   * @param event\r\n   */\r\n  isTargetInReverseExecuteRange(event: DamageEvent) {\r\n    if (!event.hitPoints || !event.maxHitPoints) {\r\n      return false;\r\n    }\r\n    return (event.hitPoints / event.maxHitPoints) > this.upperThreshold;\r\n  }\r\n\r\n  /**\r\n   * Returns true if either isTargetInExecuteRange() or isTargetInReverseExecuteRange() is true.\r\n   * @param event\r\n   */\r\n  isTargetInHealthExecuteWindow(event: DamageEvent) {\r\n    if (!event.hitPoints || !event.maxHitPoints) {\r\n      return false;\r\n    }\r\n    return (this.isTargetInExecuteRange(event) || this.isTargetInReverseExecuteRange(event));\r\n  }\r\n\r\n  /**\r\n   * Returns true if the combatant has one of the buffs that enable execute to be used outside of the regular execute windows\r\n   */\r\n  get isExecuteUsableOutsideExecuteRange() {\r\n    let usable: boolean = false;\r\n    this.executeOutsideRangeEnablers.forEach(spell => {\r\n      if (this.selectedCombatant.hasBuff(spell.id)) {\r\n        usable = true;\r\n      }\r\n    });\r\n    return usable;\r\n  }\r\n\r\n  /**\r\n   * If all execute spells are on cooldown, then we should count the entire period of cooldown as \"inside execute\" to properly calculate maxCasts\r\n   */\r\n  get areExecuteSpellsOnCD() {\r\n    let allOnCD: boolean = true;\r\n    this.executeSpells.forEach(spell => {\r\n      if (!this.spellUsable.isOnCooldown(spell.id)) {\r\n        allOnCD = false;\r\n      }\r\n    });\r\n    return allOnCD;\r\n  }\r\n\r\n  //endregion\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(Events.damage.by(this.executeSources), this.onGeneralDamage);\r\n    this.addEventListener(Events.cast.by(this.executeSources).spell(this.executeSpells), this.onExecuteCast);\r\n    this.addEventListener(Events.damage.by(this.executeSources).spell(this.executeSpells), this.onExecuteDamage);\r\n    this.addEventListener(Events.applybuff.to(this.executeSources).spell(this.executeOutsideRangeEnablers), this.applyExecuteEnablerBuff);\r\n    this.addEventListener(Events.removebuff.to(this.executeSources).spell(this.executeOutsideRangeEnablers), this.removeExecuteEnablerBuff);\r\n    this.addEventListener(Events.fightend, this.onFightEnd);\r\n  }\r\n\r\n  //region Static Getters\r\n  get executeSources() {\r\n    const ctor = this.constructor as typeof ExecuteHelper;\r\n    return ctor.executeSources;\r\n  }\r\n\r\n  get executeSpells() {\r\n    const ctor = this.constructor as typeof ExecuteHelper;\r\n    return ctor.executeSpells;\r\n  }\r\n\r\n  get executeOutsideRangeEnablers() {\r\n    const ctor = this.constructor as typeof ExecuteHelper;\r\n    return ctor.executeOutsideRangeEnablers;\r\n  }\r\n\r\n  get lowerThreshold() {\r\n    const ctor = this.constructor as typeof ExecuteHelper;\r\n    return ctor.lowerThreshold;\r\n  }\r\n\r\n  get upperThreshold() {\r\n    const ctor = this.constructor as typeof ExecuteHelper;\r\n    return ctor.upperThreshold;\r\n  }\r\n\r\n  get modifiesDamage() {\r\n    const ctor = this.constructor as typeof ExecuteHelper;\r\n    return ctor.modifiesDamage;\r\n  }\r\n\r\n  get damageModifier() {\r\n    const ctor = this.constructor as typeof ExecuteHelper;\r\n    return ctor.damageModifier;\r\n  }\r\n\r\n  //endregion\r\n\r\n  //region Generic Getters\r\n  get executeDamage() {\r\n    return this.damage;\r\n  }\r\n\r\n  get totalExecuteDuration() {\r\n    return this.totalExecuteWindowDuration;\r\n  }\r\n\r\n  get totalCasts() {\r\n    return this.casts;\r\n  }\r\n\r\n  get totalExecuteCasts() {\r\n    return this.castsWithExecute;\r\n  }\r\n\r\n  //endregion\r\n\r\n  //region Event Listener functions\r\n  onGeneralDamage(event: DamageEvent) {\r\n    if (event.targetIsFriendly) {\r\n      return;\r\n    }\r\n    if (this.areExecuteSpellsOnCD || this.isExecuteUsableOutsideExecuteRange || this.isTargetInHealthExecuteWindow(event)) {\r\n      this.lastExecuteHitTimestamp = event.timestamp;\r\n      if (!this.inExecuteWindow) {\r\n        this.inExecuteWindow = true;\r\n        this.inHealthExecuteWindow = true;\r\n        this.executeWindowStart = event.timestamp;\r\n        debug && console.log('Execute window started');\r\n      }\r\n    } else {\r\n      if (this.inExecuteWindow && event.timestamp > this.lastExecuteHitTimestamp + MS_BUFFER) {\r\n        this.inExecuteWindow = false;\r\n        this.inHealthExecuteWindow = false;\r\n        this.totalExecuteWindowDuration += event.timestamp - this.executeWindowStart;\r\n        debug && console.log('Execute window ended, current total: ', this.totalExecuteDuration);\r\n      }\r\n    }\r\n  }\r\n\r\n  onExecuteCast() {\r\n    this.casts += 1;\r\n    if (this.inExecuteWindow || this.inHealthExecuteWindow) {\r\n      this.castsWithExecute += 1;\r\n    }\r\n  }\r\n\r\n  onExecuteDamage(event: DamageEvent) {\r\n    if (this.inExecuteWindow || this.inHealthExecuteWindow) {\r\n      if (this.modifiesDamage) {\r\n        this.damage += calculateEffectiveDamage(event, this.damageModifier);\r\n      } else {\r\n        this.damage += event.amount + (event.absorbed || 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  applyExecuteEnablerBuff(event: ApplyBuffEvent) {\r\n    if (!this.inExecuteWindow && !this.inHealthExecuteWindow) {\r\n      this.executeWindowStart = event.timestamp;\r\n    }\r\n    this.inExecuteWindow = true;\r\n    this.lastExecuteHitTimestamp = event.timestamp;\r\n    debug && console.log(event.ability.name, ' was applied starting the execute window');\r\n  }\r\n\r\n  removeExecuteEnablerBuff(event: RemoveBuffEvent) {\r\n    if (!this.inHealthExecuteWindow) {\r\n      this.inExecuteWindow = false;\r\n      this.totalExecuteWindowDuration += event.timestamp - this.executeWindowStart;\r\n      debug && console.log(event.ability.name, ' was removed ending the execute window, current total: ', this.totalExecuteDuration);\r\n    } else {\r\n      debug && console.log('Execute enabler buff ended, but inside execute health window so window still ongoing.');\r\n    }\r\n  }\r\n\r\n  onFightEnd(event: FightEndEvent) {\r\n    if (this.inExecuteWindow) {\r\n      this.totalExecuteWindowDuration += event.timestamp - this.executeWindowStart;\r\n      this.inExecuteWindow = false;\r\n    }\r\n    debug && console.log('Fight ended, total duration of execute: ' + this.totalExecuteDuration + ' | ' + formatDuration(this.totalExecuteDuration));\r\n  }\r\n\r\n  //endregion\r\n}\r\n\r\nexport default ExecuteHelper;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport StatisticBox from './StatisticBox';\r\n\r\nexport { STATISTIC_ORDER } from './StatisticBox';\r\n\r\n/**\r\n * @deprecated Use `interface/statistic/Statistic` instead.\r\n */\r\nclass LazyLoadStatisticBox extends React.PureComponent {\r\n  static propTypes = {\r\n    loader: PropTypes.func.isRequired,\r\n    value: PropTypes.node.isRequired,\r\n    children: PropTypes.node,\r\n  };\r\n  static contextTypes = {\r\n    updateResults: PropTypes.func.isRequired,\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      loaded: false,\r\n      loading: false,\r\n    };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick() {\r\n    if (this.state.loaded) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      loading: true,\r\n    });\r\n    this.props.loader().then((result) => {\r\n      this.setState({\r\n        loading: false,\r\n        loaded: true,\r\n      });\r\n      this.context.updateResults();\r\n      return result;\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { value, children, ...others } = this.props;\r\n    delete others.loader;\r\n    delete others.children;\r\n\r\n    return (\r\n      <StatisticBox\r\n        onClick={this.handleClick}\r\n        value={this.state.loaded ? value : (this.state.loading ? 'Loading...' : 'Click to load')}\r\n        style={{ cursor: this.state.loaded ? undefined : 'pointer' }}\r\n        {...others}\r\n      >\r\n        {this.state.loaded ? children : null}\r\n      </StatisticBox>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LazyLoadStatisticBox;\r\n","import React from 'react';\r\n\r\nimport colorForPerformance from 'common/colorForPerformance';\r\n\r\ninterface Props {\r\n  percent: number;\r\n}\r\n\r\nconst PerformanceBar = ({ percent }: Props) => (\r\n  <div className=\"performance-bar-container\">\r\n    <div\r\n      className=\"performance-bar\"\r\n      style={{\r\n        width: `${percent * 100}%`,\r\n        transition: 'background-color 800ms',\r\n        backgroundColor: colorForPerformance(percent),\r\n      }}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default PerformanceBar;\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAAuCAYAAACCq/96AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAAPKSURBVGhD7ZtLSBRxHMcttegQPYhKKCii94PeWVD0Lo+uVFoQRJck9BAF+WAJDS8FXUItzdVMzQ5ejO5B++jhW7e3eggCL+2641p0+Pf9zf5n3V3/7u6sO40j84EPiLM7/vbD/GcWdzaFMXYMZkV4Bm6EC1NMwgmJlDU+VNfs/179UvZbZbvUb20ZfXelxuvIqdRSPko0ymEVrIaP4GNYA2vhE24dtMF62ACfwkb4DDbBZtgCn3Nb4QsVBlBi+YdsjWPuuyxUaeAO83XfYF7XJYYXppkeh6WdjyPCCpnODsEAcqzhBltkLEU5Ws8tzaN57TltfKRQiqDoBfxvJ4KNDzdViUKFStGk3tuIlid+scnSbqFlolAARcPrYWiw+gZRpEiD0ZwXxC82CWJpOvhYRAkUDa+HE8H8n+89nBToY4VES0RTHZb+BIL9grR09TDAqNNS4uu+GR7s0/2vfLNmIE5RAsE6oL5QMBqWlpsZLA6UYF7neSb1lZrBYhEMRuKELkczg01NWDDSmcskd8UXvlkzZk8wGtyZ18U3a8bsCmbP0XwwwwbTCzOYSowcTJfBphGsUCeDGCmYXv6GQcxgsTWDqdQMplLDBvsLR3QyiJGCaT5XPJjBVGIGU4kug3k7rpWZwVQgucsfeF0XzWDx4h+sqR3tyA/7FMoMFgX/UL2N/rs7+v4qYp0zg8WCPm2XBsqY1FvMvG8vm8FiodyeQNGUWxGMHiwjijIjr7MzEnVssLZVDuYuZ1K/lfk6C5jHmeviuyYSmUtLg4gGi6WMcrKOJp2jKErwM0+BgaVZxPBW4wNjLI3vPpG5tHLiVgGgaTCSoolChSrfJdRX3INgi+Ec7H7GBlsOe6DogVMpI4ozlfFEG//RVoRYm+E87D6RubQyLBihdjgZUZho+jqvC0ORf36+siIU3dx3BK6Bc/EnZkq0ScEINcPJiKLE0tdVGC0WeRbugysgLc2ZEE0YTDWeN5b8yCAee46bb54ShNgBlUCRnoZ0lNHSXAQp2uwg0WAEQuyCkbHo6KJgR+EeuBou4E8xPtMJRiCGEo1CkcrPJ+EhuAkugan8KcZmusEIxNgPKdApqESj7wkoR9kqmM4fbmySFCwV7oSH4XFIsSgaLU363Va4FBr/XJaMYARipMMtMBPSkUWxKBoddQfgWmj8b6UkKxiBIGlwHdwN6SpJ0U7Ag5BiroTGvgB4XdmZHrulNFK+WTUIQsszA26HdLRRrL2QgtEVk95mzI7zWbJAkLlwGdwAt0E6h62HdPKnK+Z8qNP5LCXlH/EZJ5PjYeR7AAAAAElFTkSuQmCC\"","import RESOURCE_TYPES from 'game/RESOURCE_TYPES';\r\nimport ResourceTracker from 'parser/shared/modules/resources/resourcetracker/ResourceTracker';\r\nimport SPELLS from 'common/SPELLS';\r\n\r\nclass HolyPowerTracker extends ResourceTracker {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.resource = RESOURCE_TYPES.HOLY_POWER;\r\n  }\r\n\r\n  getReducedCost(event) {\r\n    if (!this.getResource(event).cost) {\r\n      return 0;\r\n    }\r\n    let cost = this.getResource(event).cost;\r\n    if (this.selectedCombatant.hasBuff(SPELLS.FIRES_OF_JUSTICE_BUFF.id)) {\r\n      cost = cost - 1;\r\n    }\r\n    return cost;\r\n  }\r\n}\r\n\r\nexport default HolyPowerTracker;\r\n","/**\r\n * @deprecated Use `interface/statistic/StatisticGroup` instead.\r\n */\r\nconst StatisticWrapper = props => props.children;\r\n\r\nexport default StatisticWrapper;\r\n","import SPELLS from 'common/SPELLS/index';\r\n\r\n/*\r\n * Fields:\r\n * int: spell scales with Intellect\r\n * crit: spell scales with (is able to or procced from) Critical Strike\r\n * hasteHpm: spell does more healing due to Haste, e.g. HoTs that gain more ticks\r\n * hasteHpct: spell can be cast more frequently due to Haste, basically any spell except for non haste scaling CDs\r\n * mastery: spell is boosted by Mastery\r\n * masteryStack: spell's HoT counts as a Mastery Stack\r\n * vers: spell scales with Versatility\r\n * multiplier: spell scales with whatever procs it, should be ignored for purpose of weights and for 'total healing' number\r\n * ignored: spell should be ignored for purpose of stat weights\r\n */\r\n\r\n// This only works with actual healing events; casts are not recognized.\r\nexport default {\r\n  [SPELLS.LEECH.id]: { // procs a percent of all your healing, so we ignore for weights and total healing\r\n    multiplier: true,\r\n  },\r\n  [SPELLS.HEALTHSTONE.id]: {\r\n    int: false,\r\n    crit: false,\r\n    hasteHpct: false,\r\n    mastery: false,\r\n    vers: true, // confirmed\r\n  },\r\n  [SPELLS.MARK_OF_THE_ANCIENT_PRIESTESS.id]: {\r\n    int: false,\r\n    crit: true,\r\n    hasteHpct: false,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n};\r\n","import React from 'react';\r\n\r\nimport InformationIcon from 'interface/icons/Information';\r\n\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport Tooltip, { TooltipElement } from 'common/Tooltip';\r\nimport { formatNumber } from 'common/format';\r\nimport { calculatePrimaryStat, calculateSecondaryStatDefault } from 'common/stats';\r\nimport Analyzer, { SELECTED_PLAYER, SELECTED_PLAYER_PET } from 'parser/core/Analyzer';\r\nimport Events, { EventType } from 'parser/core/Events';\r\nimport HIT_TYPES from 'game/HIT_TYPES';\r\nimport HealingValue from 'parser/shared/modules/HealingValue';\r\nimport DamageValue from 'parser/shared/modules/DamageValue';\r\nimport CritEffectBonus from 'parser/shared/modules/helpers/CritEffectBonus';\r\nimport StatTracker from 'parser/shared/modules/StatTracker';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport StatisticWrapper from 'interface/others/StatisticWrapper';\r\nimport InfoIcon from 'interface/icons/Info';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport CORE_SPELL_INFO from './SpellInfo';\r\nimport STAT, { getClassNameColor, getIcon, getName, getNameTranslated } from './STAT';\r\nimport QELiveLogo from './images/QE-Logo-New-Small.png';\r\n\r\nconst DEBUG = false;\r\n\r\n/**\r\n * This is currently completely focussed on Healer stat weights but it should be relatively easy to modify it to work for a DPS, it just requires some work. The only reason no effort was put towards this is that we currently have no DPS interested in implementing this so it would be wasted time. If you do want to implement stat weights for a DPS this should provide you with a very good basis.\r\n * @property {CritEffectBonus} critEffectBonus\r\n * @property {StatTracker} statTracker\r\n */\r\nclass BaseHealerStatValues extends Analyzer {\r\n  static dependencies = {\r\n    critEffectBonus: CritEffectBonus,\r\n    statTracker: StatTracker,\r\n  };\r\n\r\n  /**\r\n   * QE Live Link Setter\r\n   * As of right now this is only enabled for MW, Resto Druid, and Holy Pally\r\n   * Unless you talk to Voulk, the creator of QElive, Do not flip the switch for other healers\r\n   */\r\n  qeLive = false;\r\n\r\n  // region Spell info\r\n\r\n  // We assume unlisted spells scale with vers only (this will mostly be trinkets)\r\n  fallbackSpellInfo = {\r\n    int: false,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: false,\r\n    mastery: false,\r\n    vers: true,\r\n  };\r\n  // This will contain shared settings for things like trinkets and Leech\r\n  sharedSpellInfo = CORE_SPELL_INFO;\r\n  // This is for spec specific implementations to override. It gets priority over defaultSpellInfo.\r\n  spellInfo = {};\r\n\r\n  mentioned = [];\r\n  _getSpellInfo(event) {\r\n    const spellId = event.ability.guid;\r\n\r\n    const specSpecific = this.spellInfo[spellId];\r\n    if (specSpecific) {\r\n      return specSpecific;\r\n    }\r\n    const shared = this.sharedSpellInfo[spellId];\r\n    if (shared) {\r\n      return shared;\r\n    }\r\n\r\n    if (process.env.NODE_ENV === 'development') {\r\n      if (!this.mentioned.includes(spellId)) {\r\n        console.warn(`Missing spell definition: ${spellId}: ${event.ability.name}, using fallback:`, this.fallbackSpellInfo);\r\n        this.mentioned.push(spellId);\r\n      }\r\n    }\r\n\r\n    return this.fallbackSpellInfo;\r\n  }\r\n\r\n  // endregion\r\n\r\n  totalAdjustedHealing = 0; // total healing after excluding 'multiplier' spells like Leech / Velens\r\n\r\n  // These are the total healing that would be gained if their respective stats ratings were increased by one.\r\n  totalOneInt = 0;\r\n  totalOneCrit = 0;\r\n  totalOneHasteHpct = 0;\r\n  totalOneHasteHpm = 0;\r\n  totalOneMastery = 0;\r\n  totalOneVers = 0; // from healing increase only\r\n  totalOneVersDr = 0; // from damage reduced only\r\n  totalOneLeech = 0;\r\n\r\n  playerHealthMissing = 0;\r\n\r\n  scaleWeightsWithHealth = false;\r\n\r\n  constructor(options){\r\n    super(options);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this.onHeal);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER_PET), this.onHeal);\r\n    this.addEventListener(Events.absorbed.by(SELECTED_PLAYER), this.onAbsorb);\r\n    this.addEventListener(Events.absorbed.by(SELECTED_PLAYER_PET), this.onAbsorb);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER), this.onRemoveBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER_PET), this.onRemoveBuff);\r\n    this.addEventListener(Events.heal.to(SELECTED_PLAYER), this.onHealTaken);\r\n    this.addEventListener(Events.damage.to(SELECTED_PLAYER), this.onDamageTaken);\r\n    this.addEventListener(Events.fightend, this.onFightend);\r\n  }\r\n\r\n  onHeal(event) {\r\n    const healVal = new HealingValue(event.amount, event.absorbed, event.overheal);\r\n    this._handleHealEvent(event, healVal);\r\n  }\r\n  onAbsorb(event) {\r\n    const healVal = new HealingValue(event.amount, 0, 0);\r\n    this._handleHealEvent(event, healVal);\r\n  }\r\n  onRemoveBuff(event) {\r\n    if (event.absorb) {\r\n      const healVal = new HealingValue(0, 0, event.absorb);\r\n      this._handleHealEvent(event, healVal);\r\n    }\r\n  }\r\n  _handleHealEvent(event, healVal) {\r\n    const spellInfo = this._getSpellInfo(event);\r\n    const targetHealthPercentage = (event.hitPoints - healVal.effective) / event.maxHitPoints; // hitPoints contains HP *after* the heal\r\n    this._handleHeal(spellInfo, event, healVal, targetHealthPercentage);\r\n  }\r\n  /**\r\n   * This actually does that stat weights calculations.\r\n   * @param spellInfo An object containing information about how to treat the spell, like on what stats it scales.\r\n   * @param eventForWeights The event that uses the stats to scale its healing. If we're tracking a multiplier (like Beacons), this should be the source of the multiplier.\r\n   * @param {HealingValue} healVal The actual healing done, all child weight calculators should use this instead of the event data as that might be for another event.\r\n   * @param targetHealthPercentage The percentage of health the target has remaining BEFORE the heal.\r\n   * @private\r\n   */\r\n  _handleHeal(spellInfo, eventForWeights, healVal, targetHealthPercentage) {\r\n    // Most spells are counted in healing total, but some spells scale not on their own but 'second hand' from other spells\r\n    // I adjust them out of total healing to preserve some accuracy in the \"Rating per 1%\" stat.\r\n    // Good examples of multiplier spells are Leech and Velens.\r\n    if (!spellInfo.multiplier) {\r\n      this.totalAdjustedHealing += this._adjustGain(healVal.effective, targetHealthPercentage);\r\n    }\r\n\r\n    if (spellInfo.ignored) {\r\n      return;\r\n    }\r\n\r\n    this.totalOneLeech += this._adjustGain(this._leech(eventForWeights, healVal, spellInfo), targetHealthPercentage);\r\n\r\n    if (spellInfo.multiplier) {\r\n      // Multiplier spells aren't counted for weights because they don't **directly** benefit from stat weights\r\n      return;\r\n    }\r\n\r\n    if (spellInfo.int) {\r\n      this.totalOneInt += this._adjustGain(this._intellect(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.crit) {\r\n      this.totalOneCrit += this._adjustGain(this._criticalStrike(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.hasteHpct) {\r\n      this.totalOneHasteHpct += this._adjustGain(this._hasteHpct(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.hasteHpm) {\r\n      this.totalOneHasteHpm += this._adjustGain(this._hasteHpm(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.mastery) {\r\n      this.totalOneMastery += this._adjustGain(this._mastery(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.vers) {\r\n      this.totalOneVers += this._adjustGain(this._versatility(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n  }\r\n  _adjustGain(gain, targetHealthPercentage) {\r\n    if (gain === 0) {\r\n      return 0;\r\n    }\r\n    // We want 0-20% health to get value gain, and then linearly decay to 100% health\r\n    const maxValueHealthPercentage = 0.3;\r\n    const mult = 1 - Math.max(0, (targetHealthPercentage - maxValueHealthPercentage) / (1 - maxValueHealthPercentage));\r\n    return this.scaleWeightsWithHealth ? gain * mult : gain;\r\n  }\r\n  _leech(event, healVal, spellInfo) {\r\n    if (event.type !== EventType.Heal) {\r\n      return 0; // leech doesn't proc from absorbs\r\n    }\r\n\r\n    // We have to calculate leech weight differently depending on if we already have any leech rating.\r\n    // Leech is marked as a 'multplier' heal, so we have to check it before we do the early return below\r\n    const hasLeech = this.statTracker.currentLeechPercentage > 0;\r\n    if (hasLeech) {\r\n      return this._leechHasLeech(event, healVal, spellInfo);\r\n    } else {\r\n      return this._leechPrediction(event, healVal, spellInfo);\r\n    }\r\n  }\r\n  _leechHasLeech(event, healVal/*, spellInfo*/) {\r\n    // When the user has Leech we can use the actual Leech healing to accuractely calculate its HPS value without having to do any kind of predicting\r\n    const spellId = event.ability.guid;\r\n    if (spellId !== SPELLS.LEECH.id) {\r\n      return 0;\r\n    }\r\n    if (!healVal.overheal) {\r\n      return healVal.effective / this.statTracker.currentLeechRating; // TODO: Make a generic method to account for base percentage\r\n    }\r\n    return 0;\r\n  }\r\n  _leechPrediction(event, healVal, spellInfo) {\r\n    // Without Leech we will have to make an estimation so we can still provide the user with a decent value\r\n    if (this.owner.toPlayer(event)) {\r\n      return 0; // Leech doesn't proc from self-healing\r\n    }\r\n    if (spellInfo.multiplier) {\r\n      return 0; // Leech doesn't proc from multipliers such as Velen's Future Sight\r\n    }\r\n    if (this.playerHealthMissing > 0) { // if the player is full HP this would have overhealed.\r\n      const healIncreaseFromOneLeech = this.statTracker.statMultiplier.leech / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentLeechRating, this.statTracker.statBaselineRatingPerPercent[STAT.LEECH], 1, false);\r\n      return healVal.raw * healIncreaseFromOneLeech;\r\n    }\r\n    return 0;\r\n  }\r\n  _intellect(event, healVal) {\r\n    if (healVal.overheal) {\r\n      // If a spell overheals, it could not have healed for more. Seeing as Int only adds HP on top of the existing heal we can skip it as increasing the power of this heal would only be more overhealing.\r\n      return 0;\r\n    }\r\n    const healIncreaseFromOneInt = this.statTracker.statMultiplier.intellect / this.statTracker.currentIntellectRating;\r\n    return healVal.effective * healIncreaseFromOneInt;\r\n  }\r\n  _getCritChance(event) {\r\n    const rating = this.statTracker.currentCritRating;\r\n    const baseCritChance = this.statTracker.baseCritPercentage;\r\n    const ratingCritChance = rating / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentCritRating, this.statTracker.statBaselineRatingPerPercent[STAT.CRITICAL_STRIKE]);\r\n\r\n    return { baseCritChance, ratingCritChance };\r\n  }\r\n  _isCrit(event) {\r\n    return event.hitType === HIT_TYPES.CRIT;\r\n  }\r\n  _criticalStrike(event, healVal) {\r\n    if (this._isCrit(event)) {\r\n      // This collects the total effective healing contributed by the last 1 point of critical strike rating.\r\n      // We don't make any predictions on normal hits based on crit chance since this would be guess work and we are a log analysis system so we prefer to only work with facts. Actual crit heals are undeniable facts, unlike speculating the chance a normal hit might have crit (and accounting for the potential overhealing of that).\r\n\r\n      const { baseCritChance, ratingCritChance } = this._getCritChance(event);\r\n\r\n      const totalCritChance = baseCritChance + ratingCritChance;\r\n      if (totalCritChance > (1 + 1 / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentCritRating, this.statTracker.statBaselineRatingPerPercent[STAT.CRITICAL_STRIKE]))) {\r\n        // If the crit chance was more than 100%+1 rating, then the last rating was over the cap and worth 0.\r\n        return 0;\r\n      }\r\n      const ratingCritChanceContribution = 1 - baseCritChance / totalCritChance;\r\n\r\n      const critMult = this.critEffectBonus.getBonus(event);\r\n      const rawBaseHealing = healVal.raw / critMult;\r\n      const effectiveCritHealing = Math.max(0, healVal.effective - rawBaseHealing);\r\n      const rating = this.statTracker.currentCritRating;\r\n      const healIncreaseFromOneCrit = this.statTracker.statMultiplier.crit * ratingCritChanceContribution / rating;\r\n\r\n      return effectiveCritHealing * healIncreaseFromOneCrit;\r\n    }\r\n    return 0;\r\n  }\r\n  _hasteHpct(event, healVal) {\r\n    const currHastePerc = this.statTracker.currentHastePercentage;\r\n    const healIncreaseFromOneHaste = this.statTracker.statMultiplier.haste / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentHasteRating, this.statTracker.statBaselineRatingPerPercent[STAT.HASTE]);\r\n    const baseHeal = healVal.effective / (1 + currHastePerc);\r\n    return baseHeal * healIncreaseFromOneHaste;\r\n  }\r\n  _hasteHpm(event, healVal) {\r\n    const healIncreaseFromOneHaste = this.statTracker.statMultiplier.haste / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentHasteRating, this.statTracker.statBaselineRatingPerPercent[STAT.HASTE]);\r\n    const noHasteHealing = healVal.effective / (1 + this.statTracker.currentHastePercentage);\r\n    return noHasteHealing * healIncreaseFromOneHaste;\r\n  }\r\n  _mastery(event, healVal) {\r\n    throw new Error('Missing custom Mastery implementation. This is different per spec.');\r\n  }\r\n  _versatility(event, healVal) {\r\n    if (healVal.overheal) {\r\n      // If a spell overheals, it could not have healed for more. Seeing as Versatility only adds HP on top of the existing heal we can skip it as increasing the power of this heal would only be more overhealing.\r\n      return 0;\r\n    }\r\n    const currVersPerc = this.statTracker.currentVersatilityPercentage;\r\n    const healIncreaseFromOneVers = this.statTracker.statMultiplier.versatility / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentVersatilityRating, this.statTracker.statBaselineRatingPerPercent[STAT.VERSATILITY], 1, false);\r\n    const baseHeal = healVal.effective / (1 + currVersPerc);\r\n    return baseHeal * healIncreaseFromOneVers;\r\n  }\r\n\r\n  onDamageTaken(event) {\r\n    this._updateMissingHealth(event);\r\n\r\n    const damageVal = new DamageValue(event.amount, event.absorbed, event.blocked, event.overkill);\r\n    // const targetHealthPercentage = event.hitPoints / event.maxHitPoints; // hitPoints contains HP *after* the damage taken, which in this case is desirable\r\n    // this.totalOneVersDr += this._adjustGain(this._versatilityDamageReduction(event, damageVal), targetHealthPercentage);\r\n    // TODO: Figure out how to make this account for target health since damage event don't appear to have hitPoints info\r\n    this.totalOneVersDr += this._versatilityDamageReduction(event, damageVal);\r\n  }\r\n  _versatilityDamageReduction(event, damageVal) {\r\n    const amount = damageVal.effective;\r\n    const currentVersDamageReductionPercentage = this.statTracker.currentVersatilityPercentage / 2;\r\n    const damageReductionIncreaseFromOneVers = this.statTracker.statMultiplier.versatility / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentVersatilityRating, this.statTracker.statBaselineRatingPerPercent[STAT.VERSATILITY], 1, false) / 2; // the DR part is only 50% of the Versa percentage\r\n\r\n    const noVersDamage = amount / (1 - currentVersDamageReductionPercentage);\r\n    return noVersDamage * damageReductionIncreaseFromOneVers;\r\n  }\r\n\r\n  onHealTaken(event) {\r\n    this._updateMissingHealth(event);\r\n  }\r\n  _updateMissingHealth(event) {\r\n    if (event.hitPoints && event.maxHitPoints) { // fields not always populated, don't know why\r\n      // `maxHitPoints` is always the value *after* the effect applied\r\n      this.playerHealthMissing = event.maxHitPoints - event.hitPoints;\r\n    }\r\n  }\r\n\r\n  onFightend() {\r\n    if (DEBUG) {\r\n      console.log('total', formatNumber(this.totalAdjustedHealing));\r\n      console.log(`Int - ${formatNumber(this.totalOneInt)}`);\r\n      console.log(`Crit - ${formatNumber(this.totalOneCrit)}`);\r\n      console.log(`Haste HPCT - ${formatNumber(this.totalOneHasteHpct)}`);\r\n      console.log(`Haste HPM - ${formatNumber(this.totalOneHasteHpm)}`);\r\n      console.log(`Mastery - ${formatNumber(this.totalOneMastery)}`);\r\n      console.log(`Vers - ${formatNumber(this.totalOneVers)}`);\r\n      console.log(`Leech - ${formatNumber(this.totalOneLeech)}`);\r\n    }\r\n  }\r\n\r\n  get hpsPerIntellect() {\r\n    return this._getGain(STAT.INTELLECT) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerCriticalStrike() {\r\n    return this._getGain(STAT.CRITICAL_STRIKE) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerHasteHPCT() {\r\n    return this._getGain(STAT.HASTE_HPCT) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerHasteHPM() {\r\n    return this._getGain(STAT.HASTE_HPM) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerHaste() {\r\n    return this.hpsPerHasteHPCT + this.hpsPerHasteHPM;\r\n  }\r\n  get hpsPerMastery() {\r\n    return this._getGain(STAT.MASTERY) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerVersatility() {\r\n    return this._getGain(STAT.VERSATILITY) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerVersatilityDR() {\r\n    return this._getGain(STAT.VERSATILITY_DR) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerLeech() {\r\n    return this._getGain(STAT.LEECH) / this.owner.fightDuration * 1000;\r\n  }\r\n\r\n  // region Item values\r\n  calculateItemStatsHps(baseStats, itemLevel) {\r\n    let hps = 0;\r\n    if (baseStats.primary) {\r\n      hps += calculatePrimaryStat(baseStats.itemLevel, baseStats.primary, itemLevel) * this.hpsPerIntellect;\r\n    }\r\n    if (baseStats.criticalStrike) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.criticalStrike, itemLevel) * this.hpsPerCriticalStrike;\r\n    }\r\n    if (baseStats.haste) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.haste, itemLevel) * this.hpsPerHaste;\r\n    }\r\n    if (baseStats.mastery) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.mastery, itemLevel) * this.hpsPerMastery;\r\n    }\r\n    if (baseStats.versatility) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.versatility, itemLevel) * this.hpsPerVersatility;\r\n    }\r\n    if (baseStats.leech) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.leech, itemLevel) * this.hpsPerLeech;\r\n    }\r\n    return hps;\r\n  }\r\n  // endregion\r\n\r\n  // region statistic\r\n  _ratingPerOnePercent(oneRatingHealing) {\r\n    const onePercentHealing = this.totalAdjustedHealing / 100;\r\n    return onePercentHealing / oneRatingHealing;\r\n  }\r\n  _getGain(stat) {\r\n    switch (stat) {\r\n      case STAT.INTELLECT:\r\n        return this.totalOneInt;\r\n      case STAT.CRITICAL_STRIKE:\r\n        return this.totalOneCrit;\r\n      case STAT.HASTE_HPCT:\r\n        return this.totalOneHasteHpct;\r\n      case STAT.HASTE_HPM:\r\n        return this.totalOneHasteHpm;\r\n      case STAT.MASTERY:\r\n        return this.totalOneMastery;\r\n      case STAT.VERSATILITY:\r\n        return this.totalOneVers;\r\n      case STAT.VERSATILITY_DR:\r\n        return this.totalOneVers + this.totalOneVersDr;\r\n      case STAT.LEECH:\r\n        return this.totalOneLeech;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n  _getTooltip(stat) {\r\n    switch (stat) {\r\n      case STAT.HASTE_HPCT:\r\n        return <Trans id=\"shared.healerStatValues.stats.hpct\">HPCT stands for \"Healing per Cast Time\". This is the value that Haste would be worth if you would cast everything you are already casting (and that scales with Haste) faster. Mana is not accounted for in any way and you should consider the Haste stat weight 0 if you run out of mana while doing everything else right.</Trans>;\r\n      case STAT.HASTE_HPM:\r\n        return <Trans id=\"shared.healerStatValues.stats.hpm\">HPM stands for \"Healing per Mana\". In valuing Haste, it considers only the faster HoT ticking and not the reduced cast times. Effectively it models haste's bonus to mana efficiency. This is typically the better calculation to use for raid encounters where mana is an issue.</Trans>;\r\n      case STAT.VERSATILITY_DR:\r\n        return <Trans id=\"shared.healerStatValues.stats.versDR\">Weight includes both healing boost and damage reduction, counting the damage reduced as additional throughput.</Trans>;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n  moreInformationLink = null;\r\n  static position = STATISTIC_ORDER.CORE(9);\r\n  statistic() {\r\n    const results = this._prepareResults();\r\n    const qeLink = results.reduce((urlParts, stat) => {\r\n      if (stat === 'intellect' || stat === 'versatilitydr') {\r\n        return urlParts;\r\n      }\r\n\r\n      const statValue = typeof stat === 'object' ? stat.stat : stat;\r\n      const gain = this._getGain(statValue);\r\n      const weight = gain / (this.totalOneInt || 1);\r\n      const statName = getName(statValue).replace(/[()\\s+]/g, '');\r\n\r\n      urlParts.push(statName + '=' + weight.toFixed(2));\r\n      return urlParts;\r\n    }, []).join('&');\r\n    return (\r\n      <StatisticWrapper position={this.constructor.position}>\r\n        <div className=\"col-lg-6 col-md-6 col-sm-6 col-xs-12\">\r\n          <div className=\"panel items statistic\">\r\n            {this.moreInformationLink && (\r\n              <a\r\n                href={this.moreInformationLink}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                <Tooltip content=\"Click for more information.\">\r\n                  <div\r\n                    className=\"detail-corner\"\r\n                    data-place=\"top\"\r\n                  >\r\n                    <InfoIcon />\r\n                  </div>\r\n                </Tooltip>\r\n              </a>\r\n            )}\r\n            <div className=\"panel-body\" style={{ padding: '10px 0 16px' }}>\r\n              <table className=\"data-table compact\" style={{ margin: 0 }}>\r\n                <thead>\r\n                  <tr className=\"text-muted\">\r\n                    <th style={{ minWidth: 30, fontWeight: 400 }}>\r\n                      <TooltipElement\r\n                        content={(\r\n                          <Trans id=\"shared.healerStatValues.statistic.title.tooltip\">\r\n                            These stat values are calculated using the actual circumstances of this encounter. These values reveal the value of the last 1 rating of each stat, they may not necessarily be the best way to gear. The stat values are likely to differ based on fight, raid size, items used, talents chosen, etc.<br /><br />\r\n                            DPS gains are not included in any of the stat values.\r\n                          </Trans>\r\n                        )}\r\n                      >\r\n                        <Trans id=\"shared.healerStatValues.statistic.title\">Stat Values</Trans>\r\n                      </TooltipElement>\r\n                      {false && this.qeLive && this.selectedCombatant.characterProfile && ( // globally disable the QELive button until QE is updated to accept Shadowlands data\r\n                        <Tooltip content=\"Opens in a new tab. Leverage the QE Live Tool to directly compare gear, azerite traits, and trinkets based on your stat values.\">\r\n                          <a\r\n                            href={`https://www.questionablyepic.com/live?import=WoWA&spec=${this.selectedCombatant.specId}&pname=${this.selectedCombatant.name}&realm=${this.selectedCombatant.characterProfile.realm}&region=${this.selectedCombatant.characterProfile.region}&${qeLink}`}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                          >\r\n                            <Trans id=\"shared.healerStatValues.statistic.qeLink\"><img src={QELiveLogo} alt=\"Questionably Epic Live\" style={{ height: '1.2em', marginLeft: 15 }} /> Open Questionably Epic Live</Trans>\r\n                          </a>\r\n                        </Tooltip>\r\n                      )}\r\n                    </th>\r\n                    <th className=\"text-right\" style={{ minWidth: 30, fontWeight: 400 }} colSpan={2}>\r\n                      <TooltipElement content={<Trans id=\"shared.healerStatValues.statistic.title.value.tooltip\">Normalized so Intellect is always 1.00.</Trans>}>\r\n                        <Trans id=\"shared.healerStatValues.statistic.title.value\">Value</Trans>\r\n                      </TooltipElement>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {results.map(row => {\r\n                    const stat = typeof row === 'object' ? row.stat : row;\r\n                    const tooltip = typeof row === 'object' ? row.tooltip : this._getTooltip(stat);\r\n                    const gain = this._getGain(stat);\r\n                    const weight = gain / (this.totalOneInt || 1);\r\n                    const ratingForOne = this._ratingPerOnePercent(gain);\r\n\r\n                    const Icon = getIcon(stat);\r\n\r\n                    const gainPerSecond = (gain / this.owner.fightDuration * 1000).toFixed(2);\r\n                    const rating = gain !== null ? (ratingForOne === Infinity ? '∞' : formatNumber(ratingForOne)) : 'NYI';\r\n                    const informationIconTooltip = <Trans id=\"shared.healerStatValues.statistic.stats.tooltip\">{gainPerSecond} HPS per 1 rating / {rating} rating per 1% throughput</Trans>;\r\n\r\n                    return (\r\n                      <tr key={stat}>\r\n                        <td className={getClassNameColor(stat)}>\r\n                          <Icon\r\n                            style={{\r\n                              height: '1.6em',\r\n                              width: '1.6em',\r\n                              marginRight: 10,\r\n                            }}\r\n                          />{' '}\r\n                          {tooltip ? <TooltipElement content={tooltip}>{getNameTranslated(stat)}</TooltipElement> : getNameTranslated(stat)}\r\n                        </td>\r\n                        <td className=\"text-right\">\r\n                          {stat === STAT.HASTE_HPCT && '0.00 - '}{gain !== null ? weight.toFixed(2) : 'NYI'}\r\n                        </td>\r\n                        <td style={{ padding: 6 }}>\r\n                          <Tooltip content={informationIconTooltip}>\r\n                            <div>\r\n                              <InformationIcon />\r\n                            </div>\r\n                          </Tooltip>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </StatisticWrapper>\r\n    );\r\n  }\r\n  // endregion\r\n}\r\n\r\nexport default BaseHealerStatValues;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { formatPercentage } from 'common/format';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nconst Gauge = ({ value }) => (\r\n  <div className=\"flex\" style={{ textAlign: 'center', marginTop: 12 }}>\r\n    <Trans id=\"interface.statistics.components.gauge.low\" render=\"div\" className=\"flex-main text-right text-muted\" style={{ paddingTop: 23, paddingRight: 8, fontSize: 12 }}>\r\n      Low\r\n    </Trans>\r\n    <div className=\"flex-sub\" style={{ position: 'relative' }}>\r\n      <svg width=\"98\" height=\"85\" viewBox=\"19 19 101 88\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style={{ fill: 'none' }}>\r\n          <path d=\"M101.459 101.459C119.033 83.8858 119.033 55.3934 101.459 37.8198C83.8859 20.2462 55.3934 20.2462 37.8198 37.8198C20.2463 55.3934 20.2463 83.8858 37.8198 101.459\" stroke=\"#f8b700\" strokeWidth=\"8\" strokeLinecap=\"round\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M68.6396 28.6396H70.6396V32.6396H68.6396V28.6396Z\" fill=\"#f8b700\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M87.7656 32.8389L89.5485 33.7451L87.7368 37.3097L85.9539 36.4035L87.7656 32.8389Z\" fill=\"#f8b700\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M101.207 50.1829L100.077 48.5324L103.378 46.2732L104.508 47.9236L101.207 50.1829Z\" fill=\"#f8b700\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M106.622 67.3762L106.417 65.3868L110.398 64.9765L110.603 66.966L106.622 67.3762Z\" fill=\"#f8b700\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M103.658 84.4276L104.376 82.5609L108.11 83.9969L107.392 85.8635L103.658 84.4276Z\" fill=\"#f8b700\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M52.0547 32.5298L50.2627 33.4179L52.039 37.0019L53.831 36.1137L52.0547 32.5298Z\" fill=\"#f8b700\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M36.1157 45.9784L34.965 47.6142L38.2354 49.9147L39.3861 48.2789L36.1157 45.9784Z\" fill=\"#f8b700\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M28.8926 64.968L28.6883 66.9576L32.6626 67.3657L32.8669 65.3761L28.8926 64.968Z\" fill=\"#f8b700\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M31.3486 84.3921L32.0806 86.2533L35.8031 84.7895L35.0711 82.9282L31.3486 84.3921Z\" fill=\"#f8b700\" />\r\n      </svg>\r\n\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          top: 49,\r\n          left: '50%',\r\n          width: 32,\r\n          height: 32,\r\n          transform: 'translate(-50%, -50%)',\r\n          marginTop: -13,\r\n        }}\r\n      >\r\n        <svg\r\n          width=\"10\"\r\n          height=\"32\"\r\n          viewBox=\"0 0 10 32\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          style={{\r\n            fill: 'none',\r\n            margin: 0,\r\n            transformOrigin: '5px 27px',\r\n            transform: `rotate(${-140 + 280 * value}deg)`,\r\n          }}\r\n        >\r\n          <path d=\"M9 27C9 29.2091 7.20914 31 5 31C2.79086 31 1 29.2091 1 27C1 24.7909 2.79086 23 5 23C7.20914 23 9 24.7909 9 27Z\" stroke=\"#f8b700\" strokeWidth=\"2\" />\r\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M6 0L6 23H4L4 0L6 0Z\" fill=\"#f8b700\" />\r\n        </svg>\r\n      </div>\r\n\r\n      <div className=\"value\" style={{ marginTop: -18, fontSize: '1.25em' }}>\r\n        {formatPercentage(value, 0)}%\r\n      </div>\r\n    </div>\r\n    <Trans id=\"interface.statistics.components.gauge.high\" render=\"div\" className=\"flex-main text-left text-muted\" style={{ paddingTop: 23, paddingLeft: 8, fontSize: 12 }}>\r\n      High\r\n    </Trans>\r\n  </div>\r\n);\r\nGauge.propTypes = {\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default Gauge;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './UptimeBar.scss';\r\n\r\nconst UptimeBar = props => {\r\n  const { uptimeHistory, start: fightStart, end: fightEnd, ...others } = props;\r\n  const fightDuration = fightEnd - fightStart;\r\n\r\n  return (\r\n    <div className=\"uptime-bar\" {...others}>\r\n      {uptimeHistory.map(buff => {\r\n        const start = buff.start;\r\n        const end = buff.end !== null ? buff.end : fightEnd;\r\n\r\n        return (\r\n          <div\r\n            key={`${start}-${end}`}\r\n            style={{\r\n              left: `${(start - fightStart) / fightDuration * 100}%`,\r\n              width: `${(end - start) / fightDuration * 100}%`,\r\n            }}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nUptimeBar.propTypes = {\r\n  uptimeHistory: PropTypes.arrayOf(PropTypes.shape({\r\n    start: PropTypes.number.isRequired,\r\n    end: PropTypes.number, // may be null if lasts until fight end\r\n  })).isRequired,\r\n  start: PropTypes.number.isRequired,\r\n  end: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default UptimeBar;\r\n","import React from 'react';\r\n\r\nimport { formatPercentage } from 'common/format';\r\nimport CoreAlwaysBeCasting from 'parser/shared/modules/AlwaysBeCasting';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport Gauge from 'interface/statistics/components/Gauge';\r\nimport { i18n } from '@lingui/core';\r\nimport { t, Trans } from '@lingui/macro';\r\n\r\nclass AlwaysBeCastingHealing extends CoreAlwaysBeCasting {\r\n  static HEALING_ABILITIES_ON_GCD = [\r\n    // Extend this class and override this property in your spec class to implement this module.\r\n  ];\r\n\r\n  healingTime = 0;\r\n  get healingTimePercentage() {\r\n    return this.healingTime / this.owner.fightDuration;\r\n  }\r\n  get nonHealingTimePercentage() {\r\n    return 1 - this.healingTimePercentage;\r\n  }\r\n\r\n  _lastHealingCastFinishedTimestamp = null;\r\n\r\n  onGCD(event) {\r\n    if (!super.onGCD(event)) {\r\n      return false;\r\n    }\r\n    if (this.countsAsHealingAbility(event)) {\r\n      this.healingTime += event.duration;\r\n    }\r\n    return true;\r\n  }\r\n  onEndChannel(event) {\r\n    if (!super.onEndChannel(event)) {\r\n      return false;\r\n    }\r\n    if (this.countsAsHealingAbility(event)) {\r\n      this.healingTime += event.duration;\r\n    }\r\n    return true;\r\n  }\r\n  countsAsHealingAbility(event) {\r\n    return this.constructor.HEALING_ABILITIES_ON_GCD.includes(event.ability.guid);\r\n  }\r\n\r\n  showStatistic = true;\r\n  static icons = {\r\n    healingTime: '/img/healing.png',\r\n    activeTime: '/img/sword.png',\r\n    downtime: '/img/afk.png',\r\n  };\r\n  statistic() {\r\n    if (!this.showStatistic) {\r\n      return null;\r\n    }\r\n\r\n    const activeTimePercentage = this.activeTimePercentage;\r\n    const healingTimePercentage = this.healingTimePercentage;\r\n    const downtimePercentage = this.downtimePercentage;\r\n\r\n    return (\r\n      <Statistic\r\n        position={STATISTIC_ORDER.CORE(10)}\r\n        tooltip={(\r\n          <Trans id=\"shared.alwaysBeCastingHealing.statistic.tooltip\">\r\n            This is the precise amount of time you were actively casting something or waiting for a Global Cooldown. The remaining time was downtime; you cast nothing and wasn't waiting for a global cooldown (i.e. \"AFK time\").<br /><br />\r\n\r\n            You were active for <strong>{formatPercentage(activeTimePercentage)}%</strong> of the fight. You spent <strong>{formatPercentage(healingTimePercentage)}%</strong> of your time casting supportive spells, <strong>{formatPercentage(activeTimePercentage - healingTimePercentage)}%</strong> of the time casting offensive spells and <strong>{formatPercentage(downtimePercentage)}%</strong> of the time doing nothing.<br /><br />\r\n\r\n            See the timeline for details.\r\n          </Trans>\r\n        )}\r\n        drilldown=\"timeline\"\r\n      >\r\n        <div className=\"pad\">\r\n          <Trans id=\"shared.alwaysBeCastingHealing.statistic\" render=\"label\">Active time</Trans>\r\n\r\n          <Gauge value={activeTimePercentage} />\r\n        </div>\r\n      </Statistic>\r\n    );\r\n  }\r\n\r\n  get nonHealingTimeSuggestionThresholds() {\r\n    return {\r\n      actual: this.nonHealingTimePercentage,\r\n      isGreaterThan: {\r\n        minor: 0.3,\r\n        average: 0.4,\r\n        major: 0.45,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n  // Override these suggestion thresholds for healers: it's much less important to DPS so allow for considerable slack.\r\n  get downtimeSuggestionThresholds() {\r\n    return {\r\n      actual: this.downtimePercentage,\r\n      isGreaterThan: {\r\n        minor: 0.2,\r\n        average: 0.35,\r\n        major: 1,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n  suggestions(when) {\r\n    when(this.nonHealingTimeSuggestionThresholds)\r\n      .addSuggestion((suggest, actual, recommended) => suggest('Your time spent healing can be improved. Try to reduce the amount of time you\\'re not healing, for example by reducing the delay between casting spells, moving during the GCD and if you have to move try to continue healing with instant spells.')\r\n          .icon('petbattle_health-down')\r\n          .actual(i18n._(t('shared.suggestions.alwaysBeCastingHealing.timeSpentHealing')`${1 - formatPercentage(actual)}% time spent healing`))\r\n          .recommended(`>${formatPercentage(1 - recommended)}% is recommended`));\r\n    when(this.downtimeSuggestionThresholds)\r\n      .addSuggestion((suggest, actual, recommended) => suggest('Your active time can be improved. Try to reduce your downtime, for example by reducing the delay between casting spells and when you\\'re not healing try to contribute some damage.')\r\n          .icon('spell_mage_altertime')\r\n          .actual(i18n._(t('shared.suggestions.alwaysBeCasting.activeTime')`${formatPercentage(1 - actual)}% active time`))\r\n          .recommended(`>${formatPercentage(1 - recommended)}% is recommended`));\r\n  }\r\n}\r\n\r\nexport default AlwaysBeCastingHealing;\r\n","import React from 'react';\r\n\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport Panel from 'interface/statistics/Panel';\r\nimport { formatNumber, formatPercentage } from 'common/format';\r\nimport RESOURCE_TYPES from 'game/RESOURCE_TYPES';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport BoringResourceValue from 'interface/statistics/components/BoringResourceValue';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport ResourceBreakdown from 'parser/shared/modules/resources/resourcetracker/ResourceBreakdown';\r\n\r\nimport { i18n } from '@lingui/core';\r\nimport { t } from '@lingui/macro';\r\n\r\nimport HolyPowerTracker from './HolyPowerTracker';\r\n\r\n\r\nconst holyPowerIcon = 'inv_helmet_96';\r\n\r\nclass HolyPowerDetails extends Analyzer {\r\n  static dependencies = {\r\n    holyPowerTracker: HolyPowerTracker,\r\n  };\r\n\r\n  get wastedHolyPowerPercent() {\r\n    return this.holyPowerTracker.wasted / (this.holyPowerTracker.wasted + this.holyPowerTracker.generated);\r\n  }\r\n\r\n  get suggestionThresholds() {\r\n    return {\r\n      actual: 1 - this.wastedHolyPowerPercent,\r\n      isLessThan: {\r\n        minor: 0.98,\r\n        average: 0.95,\r\n        major: 0.92,\r\n      },\r\n      style: 'percentage',\r\n    };\r\n  }\r\n\r\n  suggestions(when) {\r\n    when(this.suggestionThresholds).addSuggestion((suggest, actual, recommended) => suggest(`You wasted ${formatNumber(this.holyPowerTracker.wasted)} Holy Power.`)\r\n        .icon(holyPowerIcon)\r\n        .actual(i18n._(t('paladin.shared.suggestions.holyPower.wasted')`${formatPercentage(this.wastedHolyPowerPercent)}% Holy Power wasted`))\r\n        .recommended(`Wasting <${formatPercentage(1 - recommended)}% is recommended`));\r\n  }\r\n\r\n  statistic() {\r\n    return [\r\n      (\r\n        <Statistic\r\n          key=\"Statistic\"\r\n          size=\"small\"\r\n          position={STATISTIC_ORDER.CORE(4)}\r\n          tooltip={`${formatPercentage(this.wastedHolyPowerPercent)}% wasted`}\r\n        >\r\n          <BoringResourceValue\r\n            resource={RESOURCE_TYPES.HOLY_POWER}\r\n            value={formatNumber(this.holyPowerTracker.wasted)}\r\n            label=\"Holy Power Wasted\"\r\n          />\r\n        </Statistic>\r\n      ),\r\n      (\r\n        <Panel\r\n          key=\"Panel\"\r\n          title=\"Holy power usage\"\r\n          pad={false}\r\n        >\r\n          <ResourceBreakdown\r\n            tracker={this.holyPowerTracker}\r\n            resourceName=\"Holy Power\"\r\n            showSpenders\r\n          />\r\n        </Panel>\r\n      ),\r\n    ];\r\n  }\r\n}\r\n\r\nexport default HolyPowerDetails;\r\n","import React from 'react';\r\nimport { AutoSizer } from 'react-virtualized';\r\nimport PropTypes from 'prop-types';\r\nimport BaseChart, { formatTime } from 'interface/others/BaseChart';\r\n\r\nconst COLORS = {\r\n  MANA: {\r\n    background: 'rgba(2, 109, 215, 0.25)',\r\n    border: 'rgba(2, 109, 215, 0.6)',\r\n  },\r\n  HEALING: {\r\n    background: 'rgba(2, 217, 110, 0.2)',\r\n    border: 'rgba(2, 217, 110, 0.6)',\r\n  },\r\n  MANA_USED: {\r\n    background: 'rgba(215, 2, 6, 0.4)',\r\n    border: 'rgba(215, 2, 6, 0.6)',\r\n  },\r\n};\r\n\r\nclass ManaUsageGraph extends React.Component {\r\n  static propTypes = {\r\n    mana: PropTypes.arrayOf(PropTypes.shape({\r\n      x: PropTypes.number.isRequired,\r\n      y: PropTypes.number.isRequired,\r\n    })).isRequired,\r\n    healing: PropTypes.arrayOf(PropTypes.shape({\r\n      x: PropTypes.number.isRequired,\r\n      y: PropTypes.number.isRequired,\r\n    })).isRequired,\r\n    manaUsed: PropTypes.arrayOf(PropTypes.shape({\r\n      x: PropTypes.number.isRequired,\r\n      y: PropTypes.number.isRequired,\r\n    })).isRequired,\r\n  };\r\n\r\n  render() {\r\n    const { mana, healing, manaUsed } = this.props;\r\n\r\n    const baseEncoding = {\r\n        x: {\r\n          field: 'x',\r\n          type: 'quantitative',\r\n          axis: {\r\n            labelExpr: formatTime('datum.value * 1000'),\r\n            grid: false,\r\n          },\r\n          title: null,\r\n          scale: { zero: true, nice: false },\r\n        },\r\n        y: {\r\n          field: 'y',\r\n          type: 'quantitative',\r\n          title: null,\r\n        },\r\n      };\r\n\r\n    const spec = {\r\n      data: {\r\n        name: 'combined',\r\n      },\r\n      mark: {\r\n        type: 'area',\r\n        line: {\r\n          strokeWidth: 1,\r\n        },\r\n      },\r\n      encoding: {\r\n        ...baseEncoding,\r\n        color: {\r\n          field: 'kind',\r\n          scale: {\r\n            scheme: [COLORS.HEALING.border, COLORS.MANA.border, COLORS.MANA_USED.border],\r\n          },\r\n          title: null,\r\n          legend: {\r\n            orient: 'top',\r\n          },\r\n        },\r\n      },\r\n    };\r\n    const data = {\r\n      combined: [\r\n        ...mana.map(e => ({...e, kind: 'Mana'})),\r\n        ...healing.map(e => ({...e, kind: 'HPS'})),\r\n        ...manaUsed.map(e => ({...e, kind: 'Mana Used'})),\r\n      ],\r\n    };\r\n\r\n    return (\r\n      <AutoSizer disableHeight>\r\n        {({ width }) => (\r\n        <BaseChart\r\n          height={400}\r\n          width={width}\r\n          spec={spec}\r\n          data={data}\r\n          />\r\n        )}\r\n      </AutoSizer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManaUsageGraph;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ManaUsageGraph from './ManaUsageGraph';\r\n\r\nclass HealingDoneGraph extends React.PureComponent {\r\n  static propTypes = {\r\n    start: PropTypes.number.isRequired,\r\n    end: PropTypes.number.isRequired,\r\n    offset: PropTypes.number.isRequired,\r\n    healingBySecond: PropTypes.object.isRequired,\r\n    manaUpdates: PropTypes.array.isRequired,\r\n  };\r\n\r\n  groupHealingBySeconds(healingBySecond, interval) {\r\n    return Object.keys(healingBySecond)\r\n      .reduce((obj, second) => {\r\n        const healing = healingBySecond[second];\r\n\r\n        const index = Math.floor(second / interval);\r\n\r\n        if (obj[index]) {\r\n          obj[index] = obj[index].add(healing.regular, healing.absorbed, healing.overheal);\r\n        } else {\r\n          obj[index] = healing;\r\n        }\r\n        return obj;\r\n      }, {});\r\n  }\r\n\r\n  render() {\r\n    const { start, end, offset, healingBySecond, manaUpdates } = this.props;\r\n\r\n    // TODO: move this to vega-lite window transform\r\n    // e.g. { window: [{op: 'mean', field: 'hps', as: 'hps'}], frame: [-2, 2] }\r\n    const interval = 5;\r\n    const healingPerFrame = this.groupHealingBySeconds(healingBySecond, interval);\r\n\r\n    let max = 0;\r\n    Object.keys(healingPerFrame)\r\n      .map(k => healingPerFrame[k])\r\n      .forEach((healingDone) => {\r\n        const current = healingDone.effective;\r\n        if (current > max) {\r\n          max = current;\r\n        }\r\n      });\r\n    max /= interval;\r\n\r\n    const manaUsagePerFrame = {\r\n      0: 0,\r\n    };\r\n    const manaLevelPerFrame = {\r\n      0: 1,\r\n    };\r\n    manaUpdates.forEach((item) => {\r\n      const frame = Math.floor((item.timestamp - start) / 1000 / interval);\r\n\r\n      manaUsagePerFrame[frame] = (manaUsagePerFrame[frame] || 0) + item.used / item.max;\r\n      manaLevelPerFrame[frame] = item.current / item.max; // use the lowest value of the frame; likely to be more accurate\r\n    });\r\n    const fightDurationSec = Math.ceil((end - start) / 1000);\r\n    const labels = [];\r\n    for (let i = 0; i <= fightDurationSec / interval; i += 1) {\r\n      labels.push(Math.ceil(offset/1000) + i * interval);\r\n\r\n      healingPerFrame[i] = healingPerFrame[i] !== undefined ? healingPerFrame[i].effective : 0;\r\n      manaUsagePerFrame[i] = manaUsagePerFrame[i] !== undefined ? manaUsagePerFrame[i] : 0;\r\n      manaLevelPerFrame[i] = manaLevelPerFrame[i] !== undefined ? manaLevelPerFrame[i] : null;\r\n    }\r\n\r\n    let lastKnown = null;\r\n    const mana = Object.values(manaLevelPerFrame).map((value, i) => {\r\n      if (value !== null) {\r\n        lastKnown = value;\r\n      }\r\n      return {\r\n        x: labels[i],\r\n        y: lastKnown * max,\r\n      };\r\n    });\r\n    const healing = Object.values(healingPerFrame).map((value, i) => ({ x: labels[i], y: value / interval }));\r\n    const manaUsed = Object.values(manaUsagePerFrame).map((value, i) => ({ x: labels[i], y: value * max }));\r\n\r\n    return (\r\n      <div className=\"graph-container\" style={{ marginBottom: 20 }}>\r\n        <ManaUsageGraph\r\n          mana={mana}\r\n          healing={healing}\r\n          manaUsed={manaUsed}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HealingDoneGraph;\r\n","import React from 'react';\r\n\r\nimport Panel from 'interface/statistics/Panel';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport ManaValues from 'parser/shared/modules/ManaValues';\r\nimport HealingDone from 'parser/shared/modules/throughput/HealingDone';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport ManaUsageChartComponent from './ManaUsageChartComponent';\r\n\r\n/**\r\n * @property {ManaValues} manaValues\r\n * @property {HealingDone} healingDone\r\n */\r\nclass ManaUsageChart extends Analyzer {\r\n  static dependencies = {\r\n    manaValues: ManaValues,\r\n    healingDone: HealingDone,\r\n  };\r\n\r\n  statistic() {\r\n    const reportCode = this.owner.report.code;\r\n    const actorId = this.owner.playerId;\r\n    const start = this.owner.fight.start_time;\r\n    const end = this.owner.fight.end_time;\r\n    const offset = this.owner.fight.offset_time;\r\n\r\n    return (\r\n      <Panel\r\n        title={<Trans id=\"shared.manaUsageChart.statistic.title\">Mana usage</Trans>}\r\n        explanation={<Trans id=\"shared.manaUsageChart.statistic.explanation\">This shows you your mana usage in correlation with your throughput. Big spikes in mana usage without increases in throughput may indicate poor mana usage. The scale for both mana lines is 0-100% where 100% is aligned with the max HPS throughput.</Trans>}\r\n        position={110}\r\n      >\r\n        <ManaUsageChartComponent\r\n          reportCode={reportCode}\r\n          actorId={actorId}\r\n          start={start}\r\n          end={end}\r\n          offset={offset}\r\n          manaUpdates={this.manaValues.manaUpdates}\r\n          healingBySecond={this.healingDone.bySecond}\r\n        />\r\n      </Panel>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManaUsageChart;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Slider from 'rc-slider';\r\nimport 'rc-slider/assets/index.css';\r\n\r\nimport SPECS from 'game/SPECS';\r\nimport SpellLink from 'common/SpellLink';\r\nimport Icon from 'common/Icon';\r\n\r\nimport { formatNumber, formatPercentage, formatDuration } from 'common/format';\r\nimport SpecIcon from 'common/SpecIcon';\r\nimport { TooltipElement } from 'common/Tooltip';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nclass LowHealthHealing extends React.Component {\r\n  static propTypes = {\r\n    healEvents: PropTypes.array.isRequired,\r\n    fightStart: PropTypes.number.isRequired,\r\n    combatants: PropTypes.object.isRequired,\r\n  };\r\n  state = {\r\n    maxPlayerHealthPercentage: 0.35,\r\n    minHealOfMaxHealthPercentage: 0.1,\r\n  };\r\n\r\n  render() {\r\n    const { fightStart, combatants, healEvents } = this.props;\r\n\r\n    let total = 0;\r\n    let count = 0;\r\n    let totalBigHealing = 0;\r\n    let bigHealCount = 0;\r\n\r\n    const sliderProps = {\r\n      min: 0,\r\n      max: 1,\r\n      step: 0.05,\r\n      marks: {\r\n        0: '0%',\r\n        0.1: '10%',\r\n        0.2: '20%',\r\n        0.3: '30%',\r\n        0.4: '40%',\r\n        0.5: '50%',\r\n        0.6: '60%',\r\n        0.7: '70%',\r\n        0.8: '80%',\r\n        0.9: '90%',\r\n        1: '100%',\r\n      },\r\n      style: { marginBottom: '2em' },\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <div style={{ padding: '15px 30px' }}>\r\n          <Trans id=\"shared.lowHealthHealing.slider.maxHealth\">Max health of target:</Trans> <Slider\r\n            {...sliderProps}\r\n            defaultValue={this.state.maxPlayerHealthPercentage}\r\n            onChange={(value) => {\r\n              this.setState({\r\n                maxPlayerHealthPercentage: value,\r\n              });\r\n            }}\r\n          /><br />\r\n          <Trans id=\"shared.lowHealthHealing.slider.minEffective\">Min effective healing (percentage of target's health):</Trans> <Slider\r\n            {...sliderProps}\r\n            defaultValue={this.state.minHealOfMaxHealthPercentage}\r\n            onChange={(value) => {\r\n              this.setState({\r\n                minHealOfMaxHealthPercentage: value,\r\n              });\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th><Trans id=\"common.time\">Time</Trans></th>\r\n              <th><Trans id=\"common.ability\">Ability</Trans></th>\r\n              <th><Trans id=\"common.target\">Target</Trans></th>\r\n              <th colSpan=\"2\"><Trans id=\"common.healingDone\">Healing done</Trans></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {\r\n              healEvents\r\n                .map(event => {\r\n                  const effectiveHealing = event.amount + (event.absorbed || 0);\r\n                  const hitPointsBeforeHeal = event.hitPoints - effectiveHealing;\r\n                  const healthPercentage = hitPointsBeforeHeal / event.maxHitPoints;\r\n\r\n                  if (healthPercentage > this.state.maxPlayerHealthPercentage) {\r\n                    return false;\r\n                  }\r\n                  total += effectiveHealing;\r\n                  count += 1;\r\n                  if ((effectiveHealing / event.maxHitPoints) < this.state.minHealOfMaxHealthPercentage) {\r\n                    return false;\r\n                  }\r\n                  bigHealCount += 1;\r\n                  totalBigHealing += effectiveHealing;\r\n\r\n                  const combatant = combatants.getEntity(event);\r\n                  if (!combatant) {\r\n                    console.error('Missing combatant for event:', event);\r\n                    return null; // pet or something\r\n                  }\r\n                  const spec = SPECS[combatant.specId];\r\n                  const specClassName = spec.className.replace(' ', '');\r\n\r\n                  return (\r\n                    <tr key={`${event.timestamp}${effectiveHealing}${hitPointsBeforeHeal}`}>\r\n                      <td style={{ width: '5%' }}>\r\n                        {formatDuration((event.timestamp - fightStart) / 1000)}\r\n                      </td>\r\n                      <td style={{ width: '25%' }}>\r\n                        <SpellLink id={event.ability.guid} icon={false}>\r\n                          <Icon icon={event.ability.abilityIcon} alt={event.ability.abilityIcon} /> {event.ability.name}\r\n                        </SpellLink>\r\n                      </td>\r\n                      <td style={{ width: '20%' }} className={specClassName}>\r\n                        <SpecIcon id={spec.id} />{' '}\r\n                        {combatant.name}\r\n                      </td>\r\n                      <td style={{ width: 170, paddingRight: 5, textAlign: 'right' }}>\r\n                        {formatNumber(effectiveHealing)} @{' '}\r\n                        {healthPercentage < 0 ? (\r\n                          <TooltipElement content={<Trans id=\"shared.lowHealthHealing.table.event.tooltip\">This number may be negative when the player had an absorb larger than his health pool.</Trans>}>\r\n                            <Trans id=\"shared.lowHealthHealing.table.event\">{formatPercentage(healthPercentage)}% health</Trans>\r\n                          </TooltipElement>\r\n                        ) : <Trans id=\"shared.lowHealthHealing.table.event\">{formatPercentage(healthPercentage)}% health</Trans>}\r\n                      </td>\r\n                      <td style={{ width: '35%' }}>\r\n                        <div className=\"flex performance-bar-container\">\r\n                          <div\r\n                            className={`flex-sub performance-bar ${specClassName}-bg`}\r\n                            style={{ width: `${healthPercentage * 100}%` }}\r\n                          />\r\n                          <div\r\n                            className=\"flex-sub performance-bar Hunter-bg\"\r\n                            style={{ width: `${effectiveHealing / event.maxHitPoints * 100}%`, opacity: 0.4 }}\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })\r\n            }\r\n            <tr>\r\n              <td colSpan=\"7\">\r\n                <Trans id=\"shared.lowHealthHealing.table.total\">Total healing done on targets below {(this.state.maxPlayerHealthPercentage * 100)}% health: {formatNumber(total)} (spread over {count} seperate heals).<br />\r\n                Total healing done on targets below {(this.state.maxPlayerHealthPercentage * 100)}% health for more than {Math.round(this.state.minHealOfMaxHealthPercentage * 100)}% of target's max health: {formatNumber(totalBigHealing)} (spread over {bigHealCount} seperate heals).</Trans>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LowHealthHealing;\r\n","import React from 'react';\r\n\r\nimport Panel from 'interface/others/Panel';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport { EventType } from 'parser/core/Events';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport LowHealthHealingComponent from './Component';\r\n\r\nclass LowHealthHealing extends Analyzer {\r\n  static dependencies = {\r\n    combatants: Combatants,\r\n  };\r\n\r\n  tab() {\r\n    return {\r\n      title: 'Triage',\r\n      url: 'triage',\r\n      render: () => (\r\n        <Panel\r\n          title={<Trans id=\"shared.lowHealthHealing.tab.title\">Triage healing</Trans>}\r\n          explanation={<Trans id=\"shared.lowHealthHealing.tab.explanation\">This shows all instances of healing people below a certain health threshold.</Trans>}\r\n          pad={false}\r\n        >\r\n          <LowHealthHealingComponent\r\n            healEvents={this.owner.eventHistory.filter(event => event.type === EventType.Heal && (this.owner.byPlayer(event) || this.owner.byPlayerPet(event)))}\r\n            fightStart={this.owner.fight.start_time - this.owner.fight.offset_time}\r\n            combatants={this.combatants}\r\n          />\r\n        </Panel>\r\n      ),\r\n    };\r\n  }\r\n}\r\n\r\nexport default LowHealthHealing;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport fetchWcl from 'common/fetchWclApi';\r\n\r\nimport ManaLevelGraph from 'interface/others/charts/ManaLevelGraph';\r\n\r\nclass ManaLevelChartComponent extends React.PureComponent {\r\n  static propTypes = {\r\n    reportCode: PropTypes.string.isRequired,\r\n    start: PropTypes.number.isRequired,\r\n    end: PropTypes.number.isRequired,\r\n    offset: PropTypes.number.isRequired,\r\n    combatants: PropTypes.object.isRequired,\r\n    manaUpdates: PropTypes.array.isRequired,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bossHealth: null,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.load();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.reportCode !== this.props.reportCode || prevProps.start !== this.props.start || prevProps.end !== this.props.end || prevProps.offset !== this.props.offset) {\r\n      this.load();\r\n    }\r\n  }\r\n\r\n  load() {\r\n    const { reportCode, start, end } = this.props;\r\n    fetchWcl(`report/tables/resources/${reportCode}`, {\r\n      start,\r\n      end,\r\n      sourceclass: 'Boss',\r\n      hostility: 1,\r\n      abilityid: 1000,\r\n    })\r\n      .then(json => {\r\n        this.setState({\r\n          bossHealth: json,\r\n        });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.bossHealth) {\r\n      return (\r\n        <div>\r\n          Loading...\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const { start, offset, manaUpdates, combatants } = this.props;\r\n    const initial = manaUpdates[0] ? (manaUpdates[0].current / manaUpdates[0].max) : 1; // if first event is defined, use it to copy first value, otherwise use 100%\r\n    const mana = offset === 0 ?\r\n      [{ x: 0, y: 100 }] :\r\n      [{\r\n        x: 0,\r\n        y: 100 * initial,\r\n      }]; // start with full mana if we start at the beginning of the fight, otherwise copy first value\r\n    mana.push(...manaUpdates.map(({ timestamp, current, max }) => {\r\n      const x = Math.max(timestamp, start) - start;\r\n      return {\r\n        x,\r\n        y: (current / max) * 100,\r\n      };\r\n    }));\r\n\r\n    const bossData = this.state.bossHealth.series.map((series) => {\r\n      const data = series.data.map(([timestamp, health]) => ({ x: timestamp - start, y: health }));\r\n\r\n      return {\r\n        id: series.id,\r\n        title: `${series.name} Health`,\r\n        data,\r\n      };\r\n    });\r\n\r\n    let deaths = [];\r\n    if (this.state.bossHealth.deaths) {\r\n      deaths = this.state.bossHealth.deaths\r\n        .filter(death => Boolean(death.targetIsFriendly))\r\n        .map(({ timestamp, targetID, killingAbility }) => ({\r\n          x: timestamp - start,\r\n          name: combatants.players[targetID].name,\r\n          ability: killingAbility ? killingAbility.name : 'Unknown Ability',\r\n        }));\r\n    }\r\n\r\n    return (\r\n      <div className=\"graph-container\">\r\n        <ManaLevelGraph\r\n          mana={mana}\r\n          bossData={bossData}\r\n          deaths={deaths}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManaLevelChartComponent;\r\n","import React from 'react';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport Panel from 'interface/statistics/Panel';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport ManaValues from 'parser/shared/modules/ManaValues';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\n\r\nimport ManaLevelChartComponent from './ManaLevelChartComponent';\r\n\r\nclass ManaLevelChart extends Analyzer {\r\n  static dependencies = {\r\n    manaValues: ManaValues,\r\n    combatants: Combatants,\r\n  };\r\n\r\n  statistic() {\r\n    const reportCode = this.owner.report.code;\r\n    const actorId = this.owner.playerId;\r\n    const start = this.owner.fight.start_time;\r\n    const end = this.owner.fight.end_time;\r\n    const offset = this.owner.fight.offset_time;\r\n\r\n    return (\r\n      <Panel\r\n        title={<Trans id=\"shared.manaLevelChart.statistic.title\">Mana pool</Trans>}\r\n        explanation={<Trans id=\"shared.manaLevelChart.statistic.explanation\">Mana (blue) along with boss HP and deaths. As a rule of thumb aim to burn mana about as quickly as the boss is losing health. Some fights require specific mana management though.</Trans>}\r\n        position={100}\r\n      >\r\n        <ManaLevelChartComponent\r\n          reportCode={reportCode}\r\n          actorId={actorId}\r\n          start={start}\r\n          end={end}\r\n          offset={offset}\r\n          combatants={this.combatants}\r\n          manaUpdates={this.manaValues.manaUpdates}\r\n        />\r\n      </Panel>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManaLevelChart;\r\n","import React from 'react';\r\nimport { AutoSizer } from 'react-virtualized';\r\nimport PropTypes from 'prop-types';\r\nimport BaseChart, { formatTime } from 'interface/others/BaseChart';\r\n\r\nclass ManaLevelGraph extends React.PureComponent {\r\n  static propTypes = {\r\n    mana: PropTypes.arrayOf(PropTypes.shape({\r\n      x: PropTypes.number.isRequired,\r\n      y: PropTypes.number.isRequired,\r\n    })).isRequired,\r\n    deaths: PropTypes.arrayOf(PropTypes.shape({\r\n      x: PropTypes.number.isRequired,\r\n    })),\r\n    bossData: PropTypes.arrayOf(PropTypes.shape({\r\n      title: PropTypes.string.isRequired,\r\n      borderColor: PropTypes.string,\r\n      backgroundColor: PropTypes.string,\r\n      data: PropTypes.arrayOf(PropTypes.shape({\r\n        x: PropTypes.number.isRequired,\r\n        y: PropTypes.number.isRequired,\r\n      })).isRequired,\r\n    })).isRequired,\r\n  };\r\n\r\n  static defaultProps = {\r\n    deaths: [],\r\n  };\r\n\r\n  colors = {\r\n    mana: {\r\n      border: 'rgba(2, 109, 215, 0.6)',\r\n      background: 'rgba(2, 109, 215, 0.25)',\r\n    },\r\n    death: 'rgba(255, 0, 0, 0.8)',\r\n  };\r\n\r\n  render() {\r\n    const { mana, deaths, bossData } = this.props;\r\n\r\n    const baseEncoding = {\r\n            x: {\r\n              field: 'x',\r\n              type: 'quantitative',\r\n              axis: {\r\n                labelExpr: formatTime('datum.value'),\r\n                grid: false,\r\n              },\r\n              title: null,\r\n              scale: { zero: true, nice: false },\r\n            },\r\n            y: {\r\n              field: 'y',\r\n              type: 'quantitative',\r\n              axis: {\r\n                tickCount: 4,\r\n              },\r\n              title: null,\r\n            },\r\n          };\r\n\r\n    const spec = {\r\n      layer: [\r\n        {\r\n          data: {\r\n            name: 'bosses',\r\n          },\r\n          transform: [\r\n            { flatten: ['data'] },\r\n            { calculate: 'datum.data.x', as: 'x' },\r\n            { calculate: 'datum.data.y', as: 'y' },\r\n          ],\r\n          mark: {\r\n            type: 'area',\r\n            opacity: 0.6,\r\n            line: {\r\n              interpolate: 'linear',\r\n              strokeWidth: 1,\r\n            },\r\n          },\r\n          encoding: {\r\n            ...baseEncoding,\r\n            color: {\r\n              field: 'title',\r\n              type: 'nominal',\r\n              title: 'Enemy',\r\n              legend: {\r\n                orient: 'top',\r\n              },\r\n              scale: {\r\n                scheme: \"accent\",\r\n              },\r\n            },\r\n          },\r\n        },\r\n        {\r\n          data: {\r\n            name: 'mana',\r\n          },\r\n          mark: {\r\n            type: 'area',\r\n            line: {\r\n              interpolate: 'linear',\r\n              color: this.colors.mana.border,\r\n              strokeWidth: 1,\r\n            },\r\n            color: this.colors.mana.background,\r\n          },\r\n          encoding: baseEncoding,\r\n        },\r\n        {\r\n          data: {\r\n            name: 'deaths',\r\n          },\r\n          mark: {\r\n            type: 'rule',\r\n            color: 'red',\r\n            strokeWidth: 2,\r\n          },\r\n          encoding: {\r\n            x: baseEncoding.x,\r\n            tooltip: [\r\n              { field: 'name', type: 'nominal', title: 'Target' },\r\n              { field: 'ability', type: 'nominal', title: 'Killing Ability' },\r\n            ],\r\n          },\r\n        },\r\n      ],\r\n    };\r\n\r\n    const data = {\r\n      mana, deaths,\r\n      bosses: bossData,\r\n    };\r\n\r\n    return (\r\n      <AutoSizer disableHeight>\r\n        {({ width }) => (\r\n          <BaseChart\r\n            height={400}\r\n            width={width}\r\n            spec={spec}\r\n            data={data}\r\n          />\r\n        )}\r\n      </AutoSizer>\r\n    );\r\n  }\r\n}\r\nexport default ManaLevelGraph;\r\n","import Analyzer, { SELECTED_PLAYER, Options } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport Events, { EnergizeEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport React from 'react';\r\nimport BoringValueText from 'interface/statistics/components/BoringValueText';\r\nimport RESOURCE_TYPES from 'game/RESOURCE_TYPES';\r\n\r\nclass HolyAvenger extends Analyzer {\r\n\r\n  wastedHolyPower: number = 0;\r\n  gainedHolyPower: number = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.HOLY_AVENGER_TALENT.id);\r\n\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n\r\n    this.addEventListener(Events.energize.by(SELECTED_PLAYER), this.getHolyPower);\r\n  }\r\n\r\n  getHolyPower(event: EnergizeEvent){\r\n    if(!this.selectedCombatant.hasBuff(SPELLS.HOLY_AVENGER_TALENT.id)){\r\n      return;\r\n    }\r\n\r\n    if(event.resourceChangeType !== RESOURCE_TYPES.HOLY_POWER.id) {\r\n      return;\r\n    }\r\n\r\n    //holy avenger triples resource generate so we need to find base resource generation from the spell\r\n    const baseAmount = event.resourceChange/3;\r\n    const formHA = event.resourceChange - baseAmount;// this is also baseAmount * 2\r\n\r\n    let waste = event.waste;\r\n    const gain = event.resourceChange - waste;\r\n\r\n    //We only care about what is from HA not the base spell\r\n    if(waste > formHA){\r\n      waste = formHA;\r\n    }\r\n\r\n    this.wastedHolyPower += waste;\r\n    this.gainedHolyPower += Math.max(gain - baseAmount, 0);//Anything gained from HA is baseAmount + n where n >= 1\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        position={STATISTIC_ORDER.CORE()}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n      >\r\n        <BoringValueText label={<><SpellIcon id={SPELLS.HOLY_AVENGER_TALENT.id} /> Holy Avenger Holy Power</>}>\r\n          {this.gainedHolyPower} Gained<br />\r\n          {this.wastedHolyPower} Wasted\r\n        </BoringValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HolyAvenger;\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport { formatDuration, formatNumber } from 'common/format';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport ItemDamageDone from 'interface/ItemDamageDone';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\n\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Events, { ApplyBuffEvent, DamageEvent, HealEvent, RemoveBuffEvent } from 'parser/core/Events';\r\nimport Spell from 'common/SPELLS/Spell';\r\n\r\nimport { plotOneVariableBinomChart } from 'parser/shared/modules/helpers/Probability';\r\n\r\nimport { DIVINE_PURPOSE_CHANCE } from '../constants';\r\n\r\nconst HEALING_HOLY_POWER_SPELLS: Spell[] = [\r\n  SPELLS.WORD_OF_GLORY,\r\n  SPELLS.LIGHT_OF_DAWN_CAST,\r\n  SPELLS.LIGHT_OF_DAWN_HEAL,\r\n];\r\nconst DAMAGE_HOLY_POWER_SPELLS: Spell[] = [\r\n  SPELLS.SHIELD_OF_THE_RIGHTEOUS,\r\n  SPELLS.TEMPLARS_VERDICT,\r\n  SPELLS.TEMPLARS_VERDICT_DAMAGE,\r\n  SPELLS.DIVINE_STORM,\r\n  SPELLS.DIVINE_STORM_DAMAGE,\r\n  SPELLS.EXECUTION_SENTENCE_TALENT,\r\n  SPELLS.JUSTICARS_VENGEANCE_TALENT,\r\n];\r\nconst BUFF_HOLY_POWER_SPELLS: Spell[] = [\r\n  SPELLS.SERAPHIM_TALENT,\r\n];\r\nconst ALL_HOLY_POWER_SPELLS: Spell[] = [\r\n  ...HEALING_HOLY_POWER_SPELLS,\r\n  ...DAMAGE_HOLY_POWER_SPELLS,\r\n  ...BUFF_HOLY_POWER_SPELLS,\r\n];\r\n\r\nconst BUFF_TIME: number = 12000 * .95;//add buffer since log events lmao\r\nconst TRACK_BUFFER = 500;\r\n\r\nclass DivinePurpose extends Analyzer {\r\n\r\n  averageTimeTillBuffConsumed: number = 0;\r\n\r\n  hasProc: boolean = false;\r\n  procsWasted: number = 0;\r\n  procsGained: number = 0;\r\n\r\n  healingDone: number = 0;\r\n  overhealingDone: number = 0;\r\n  damageDone: number = 0;\r\n\r\n  buffAppliedTimestamp: number = 0;\r\n  buffRemovedTimestamp: number = 0;\r\n\r\n  totalChances: number = 0;\r\n  procProbabilities: number[] = [];\r\n  \r\n  constructor(args: Options) {\r\n    super(args);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.DIVINE_PURPOSE_TALENT.id);\r\n\r\n    if(!this.active){\r\n      return;\r\n    }\r\n\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(ALL_HOLY_POWER_SPELLS), this.castCounter);\r\n    this.addEventListener(Events.damage.by(SELECTED_PLAYER).spell(DAMAGE_HOLY_POWER_SPELLS), this.holyPowerDamage);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(HEALING_HOLY_POWER_SPELLS), this.holyPowerHeal);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.DIVINE_PURPOSE_BUFF), this.applyBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER).spell(SPELLS.DIVINE_PURPOSE_BUFF), this.removeBuff);\r\n  }\r\n\r\n  castCounter(){\r\n    this.totalChances += 1;\r\n    this.procProbabilities.push(DIVINE_PURPOSE_CHANCE);\r\n  }\r\n\r\n  holyPowerDamage(event: DamageEvent){\r\n    if(this.hasProc || this.buffRemovedTimestamp + TRACK_BUFFER > event.timestamp){\r\n      this.damageDone += (event.amount || 0) + (event.absorbed || 0);\r\n    }\r\n  }\r\n\r\n  holyPowerHeal(event: HealEvent){\r\n    if(this.hasProc || this.buffRemovedTimestamp + TRACK_BUFFER > event.timestamp){\r\n      this.healingDone += (event.amount || 0) + (event.absorbed || 0);\r\n      this.overhealingDone += (event.overheal || 0);\r\n    }\r\n  }\r\n\r\n  applyBuff(event: ApplyBuffEvent){\r\n    this.hasProc = true;\r\n    this.procsGained += 1;\r\n    this.buffAppliedTimestamp = event.timestamp;\r\n  }\r\n\r\n  removeBuff(event: RemoveBuffEvent){\r\n    const lowerRoughTime = (this.buffAppliedTimestamp + BUFF_TIME);\r\n    if(lowerRoughTime < event.timestamp){\r\n      this.procsWasted += 1;\r\n    }\r\n    this.averageTimeTillBuffConsumed += (event.timestamp - this.buffAppliedTimestamp);\r\n    this.buffRemovedTimestamp = event.timestamp;\r\n    this.hasProc = false;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        position={STATISTIC_ORDER.CORE(12)}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        tooltip={(\r\n          <>\r\n            <ul>\r\n              <li>Average Time Till Buff Consumed: {formatDuration((this.averageTimeTillBuffConsumed /1000) / this.procsGained)}</li>\r\n              <li>Total Buffs: {this.procsGained}</li>\r\n              <li>Damage: {formatNumber(this.damageDone)}</li>\r\n              <li>Healing: {formatNumber(this.healingDone)}</li>\r\n              <li>Overhealing: {formatNumber(this.overhealingDone)}</li>\r\n            </ul>\r\n          </>\r\n        )}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.DIVINE_PURPOSE_TALENT}>\r\n          <ItemDamageDone amount={this.damageDone} /> <br />\r\n          <ItemHealingDone amount={this.healingDone} />\r\n        </BoringSpellValueText>\r\n        {plotOneVariableBinomChart(this.procsGained, this.totalChances, this.procProbabilities)}\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DivinePurpose;\r\n","export const DIVINE_PURPOSE_CHANCE = .15;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport SPECS from 'game/SPECS';\r\nimport SpecIcon from 'common/SpecIcon';\r\nimport { formatNumber } from 'common/format';\r\nimport { TooltipElement } from 'common/Tooltip';\r\nimport indexByProperty from 'common/indexByProperty';\r\nimport Toggle from 'react-toggle';\r\nimport SpellLink from 'common/SpellLink';\r\nimport PerformanceBar from 'interface/PerformanceBar';\r\n\r\nclass PlayerBreakdown extends React.Component {\r\n  static propTypes = {\r\n    report: PropTypes.object.isRequired,\r\n    spellreport: PropTypes.object,\r\n    players: PropTypes.array.isRequired,\r\n  };\r\n  state = {\r\n    showPlayers: true,\r\n  };\r\n\r\n  calculatePlayerBreakdown(statsByTargetId, players) {\r\n    const friendlyStats = [];\r\n    const playersById = indexByProperty(players, 'id');\r\n    Object.keys(statsByTargetId)\r\n      .forEach(targetId => {\r\n        const playerStats = statsByTargetId[targetId];\r\n        const playerInfo = playersById[targetId];\r\n\r\n        if (playerInfo) {\r\n          friendlyStats.push({\r\n            ...playerInfo,\r\n            ...playerStats,\r\n            masteryEffectiveness: playerStats.healingFromMastery / (playerStats.maxPotentialHealingFromMastery || 1),\r\n          });\r\n        }\r\n      });\r\n\r\n    return friendlyStats;\r\n  }\r\n\r\n  calculateSpellBreakdown(statsBySpellId) {\r\n    const spellStats = [];\r\n    Object.keys(statsBySpellId)\r\n      .forEach(spellId => {\r\n        const spell = statsBySpellId[spellId];\r\n\r\n        spellStats.push({\r\n          ...spell,\r\n          masteryEffectiveness: spell.healingFromMastery / (spell.maxPotentialHealingFromMastery || 1),\r\n        });\r\n      });\r\n\r\n    return spellStats;\r\n  }\r\n\r\n  render() {\r\n    const { report, spellreport, players } = this.props;\r\n\r\n    const friendlyStats = this.calculatePlayerBreakdown(report, players);\r\n    const totalEffectiveHealing = Object.values(report).reduce((sum, player) => sum + player.effectiveHealing, 0);\r\n    const highestEffectiveHealing = friendlyStats.reduce((highest, player) => Math.max(highest, player.effectiveHealing), 1);\r\n    const highestMasteryEffectiveness = friendlyStats.reduce((highest, player) => Math.max(highest, player.masteryEffectiveness), 0);\r\n\r\n    let spellStats = [];\r\n    let totalSpellEffectiveHealing = 0;\r\n    let highestSpellEffectiveHealing = 0;\r\n    let highestSpellMasteryEffectiveness = 0;\r\n    if (spellreport) {\r\n      spellStats = this.calculateSpellBreakdown(spellreport);\r\n      totalSpellEffectiveHealing = Object.values(spellreport).reduce((sum, spell) => sum + spell.effectiveHealing, 0);\r\n      highestSpellEffectiveHealing = spellStats.reduce((highest, spell) => Math.max(highest, spell.effectiveHealing), 1);\r\n      highestSpellMasteryEffectiveness = spellStats.reduce((highest, spell) => Math.max(highest, spell.masteryEffectiveness), 0);\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {spellreport &&\r\n          <div className=\"pad\">\r\n            <div className=\"pull-right\">\r\n              <div className=\"toggle-control pull-left\" style={{ marginLeft: '.5em' }}>\r\n                <label htmlFor=\"playerbreakdown-toggle\" style={{ marginLeft: '0.5em', marginRight: '1em' }}>\r\n                  <Trans id=\"interface.playerBreakdown.toggle.spells\">Spells</Trans>\r\n                </label>\r\n                <Toggle\r\n                  defaultChecked\r\n                  icons={false}\r\n                  onChange={event => this.setState({ showPlayers: event.target.checked })}\r\n                  id=\"playerbreakdown-toggle\"\r\n                />\r\n                <label htmlFor=\"playerbreakdown-toggle\" style={{ marginLeft: '0.5em' }}>\r\n                  <Trans id=\"interface.playerBreakdown.toggle.players\">Players</Trans>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        }\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr style={{ textTransform: 'uppercase' }}>\r\n              <th><Trans id=\"interface.playerBreakdown.name\">Name</Trans></th>\r\n              <th colSpan=\"2\"><Trans id=\"interface.playerBreakdown.masteryEffectiveness\">Mastery effectiveness</Trans></th>\r\n              <th colSpan=\"3\"><TooltipElement content={<Trans id=\"interface.playerBreakdown.masteryEffectivenessTooltip\">This is the amount of healing done by spells affected by mastery. Things like Holy Paladin beacons or Restoration Shaman feeding are NOT included.</Trans>}><Trans id=\"interface.playerBreakdown.healingDone\">Healing done</Trans></TooltipElement></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {!this.state.showPlayers && spellStats && spellStats\r\n              .sort((a, b) => b.masteryEffectiveness - a.masteryEffectiveness)\r\n              .map((spell) => {\r\n                // We want the performance bar to show a full bar for whatever healing done percentage is highest to make\r\n                // it easier to see relative amounts.\r\n                const performanceBarMasteryEffectiveness = spell.masteryEffectiveness / highestSpellMasteryEffectiveness;\r\n                const performanceBarHealingDonePercentage = spell.effectiveHealing / highestSpellEffectiveHealing;\r\n                const actualHealingDonePercentage = spell.effectiveHealing / totalSpellEffectiveHealing;\r\n\r\n                return (\r\n                  <tr key={spell.spellId}>\r\n                    <td style={{ width: '20%' }}>\r\n                      <SpellLink id={spell.spellId} />\r\n                    </td>\r\n                    <td style={{ width: 50, textAlign: 'right' }}>\r\n                      {(Math.round(spell.masteryEffectiveness * 10000) / 100).toFixed(2)}%\r\n                  </td>\r\n                    <td style={{ width: '40%' }}>\r\n                      <PerformanceBar percent={performanceBarMasteryEffectiveness} />\r\n                    </td>\r\n                    <td style={{ width: 50, textAlign: 'right' }}>\r\n                      {(Math.round(actualHealingDonePercentage * 10000) / 100).toFixed(2)}%\r\n                  </td>\r\n                    <td style={{ width: '40%' }}>\r\n                      <PerformanceBar percent={performanceBarHealingDonePercentage} />\r\n                    </td>\r\n                    <td style={{ width: 50, textAlign: 'right' }}>\r\n                      {(formatNumber(spell.effectiveHealing))}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            {this.state.showPlayers && friendlyStats && friendlyStats\r\n              .sort((a, b) => b.masteryEffectiveness - a.masteryEffectiveness)\r\n              .map((player) => {\r\n                const combatant = player.combatant;\r\n                if (!combatant) {\r\n                  console.error('Missing combatant:', player);\r\n                  return null; // pet or something\r\n                }\r\n                const spec = SPECS[combatant.specId];\r\n                const specClassName = spec.className.replace(' ', '');\r\n                // We want the performance bar to show a full bar for whatever healing done percentage is highest to make\r\n                // it easier to see relative amounts.\r\n                const performanceBarMasteryEffectiveness = player.masteryEffectiveness / highestMasteryEffectiveness;\r\n                const performanceBarHealingReceivedPercentage = player.effectiveHealing / highestEffectiveHealing;\r\n                const actualHealingReceivedPercentage = player.effectiveHealing / totalEffectiveHealing;\r\n\r\n                return (\r\n                  <tr key={combatant.id}>\r\n                    <td style={{ width: '20%' }}>\r\n                      <SpecIcon id={spec.id} />{' '}\r\n                      {combatant.name}\r\n                    </td>\r\n                    <td style={{ width: 50, textAlign: 'right' }}>\r\n                      {(Math.round(player.masteryEffectiveness * 10000) / 100).toFixed(2)}%\r\n                    </td>\r\n                    <td style={{ width: '40%' }}>\r\n                      <div className=\"flex performance-bar-container\">\r\n                        <div\r\n                          className={`flex-sub performance-bar ${specClassName}-bg`}\r\n                          style={{ width: `${performanceBarMasteryEffectiveness * 100}%` }}\r\n                        />\r\n                      </div>\r\n                    </td>\r\n                    <td style={{ width: 50, textAlign: 'right' }}>\r\n                      {(Math.round(actualHealingReceivedPercentage * 10000) / 100).toFixed(2)}%\r\n                    </td>\r\n                    <td style={{ width: '40%' }}>\r\n                      <div className=\"flex performance-bar-container\">\r\n                        <div\r\n                          className={`flex-sub performance-bar ${specClassName}-bg`}\r\n                          style={{ width: `${performanceBarHealingReceivedPercentage * 100}%` }}\r\n                        />\r\n                      </div>\r\n                    </td>\r\n                    <td style={{ width: 50, textAlign: 'right' }}>\r\n                      {(formatNumber(player.effectiveHealing))}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n          </tbody>\r\n        </table>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlayerBreakdown;\r\n","// A helper function that's more performant than a reduce without being more readable by consumers\r\nexport default function indexByProperty(arr, key) {\r\n  const objByKey = {};\r\n  const length = arr.length;\r\n  for (let i = 0; i < length; i += 1) {\r\n    const item = arr[i];\r\n    objByKey[item[key]] = item;\r\n  }\r\n  return objByKey;\r\n}\r\n"],"sourceRoot":""}