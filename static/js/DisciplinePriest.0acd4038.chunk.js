(this.webpackJsonpwowanalyzer=this.webpackJsonpwowanalyzer||[]).push([[22],{715:function(e,t,a){"use strict";a.r(t);var n=a(8),i=a(10),r=a(11),s=a(776),o=a(875),l=a(876),c=a(874),u=a(9),d=a(15),m=a(768),h=a(3);function E(e){return[h.a.ATONEMENT_HEAL_NON_CRIT.id,h.a.ATONEMENT_HEAL_CRIT.id].includes(e.ability.guid)}var g,f,b=a(12),p=[h.a.ATONEMENT_HEAL_NON_CRIT.id,h.a.ATONEMENT_HEAL_CRIT.id,h.a.POWER_WORD_SHIELD.id,h.a.POWER_WORD_RADIANCE.id,h.a.HALO_TALENT.id,h.a.SHADOW_MEND.id,h.a.LEECH.id],v=(g={},Object(b.a)(g,h.a.MAGIC_MELEE.id,!0),Object(b.a)(g,h.a.LIGHTSPAWN_MELEE.id,!0),Object(b.a)(g,h.a.SMITE.id,!0),Object(b.a)(g,h.a.PENANCE.id,!0),Object(b.a)(g,h.a.HALO_DAMAGE.id,!0),Object(b.a)(g,h.a.SHADOW_WORD_PAIN.id,!0),Object(b.a)(g,h.a.PURGE_THE_WICKED_TALENT.id,!0),Object(b.a)(g,h.a.PURGE_THE_WICKED_BUFF.id,!0),Object(b.a)(g,h.a.POWER_WORD_SOLACE_TALENT.id,!0),Object(b.a)(g,h.a.SCHISM_TALENT.id,!0),Object(b.a)(g,h.a.DIVINE_STAR_DAMAGE.id,!0),Object(b.a)(g,h.a.HOLY_NOVA.id,!0),Object(b.a)(g,h.a.MIND_SEAR.id,!0),Object(b.a)(g,h.a.MIND_BLAST.id,!0),Object(b.a)(g,h.a.MINDGAMES.id,!0),Object(b.a)(g,h.a.ASCENDED_BLAST.id,!0),Object(b.a)(g,h.a.ASCENDED_NOVA.id,!0),Object(b.a)(g,h.a.ASCENDED_ERUPTION.id,!0),g),y=[0,.4,.44,.48,.52,.56,.6,.64,.68,.72,.76,.8,.84,.88,.92,.96],O=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"normalize",value:function(e){var t=[],a=[],n=[];return e.forEach((function(e,i){if(t.push(e),e.type===d.b.Damage&&e.sourceIsFriendly&&!e.targetIsFriendly&&v[e.ability.guid])return a.push(i),void(n=[]);if(e.type===d.b.Heal&&E(e)){if(n.includes(e.targetID)){var r=t.splice(a[a.length-1],1)[0];return r.__modified=!0,t.splice(t.length-1,0,r),void(n=[])}e.sourceID!==e.targetID&&n.push(e.targetID)}})),t}}]),a}(m.a),T=a(981),A=[h.a.ATONEMENT_BUFF.id],_=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"normalize",value:function(e){var t=[],a=0,n=0;return e.forEach((function(e,i){(t.push(e),e.type===d.b.Cast)&&(e.ability.guid===h.a.POWER_WORD_RADIANCE.id&&(a=e.timestamp,n=i));if(e.type===d.b.ApplyBuff||e.type===d.b.RefreshBuff||e.type===d.b.ApplyBuffStack){var r=e.ability.guid;e.timestamp-a<250&&A.includes(r)&&(e.timestamp=a,e.__modified=!0,t.splice(n+1,0,e),t.splice(-1,1))}})),t}}]),a}(m.a),S=a(753),N=a(121),D=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"spellbook",value:function(){var e=this.selectedCombatant;return[{spell:[h.a.PENANCE_CAST,h.a.PENANCE],category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:9,gcd:{base:1500}},{spell:h.a.POWER_WORD_RADIANCE,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:20,charges:2,gcd:{base:1500},castEfficiency:{suggestion:!0}},{spell:h.a.EVANGELISM_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:90,gcd:{base:1500},enabled:e.hasTalent(h.a.EVANGELISM_TALENT.id),castEfficiency:{suggestion:!0}},{spell:h.a.POWER_WORD_SHIELD,category:a.SPELL_CATEGORIES.OTHERS,isDefensive:!0,gcd:{base:1500}},{spell:h.a.SCHISM_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:24,gcd:{base:1500},enabled:e.hasTalent(h.a.SCHISM_TALENT.id),castEfficiency:{suggestion:!0}},{spell:h.a.POWER_WORD_SOLACE_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:function(e){return 15/(1+e)},gcd:{base:1500},enabled:e.hasTalent(h.a.POWER_WORD_SOLACE_TALENT.id),castEfficiency:{suggestion:!0}},{spell:h.a.DIVINE_STAR_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:15,gcd:{base:1500},enabled:e.hasTalent(h.a.DIVINE_STAR_TALENT.id),castEfficiency:{suggestion:!0}},{spell:h.a.HALO_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:40,gcd:{base:1500},enabled:e.hasTalent(h.a.HALO_TALENT.id),castEfficiency:{suggestion:!0}},{spell:h.a.MINDBENDER_TALENT_SHARED,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:60,gcd:{base:1500},enabled:e.hasTalent(h.a.MINDBENDER_TALENT_SHARED.id),castEfficiency:{suggestion:!0}},{spell:h.a.SHADOWFIEND,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{base:1500},enabled:!e.hasTalent(h.a.MINDBENDER_TALENT_SHARED.id),castEfficiency:{suggestion:!0}},{spell:h.a.RAPTURE,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:90,gcd:{base:1500},enabled:!e.hasTalent(h.a.SPIRIT_SHELL_TALENT.id),castEfficiency:{suggestion:!0}},{spell:h.a.PAIN_SUPPRESSION,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180},{spell:h.a.DESPERATE_PRAYER,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:90},{spell:h.a.POWER_WORD_BARRIER_CAST,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{base:1500},enabled:!e.hasTalent(h.a.LUMINOUS_BARRIER_TALENT.id)},{spell:h.a.SHADOW_WORD_PAIN,category:a.SPELL_CATEGORIES.OTHERS,enabled:!e.hasTalent(h.a.PURGE_THE_WICKED_TALENT.id),gcd:{base:1500}},{spell:h.a.PURGE_THE_WICKED_TALENT,category:a.SPELL_CATEGORIES.OTHERS,enabled:e.hasTalent(h.a.PURGE_THE_WICKED_TALENT.id),gcd:{base:1500}},{spell:h.a.SMITE,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500}},{spell:h.a.ANGELIC_FEATHER_TALENT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:20,charges:3,gcd:{base:1500},enabled:e.hasTalent(h.a.ANGELIC_FEATHER_TALENT.id)},{spell:h.a.SHINING_FORCE_TALENT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:45,gcd:{base:1500},enabled:e.hasTalent(h.a.SHINING_FORCE_TALENT.id)},{spell:h.a.FADE,category:a.SPELL_CATEGORIES.UTILITY,cooldown:30},{spell:h.a.LEAP_OF_FAITH,category:a.SPELL_CATEGORIES.UTILITY,cooldown:150},{spell:h.a.MIND_CONTROL,category:a.SPELL_CATEGORIES.UTILITY,cooldown:e.hasTalent(h.a.DOMINANT_MIND_TALENT.id)?120:0},{spell:h.a.MASS_DISPEL,category:a.SPELL_CATEGORIES.UTILITY,cooldown:15,gcd:{base:1500}},{spell:h.a.DISPEL_MAGIC,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:h.a.PURIFY,category:a.SPELL_CATEGORIES.UTILITY,cooldown:8,gcd:{base:1500}},{spell:h.a.SHACKLE_UNDEAD,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:h.a.PSYCHIC_SCREAM,category:a.SPELL_CATEGORIES.UTILITY,cooldown:60-(e.hasTalent(h.a.PSYCHIC_VOICE_TALENT.id)?30:0)},{spell:h.a.SHADOW_MEND,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:h.a.SHADOW_COVENANT_TALENT,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},cooldown:12,castEfficiency:{suggestion:!0},enabled:e.hasTalent(h.a.SHADOW_COVENANT_TALENT.id)},{spell:h.a.LEVITATE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:h.a.MIND_BLAST,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500}},{spell:h.a.MIND_SEAR,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500}},{spell:h.a.MIND_SOOTHE,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500}},{spell:h.a.POWER_INFUSION,category:a.SPELL_CATEGORIES.COOLDOWNS,gcd:{base:1500}},{spell:h.a.SHADOW_WORD_DEATH,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500}},{spell:h.a.FLESHCRAFT,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:120,enabled:e.hasCovenant(N.a.NECROLORD.id)},{spell:h.a.UNHOLY_NOVA,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:120,enabled:e.hasCovenant(N.a.NECROLORD.id)}]}}]),a}(S.a),R=a(120),I=a(66),C=a(754),L=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._previousPenanceTimestamp=0,e}return Object(u.a)(a,[{key:"onCast",value:function(e){var t=e.ability.guid;t===h.a.PENANCE.id||t===h.a.PENANCE_HEAL.id?this.isNewPenanceCast(e.timestamp)&&(this._previousPenanceTimestamp=e.timestamp,this.beginCooldown(h.a.PENANCE.id,e)):Object(R.a)(Object(I.a)(a.prototype),"onCast",this).call(this,e)}},{key:"isNewPenanceCast",value:function(e){return!this._previousPenanceTimestamp||e-this._previousPenanceTimestamp>3500}}]),a}(C.b),j=a(877),P=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).lastPenanceStartTimestamp=0,e}return Object(u.a)(a,[{key:"getHardcodedManaCost",value:function(e){var t=e.ability.guid,n=Object(R.a)(Object(I.a)(a.prototype),"getHardcodedManaCost",this).call(this,e);return t===h.a.PENANCE.id&&(!this.lastPenanceStartTimestamp||e.timestamp-this.lastPenanceStartTimestamp>2500?(this.lastPenanceStartTimestamp=e.timestamp,n=h.a.PENANCE.manaCost):n=0),n}},{key:"getResourceCost",value:function(e){var t=Object(R.a)(Object(I.a)(a.prototype),"getResourceCost",this).call(this,e);return 0===t||!e.targetIsFriendly&&this.selectedCombatant.hasBuff(h.a.KAM_XIRAFF_BUFF.id,e.timestamp)&&(t*=.25),t}}]),a}(j.a),H=a(755),w=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"getAbility",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e===h.a.SHADOWFIEND_WITH_GLYPH_OF_THE_SHA.id||e===h.a.LIGHTSPAWN.id?Object(R.a)(Object(I.a)(a.prototype),"getAbility",this).call(this,h.a.SHADOWFIEND.id,t):Object(R.a)(Object(I.a)(a.prototype),"getAbility",this).call(this,e,t)}},{key:"onCast",value:function(e){Object(R.a)(Object(I.a)(a.prototype),"onCast",this).call(this,e);var t=e.ability.guid,n=this.getAbility(t,e.ability);t===h.a.POWER_WORD_SHIELD.id&&(this.selectedCombatant.hasBuff(h.a.RAPTURE.id,e.timestamp)&&(n.raptureCasts=(n.raptureCasts||0)+1))}}]),a}(H.a),k=a(814),B=a(26),W=a(0),M=a.n(W),F=a(43),U=a(746),G=a(809);f=Symbol.iterator;var x=function(){function e(t){Object(n.a)(this,e),this.threshold=void 0,this.cache=void 0,this.threshold=t,this.cache={}}return Object(u.a)(e,[{key:f,value:function(){return Object.entries(this.cache).map((function(e){return e[1]}))[Symbol.iterator]()}},{key:"processEvent",value:function(e){var t=this.getStemTimestamp(e);t?this.cache[t]=[].concat(Object(B.a)(this.cache[t]),[e]):this.addNewStemTimestamp(e)}},{key:"getStemTimestamp",value:function(e){return Object.keys(this.cache).map(Number).filter(this.withinThreshold(e.timestamp))[0]||null}},{key:"withinThreshold",value:function(e){var t=this;return function(a){return e<=a+t.threshold&&e>a}}},{key:"addNewStemTimestamp",value:function(e){this.cache[e.timestamp]=[e]}}]),e}(),Y=a(747),V=a(4),z=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._boltCount=3,i.hits=0,i.eventGrouper=new x(3500),i._boltCount=i.selectedCombatant.hasTalent(h.a.CASTIGATION_TALENT.id)?4:3,i.addEventListener(d.f.damage.by(F.a),i.onDamage),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i}return Object(u.a)(a,[{key:"missedBolts",get:function(){var e=this;return Object(B.a)(this.eventGrouper).reduce((function(t,a){return t+(e._boltCount-a.length)}),0)}},{key:"casts",get:function(){return Object(B.a)(this.eventGrouper).length}},{key:"currentBoltNumber",get:function(){return Object(B.a)(this.eventGrouper).slice(-1)[0].length-1}}]),Object(u.a)(a,[{key:"onDamage",value:function(e){a.isPenance(e.ability.guid)&&(this.eventGrouper.processEvent(e),e.penanceBoltNumber=this.currentBoltNumber)}},{key:"onHeal",value:function(e){a.isPenance(e.ability.guid)&&(this.eventGrouper.processEvent(e),e.penanceBoltNumber=this.currentBoltNumber)}},{key:"statistic",value:function(){return M.a.createElement(U.a,{position:Y.a.CORE(13),size:"small",tooltip:M.a.createElement(M.a.Fragment,null,"Each ",M.a.createElement(V.a,{id:h.a.PENANCE.id})," cast has 3 bolts (4 if you're using ",M.a.createElement(V.a,{id:h.a.CASTIGATION_TALENT.id}),"). You should try to let this channel finish as much as possible. You channeled Penance ",this.casts," times.")},M.a.createElement(G.a,{spell:h.a.PENANCE,value:this.missedBolts,label:M.a.createElement(M.a.Fragment,null,"Wasted ",M.a.createElement(V.a,{id:h.a.PENANCE.id})," bolts")}))}}]),a}(F.c);z.isPenance=function(e){return e===h.a.PENANCE.id||e===h.a.PENANCE_HEAL.id||e===h.a.PENANCE_CAST.id};var K,q=z,Z=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._previousPenanceTimestamp=i.owner.fight.start_time-3500,i._hasCastigation=!1,i._bolt=0,i._hasCastigation=i.selectedCombatant.hasTalent(h.a.CASTIGATION_TALENT.id),i}return Object(u.a)(a,[{key:"isNewPenanceCast",value:function(e){return e-this._previousPenanceTimestamp>3500}},{key:"onCast",value:function(e){if(q.isPenance(e.ability.guid)){if(this.isNewPenanceCast(e.timestamp))return this._bolt=0,this._previousPenanceTimestamp=e.timestamp,void this.beginChannel(e,{guid:h.a.PENANCE.id,name:h.a.PENANCE.name,type:2,abilityIcon:h.a.PENANCE.icon});var t=this._hasCastigation?4:3;this._bolt+=1,this._bolt===t-1&&(console.log("Ending Penance channel due to last bolt being fired"),this.endChannel(e))}else Object(R.a)(Object(I.a)(a.prototype),"onCast",this).call(this,e)}},{key:"cancelChannel",value:function(e,t){this.isChannelingSpell(h.a.PENANCE.id)?this.endChannel(e):Object(R.a)(Object(I.a)(a.prototype),"cancelChannel",this).call(this,e,t)}}]),a}(k.a),J=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCast",value:function(e){q.isPenance(e.ability.guid)||Object(R.a)(Object(I.a)(a.prototype),"onCast",this).call(this,e)}}]),a}(a(811).a),X=a(7),Q=a(123),$=a(18),ee=a(766),te=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._atonementSource=null,i.addEventListener(d.f.heal.by(F.a),i._processAtonement),i.addEventListener(d.f.damage,i._processAtonementDamageSource),i}return Object(u.a)(a,[{key:"atonementDamageSourceFilter",get:function(){return new $.c(d.b.AtonementDamage)}},{key:"atonementEventFilter",get:function(){return new $.c(d.b.Atonement)}}]),Object(u.a)(a,[{key:"_processAtonementDamageSource",value:function(e){v[e.ability.guid]&&(e.targetIsFriendly||a.validHitTypes[e.hitType]&&(this._atonementSource=e,this.eventEmitter.fabricateEvent(Object(X.a)(Object(X.a)({},e),{},{type:this.atonementDamageSourceFilter.eventType}))))}},{key:"_processAtonement",value:function(e){var t=this._atonementSource;t&&E(e)&&this.eventEmitter.fabricateEvent({healEvent:e,damageEvent:t,sourceID:e.sourceID,type:this.atonementEventFilter.eventType})}}]),a}(F.c);te.dependencies={eventEmitter:Q.a},te.validHitTypes=(K={},Object(b.a)(K,ee.a.NORMAL,!0),Object(b.a)(K,ee.a.CRIT,!0),Object(b.a)(K,ee.a.ABSORB,!0),K);var ae=a(870),ne=a(33),ie=a(13),re={minor:.2,regular:.35,major:1},se={minor:.97,regular:.85,major:.7},oe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).lastPenanceStartTimestamp=0,e._lastCastFinishedTimestamp=0,e}return Object(u.a)(a,[{key:"recordCastTime",value:function(e,t,a,n,i){if(i===h.a.PENANCE.id||i===h.a.PENANCE_HEAL.id){if(this.lastPenanceStartTimestamp&&!(e-this.lastPenanceStartTimestamp>2500))return void(this._lastCastFinishedTimestamp=Math.max(this._lastCastFinishedTimestamp,n.timestamp));this.lastPenanceStartTimestamp=e}}},{key:"suggestions",value:function(e){e(this.totalTimeWasted/this.owner.fightDuration).isGreaterThan(re.minor).addSuggestion((function(e,t,a){return e("Your downtime can be improved. Try to Always Be Casting (ABC); try to reduce the delay between casting spells and when you're not healing try to contribute some damage.").icon("spell_mage_altertime").actual(ie.i18n._({id:"priest.discipline.suggestions.alwaysBeCasting.downtime",defaults:"{0}% downtime",values:{0:Object(ne.e)(t)}})).recommended("<".concat(Object(ne.e)(a),"% is recommended")).regular(re.regular).major(re.major)}))}}]),a}(ae.a);oe.HEALING_ABILITIES_ON_GCD=[h.a.POWER_WORD_SHIELD.id,h.a.POWER_WORD_RADIANCE.id,h.a.SHADOW_MEND.id,h.a.HALO_TALENT.id,h.a.DIVINE_STAR_TALENT.id,h.a.MASS_DISPEL.id,h.a.DISPEL_MAGIC.id,h.a.POWER_WORD_BARRIER_CAST.id,h.a.PURIFY.id,h.a.POWER_WORD_SOLACE_TALENT.id,h.a.SHADOW_COVENANT_TALENT.id,h.a.EVANGELISM_TALENT.id];var le=oe,ce=a(203),ue=a(767),de=a(757),me=a(819),he=a(777),Ee=a(796),ge=a(88),fe=a(22),be=a(770),pe=a(762),ve=a(763),ye=a(771),Oe=a(772),Te=function(e){var t=e.combatant,a=e.castEfficiency,n=e.thresholds,i=function(e){return M.a.createElement(Oe.a,Object.assign({castEfficiency:a.getCastEfficiencyForSpellId(e.spell)},e))};return M.a.createElement(be.a,null,M.a.createElement(pe.c,{name:"Use core abilities as often as possible",description:M.a.createElement(M.a.Fragment,null,"Using your core abilities as often as possible will typically result in better performance, remember to ",M.a.createElement(V.a,{id:h.a.SMITE.id})," as often as you can!")},M.a.createElement(i,{spell:h.a.PENANCE_CAST.id}),t.hasTalent(h.a.SCHISM_TALENT.id)&&M.a.createElement(i,{spell:h.a.SCHISM_TALENT.id}),t.hasTalent(h.a.POWER_WORD_SOLACE_TALENT.id)&&M.a.createElement(i,{spell:h.a.POWER_WORD_SOLACE_TALENT.id}),t.hasTalent(h.a.DIVINE_STAR_TALENT.id)&&M.a.createElement(i,{spell:h.a.DIVINE_STAR_TALENT.id}),t.hasTalent(h.a.SHADOW_COVENANT_TALENT.id)&&M.a.createElement(i,{spell:h.a.SHADOW_COVENANT_TALENT.id})),M.a.createElement(pe.c,{name:"Use cooldowns effectively",description:M.a.createElement(M.a.Fragment,null,"Cooldowns are an important part of healing, try to use them to counter fight mechanics. For example if a boss has burst damage every 1.5 minutes, ",M.a.createElement(V.a,{id:h.a.RAPTURE.id})," should be used to counter it.")},M.a.createElement(i,{spell:h.a.RAPTURE.id}),!t.hasTalent(h.a.LUMINOUS_BARRIER_TALENT.id)&&M.a.createElement(i,{spell:h.a.POWER_WORD_BARRIER_CAST.id}),!t.hasTalent(h.a.MINDBENDER_TALENT_SHARED.id)&&M.a.createElement(i,{spell:h.a.SHADOWFIEND.id}),t.hasTalent(h.a.MINDBENDER_TALENT_SHARED.id)&&M.a.createElement(i,{spell:h.a.MINDBENDER_TALENT_SHARED.id}),t.hasTalent(h.a.HALO_TALENT.id)&&M.a.createElement(i,{spell:h.a.HALO_TALENT.id}),t.hasTalent(h.a.LUMINOUS_BARRIER_TALENT.id)&&M.a.createElement(i,{spell:h.a.LUMINOUS_BARRIER_TALENT.id}),t.hasTalent(h.a.EVANGELISM_TALENT.id)&&M.a.createElement(i,{spell:h.a.EVANGELISM_TALENT.id}),a.getCastEfficiencyForSpellId(h.a.ARCANE_TORRENT_MANA1.id)&&M.a.createElement(i,{spell:h.a.ARCANE_TORRENT_MANA1.id})),M.a.createElement(pe.c,{name:"Use your supportive abilities",description:"While you shouldn't aim to cast defensives and externals on cooldown, be aware of them and try to use them whenever effective. Not using them at all indicates you might not be aware of them enough or not utilizing them optimally."},M.a.createElement(i,{spell:h.a.PAIN_SUPPRESSION.id}),M.a.createElement(i,{spell:h.a.LEAP_OF_FAITH.id}),M.a.createElement(i,{spell:h.a.DESPERATE_PRAYER.id})),M.a.createElement(pe.c,{name:"Try to avoid being inactive for a large portion of the fight",description:M.a.createElement(M.a.Fragment,null,"High downtime is inexcusable, while it may be tempting to not cast and save mana, Discipline's damage fillers such as ",M.a.createElement(V.a,{id:h.a.SMITE.id})," are extremely cheap. You can reduce your downtime by reducing the delay between casting spells, anticipating movement, moving during the GCD, and ",M.a.createElement(fe.a,{content:"You can ignore this while learning Discipline, but contributing DPS whilst healing is a major part of becoming a better than average player."},"when you're not healing try to contribute some damage.*"),".")},M.a.createElement(ve.a,{name:"Non healing time",thresholds:n.nonHealingTimeSuggestionThresholds}),M.a.createElement(ve.a,{name:"Downtime",thresholds:n.downtimeSuggestionThresholds})),M.a.createElement(pe.c,{name:M.a.createElement(M.a.Fragment,null,"Use all of your ",M.a.createElement(Ee.a,{id:ge.a.MANA.id})," effectively"),description:"If you have a large amount of mana left at the end of the fight that's mana you could have turned into healing. Try to use all your mana during a fight. A good rule of thumb is to try to match your mana level with the boss's health."},M.a.createElement(ve.a,{name:"Mana left",thresholds:n.manaLeft})),M.a.createElement(ye.a,{thresholds:n}))},Ae=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).combatants=void 0,e.castEfficiency=void 0,e.alwaysBeCasting=void 0,e.manaValues=void 0,e.preparationRuleAnalyzer=void 0,e}return Object(u.a)(a,[{key:"render",value:function(){return M.a.createElement(Te,{combatant:this.combatants.selected,castEfficiency:this.castEfficiency,thresholds:Object(X.a)(Object(X.a)({},this.preparationRuleAnalyzer.thresholds),{},{nonHealingTimeSuggestionThresholds:this.alwaysBeCasting.nonHealingTimeSuggestionThresholds,downtimeSuggestionThresholds:this.alwaysBeCasting.downtimeSuggestionThresholds,manaLeft:this.manaValues.suggestionThresholds})})}}]),a}(ce.a);Ae.dependencies={combatants:de.a,castEfficiency:ue.a,alwaysBeCasting:le,manaValues:me.a,preparationRuleAnalyzer:he.a};var _e=Ae,Se=a(785),Ne=a(828),De=a(53),Re=a(750),Ie=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).atonementApplicators=new Map([[h.a.POWER_WORD_RADIANCE.id,9e3],[h.a.POWER_WORD_SHIELD.id,15e3],[h.a.SHADOW_MEND.id,15e3]]),i._event=null,i.addEventListener(d.f.applybuff.by(F.a),i.onApplyBuff),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i}return Object(u.a)(a,[{key:"onApplyBuff",value:function(e){this.atonementApplicators.has(e.ability.guid)&&(this._event=e)}},{key:"onHeal",value:function(e){this.atonementApplicators.has(e.ability.guid)&&(this._event=e)}},{key:"duration",get:function(){return this.atonementApplicators}},{key:"event",get:function(){return this._event}}]),a}(F.c),Ce=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).healing=0,i.totalAtones=0,i.totalAtonementRefreshes=0,i.currentAtonementTargets=[],i.improperAtonementRefreshes=[],i.statisticOrder=Re.a.OPTIONAL(),i.eventEmitter=void 0,i.combatants=void 0,i.atonementApplicationSource=void 0,i.active=!0,i.addEventListener(d.f.applybuff.by(F.a).spell(h.a.ATONEMENT_BUFF),i.onApplyBuff),i.addEventListener(d.f.refreshbuff.by(F.a).spell(h.a.ATONEMENT_BUFF),i.onRefreshBuff),i.addEventListener(d.f.removebuff.by(F.a).spell(h.a.ATONEMENT_BUFF),i.onRemoveBuff),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i}return Object(u.a)(a,[{key:"onApplyBuff",value:function(e){var t={target:e.targetID,lastAtonementAppliedTimestamp:e.timestamp,atonementExpirationTimestamp:e.timestamp+this.atonementDuration};this.currentAtonementTargets=this.currentAtonementTargets.filter((function(e){return e.target!==t.target})),this.currentAtonementTargets.push(t),this.totalAtones+=1,this.eventEmitter.fabricateEvent(Object(X.a)(Object(X.a)({},e),{},{type:d.b.AtonementApplied}),e)}},{key:"onRefreshBuff",value:function(e){var t=this.currentAtonementTargets.find((function(t){return t.target===e.targetID}));t||(t={target:e.targetID,lastAtonementAppliedTimestamp:this.owner.fight.start_time,atonementExpirationTimestamp:0});var a=e.timestamp-t.lastAtonementAppliedTimestamp;a<this.atonementDuration-3e3&&(this.improperAtonementRefreshes.push(t),this.eventEmitter.fabricateEvent(Object(X.a)(Object(X.a)({},e),{},{type:d.b.AtonementRefreshImproper}),e));var n={target:e.targetID,lastAtonementAppliedTimestamp:e.timestamp,atonementExpirationTimestamp:Math.max(t.atonementExpirationTimestamp,e.timestamp+this.atonementDuration)};this.currentAtonementTargets=this.currentAtonementTargets.filter((function(e){return e.target!==n.target})),this.currentAtonementTargets.push(n),this.totalAtones+=1,this.totalAtonementRefreshes+=1,this.eventEmitter.fabricateEvent(Object(X.a)(Object(X.a)({},e),{},{type:d.b.AtonementRefresh}),e)}},{key:"onRemoveBuff",value:function(e){var t=e.targetID;e.timestamp;this.currentAtonementTargets=this.currentAtonementTargets.filter((function(e){return e.target!==t})),this.eventEmitter.fabricateEvent(Object(X.a)(Object(X.a)({},e),{},{type:d.b.AtonementFaded}),e)}},{key:"onHeal",value:function(e){E(e)||(this.healing+=e.amount+(e.absorbed||0))}},{key:"statistic",value:function(){var e=this.improperAtonementRefreshes.length||0,t=this.totalAtonementRefreshes||0,a=this.totalAtones||0;return M.a.createElement(Re.b,{icon:M.a.createElement(De.a,{id:h.a.ATONEMENT_HEAL_NON_CRIT.id}),value:e,label:M.a.createElement(M.a.Fragment,null,"Early Atonement refreshes"),tooltip:"The amount of Atonement instances that were refreshed earlier than within 3 seconds of the buff expiring. You applied Atonement ".concat(a," times in total, ").concat(t," (").concat(Object(ne.e)(t/a,2),"%) of them were refreshes of existing Atonement instances, and ").concat(e," (").concat(Object(ne.e)(e/a,2),"%) of them were considered early.")})}},{key:"atonementDuration",get:function(){var e=this.atonementApplicationSource.event;if(!e)return 15;var t=e.ability.guid,a=this.atonementApplicationSource.duration.get(t)||0;return t===h.a.POWER_WORD_SHIELD.id&&this.selectedCombatant.hasBuff(h.a.RAPTURE.id,e.timestamp)&&(a+=6),a}},{key:"numAtonementsActive",get:function(){return this.currentAtonementTargets.length}},{key:"giftActive",get:function(){return this.numAtonementsActive>=3}}]),a}(F.c);Ce.dependencies={eventEmitter:Q.a,combatants:de.a,atonementApplicationSource:Ie};var Le=Ce,je=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).lastEvangelism=null,e.atonementModule=void 0,e.eventHistory=void 0,e}return Object(u.a)(a,[{key:"onCast",value:function(e){if(e.ability.guid===h.a.EVANGELISM_TALENT.id){var t=this.atonementModule.numAtonementsActive;this.lastEvangelism=this.addCooldown({spell:h.a.EVANGELISM_TALENT,summary:[Se.a.HEALING,{value:t,label:"Atonements",tooltip:"The amount of atonements that were up at time of casting Evangelism."},{value:"".concat(6*t,"s"),label:"Duration gained",tooltip:"The total Atonement duration gained from casting Evangelism."}]},e.timestamp);var n=e.timestamp;this.atonementModule.currentAtonementTargets.forEach((function(e){(null===n||e.atonementExpirationTimestamp>n)&&(n=e.atonementExpirationTimestamp)})),this.lastEvangelism.end=n+6e3}this.lastEvangelism&&this.lastEvangelism.end&&this.lastEvangelism&&e.timestamp<this.lastEvangelism.end&&this.lastEvangelism.events.push(e),Object(R.a)(Object(I.a)(a.prototype),"onCast",this).call(this,e)}},{key:"onHeal",value:function(e){if(this.lastEvangelism&&E(e)){var t=this.atonementModule.currentAtonementTargets.find((function(t){return t.target===e.targetID}));if(!t)return;e.timestamp>t.atonementExpirationTimestamp&&this.lastEvangelism.events.push(e)}Object(R.a)(Object(I.a)(a.prototype),"onHeal",this).call(this,e)}}]),a}(Se.b);je.dependencies={atonementModule:Le,eventHistory:Ne.a},je.cooldownSpells=[].concat(Object(B.a)(Se.b.cooldownSpells),[{spell:h.a.RAPTURE,summary:[Se.a.ABSORBS_APPLIED,Se.a.ABSORBED,Se.a.MANA]}]);var Pe=je,He=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).wasted=0,i.count=0,i.totalCount=0,i.statisticOrder=Re.a.CORE(10),i.addEventListener(d.f.removebuff.by(F.a).spell(h.a.POWER_WORD_SHIELD),i.onRemoveBuff),i}return Object(u.a)(a,[{key:"onRemoveBuff",value:function(e){e.absorb&&e.absorb>0&&(this.wasted+=e.absorb,this.count+=1),this.totalCount+=1}},{key:"statistic",value:function(){var e=this.wasted||0,t=this.count||0,a=this.totalCount||0;return M.a.createElement(Re.b,{icon:M.a.createElement(De.a,{id:h.a.POWER_WORD_SHIELD.id}),value:"".concat(Object(ne.d)(e/this.owner.fightDuration*1e3)," HPS"),label:M.a.createElement(fe.a,{content:"The amount of shield absorb remaining on Power Word: Shield instances that have expired. There was a total of ".concat(Object(ne.d)(e)," unused Power Word: Shield absorb from ").concat(t," shields with absorb remaining (a total of ").concat(a," shields were applied).")},"Unused PW:S absorb")})}}]),a}(F.c),we=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._event=null,i.addEventListener(d.f.damage.by(F.a|F.b),i.onDamage),i}return Object(u.a)(a,[{key:"onDamage",value:function(e){v[e.ability.guid]&&(e.targetIsFriendly||(this._event=e))}},{key:"event",get:function(){return this._event}}]),a}(F.c),ke=a(812),Be=a(825);function We(e){return void 0!==e.penanceBoltNumber}var Me=a(31),Fe=a(69),Ue=a.n(Fe),Ge=a(28),xe=function(e){var t=e.analyzer,a=t.totalAtonement,n=t.bySource,i=t.total,r=e.owner.fightDuration,s=Object(W.useState)(!1),o=Object(Me.a)(s,2),l=o[0],c=o[1],u=Object(W.useCallback)((function(e){c(e.target.checked)}),[]),d=Object(W.useMemo)((function(){var e=Object.keys(n).map((function(e){return n[e]})).reduce((function(e,t){return Math.max(e,t.healing.effective)}),1);return M.a.createElement("tbody",null,n&&Object.keys(n).sort((function(e,t){return n[t].healing.effective-n[e].healing.effective})).map((function(t){var s=n[t],o=s.ability,c=s.healing,u=s.bolts,d=l?i:a.effective,m=function(e){switch(Number(e)){case-2:return M.a.createElement(V.a,{id:h.a.LIGHTSPAWN.id});default:return null}}(t);return M.a.createElement(M.a.Fragment,null,M.a.createElement("tr",{key:o.guid},M.a.createElement("td",{style:{width:"30%"}},M.a.createElement(V.a,{id:o.guid,icon:!1},M.a.createElement(Ge.a,{icon:o.abilityIcon})," ",o.name),m&&M.a.createElement(M.a.Fragment,null," (",m,")")),M.a.createElement("td",{style:{paddingRight:5,textAlign:"right",whiteSpace:"nowrap"}},Object(ne.e)(c.effective/d)," %"),M.a.createElement("td",{style:{width:"70%"}},M.a.createElement("div",{className:"performance-bar",style:{width:"".concat(c.effective/e*100,"%")}})),M.a.createElement("td",{style:{textAlign:"right",whiteSpace:"nowrap"}},M.a.createElement(fe.a,{content:"Total: ".concat(Object(ne.d)(c.effective))},Object(ne.d)(c.effective/r*1e3)," HPS")),M.a.createElement("td",{style:{textAlign:"right",whiteSpace:"nowrap"}},Object(ne.e)(c.overheal/c.raw)," %")),u&&u.map((function(e,t){return e?M.a.createElement("tr",{key:t},M.a.createElement("td",{style:{width:"30%",paddingLeft:50}},M.a.createElement(V.a,{id:o.guid,icon:!1},M.a.createElement(Ge.a,{icon:o.abilityIcon})," ",o.name," bolt ",t+1)),M.a.createElement("td",{style:{paddingRight:5,textAlign:"right",whiteSpace:"nowrap"}},Object(ne.e)(e.effective/d)," %"),M.a.createElement("td",{style:{width:"70%",paddingLeft:50}},M.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.effective/c.effective*100,"%")}})),M.a.createElement("td",{style:{textAlign:"right",whiteSpace:"nowrap"}},M.a.createElement(fe.a,{content:"Total: ".concat(Object(ne.d)(e.effective))},Object(ne.d)(e.effective/r*1e3)," HPS")),M.a.createElement("td",{style:{textAlign:"right",whiteSpace:"nowrap"}},Object(ne.e)(e.overheal/c.raw)," %")):null})))})))}),[a,n,i,r,l]);return M.a.createElement("div",null,M.a.createElement("table",{className:"data-table"},M.a.createElement("thead",null,M.a.createElement("tr",null,M.a.createElement("th",{style:{fontWeight:700,textTransform:"uppercase"}},"Name"),M.a.createElement("th",{style:{fontWeight:700,textTransform:"uppercase"}},"Healing"),M.a.createElement("th",{colSpan:2},M.a.createElement("div",{className:"text-right toggle-control"},M.a.createElement(Ue.a,{defaultChecked:!1,icons:!1,onChange:u,id:"absolute-toggle"}),M.a.createElement("label",{htmlFor:"absolute-toggle",style:{marginLeft:"0.5em"}},"relative to total healing"))),M.a.createElement("th",{style:{fontWeight:700,textTransform:"uppercase"}},"Overheal"))),d))},Ye=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).total=0,i._lastPenanceBoltNumber=0,i.bySource={},i.atonementDamageSource=void 0,i.penance=void 0,i._totalAtonement=new Be.a,i.addEventListener(d.f.absorbed.by(F.a),i.onAbsorb),i.addEventListener(d.f.damage.by(F.a).spell(h.a.PENANCE),i.onDamage),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i}return Object(u.a)(a,[{key:"onAbsorb",value:function(e){this.total+=e.amount||0}},{key:"onDamage",value:function(e){We(e)&&(this._lastPenanceBoltNumber=e.penanceBoltNumber)}},{key:"onHeal",value:function(e){if(this.total+=e.amount||0,this.total+=e.absorbed||0,E(e)){var t=this.atonementDamageSource.event;t&&this._addHealing(t,e.amount,e.absorbed,e.overheal)}}},{key:"_addHealing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.ability,r=i.guid;if(this._totalAtonement=this._totalAtonement.add(t,a,n),this.bySource[r]=this.bySource[r]||{},this.bySource[r].ability=i,this.bySource[r].healing=(this.bySource[r].healing||new Be.a).add(t,a,n),r===h.a.PENANCE.id){var s=this.bySource[h.a.PENANCE.id];s.bolts||(s.bolts=[]),s.bolts[this._lastPenanceBoltNumber]||(s.bolts[this._lastPenanceBoltNumber]=new Be.a),s.bolts[this._lastPenanceBoltNumber]=s.bolts[this._lastPenanceBoltNumber].add(t,a,n)}}},{key:"statistic",value:function(){return M.a.createElement(ke.a,{title:"Atonement sources",explanation:M.a.createElement(M.a.Fragment,null,"This shows a breakdown of the damage that caused ",M.a.createElement(V.a,{id:h.a.ATONEMENT_BUFF.id})," healing."),position:90,pad:!1},M.a.createElement(xe,{analyzer:this,owner:this.owner}))}},{key:"totalAtonement",get:function(){return this._totalAtonement}}]),a}(F.c);Ye.dependencies={atonementDamageSource:we,penance:q};var Ve=Ye,ze=a(41),Ke=a(841),qe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).totalDamageTakenDuringPWB=0,e}return Object(u.a)(a,[{key:"load",value:function(){var e=this;return Object(ze.i)("report/tables/damage-taken/".concat(this.owner.report.code),{start:this.owner.fight.start_time,end:this.owner.fight.end_time,filter:"IN RANGE FROM type='".concat(d.b.ApplyBuff,"' AND ability.id=").concat(h.a.POWER_WORD_BARRIER_BUFF.id," TO type='").concat(d.b.RemoveBuff,"' AND ability.id=").concat(h.a.POWER_WORD_BARRIER_BUFF.id," GROUP BY target ON target END")}).then((function(t){e.totalDamageTakenDuringPWB=t.entries.reduce((function(e,t){return e+t.total}),0)}))}},{key:"statistic",value:function(){var e=this.owner.fightDuration;return M.a.createElement(Ke.b,{loader:this.load.bind(this),icon:M.a.createElement(De.a,{id:h.a.POWER_WORD_BARRIER_BUFF.id}),value:"\u2248".concat(Object(ne.d)(this.damageReducedDuringPowerWordBarrier/e*1e3)," DRPS"),label:"Barrier DRPS",tooltip:"The total Damage Reduced by Power Word: Barrier was ".concat(Object(ne.f)(this.damageReducedDuringPowerWordBarrier)," (").concat(Object(ne.d)(this.damageReducedDuringPowerWordBarrier/e*1e3)," per second average). This includes values from other priests in your raid due to technical limitations.")})}},{key:"damageReducedDuringPowerWordBarrier",get:function(){return this.totalDamageTakenDuringPWB/.75*.25}},{key:"damageReduced",get:function(){return this.damageReducedDuringPowerWordBarrier}}]),a}(F.c),Ze=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).totalDamageTakenDuringAtonement=0,i.active=i.selectedCombatant.hasTalent(h.a.LENIENCE_TALENT.id),i}return Object(u.a)(a,[{key:"load",value:function(){var e=this;return Object(ze.i)("report/tables/damage-taken/".concat(this.owner.report.code),{start:this.owner.fight.start_time,end:this.owner.fight.end_time,filter:"(IN RANGE FROM type='".concat(d.b.ApplyBuff,"' AND ability.id=").concat(h.a.ATONEMENT_BUFF.id," AND source.name='").concat(this.selectedCombatant.name,"' TO type='").concat(d.b.RemoveBuff,"' AND ability.id=").concat(h.a.ATONEMENT_BUFF.id," AND source.name='").concat(this.selectedCombatant.name,"' GROUP BY target ON target END)")}).then((function(t){console.log("Received LR damage taken",t),e.totalDamageTakenDuringAtonement=t.entries.reduce((function(e,t){return e+t.total}),0)}))}},{key:"statistic",value:function(){var e=this.owner.fightDuration;return M.a.createElement(Ke.b,{loader:this.load.bind(this),icon:M.a.createElement(De.a,{id:h.a.LENIENCE_TALENT.id}),value:">=".concat(Object(ne.d)(this.damageReducedDuringLenience/e*1e3)," DRPS"),label:"Damage reduced",tooltip:"The estimated damage reduced by Lenience's damage reduction was ".concat(Object(ne.f)(this.damageReducedDuringLenience)," (").concat(Object(ne.d)(this.damageReducedDuringLenience/e*1e3)," per second average). This is the lowest possible value. This value is 100% accurate for this log if you are looking at the actual gain over not having the Lenience bonus at all, but the gain may end up higher when taking interactions with other damage reductions into account.")})}},{key:"damageReducedDuringLenience",get:function(){return this.totalDamageTakenDuringAtonement/.97*.03}}]),a}(F.c),Je=a(756),Xe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).dotSpell=void 0,i.ptwCasts=0,i.ptwApplications=0,i.lastCastTarget=0,i.ptwCleaveTracker={},i.ptwCleaveDamage=0,i.statisticOrder=Re.a.CORE(10),i.enemies=void 0,i.abilityTracker=void 0,i.selectedCombatant.hasTalent(h.a.PURGE_THE_WICKED_TALENT.id)?i.dotSpell=h.a.PURGE_THE_WICKED_BUFF:i.dotSpell=h.a.SHADOW_WORD_PAIN,i.addEventListener(d.f.cast.by(F.a).spell([h.a.PURGE_THE_WICKED_TALENT]),i.onDotCast),i.addEventListener(d.f.applydebuff.by(F.a).spell(h.a.PURGE_THE_WICKED_BUFF),i.onDotApply),i.addEventListener(d.f.refreshdebuff.by(F.a).spell(h.a.PURGE_THE_WICKED_BUFF),i.onDotApply),i.addEventListener(d.f.removedebuff.by(F.a).spell(h.a.PURGE_THE_WICKED_BUFF),i.onDotRemove),i.addEventListener(d.f.damage.by(F.a).spell(h.a.PURGE_THE_WICKED_BUFF),i.onDotDamage),i}return Object(u.a)(a,[{key:"onDotCast",value:function(e){this.ptwCasts+=1,e.targetID&&(this.lastCastTarget=e.targetID)}},{key:"onDotApply",value:function(e){this.ptwApplications+=1,e.targetID!==this.lastCastTarget&&(this.ptwCleaveTracker[e.targetID]=1)}},{key:"onDotRemove",value:function(e){delete this.ptwCleaveTracker[e.targetID]}},{key:"onDotDamage",value:function(e){this.ptwCleaveTracker[e.targetID]&&(this.ptwCleaveDamage+=e.amount+(e.absorbed||0))}},{key:"suggestions",value:function(e){var t=this,a=this.uptime||0;e(a).isLessThan(se.minor).addSuggestion((function(e,n,i){return e(M.a.createElement("span",null,"Your ",M.a.createElement(V.a,{id:t.dotSpell.id})," uptime can be improved.")).icon(t.dotSpell.icon).actual(ie.i18n._({id:"priest.discipline.suggestions.purgeTheWicked.uptime",defaults:"{0}% uptime",values:{0:Object(ne.e)(a)}})).recommended(">".concat(Object(ne.e)(i,0),"% is recommended")).regular(se.regular).major(se.major)}))}},{key:"statistic",value:function(){var e=this.uptime||0;return this.dotSpell===h.a.PURGE_THE_WICKED_BUFF?M.a.createElement(Re.b,{icon:M.a.createElement(De.a,{id:this.dotSpell.id}),value:M.a.createElement(M.a.Fragment,null,Object(ne.e)(e),"% Uptime ",M.a.createElement("br",null),this.extraPTWs," Extra DOTs",M.a.createElement("br",null)),tooltip:"The additional dots contributed ".concat(Object(ne.f)(this.ptwCleaveDamage)," damage."),label:"".concat(this.dotSpell.name)}):M.a.createElement(Re.b,{icon:M.a.createElement(De.a,{id:this.dotSpell.id}),value:"".concat(Object(ne.e)(e)," %"),label:"".concat(this.dotSpell.name," Uptime")})}},{key:"uptime",get:function(){return this.enemies.getBuffUptime(this.dotSpell.id)/this.owner.fightDuration}},{key:"extraPTWs",get:function(){return this.ptwApplications-this.ptwCasts}}]),a}(F.c);Xe.dependencies={enemies:Je.a,abilityTracker:H.a};var Qe=Xe,$e=a(801),et=a(799),tt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._shadowmendsCasts=[],i._powerWordShieldsCasts=[],i._castsApplyBuffsMap=new Map,i._lastRadianceCastTimestamp=0,i._atonementHealingFromShadowMends=0,i._atonementHealingFromPowerWordRadiances=0,i._atonementHealingFromPowerWordShields=0,i._prepullApplicatorHealing=0,i.addEventListener(d.f.cast.by(F.a).spell(h.a.EVANGELISM_TALENT),i.handleEvangelismCasts),i.addEventListener(d.f.cast.by(F.a).spell(h.a.SHADOW_MEND),i.storeShadowMendsCasts),i.addEventListener(d.f.cast.by(F.a).spell(h.a.POWER_WORD_SHIELD),i.storePowerWordShieldsCasts),i.addEventListener(d.f.cast.by(F.a).spell(h.a.POWER_WORD_RADIANCE),i.storePowerWordRadiancesCastTimestamp),i.addEventListener(d.f.applybuff.by(F.a).spell(h.a.ATONEMENT_BUFF),i.assignAtonementBuffToApplicator),i.addEventListener(d.f.refreshbuff.by(F.a).spell(h.a.ATONEMENT_BUFF),i.assignAtonementBuffToApplicator),i.addEventListener(d.f.heal.by(F.a).spell(h.a.ATONEMENT_HEAL_NON_CRIT),i.handleAtonementsHits),i.addEventListener(d.f.heal.by(F.a).spell(h.a.ATONEMENT_HEAL_CRIT),i.handleAtonementsHits),i}return Object(u.a)(a,[{key:"storeShadowMendsCasts",value:function(e){this._castsApplyBuffsMap.set({event:e,applicatorId:h.a.SHADOW_MEND.id},null)}},{key:"storePowerWordShieldsCasts",value:function(e){this._castsApplyBuffsMap.set({event:e,applicatorId:h.a.POWER_WORD_SHIELD.id},null)}},{key:"storePowerWordRadiancesCastTimestamp",value:function(e){this._lastRadianceCastTimestamp=e.timestamp}},{key:"assignAtonementBuffToApplicator",value:function(e){if(!0!==e.__fabricated)if(e.timestamp===this._lastRadianceCastTimestamp)"refreshbuff"===e.type&&this.setWasRefreshedProperty(e,!0),this._castsApplyBuffsMap.set({event:{timestamp:this._lastRadianceCastTimestamp},applicatorId:h.a.POWER_WORD_RADIANCE.id},{applyBuff:e,atonementEvents:[],extendedByEvangelism:!1,wasRefreshed:!1});else{"refreshbuff"===e.type&&this.setWasRefreshedProperty(e,!0);var t=e.targetID,a=Array.from(this._castsApplyBuffsMap.keys()).slice().reverse().find((function(e){return e.event&&e.event.targetID===t}));a&&this._castsApplyBuffsMap.set(a,{applyBuff:e,atonementEvents:[],extendedByEvangelism:!1,wasRefreshed:!1})}}},{key:"getAtonementDuration",value:function(e){var t=0;return e.applicatorId===h.a.POWER_WORD_RADIANCE.id?t+=9e3:(e.applicatorId===h.a.POWER_WORD_SHIELD.id||e.applicatorId===h.a.SHADOW_MEND.id)&&(t+=15e3),t+300}},{key:"assignAtonementHit",value:function(e,t,a){var n=t.applyBuff.timestamp,i=t.applyBuff.timestamp+(t.extendedByEvangelism?6e3:0)+this.getAtonementDuration(e);return a.targetID===t.applyBuff.targetID&&a.timestamp>n&&a.timestamp<i&&!t.wasRefreshed?(t.atonementEvents.push(a),a.amount):0}},{key:"handleAtonementsHits",value:function(e){var t=this,a=this._castsApplyBuffsMap.values();void 0===Array.from(a).find((function(t){return null===t||t.applyBuff.targetID===e.targetID}))&&(this._prepullApplicatorHealing+=e.amount),this._castsApplyBuffsMap.forEach((function(a,n){null!==a&&(n.applicatorId===h.a.POWER_WORD_RADIANCE.id?t._atonementHealingFromPowerWordRadiances+=t.assignAtonementHit(n,a,e):n.applicatorId===h.a.POWER_WORD_SHIELD.id?t._atonementHealingFromPowerWordShields+=t.assignAtonementHit(n,a,e):n.applicatorId===h.a.SHADOW_MEND.id&&(t._atonementHealingFromShadowMends+=t.assignAtonementHit(n,a,e)))}))}},{key:"handleEvangelismCasts",value:function(e){this._castsApplyBuffsMap.forEach((function(t,a){null!==t&&(a.applicatorId===h.a.POWER_WORD_RADIANCE.id?e.timestamp>t.applyBuff.timestamp&&e.timestamp<t.applyBuff.timestamp+9e3&&(t.extendedByEvangelism=!0):a.applicatorId===h.a.POWER_WORD_SHIELD.id?e.timestamp>t.applyBuff.timestamp&&e.timestamp<t.applyBuff.timestamp+15e3&&(t.extendedByEvangelism=!0):a.applicatorId===h.a.SHADOW_MEND.id&&e.timestamp>t.applyBuff.timestamp&&e.timestamp<t.applyBuff.timestamp+15e3&&(t.extendedByEvangelism=!0))}))}},{key:"setWasRefreshedProperty",value:function(e,t){var a=e.targetID,n=Array.from(this._castsApplyBuffsMap.keys()).slice().reverse().find((function(e){return e.event&&e.event.targetID===a}));if(n){var i=this._castsApplyBuffsMap.get(n);null!==i&&(i.wasRefreshed=t)}}},{key:"renderAtonementApplicatorChart",value:function(){var e=[{color:"#fff",label:"Power Word: Shield",spellId:h.a.POWER_WORD_SHIELD.id,value:this._atonementHealingFromPowerWordShields+this._prepullApplicatorHealing,valueTooltip:Object(ne.f)(this._atonementHealingFromPowerWordShields+this._prepullApplicatorHealing)},{color:"#fcba03",label:"Power Word: Radiance",spellId:h.a.POWER_WORD_RADIANCE.id,value:this._atonementHealingFromPowerWordRadiances,valueTooltip:Object(ne.f)(this._atonementHealingFromPowerWordRadiances)},{color:"#772bb5",label:"Shadow Mend",spellId:h.a.SHADOW_MEND.id,value:this._atonementHealingFromShadowMends,valueTooltip:Object(ne.f)(this._atonementHealingFromShadowMends)}];return M.a.createElement(et.a,{items:e})}},{key:"statistic",value:function(){return M.a.createElement(U.a,{position:$e.a.CORE(20),size:"flexible",tooltip:"The Atonement healing contributed by each Atonement applicator."},M.a.createElement("div",{className:"pad"},M.a.createElement("label",null,M.a.createElement(V.a,{id:h.a.ATONEMENT_BUFF.id},"Atonement")," applicators breakdown"),this.renderAtonementApplicatorChart()))}}]),a}(F.c),at=a(769),nt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).healing=0,i.damage=0,i.statisticOrder=Re.a.OPTIONAL(),i.active=i.selectedCombatant.hasTalent(h.a.TWIST_OF_FATE_TALENT_DISCIPLINE.id),i.addEventListener(d.f.damage.by(F.a),i.onDamage),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i.addEventListener(d.f.absorbed.by(F.a),i.onAbsorb),i}return Object(u.a)(a,[{key:"onDamage",value:function(e){if(this.selectedCombatant.hasBuff(h.a.TWIST_OF_FATE_BUFF_DISCIPLINE.id,e.timestamp)){var t=e.amount+(e.absorbed||0);this.damage+=t-t/1.2}}},{key:"onHeal",value:function(e){this.parseHeal(e)}},{key:"onAbsorb",value:function(e){this.parseHeal(e)}},{key:"parseHeal",value:function(e){var t=e.ability.guid;p.includes(t)&&this.selectedCombatant.hasBuff(h.a.TWIST_OF_FATE_BUFF_DISCIPLINE.id,e.timestamp)&&(this.healing+=Object(at.a)(e,.2))}},{key:"suggestions",value:function(e){e(this.owner.getPercentageOfTotalHealingDone(this.healing)).isLessThan(.05).addSuggestion((function(e,t,a){return e(M.a.createElement("span",null,"Consider picking a different talent than ",M.a.createElement(V.a,{id:h.a.TWIST_OF_FATE_TALENT_DISCIPLINE.id}),". Castigation will give a consistent 3-5% increase and Schism provides a significant DPS increase if more healing is not needed.")).icon(h.a.TWIST_OF_FATE_TALENT_DISCIPLINE.icon).actual(ie.i18n._({id:"priest.discipline.suggestions.twistOfFate.efficiency",defaults:"{0}% of total healing",values:{0:Object(ne.e)(t)}})).recommended(">".concat(Object(ne.e)(a),"% is recommended.")).regular(.045).major(.025)}))}},{key:"statistic",value:function(){if(!this.active)return null;var e=this.healing||0,t=this.damage||0,a=this.owner.getPercentageOfTotalHealingDone(e),n=this.owner.getPercentageOfTotalDamageDone(t);return M.a.createElement(Re.b,{icon:M.a.createElement(De.a,{id:h.a.TWIST_OF_FATE_TALENT_DISCIPLINE.id}),value:this.owner.formatItemHealingDone(e),label:M.a.createElement(fe.a,{content:"The effective healing contributed by Twist of Fate was ".concat(Object(ne.e)(a),"% of total healing done. Twist of Fate also contributed ").concat(Object(ne.d)(t/this.owner.fightDuration*1e3)," DPS (").concat(Object(ne.e)(n),"% of total damage); the healing gain of this damage was included in the shown numbers.")},"Twist of Fate Healing")})}}]),a}(F.c),it=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).healing=0,i.damage=0,i._isCastigationBolt=!1,i.statisticOrder=Re.a.OPTIONAL(),i.active=i.selectedCombatant.hasTalent(h.a.CASTIGATION_TALENT.id),i.addEventListener(d.f.damage.by(F.a),i.onDamage),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i}return Object(u.a)(a,[{key:"onDamage",value:function(e){We(e)&&(e.ability.guid===h.a.PENANCE.id&&3===e.penanceBoltNumber?(this._isCastigationBolt=!0,this.damage+=e.amount):this._isCastigationBolt=!1)}},{key:"onHeal",value:function(e){(function(e){return void 0!==e.penanceBoltNumber})(e)&&(e.ability.guid===h.a.PENANCE_HEAL.id&&3===e.penanceBoltNumber&&(this.healing+=e.amount),E(e)&&this._isCastigationBolt&&(this.healing+=e.amount))}},{key:"statistic",value:function(){var e=this.healing||0,t=this.damage||0;return M.a.createElement(Re.b,{icon:M.a.createElement(De.a,{id:h.a.CASTIGATION_TALENT.id}),value:"".concat(Object(ne.d)(e/this.owner.fightDuration*1e3)," HPS"),label:M.a.createElement(fe.a,{content:"The effective healing contributed by Castigation (".concat(Object(ne.e)(this.owner.getPercentageOfTotalHealingDone(e)),"% of total healing done). Castigation also contributed ").concat(Object(ne.d)(t/this.owner.fightDuration*1e3)," DPS (").concat(Object(ne.e)(this.owner.getPercentageOfTotalDamageDone(t)),"% of total damage done), the healing gain of this damage was included in the shown numbers.")},"Castigation healing")})}}]),a}(F.c);it.dependencies={penance:q};var rt=it,st=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._previousEvangelismCast=null,i.statisticOrder=Re.a.CORE(2),i.atonementModule=void 0,i._evangelismStatistics={},i.active=i.selectedCombatant.hasTalent(h.a.EVANGELISM_TALENT.id),i.addEventListener(d.f.cast.by(F.a).spell(h.a.EVANGELISM_TALENT),i.onCast),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i}return Object(u.a)(a,[{key:"onCast",value:function(e){this._previousEvangelismCast=e;var t=this.atonementModule.numAtonementsActive;this._evangelismStatistics[e.timestamp]={count:t,atonementSeconds:6*t,healing:0}}},{key:"onHeal",value:function(e){if(E(e)){var t=this.atonementModule.currentAtonementTargets.find((function(t){return t.target===e.targetID}));if(!t)return;e.timestamp>t.atonementExpirationTimestamp&&this._previousEvangelismCast&&(this._evangelismStatistics[this._previousEvangelismCast.timestamp].healing+=e.amount+(e.absorbed||0))}}},{key:"statistic",value:function(){var e=this.evangelismStatistics;return M.a.createElement(Re.b,{icon:M.a.createElement(De.a,{id:h.a.EVANGELISM_TALENT.id}),value:"".concat(Object(ne.d)(e.reduce((function(e,t){return e+t.healing}),0)/this.owner.fightDuration*1e3)," HPS"),label:M.a.createElement(fe.a,{content:"Evangelism accounted for approximately ".concat(Object(ne.e)(this.owner.getPercentageOfTotalHealingDone(e.reduce((function(e,t){return e+t.healing}),0))),"% of your healing.")},"Evangelism contribution")},M.a.createElement("table",{className:"table table-condensed"},M.a.createElement("thead",null,M.a.createElement("tr",null,M.a.createElement("th",null,"Cast"),M.a.createElement("th",null,"Healing"),M.a.createElement("th",null,"Duration"),M.a.createElement("th",null,"Count"))),M.a.createElement("tbody",null,this.evangelismStatistics.map((function(e,t){return M.a.createElement("tr",{key:t},M.a.createElement("th",{scope:"row"},t+1),M.a.createElement("td",null,Object(ne.d)(e.healing)),M.a.createElement("td",null,e.atonementSeconds,"s"),M.a.createElement("td",null,e.count))})))))}},{key:"evangelismStatistics",get:function(){var e=this;return Object.keys(this._evangelismStatistics).map(Number).map((function(t){return e._evangelismStatistics[t]}))}}]),a}(F.c);st.dependencies={atonementModule:Le};var ot=st,lt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).desperatePrayerUsages=[],i.deathsWithDPReady=0,i.addEventListener(d.f.applybuff.by(F.a).spell(h.a.DESPERATE_PRAYER),i.onApplyBuff),i.addEventListener(d.f.heal.to(F.a).spell(h.a.DESPERATE_PRAYER),i.onHeal),i.addEventListener(d.f.damage.to(F.a),i.onDamageTaken),i.addEventListener(d.f.death.to(F.a),i.onDeath),i}return Object(u.a)(a,[{key:"lastDesperatePrayerUsage",get:function(){return this.desperatePrayerUsages[this.desperatePrayerUsages.length-1]}}]),Object(u.a)(a,[{key:"onApplyBuff",value:function(e){this.desperatePrayerUsages.push({damageTaken:0,originalHealth:0,originalMaxHealth:0})}},{key:"onHeal",value:function(e){this.lastDesperatePrayerUsage.originalHealth=e.hitPoints-e.amount,this.lastDesperatePrayerUsage.originalMaxHealth=e.maxHitPoints}},{key:"onDamageTaken",value:function(e){this.selectedCombatant.hasBuff(h.a.DESPERATE_PRAYER.id)&&(this.lastDesperatePrayerUsage.damageTaken+=e.amount+e.absorbed)}},{key:"onDeath",value:function(e){this.spellUsable.isOnCooldown(h.a.DESPERATE_PRAYER.id)||(this.deathsWithDPReady+=1)}},{key:"statistic",value:function(){return M.a.createElement(Re.b,{value:"".concat(this.desperatePrayerUsages.length),label:"Desperate Prayer Usage(s)",icon:M.a.createElement(De.a,{id:h.a.DESPERATE_PRAYER.id})},M.a.createElement("table",{className:"table table-condensed"},M.a.createElement("thead",null,M.a.createElement("tr",null,M.a.createElement("th",null,"Cast"),M.a.createElement("th",null,"Damage Taken"),M.a.createElement("th",null,"Health When Used"))),M.a.createElement("tbody",null,this.desperatePrayerUsages.map((function(e,t){return M.a.createElement("tr",{key:t},M.a.createElement("th",{scope:"row"},t+1),M.a.createElement("td",null,Object(ne.e)(e.damageTaken/e.originalMaxHealth)," %"),M.a.createElement("td",null,Object(ne.e)(e.originalHealth/e.originalMaxHealth)," %"))})))))}},{key:"suggestions",value:function(e){var t=this,a=this.owner.boss;a&&a.fight.disableDeathSuggestion||e(this.deathsWithDPReady).isGreaterThan(0).addSuggestion((function(e,a,n){return e(M.a.createElement(M.a.Fragment,null,"You died with ",M.a.createElement(V.a,{id:h.a.DESPERATE_PRAYER.id})," available.")).icon(h.a.DESPERATE_PRAYER.icon).actual(ie.i18n._({id:"priest.shared.suggestions.DesperatePrayer.efficiency",defaults:"You died {0} time(s) with Desperate Prayer available.",values:{0:t.deathsWithDPReady}})).recommended("0 is recommended")}))}}]),a}(F.c);lt.dependencies={spellUsable:C.b};var ct,ut=lt,dt=a(122),mt=function(e,t){return e-t<0?0:e-t},ht=(ct=function(e){var t=e.currentIntellectRating,a=1+e.currentVersatilityPercentage,n=1+e.currentMasteryPercentage,i=Math.round(.4*t*a);return{boltDamage:i,boltHealing:Math.round(.5*i*n)}},function(e){return function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return ct.apply(void 0,[e].concat(a))}}),Et=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).healing=0,i.damagePenalty=0,i.penanceBoltEstimation=void 0,i.statisticOrder=Re.a.OPTIONAL(),i.statTracker=void 0,i.penance=void 0,i.active=i.selectedCombatant.hasTalent(h.a.CONTRITION_TALENT.id),i.penanceBoltEstimation=ht(i.statTracker),i.addEventListener(d.f.heal.by(F.a).spell([h.a.CONTRITION_HEAL,h.a.PENANCE_HEAL]),i.onHeal),i}return Object(u.a)(a,[{key:"onHeal",value:function(e){this.healing+=e.amount;var t=this.penanceBoltEstimation(),a=t.boltDamage,n=t.boltHealing;if(e.ability.guid===h.a.CONTRITION_HEAL.id){var i=n*e.hitType,r=mt(i,e.amount,e.overheal);this.healing-=i-r}e.ability.guid===h.a.PENANCE_HEAL.id&&(this.damagePenalty+=a)}},{key:"statistic",value:function(){var e=this.healing||0;return M.a.createElement(Re.b,{icon:M.a.createElement(De.a,{id:h.a.CONTRITION_TALENT.id}),value:"".concat(Object(ne.d)(e/this.owner.fightDuration*1e3)," HPS"),label:M.a.createElement(fe.a,{content:"The effective healing contributed by Contrition (".concat(Object(ne.e)(this.owner.getPercentageOfTotalHealingDone(e)),"% of total healing done).\n              You lost roughly ").concat(Object(ne.d)(this.damagePenalty/this.owner.fightDuration*1e3)," DPS, or ").concat(Object(ne.e)(this.owner.getPercentageOfTotalDamageDone(this.damagePenalty)),"% more damage.")},"Contrition healing")})}}]),a}(F.c);Et.dependencies={statTracker:dt.a,penance:q};var gt=Et,ft=a(247),bt=a(245),pt=Object.entries(Object(X.a)(Object(X.a)({},ft.a),bt.a)).map((function(e){return e[1].id})),vt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).applyAbsorbEvents=[],i.graceHealing=0,i.graceHealingToAtonement=0,i.healingUnaffectedByMastery=0,i.healingUnbuffedByMastery=0,i.healingBuffedByMastery=0,i.atonement=0,i.statisticOrder=Re.a.CORE(3),i.combatants=void 0,i.statTracker=void 0,i.addEventListener(d.f.absorbed.by(F.a),i.onAbsorb),i.addEventListener(d.f.applybuff.by(F.a),i.onApplyBuff),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i}return Object(u.a)(a,[{key:"getGraceHealing",value:function(e){var t=this.statTracker.currentMasteryPercentage;return Object(at.a)(e,t)}},{key:"onAbsorb",value:function(e){var t=e.ability.guid;pt.includes(t)?this.combatants.getEntity(e)&&(this.absorbApplicationWasMasteryBuffed(e)?(this.graceHealing+=this.getGraceHealing(e),this.healingBuffedByMastery+=e.amount):this.healingUnbuffedByMastery+=e.amount):this.healingUnaffectedByMastery+=e.amount}},{key:"absorbApplicationWasMasteryBuffed",value:function(e){var t,a,n=(t=this.applyAbsorbEvents,a=function(t){return t.applyBuffEvent.targetID===e.targetID&&t.applyBuffEvent.ability.guid===e.ability.guid},Object(B.a)(t).reverse().find(a));return!!n&&n.masteryBuffed}},{key:"onApplyBuff",value:function(e){var t=e.ability.guid;if(pt.includes(t)&&e.absorb){var a=this.combatants.getEntity(e);a&&this.applyAbsorbEvents.push({applyBuffEvent:e,masteryBuffed:a.hasBuff(h.a.ATONEMENT_BUFF.id),eventsAssociated:[]})}}},{key:"onHeal",value:function(e){var t=e.ability.guid;if(pt.includes(t)){var a=this.combatants.getEntity(e);a&&(a.hasBuff(h.a.ATONEMENT_BUFF.id)?(E(e)&&(this.atonement+=e.amount,this.graceHealingToAtonement+=this.getGraceHealing(e)),this.healingBuffedByMastery+=e.amount,this.graceHealing+=this.getGraceHealing(e)):this.healingUnbuffedByMastery+=e.amount)}else this.healingUnaffectedByMastery+=e.amount}},{key:"statistic",value:function(){var e=this.owner.getPercentageOfTotalHealingDone(this.graceHealing),t=this.owner.getPercentageOfTotalHealingDone(this.healingUnaffectedByMastery),a=this.owner.getPercentageOfTotalHealingDone(this.healingUnbuffedByMastery),n=this.owner.getPercentageOfTotalHealingDone(this.healingBuffedByMastery-this.graceHealing),i=this.owner.getPercentageOfTotalHealingDone(this.atonement-this.graceHealingToAtonement),r=this.owner.getPercentageOfTotalHealingDone(this.healingBuffedByMastery-this.graceHealing-(this.atonement-this.graceHealingToAtonement));return M.a.createElement(Re.b,{icon:M.a.createElement(De.a,{id:h.a.GRACE.id}),value:"".concat(Object(ne.d)(this.graceHealing/this.owner.fightDuration*1e3)," HPS"),label:"Mastery Healing",tooltip:M.a.createElement(M.a.Fragment,null,"Your mastery provided ",M.a.createElement("strong",null,Object(ne.e)(e),"%")," healing",M.a.createElement("ul",null,M.a.createElement("li",null,M.a.createElement("strong",null,Object(ne.e)(n),"%")," of your healing was buffed by mastery",M.a.createElement("ul",null,M.a.createElement("li",null,"Atonement: ",M.a.createElement("strong",null,Object(ne.e)(i),"%")),M.a.createElement("li",null,"Non-Atonement: ",M.a.createElement("strong",null,Object(ne.e)(r),"%")))),M.a.createElement("li",null,M.a.createElement("strong",null,Object(ne.e)(a),"%")," of your healing was spells unbuffed by mastery"),M.a.createElement("li",null,M.a.createElement("strong",null,Object(ne.e)(t),"%")," of your healing was spells unaffected by mastery")),M.a.createElement("br",null),M.a.createElement("strong",null,"Unbuffed")," healing is healing done to targets without atonement with spells that can benefit from mastery. ",M.a.createElement("br",null),M.a.createElement("strong",null,"Unaffected")," healing is healing done with spells that can't benefit from mastery (Trinkets, procs, etc...)")})}}]),a}(F.c);vt.dependencies={combatants:de.a,statTracker:dt.a};var yt=vt,Ot=a(27),Tt=a(58),At=function(e){var t=e.icon,a=e.values,n=e.footer,i=e.alignIcon,r=Object(Ot.a)(e,["icon","values","footer","alignIcon"]);return M.a.createElement(U.a,r,M.a.createElement("div",{className:"pad"},M.a.createElement("small",null,n),M.a.createElement("div",{className:"flex",style:{marginTop:15}},M.a.createElement("div",{className:"flex-sub",style:{display:"flex",alignItems:i,minWidth:30}},t),M.a.createElement("div",{className:"flex-main flex horizontal"},a.map((function(e,t){return M.a.createElement("div",{key:"".concat(t).concat(e),className:"panel-cell value"},e)}))))))};At.defaultProps={alignIcon:"center",category:Tt.a.GENERAL};var _t=At,St=a(752),Nt=a(164),Dt=[.12,.12,.1,.08,.07,.06,.055,.05,.045,.04],Rt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).bonusDamage=0,i.bonusHealing=0,i.statisticOrder=Y.a.OPTIONAL(),i.atonement=void 0,i.combatants=void 0,i.active=i.selectedCombatant.hasTalent(h.a.SINS_OF_THE_MANY_TALENT.id),i.addEventListener(d.f.damage.by(F.a),i.onDamage),i.addEventListener(d.f.damage.by(F.b),i.onDamage),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i}return Object(u.a)(a,[{key:"onDamage",value:function(e){this.bonusDamage+=Object(St.a)(e,this.currentBonus)}},{key:"onHeal",value:function(e){E(e)&&(this.bonusHealing+=Object(at.a)(e,this.currentBonus))}},{key:"statistic",value:function(){return M.a.createElement(_t,{icon:M.a.createElement(De.a,{id:h.a.SINS_OF_THE_MANY_TALENT.id}),values:["".concat(Object(ne.d)(this.bonusHealing/this.owner.fightDuration*1e3)," HPS"),"".concat(Object(ne.d)(this.bonusDamage/this.owner.fightDuration*1e3)," DPS")],footer:M.a.createElement(M.a.Fragment,null,M.a.createElement(V.a,{id:h.a.SINS_OF_THE_MANY_TALENT.id})," throughput"),tooltip:M.a.createElement(M.a.Fragment,null,"The effective healing contributed by Sins of the Many was ",Object(ne.e)(this.owner.getPercentageOfTotalHealingDone(this.bonusHealing)),"% of total healing done.",M.a.createElement("br",null),"The direct damage contributed by Sins of the Many was ",Object(ne.e)(this.owner.getPercentageOfTotalDamageDone(this.bonusDamage)),"% of total damage done."),alignIcon:"center"})}},{key:"currentBonus",get:function(){var e=this.atonement.numAtonementsActive;return Dt[e]?Dt[e]:.03}}]),a}(F.c);Rt.dependencies={combatants:de.a,atonement:Le};var It=Rt,Ct=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._lastSchismCast=null,i._badSchisms={},i.directDamage=0,i.damageFromBuff=0,i.healing=0,i.target=null,i.statisticOrder=Y.a.OPTIONAL(),i.enemies=void 0,i.statTracker=void 0,i.atonementDamageSource=void 0,i.penance=void 0,i.atonement=void 0,i.sins=void 0,i.active=i.selectedCombatant.hasTalent(h.a.SCHISM_TALENT.id),i.addEventListener(d.f.damage.by(F.a),i.onDamage),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i}return Object(u.a)(a,[{key:"onDamage",value:function(e){if(e.ability.guid!==h.a.SCHISM_TALENT.id)return this.handleSynergy(e),void this.processSchismBuffDamage(e);this.target=this.enemies.getEntity(e),this._lastSchismCast=e,this._badSchisms[e.timestamp]=!0;var t=this.smiteEstimation().smiteDamage;this.directDamage+=e.amount+(e.absorbed||0)-t}},{key:"onHeal",value:function(e){if(E(e)){var t=this.atonementDamageSource.event;t?t.ability.guid!==h.a.SCHISM_TALENT.id?this.buffActive&&this.target&&t.targetID===this.target.id&&(this.atonementDamageSource.event&&this.owner.byPlayerPet(this.atonementDamageSource.event)||(this.healing+=Object(at.a)(e,a.bonus))):this.processSchismAtonement(e):this.error("Atonement damage event unknown for Atonement heal:",e)}}},{key:"handleSynergy",value:function(e){this._lastSchismCast&&a.synergisticAbilities.includes(e.ability.guid)&&(this._lastSchismCast.timestamp+a.duration<=e.timestamp||(this._badSchisms[this._lastSchismCast.timestamp]=!1))}},{key:"processSchismAtonement",value:function(e){var t=this.smiteEstimation().smiteHealing*e.hitType,a=t-mt(t,e.amount,e.overheal);this.healing+=e.amount-a}},{key:"processSchismBuffDamage",value:function(e){this.buffActive&&this.target&&e.targetID===this.target.id&&(this.damageFromBuff+=Object(St.a)(e,a.bonus))}},{key:"statistic",value:function(){return M.a.createElement(_t,{icon:M.a.createElement(De.a,{id:h.a.SCHISM_TALENT.id}),values:["".concat(Object(ne.d)(this.healing/this.owner.fightDuration*1e3)," HPS"),"".concat(Object(ne.d)((this.directDamage+this.damageFromBuff)/this.owner.fightDuration*1e3)," DPS")],footer:M.a.createElement(M.a.Fragment,null,M.a.createElement(V.a,{id:h.a.SCHISM_TALENT.id})," throughput"),tooltip:M.a.createElement(M.a.Fragment,null,"The effective healing contributed by Schism was ",Object(ne.e)(this.owner.getPercentageOfTotalHealingDone(this.healing)),"% of total healing done.",M.a.createElement("br",null),"The direct damage contributed by the Schism talent was ",Object(ne.e)(this.owner.getPercentageOfTotalDamageDone(this.directDamage)),"% of total damage done.",M.a.createElement("br",null),"The effective damage contributed by the Schism bonus was ",Object(ne.e)(this.owner.getPercentageOfTotalDamageDone(this.damageFromBuff)),"% of total damage done. ",M.a.createElement("br",null)),alignIcon:"center"})}},{key:"suggestions",value:function(e){e(this.badSchismThresholds).addSuggestion((function(e,t,a){return e(M.a.createElement(M.a.Fragment,null,"Don't cast ",M.a.createElement(V.a,{id:h.a.SCHISM_TALENT.id})," without also casting ",M.a.createElement(V.a,{id:h.a.PENANCE.id}),","," ",M.a.createElement(V.a,{id:h.a.HALO_TALENT.id}),", or"," ",M.a.createElement(V.a,{id:h.a.POWER_WORD_SOLACE_TALENT.id})," ")).icon(h.a.SCHISM_TALENT.icon).actual(ie.i18n._({id:"priest.discipline.suggestions.schism.efficiency",defaults:"You cast Schism {actual} times without pairing it with strong damaging abilities, such as Penance, Halo, or Power Word: Solace.",values:{actual:t}})).recommended("".concat(a," is recommended"))}))}},{key:"smiteEstimation",get:function(){return e=this.statTracker,t=this.sins,function(){var a=e.currentIntellectRating,n=1+e.currentVersatilityPercentage,i=1+e.currentMasteryPercentage,r=.47*a;return{smiteDamage:r=Math.round(r*n*(1+t.currentBonus)*1.5),smiteHealing:Math.round(.5*r*i)}};var e,t}},{key:"buffActive",get:function(){return this.target&&this.target.hasBuff(h.a.SCHISM_TALENT.id)}},{key:"badSchismCount",get:function(){return Object.entries(this._badSchisms).reduce((function(e,t){var a=Object(Me.a)(t,2);a[0];return e+(a[1]?1:0)}),0)}},{key:"badSchismThresholds",get:function(){return{actual:this.badSchismCount,isGreaterThan:{minor:0,average:1,major:3},style:Nt.a.NUMBER}}}]),a}(F.c);Ct.dependencies={enemies:Je.a,statTracker:dt.a,atonementDamageSource:we,penance:q,atonement:Le,sins:It},Ct.bonus=.25,Ct.duration=9e3,Ct.synergisticAbilities=[h.a.HALO_TALENT.id,h.a.POWER_WORD_SOLACE_TALENT.id,h.a.PENANCE.id];var Lt=Ct,jt=a(765),Pt=a(748),Ht=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).atonementHealing=0,i.directHealing=0,i.preventedDamage=0,i.atonementDamageSource=void 0,i.active=i.selectedCombatant.hasCovenant(N.a.VENTHYR.id),i.addEventListener(d.f.heal.by(F.a),i.onHeal),i.addEventListener(d.f.absorbed.by(F.a).spell(h.a.MINDGAMES_ABSORB),i.onMindgamesAbsorbed),i}return Object(u.a)(a,[{key:"onHeal",value:function(e){if(E(e)){var t=this.atonementDamageSource.event;if(!t||t.ability.guid!==h.a.MINDGAMES.id)return;this.atonementHealing+=e.amount+(e.absorbed||0)}else{e.ability.guid!==h.a.MINDGAMES_HEAL.id||(this.directHealing+=e.amount+(e.absorbed||0))}}},{key:"onMindgamesAbsorbed",value:function(e){this.preventedDamage+=e.amount}},{key:"statistic",value:function(){return M.a.createElement(U.a,{size:"flexible",tooltip:M.a.createElement(M.a.Fragment,null,"Healing Breakdown:",M.a.createElement("ul",null,M.a.createElement("li",null,Object(ne.d)(this.atonementHealing)," Atonement Healing"),M.a.createElement("li",null,Object(ne.d)(this.directHealing)," Direct Healing"),M.a.createElement("li",null,Object(ne.d)(this.preventedDamage)," Prevented Damage"))),category:Tt.a.COVENANTS},M.a.createElement(Pt.a,{spell:h.a.MINDGAMES},M.a.createElement(M.a.Fragment,null,M.a.createElement(jt.a,{amount:this.atonementHealing+this.directHealing+this.preventedDamage}))))}}]),a}(F.c);Ht.dependencies={atonementDamageSource:we};var wt=Ht,kt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).atonementDamageSource=void 0,i.atonementHealing=0,i.directHealing=0,i.active=i.selectedCombatant.hasCovenant(N.a.KYRIAN.id),i.addEventListener(d.f.heal.by(F.a).spell([h.a.ASCENDED_BLAST,h.a.ASCENDED_NOVA,h.a.ASCENDED_ERUPTION]),i.onHeal),i}return Object(u.a)(a,[{key:"onHeal",value:function(e){if(E(e)){if(!this.atonementDamageSource.event)return;this.atonementHealing+=e.amount+(e.absorbed||0)}else this.directHealing+=e.amount+(e.absorbed||0)}},{key:"statistic",value:function(){return M.a.createElement(U.a,{size:"flexible",tooltip:M.a.createElement(M.a.Fragment,null,"Healing Breakdown:",M.a.createElement("ul",null,M.a.createElement("li",null,Object(ne.d)(this.atonementHealing)," Atonement Healing"),M.a.createElement("li",null,Object(ne.d)(this.directHealing)," Direct Healing"))),category:Tt.a.COVENANTS},M.a.createElement(Pt.a,{spell:h.a.BOON_OF_THE_ASCENDED},M.a.createElement(M.a.Fragment,null,M.a.createElement(jt.a,{amount:this.atonementHealing+this.directHealing}))))}}]),a}(F.c);kt.dependencies={atonementDamageSource:we};var Bt=kt,Wt=a(119),Mt=a(778),Ft=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).conduitRank=0,i.conduitIncrease=0,i.bonusRadianceHealing=0,i.conduitRank=i.selectedCombatant.conduitRankBySpellID(h.a.SHINING_RADIANCE.id),i.conduitRank?(i.conduitIncrease=y[i.conduitRank],i.addEventListener(d.f.heal.by(F.a).spell(h.a.POWER_WORD_RADIANCE),i.onRadianceHeal),i):(i.active=!1,Object(Wt.a)(i))}return Object(u.a)(a,[{key:"onRadianceHeal",value:function(e){this.bonusRadianceHealing+=Object(at.a)(e,this.conduitIncrease)}},{key:"statistic",value:function(){return M.a.createElement(U.a,{position:Y.a.OPTIONAL(13),size:"flexible",category:Tt.a.COVENANTS},M.a.createElement(Mt.a,{spell:h.a.SHINING_RADIANCE,rank:this.conduitRank},M.a.createElement(M.a.Fragment,null,M.a.createElement(jt.a,{amount:this.bonusRadianceHealing}))))}}]),a}(F.c),Ut=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(s.a);Ut.abilitiesAffectedByHealingIncreases=p,Ut.specModules={atonementSuccessiveDamage:O,shadowfiendNormalizer:T.a,powerWordRadianceNormalizer:_,spellUsable:L,spellManaCost:P,abilityTracker:w,lowHealthHealing:o.a,abilities:D,channeling:Z,globalCooldown:J,atonementAnalyzer:te,manaLevelChart:l.a,manaUsageChart:c.a,checklist:_e,penance:q,alwaysBeCasting:le,cooldownThroughputTracker:Pe,powerWordShieldWasted:He,atonementApplicationSource:Ie,atonementDamageSource:we,atonementHealingDone:Ve,powerWordBarrier:qe,lenience:Ze,purgeTheWicked:Qe,atonementApplicatorBreakdown:tt,twistOfFate:nt,castigation:rt,atonement:Le,evangelism:ot,desperatePrayer:ut,contrition:gt,grace:yt,sinsOfTheMany:It,schism:Lt,mindgames:wt,boonOfTheAscended:Bt,shiningRadiance:Ft};t.default=Ut},748:function(e,t,a){"use strict";var n=a(0),i=a.n(n),r=a(53),s=a(4);t.a=function(e){var t=e.spell,a=e.children,n=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(n||"")},i.a.createElement("label",null,i.a.createElement(r.a,{id:t.id})," ",i.a.createElement(s.a,{id:t.id,icon:!1})),i.a.createElement("div",{className:"value"},a))}},752:function(e,t,a){"use strict";function n(e,t){var a=(e.amount||0)+(e.absorbed||0);return a-a/(1+t)}a.d(t,"a",(function(){return n}))},769:function(e,t,a){"use strict";function n(e,t){var a=e.amount,n=e.absorbed||0,i=e.overheal||0,r=a+n+i,s=r-r/(1+t)-i;return Math.max(0,s)}a.d(t,"a",(function(){return n}))},778:function(e,t,a){"use strict";var n=a(0),i=a.n(n),r=a(53),s=a(4);t.a=function(e){var t=e.spell,a=e.rank,n=e.children,o=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(o||"")},i.a.createElement("label",null,i.a.createElement(r.a,{id:t.id})," ",i.a.createElement(s.a,{id:t.id,icon:!1})," - Rank ",a),i.a.createElement("div",{className:"value"},n))}},786:function(e,t,a){"use strict";var n=a(27),i=a(0),r=a.n(i),s=a(88),o=a(796),l=a(28);t.a=function(e){var t=e.id,a=e.noLink,i=Object(n.a)(e,["id","noLink"]);var c=s.a[t]||{name:"Spell not recognized",icon:"inv_misc_questionmark"},u=r.a.createElement(l.a,Object.assign({icon:c.icon,alt:c.name},i));return a?u:r.a.createElement(o.a,{id:t,icon:!1},u)}},796:function(e,t,a){"use strict";var n=a(31),i=a(27),r=a(0),s=a.n(r),o=a(81),l=a(88),c=a(786);t.a=function(e){var t=e.icon,a=void 0===t||t,u=Object(i.a)(e,["icon"]),d=Object(r.useState)(null),m=Object(n.a)(d,2),h=m[0],E=m[1];Object(r.useEffect)((function(){o.a.refresh(h)}));var g=u.id,f=u.children,b=u.category,p=void 0===b?void 0:b,v=Object(i.a)(u,["id","children","category"]);return s.a.createElement("a",Object.assign({href:o.a.resource(g),target:"_blank",rel:"noopener noreferrer",className:p,ref:function(e){E(e)}},v),a&&s.a.createElement(c.a,{id:g,noLink:!0})," ",f||l.a[g].name)}},798:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=c(a(0)),o=c(a(37)),l=c(a(395));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"},m=["animateOpacity","animationStateClasses","applyInlineTransitions","children","contentClassName","delay","duration","easing","height","onAnimationEnd","onAnimationStart"];function h(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];if(!a.length)return e;for(var i={},r=Object.keys(e),s=0;s<r.length;s++){var o=r[s];-1===a.indexOf(o)&&(i[o]=e[o])}return i}function E(e){e.forEach((function(e){return cancelAnimationFrame(e)}))}function g(e){return!isNaN(parseFloat(e))&&isFinite(e)}function f(e){return"string"===typeof e&&e.search("%")===e.length-1&&g(e.substr(0,e.length-1))}function b(e,t){e&&"function"===typeof e&&e(t)}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.animationFrameIDs=[];var n="auto",r="visible";g(e.height)?(n=e.height<0||"0"===e.height?0:e.height,r="hidden"):f(e.height)&&(n="0%"===e.height?0:e.height,r="hidden"),a.animationStateClasses=i({},d,e.animationStateClasses);var s=a.getStaticStateClasses(n);return a.state={animationStateClasses:s,height:n,overflow:r,shouldUseTransitions:!1},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){var e=this.state.height;this.contentElement&&this.contentElement.style&&this.hideContent(e)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props,i=n.delay,r=n.duration,s=n.height,o=n.onAnimationEnd,c=n.onAnimationStart;if(this.contentElement&&s!==e.height){var d;this.showContent(t.height),this.contentElement.style.overflow="hidden";var m=this.contentElement.offsetHeight;this.contentElement.style.overflow="";var h=r+i,p=null,v={height:null,overflow:"hidden"},y="auto"===t.height;g(s)?(p=s<0||"0"===s?0:s,v.height=p):f(s)?(p="0%"===s?0:s,v.height=p):(p=m,v.height="auto",v.overflow=null),y&&(v.height=p,p=m);var O=(0,l.default)((u(d={},this.animationStateClasses.animating,!0),u(d,this.animationStateClasses.animatingUp,"auto"===e.height||s<e.height),u(d,this.animationStateClasses.animatingDown,"auto"===s||s>e.height),u(d,this.animationStateClasses.animatingToHeightZero,0===v.height),u(d,this.animationStateClasses.animatingToHeightAuto,"auto"===v.height),u(d,this.animationStateClasses.animatingToHeightSpecific,v.height>0),d)),T=this.getStaticStateClasses(v.height);this.setState({animationStateClasses:O,height:p,overflow:"hidden",shouldUseTransitions:!y}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),y?(v.shouldUseTransitions=!0,E(this.animationFrameIDs),this.animationFrameIDs=function(e){var t=[];return t[0]=requestAnimationFrame((function(){t[1]=requestAnimationFrame((function(){e()}))})),t}((function(){a.setState(v),b(c,{newHeight:v.height})})),this.animationClassesTimeoutID=setTimeout((function(){a.setState({animationStateClasses:T,shouldUseTransitions:!1}),a.hideContent(v.height),b(o,{newHeight:v.height})}),h)):(b(c,{newHeight:p}),this.timeoutID=setTimeout((function(){v.animationStateClasses=T,v.shouldUseTransitions=!1,a.setState(v),"auto"!==s&&a.hideContent(p),b(o,{newHeight:p})}),h))}}},{key:"componentWillUnmount",value:function(){E(this.animationFrameIDs),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),this.timeoutID=null,this.animationClassesTimeoutID=null,this.animationStateClasses=null}},{key:"showContent",value:function(e){0===e&&(this.contentElement.style.display="")}},{key:"hideContent",value:function(e){0===e&&(this.contentElement.style.display="none")}},{key:"getStaticStateClasses",value:function(e){var t;return(0,l.default)((u(t={},this.animationStateClasses.static,!0),u(t,this.animationStateClasses.staticHeightZero,0===e),u(t,this.animationStateClasses.staticHeightSpecific,e>0),u(t,this.animationStateClasses.staticHeightAuto,"auto"===e),t))}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.animateOpacity,r=a.applyInlineTransitions,o=a.children,c=a.className,d=a.contentClassName,E=a.delay,g=a.duration,f=a.easing,b=a.id,p=a.style,v=this.state,y=v.height,O=v.overflow,T=v.animationStateClasses,A=v.shouldUseTransitions,_=i({},p,{height:y,overflow:O||p.overflow});A&&r&&(_.transition="height "+g+"ms "+f+" "+E+"ms",p.transition&&(_.transition=p.transition+", "+_.transition),_.WebkitTransition=_.transition);var S={};n&&(S.transition="opacity "+g+"ms "+f+" "+E+"ms",S.WebkitTransition=S.transition,0===y&&(S.opacity=0));var N=(0,l.default)((u(e={},T,!0),u(e,c,c),e)),D="undefined"!==typeof this.props["aria-hidden"]?this.props["aria-hidden"]:0===y;return s.default.createElement("div",i({},h.apply(void 0,[this.props].concat(m)),{"aria-hidden":D,className:N,id:b,style:_}),s.default.createElement("div",{className:d,style:S,ref:function(e){return t.contentElement=e}},o))}}]),t}(s.default.Component);p.propTypes={"aria-hidden":o.default.bool,animateOpacity:o.default.bool,animationStateClasses:o.default.object,applyInlineTransitions:o.default.bool,children:o.default.any.isRequired,className:o.default.string,contentClassName:o.default.string,delay:o.default.number,duration:o.default.number,easing:o.default.string,height:function(e,t,a){var i=e[t];return"number"===typeof i&&i>=0||f(i)||"auto"===i?null:new TypeError('value "'+i+'" of type "'+("undefined"===typeof i?"undefined":n(i))+'" is invalid type for '+t+" in "+a+'. It needs to be a positive number, string "auto" or percentage string (e.g. "15%").')},id:o.default.string,onAnimationEnd:o.default.func,onAnimationStart:o.default.func,style:o.default.object},p.defaultProps={animateOpacity:!1,animationStateClasses:d,applyInlineTransitions:!0,duration:250,delay:0,easing:"ease",style:{}},t.default=p},799:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(0),l=a.n(o),c=a(779),u=a(33),d=a(4),m=a(22),h=(a(817),function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"renderLegend",value:function(e){var t=e.reduce((function(e,t){return e+t.value}),0);return l.a.createElement("div",{className:"legend"},e.map((function(e,a){var n=e.color,i=e.label,r=e.tooltip,s=e.value,o=e.spellId,c=e.valueTooltip;return i=r?l.a.createElement(m.a,{content:r},i):i,i=o?l.a.createElement(d.a,{id:o},i):i,l.a.createElement("div",{key:a,className:"flex"},l.a.createElement("div",{className:"flex-sub"},l.a.createElement("div",{className:"circle",style:{background:n}})),l.a.createElement("div",{className:"flex-main"},i),l.a.createElement("div",{className:"flex-sub"},l.a.createElement(m.a,{content:c||s},Object(u.e)(s/t,0),"%")))})))}},{key:"renderChart",value:function(e,t,a){var n={items:e},i={data:{name:"items"},mark:{type:"arc",innerRadius:t*a},encoding:{theta:{field:"value",type:"quantitative"},color:{field:"label",type:"nominal",legend:null,scale:{domain:e.map((function(e){return e.label})),range:e.map((function(e){return e.color}))}}},view:{stroke:null}};return l.a.createElement("div",{className:"chart"},l.a.createElement(c.a,{width:t,height:t,spec:i,data:n}))}},{key:"render",value:function(){var e=this.props,t=e.items,a=e.chartSize,n=e.innerRadiusFactor;return l.a.createElement("div",{className:"donut-chart"},this.renderLegend(t),this.renderChart(t,a,n))}}]),a}(l.a.PureComponent));h.defaultProps={chartSize:90,innerRadiusFactor:.28},t.a=h},801:function(e,t,a){"use strict";var n=a(27),i=a(0),r=a.n(i),s=a(22),o=(a(858),a(58)),l=a(747);a.d(t,"a",(function(){return l.a}));var c=function(e){var t=e.title,a=e.tooltip,i=e.children,o=e.bodyStyle,l=Object(n.a)(e,["title","tooltip","children","bodyStyle"]);return delete l.category,delete l.position,r.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-12"},r.a.createElement("div",Object.assign({className:"panel statistic statistic-box statistic-box-list"},l),t&&r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h2",null,a?r.a.createElement(s.a,{content:a},t):t)),r.a.createElement("div",{className:"panel-body items",style:o},i)))};c.defaultProps={category:o.a.GENERAL},t.b=c},809:function(e,t,a){"use strict";var n=a(0),i=a.n(n),r=a(53);a(868);t.a=function(e){var t=e.spell,a=e.value,n=e.label,s=e.extra,o=e.className;return i.a.createElement("div",{className:"flex boring-value ".concat(o||"")},i.a.createElement("div",{className:"flex-sub icon"},i.a.createElement(r.a,{id:t.id})),i.a.createElement("div",{className:"flex-main value"},i.a.createElement("div",null,a),i.a.createElement("small",null,n),s))}},817:function(e,t,a){},841:function(e,t,a){"use strict";var n=a(27),i=a(8),r=a(9),s=a(23),o=a(10),l=a(11),c=a(0),u=a.n(c),d=a(37),m=a.n(d),h=a(750);a.d(t,"a",(function(){return h.a}));var E=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={loaded:!1,loading:!1},e.handleClick=e.handleClick.bind(Object(s.a)(e)),e}return Object(r.a)(a,[{key:"handleClick",value:function(){var e=this;this.state.loaded||(this.setState({loading:!0}),this.props.loader().then((function(t){return e.setState({loading:!1,loaded:!0}),e.context.updateResults(),t})))}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.children,i=Object(n.a)(e,["value","children"]);return delete i.loader,delete i.children,u.a.createElement(h.b,Object.assign({onClick:this.handleClick,value:this.state.loaded?t:this.state.loading?"Loading...":"Click to load",style:{cursor:this.state.loaded?void 0:"pointer"}},i),this.state.loaded?a:null)}}]),a}(u.a.PureComponent);E.contextTypes={updateResults:m.a.func.isRequired},t.b=E},868:function(e,t,a){},981:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(768),l=a(3),c=a(15),u=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"normalize",value:function(e){return e.forEach((function(e,t){if(e.type===c.b.Cast){var a=e.ability.guid;a!==l.a.SHADOWFIEND_WITH_GLYPH_OF_THE_SHA.id&&a!==l.a.LIGHTSPAWN.id&&a!==l.a.VOIDLING.id||(e.ability.oldGuid=e.ability.guid,e.ability.guid=l.a.SHADOWFIEND.id,e.__modified=!0)}})),e}}]),a}(o.a);t.a=u}}]);
//# sourceMappingURL=DisciplinePriest.0acd4038.chunk.js.map