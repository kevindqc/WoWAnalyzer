(this.webpackJsonpwowanalyzer=this.webpackJsonpwowanalyzer||[]).push([[17],{724:function(e,t,a){"use strict";a.r(t);var n,i,s=a(8),r=a(10),l=a(11),o=a(776),c=a(815),u=a(9),d=a(3),h=a(43),m=a(15),g=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).addEventListener(m.f.absorbed.to(h.a).spell(d.a.STAGGER),n.onStagger),n}return Object(u.a)(a,[{key:"onStagger",value:function(e){this._subtractHealingByAbsorb(e,e.amount,0,0)}}]),a}(a(793).a),f=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._staggeredDamage={},n.addEventListener(m.f.absorbed.to(h.a).spell(d.a.STAGGER),n.onToPlayerAbsorbed),n}return Object(u.a)(a,[{key:"onToPlayerAbsorbed",value:function(e){this._subtractDamage(e,0,e.amount,0,0,e.extraAbility),void 0===this._staggeredDamage[e.extraAbility.guid]&&(this._staggeredDamage[e.extraAbility.guid]=0),this._staggeredDamage[e.extraAbility.guid]+=e.amount}},{key:"staggeredByAbility",value:function(e){return void 0!==this._staggeredDamage[e]?this._staggeredDamage[e]:0}}]),a}(a(867).a),E=a(0),b=a.n(E),p=a(33),_=a(747),v=a(746),y=a(761),O=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).HealingReceivedExternal=0,e.HealingReceivedSelf=0,e.active=!1,e.addEventListener(m.f.heal.to(h.a),e.onHeal),e}return Object(u.a)(a,[{key:"onHeal",value:function(e){e.sourceID===this.owner.playerId?this.HealingReceivedSelf+=e.amount:this.HealingReceivedExternal+=e.amount}},{key:"statistic",value:function(){return b.a.createElement(v.a,{position:_.a.CORE(2),size:"flexible",tooltip:b.a.createElement(b.a.Fragment,null,"Healing received:",b.a.createElement("ul",null,b.a.createElement("li",null,"From self: ",Object(p.f)(this.HealingReceivedSelf)),b.a.createElement("li",null,"From external sources: ",Object(p.f)(this.HealingReceivedExternal))),"The total healing received was ",Object(p.f)(this.HealingReceivedSelf+this.HealingReceivedExternal))},b.a.createElement(y.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement("img",{src:"/img/healing.png",style:{border:0},alt:"Healing"})," External healing received")},b.a.createElement(b.a.Fragment,null,Object(p.d)(this.HealingReceivedExternal/this.owner.fightDuration*1e3)," HPS")))}}]),a}(h.c),T=a(53),C=a(18),A=a(7),R=a(123),L=a(800),S=a(12),I=a(126),w=(n={},Object(S.a)(n,d.a.LIGHT_STAGGER_DEBUFF.id,.08),Object(S.a)(n,d.a.MODERATE_STAGGER_DEBUFF.id,.12),Object(S.a)(n,d.a.HEAVY_STAGGER_DEBUFF.id,.15),n);function k(e){return e.hasTalent(d.a.HIGH_TOLERANCE_TALENT.id)}function H(e){return{haste:function(t){return k(t)?e:0}}}i={},Object(S.a)(i,d.a.LIGHT_STAGGER_DEBUFF.id,H(.08)),Object(S.a)(i,d.a.MODERATE_STAGGER_DEBUFF.id,H(.12)),Object(S.a)(i,d.a.HEAVY_STAGGER_DEBUFF.id,H(.15));var F=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e,n;Object(s.a)(this,a);for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return(n=t.call.apply(t,[this].concat(r))).staggerDurations=(e={},Object(S.a)(e,d.a.LIGHT_STAGGER_DEBUFF.id,0),Object(S.a)(e,d.a.MODERATE_STAGGER_DEBUFF.id,0),Object(S.a)(e,d.a.HEAVY_STAGGER_DEBUFF.id,0),e),n._staggerLevel=null,n._lastDebuffApplied=0,n.active=k(n.selectedCombatant),n.addEventListener(m.f.applydebuff.to(h.a),n.onApplyDebuff),n.addEventListener(m.f.removedebuff.to(h.a),n.onRemoveDebuff),n.addEventListener(m.f.fightend,n.onFightend),n}return Object(u.a)(a,[{key:"meanHaste",get:function(){var e=this;return Object.keys(w).map((function(t){return e.staggerDurations[t]*w[t]})).reduce((function(e,t){return e+t}),0)/this.owner.fightDuration}},{key:"lightDuration",get:function(){return this.staggerDurations[d.a.LIGHT_STAGGER_DEBUFF.id]}},{key:"moderateDuration",get:function(){return this.staggerDurations[d.a.MODERATE_STAGGER_DEBUFF.id]}},{key:"heavyDuration",get:function(){return this.staggerDurations[d.a.HEAVY_STAGGER_DEBUFF.id]}},{key:"noneDuration",get:function(){return this.owner.fightDuration-this.lightDuration-this.moderateDuration-this.heavyDuration}}]),Object(u.a)(a,[{key:"onApplyDebuff",value:function(e){w[e.ability.guid]&&(this._lastDebuffApplied=e.timestamp,this._staggerLevel=e.ability.guid)}},{key:"onRemoveDebuff",value:function(e){w[e.ability.guid]&&(this.staggerDurations[e.ability.guid]+=e.timestamp-this._lastDebuffApplied,this._staggerLevel=null)}},{key:"onFightend",value:function(){null!==this._staggerLevel&&(this.staggerDurations[this._staggerLevel]+=this.owner.fight.end_time-this._lastDebuffApplied)}},{key:"statistic",value:function(){return b.a.createElement(v.a,{position:_.a.OPTIONAL(),size:"flexible",tooltip:b.a.createElement(b.a.Fragment,null,"You spent:",b.a.createElement("ul",null,b.a.createElement("li",null,b.a.createElement("strong",null,Object(p.f)(this.noneDuration/1e3),"s")," (",Object(p.e)(this.noneDuration/this.owner.fightDuration),"%) without Stagger."),b.a.createElement("li",null,b.a.createElement("strong",null,Object(p.f)(this.lightDuration/1e3),"s")," (",Object(p.e)(this.lightDuration/this.owner.fightDuration),"%) in Light Stagger."),b.a.createElement("li",null,b.a.createElement("strong",null,Object(p.f)(this.moderateDuration/1e3),"s")," (",Object(p.e)(this.moderateDuration/this.owner.fightDuration),"%) in Moderate Stagger."),b.a.createElement("li",null,b.a.createElement("strong",null,Object(p.f)(this.heavyDuration/1e3),"s")," (",Object(p.e)(this.heavyDuration/this.owner.fightDuration),"%) in Heavy Stagger.")))},b.a.createElement(y.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{id:d.a.HIGH_TOLERANCE_TALENT.id})," Avg. Haste from High Tolerance")},b.a.createElement(b.a.Fragment,null,b.a.createElement(I.a,null)," ",Object(p.e)(this.meanHaste)," %")))}}]),a}(h.c),D=.6,j=.3,B=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._lastKnownMaxHp=0,n._initialized=!1,n._previousBuff=0,n.eventEmitter=void 0,n.ht=void 0,n.haste=void 0,n._staggerPool=0,n._initialized=0===(n.owner.fight.offset_time||0),n.addEventListener(m.f.cast.spell(d.a.PURIFYING_BREW),n._pbCast),n.addEventListener(m.f.absorbed,n._absorb),n.addEventListener(m.f.damage.to(h.a),n._damage),n.addEventListener(m.f.death.to(h.a),n._death),n}return Object(u.a)(a,[{key:"addStagger",value:function(e,t){this._staggerPool+=t;var a=this._fab(m.b.AddStagger,e,t);this.eventEmitter.fabricateEvent(a,e),this.ht&&this.ht.active&&this._updateHaste(e,a)}},{key:"removeStagger",value:function(e,t){this._staggerPool-=t;var a=this._staggerPool<0?this._staggerPool:0;this._staggerPool=Math.max(this._staggerPool,0);var n=this._fab(m.b.RemoveStagger,e,t,a);return this.eventEmitter.fabricateEvent(n,e),this.ht&&this.ht.active&&this._updateHaste(e,n),t+a}},{key:"_fab",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{timestamp:t.timestamp,type:e,amount:a+n,overheal:-n,newPooledDamage:this._staggerPool}}},{key:"_updateHaste",value:function(e,t){var a,n=t.newPooledDamage/(e.maxHitPoints?e.maxHitPoints:this._lastKnownMaxHp);(a=0===n?null:n<j?d.a.LIGHT_STAGGER_DEBUFF.id:n<D?d.a.MODERATE_STAGGER_DEBUFF.id:d.a.HEAVY_STAGGER_DEBUFF.id)!==this._previousBuff&&(this._previousBuff&&this.haste._applyHasteLoss(t,w[this._previousBuff]),a&&this.haste._applyHasteGain(t,w[a]),this._previousBuff=a)}},{key:"_absorb",value:function(e){e.ability.guid===d.a.STAGGER.id&&(e.extraAbility&&e.extraAbility.guid===d.a.SPIRIT_LINK_TOTEM_REDISTRIBUTE.id||this.addStagger(e,e.amount))}},{key:"_damage",value:function(e){if(e.maxHitPoints&&(this._lastKnownMaxHp=e.maxHitPoints),e.ability.guid===d.a.STAGGER_TAKEN.id){var t=e.amount+(e.absorbed||0);this._initialized?this.removeStagger(e,t):(this._staggerPool=19*t,this.addStagger(Object(A.a)(Object(A.a)({},e),{},{__fabricated:!0,prepull:!0}),0),this._initialized=!0)}}},{key:"_pbCast",value:function(e){e.maxHitPoints&&(this._lastKnownMaxHp=e.maxHitPoints);var t=this._staggerPool*this.purifyPercentage;this.removeStagger(e,t)}},{key:"_death",value:function(e){var t=this._staggerPool;this.removeStagger(e,t)}},{key:"staggerPool",get:function(){return this._staggerPool}},{key:"purifyPercentage",get:function(){return.5}}]),a}(h.c);B.dependencies={eventEmitter:R.a,ht:F,haste:L.a};var N=B,x=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).totalPhysicalStaggered=0,n.totalMagicalStaggered=0,n.totalStaggerTaken=0,n.staggerMissingFromFight=0,n.fab=void 0,n.addEventListener(new C.c(m.b.AddStagger),n._addstagger),n.addEventListener(new C.c(m.b.RemoveStagger),n._removestagger),n.addEventListener(m.f.fightend,n._fightend),n}return Object(u.a)(a,[{key:"statistic",value:function(){var e=this.totalStaggered-this.totalStaggerTaken-this.staggerMissingFromFight;return b.a.createElement(v.a,{position:_.a.CORE(2),size:"flexible",tooltip:b.a.createElement(b.a.Fragment,null,"Incoming damage added to stagger:",b.a.createElement("ul",null,b.a.createElement("li",null,"Total physical damage added to stagger: ",Object(p.f)(this.totalPhysicalStaggered)),b.a.createElement("li",null,"Total magical damage added to stagger: ",Object(p.f)(this.totalMagicalStaggered))),"Damage taken from stagger:",b.a.createElement("ul",null,b.a.createElement("li",null,"Total damage from stagger dot: ",Object(p.f)(this.totalStaggerTaken)," (",Object(p.e)(this.totalStaggerTaken/this.totalStaggered),"% of total staggered)"),b.a.createElement("li",null,"Total damage removed from stagger dot before damaging you: ",Object(p.f)(e)," (",Object(p.e)(e/this.totalStaggered),"% of total staggered)")))},b.a.createElement(y.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{id:d.a.STAGGER.id})," Damage staggered")},b.a.createElement(b.a.Fragment,null,Object(p.d)(this.totalStaggered))))}},{key:"_addstagger",value:function(e){1===e.trigger.extraAbility.type?this.totalPhysicalStaggered+=e.amount:this.totalMagicalStaggered+=e.amount}},{key:"_removestagger",value:function(e){e.trigger.ability&&e.trigger.ability.guid===d.a.STAGGER_TAKEN.id&&(this.totalStaggerTaken+=e.amount)}},{key:"_fightend",value:function(){this.staggerMissingFromFight=this.fab.staggerPool}},{key:"totalStaggered",get:function(){return this.totalPhysicalStaggered+this.totalMagicalStaggered}},{key:"pctPurified",get:function(){return(this.totalStaggered-this.totalStaggerTaken)/this.totalStaggered}}]),a}(h.c);x.dependencies={fab:N};var P=x,G=a(753),U=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"spellbook",value:function(){var e=this.selectedCombatant;return[{spell:d.a.KEG_SMASH,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:function(e){return 8/(1+e)},charges:1,castEfficiency:{suggestion:!0},gcd:{static:1e3}},{spell:d.a.BLACKOUT_KICK_BRM,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:4,castEfficiency:{suggestion:!0},gcd:{static:1e3}},{spell:d.a.BREATH_OF_FIRE,isDefensive:!0,buffSpellId:d.a.BREATH_OF_FIRE_DEBUFF.id,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:15,gcd:{static:1e3}},{spell:d.a.TIGER_PALM,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{static:1e3}},{spell:d.a.RUSHING_JADE_WIND_TALENT_BREWMASTER,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:function(e){return 6/(1+e)},enabled:e.hasTalent(d.a.RUSHING_JADE_WIND_TALENT_BREWMASTER.id),gcd:{static:1e3}},{spell:d.a.CRACKLING_JADE_LIGHTNING,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500}},{spell:d.a.SPINNING_CRANE_KICK_BRM,category:a.SPELL_CATEGORIES.ROTATIONAL_AOE,gcd:{static:1e3}},{spell:d.a.INVOKE_NIUZAO_THE_BLACK_OX,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{static:1e3}},{spell:d.a.PURIFYING_BREW,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:function(t){return(e.hasTalent(d.a.LIGHT_BREWING_TALENT)?20:16)/(1+t)},charges:2,gcd:null,castEfficiency:{suggestion:!0,recommendedEfficiency:.95}},{spell:d.a.CELESTIAL_BREW,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:e.hasTalent(d.a.LIGHT_BREWING_TALENT)?60:48,gcd:{static:1e3},castEfficiency:{suggestion:!0,recommendedEfficiency:.9}},{spell:d.a.BLACK_OX_BREW_TALENT,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:120,castEfficiency:{suggestion:!1,recommendedEfficiency:.7},enabled:e.hasTalent(d.a.BLACK_OX_BREW_TALENT.id),gcd:null},{spell:d.a.EXPEL_HARM,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:5,gcd:{static:500}},{spell:d.a.FORTIFYING_BREW_BRM,buffSpellId:d.a.FORTIFYING_BREW_BRM_BUFF.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:420,gcd:null},{spell:d.a.HEALING_ELIXIR_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:30,enabled:e.hasTalent(d.a.HEALING_ELIXIR_TALENT.id),gcd:null},{spell:d.a.DAMPEN_HARM_TALENT,buffSpellId:d.a.DAMPEN_HARM_TALENT.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:120,enabled:e.hasTalent(d.a.DAMPEN_HARM_TALENT.id),gcd:null},{spell:d.a.ZEN_MEDITATION,buffSpellId:d.a.ZEN_MEDITATION.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:300,gcd:null},{spell:d.a.RING_OF_PEACE_TALENT,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(d.a.RING_OF_PEACE_TALENT.id),gcd:{base:1500}},{spell:d.a.CHI_TORPEDO_TALENT,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(d.a.CHI_TORPEDO_TALENT.id),cooldown:20,charges:2,gcd:null},{spell:d.a.ROLL,category:a.SPELL_CATEGORIES.UTILITY,enabled:!e.hasTalent(d.a.CHI_TORPEDO_TALENT.id),cooldown:e.hasTalent(d.a.CELERITY_TALENT.id)?15:20,charges:e.hasTalent(d.a.CELERITY_TALENT.id)?3:2,gcd:null},{spell:d.a.TRANSCENDENCE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{static:1e3}},{spell:d.a.TRANSCENDENCE_TRANSFER,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:d.a.SUMMON_BLACK_OX_STATUE_TALENT,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(d.a.SUMMON_BLACK_OX_STATUE_TALENT.id),gcd:{static:1e3}},{spell:d.a.PARALYSIS,category:a.SPELL_CATEGORIES.UTILITY,cooldown:45,gcd:{static:1e3}},{spell:d.a.LEG_SWEEP,category:a.SPELL_CATEGORIES.UTILITY,cooldown:e.hasTalent(d.a.TIGER_TAIL_SWEEP_TALENT.id)?50:60,gcd:{static:1e3}},{spell:d.a.PROVOKE,category:a.SPELL_CATEGORIES.UTILITY,cooldown:8,gcd:null},{spell:d.a.SPEAR_HAND_STRIKE,cooldown:15,category:a.SPELL_CATEGORIES.UTILITY,gcd:null},{spell:d.a.DETOX_ENERGY,category:a.SPELL_CATEGORIES.UTILITY,cooldown:8,gcd:{base:1500}},{spell:d.a.VIVIFY,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:d.a.TIGERS_LUST_TALENT,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(d.a.TIGERS_LUST_TALENT.id),cooldown:30,gcd:{static:1e3}}]}}]),a}(G.a),W=a(4),M=a(13),Y=(d.a.PURIFYING_BREW,d.a.FORTIFYING_BREW,d.a.BLACK_OX_BREW_TALENT,[d.a.GIFT_OF_THE_OX_1,d.a.GIFT_OF_THE_OX_2,d.a.GIFT_OF_THE_OX_3,d.a.GIFT_OF_THE_OX_4,d.a.GIFT_OF_THE_OX_5,d.a.GIFT_OF_THE_OX_6,d.a.GIFT_OF_THE_OX_7,d.a.GIFT_OF_THE_OX_8]),K=Y.map((function(e){return e.id})),q=[d.a.TIGER_PALM,d.a.BREATH_OF_FIRE,d.a.KEG_SMASH],V=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).blackoutComboConsumed=0,e.blackoutComboBuffs=0,e.lastBlackoutComboCast=0,e.spellsBOCWasUsedOn={},e.statisticOrder=_.a.OPTIONAL(),e.active=e.selectedCombatant.hasTalent(d.a.BLACKOUT_COMBO_TALENT.id),e.addEventListener(m.f.applybuff.by(h.a).spell(d.a.BLACKOUT_COMBO_BUFF),e.onApplyBuff),e.addEventListener(m.f.refreshbuff.by(h.a).spell(d.a.BLACKOUT_COMBO_BUFF),e.onRefreshBuff),e.addEventListener(m.f.cast.by(h.a).spell(q),e.onCast),e}return Object(u.a)(a,[{key:"dpsWasteThreshold",get:function(){return this.active?{actual:this.spellsBOCWasUsedOn[d.a.TIGER_PALM.id]/this.blackoutComboBuffs,isLessThan:{minor:.95,average:.9,major:.85},style:"percentage"}:null}}]),Object(u.a)(a,[{key:"onApplyBuff",value:function(e){this.blackoutComboBuffs+=1,this.lastBlackoutComboCast=e.timestamp}},{key:"onRefreshBuff",value:function(e){this.blackoutComboBuffs+=1,this.lastBlackoutComboCast=e.timestamp}},{key:"onCast",value:function(e){var t=e.ability.guid;this.lastBlackoutComboCast>0&&this.lastBlackoutComboCast+15e3>e.timestamp&&(this.blackoutComboConsumed+=1,void 0===this.spellsBOCWasUsedOn[t]&&(this.spellsBOCWasUsedOn[t]=0),this.spellsBOCWasUsedOn[t]+=1),this.lastBlackoutComboCast=0}},{key:"suggestions",value:function(e){e((this.blackoutComboBuffs-this.blackoutComboConsumed)/this.blackoutComboBuffs).isGreaterThan(.1).addSuggestion((function(e,t,a){return e(b.a.createElement("span",null,"You wasted ",Object(p.e)(t),"% of your ",b.a.createElement(W.a,{id:d.a.BLACKOUT_COMBO_BUFF.id})," procs. Try to use the procs as soon as you get them so they are not overwritten.")).icon(d.a.BLACKOUT_COMBO_BUFF.icon).actual(M.i18n._({id:"monk.brewmaster.suggestions.blackoutCombo.wasted",defaults:"{0}% unused",values:{0:Object(p.e)(t)}})).recommended("".concat(Math.round(Object(p.e)(a)),"% or less is recommended")).regular(a+.1).major(a+.2)}))}},{key:"statistic",value:function(){var e=this,t=(this.blackoutComboBuffs-this.blackoutComboConsumed)/this.blackoutComboBuffs;return b.a.createElement(v.a,{position:_.a.OPTIONAL(),size:"flexible",tooltip:b.a.createElement(b.a.Fragment,null,"You got total ",b.a.createElement("strong",null,this.blackoutComboBuffs)," Blackout Combo procs and used ",b.a.createElement("strong",null,this.blackoutComboConsumed)," of them.",b.a.createElement("br",null),"Blackout combo buff usage:",b.a.createElement("ul",null,Object.keys(this.spellsBOCWasUsedOn).sort((function(t,a){return e.spellsBOCWasUsedOn[a]-e.spellsBOCWasUsedOn[t]})).map((function(t){return b.a.createElement("li",{key:t},b.a.createElement("em",null,d.a[t].name||"Unknown")," was used ",e.spellsBOCWasUsedOn[t]," time",1===e.spellsBOCWasUsedOn[t]?"":"s"," (",Object(p.e)(e.spellsBOCWasUsedOn[t]/e.blackoutComboConsumed),"%)")}))))},b.a.createElement(y.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{id:d.a.BLACKOUT_COMBO_BUFF.id})," Wasted Blackout Combo")},b.a.createElement(b.a.Fragment,null,Object(p.e)(t),"%")))}}]),a}(h.c),z=a(754),X=a(933),J=[d.a.BLACK_OX_BREW_TALENT,d.a.FORTIFYING_BREW_BRM,d.a.CELESTIAL_BREW,d.a.PURIFYING_BREW],Z=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).spellUsable=void 0,e.spellHistory=void 0,e}return Object(u.a)(a,[{key:"reduceCooldown",value:function(e){var t=this;J.slice(0,-1).filter((function(e){return t.spellUsable.isOnCooldown(e.id)})).forEach((function(a){return t.spellUsable.reduceCooldown(a.id,e)}));var a=J[J.length-1];return this.spellUsable.isOnCooldown(a.id)?this.spellUsable.reduceCooldown(a.id,e):0}}]),a}(h.c);Z.dependencies={spellUsable:z.b,spellHistory:X.a};var Q=Z,$=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).totalCasts=0,n.bocHits=0,n.cdr=0,n.bocCDR=0,n.wastedCDR=0,n.wastedBocCDR=0,n._bocBuffActive=!1,n.addEventListener(m.f.applybuff.by(h.a).spell(d.a.BLACKOUT_COMBO_BUFF),n.onGainBOC),n.addEventListener(m.f.refreshbuff.by(h.a).spell(d.a.BLACKOUT_COMBO_BUFF),n.onGainBOC),n.addEventListener(m.f.removebuff.by(h.a).spell(d.a.BLACKOUT_COMBO_BUFF),n.onLoseBOC),n.addEventListener(m.f.cast.by(h.a).spell(d.a.KEG_SMASH),n.onCast),n}return Object(u.a)(a,[{key:"onGainBOC",value:function(e){this._bocBuffActive=!0}},{key:"onLoseBOC",value:function(e){this._bocBuffActive=!1}},{key:"onCast",value:function(e){this.totalCasts+=1;var t=this.brews.reduceCooldown(3e3);if(this.cdr+=t,this.wastedCDR+=3e3-t,this._bocBuffActive){this.bocHits+=1;var a=this.brews.reduceCooldown(2e3);this.bocCDR+=a,this.wastedBocCDR+=2e3-a}}}]),a}(h.c);$.dependencies={boc:V,brews:Q};var ee=$,te=a(122),ae=a(164);function ne(e){return Object.prototype.hasOwnProperty.call(e,"when")}var ie=[d.a.KEG_SMASH,d.a.BLACKOUT_KICK_BRM,d.a.BREATH_OF_FIRE,{spell:d.a.RUSHING_JADE_WIND,when:function(e){return e.hasTalent(d.a.RUSHING_JADE_WIND.id)&&!e.hasBuff(d.a.RUSHING_JADE_WIND.id)}},{spell:d.a.CHI_BURST_TALENT,when:function(e){return e.hasTalent(d.a.CHI_BURST_TALENT.id)}},{spell:d.a.CHI_WAVE_TALENT,when:function(e){return e.hasTalent(d.a.CHI_WAVE_TALENT.id)}}],se=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).totalCasts=0,n.badCasts=0,n.normalHits=0,n.bocHits=0,n.cdr=0,n.wastedCDR=0,n.bocBuffActive=!1,n.bocApplyToTP=!1,n.boc=void 0,n.brews=void 0,n.statTracker=void 0,n.spellUsable=void 0,n.addEventListener(m.f.applybuff.by(h.a).spell(d.a.BLACKOUT_COMBO_BUFF),n.onGainBOC),n.addEventListener(m.f.refreshbuff.by(h.a).spell(d.a.BLACKOUT_COMBO_BUFF),n.onGainBOC),n.addEventListener(m.f.removebuff.by(h.a).spell(d.a.BLACKOUT_COMBO_BUFF),n.onLoseBOC),n.addEventListener(m.f.cast.by(h.a).spell(d.a.TIGER_PALM),n.onCast),n.addEventListener(m.f.cast.by(h.a).spell(d.a.TIGER_PALM),n.checkBadTP),n.addEventListener(m.f.damage.by(h.a).spell(d.a.TIGER_PALM),n.onDamage),n}return Object(u.a)(a,[{key:"onGainBOC",value:function(e){this.bocBuffActive=!0}},{key:"onLoseBOC",value:function(e){this.bocBuffActive=!1}},{key:"onCast",value:function(e){this.totalCasts+=1,this.bocApplyToTP=this.bocBuffActive}},{key:"onDamage",value:function(e){var t=this.brews.reduceCooldown(1e3);this.cdr+=t,this.wastedCDR+=1e3-t,this.bocApplyToTP?this.bocHits+=1:this.normalHits+=1}},{key:"checkBadTP",value:function(e){var t=this;if(!this.bocBuffActive){var a=ie.filter((function(e){return ne(e)?e.when(t.selectedCombatant)&&t.spellUsable.isAvailable(e.spell.id):t.spellUsable.isAvailable(e.id)})).map((function(e){return ne(e)?e.spell:e}));0!==a.length&&(e.meta={isInefficientCast:!0,inefficientCastReason:b.a.createElement(b.a.Fragment,null,"The following better spells were available during this GCD:",b.a.createElement("ul",null,a.map((function(e){var t=e.id;return b.a.createElement("li",{key:t},b.a.createElement(W.a,{id:t}))}))))},this.badCasts+=1)}}},{key:"suggestions",value:function(e){e(this.badCastSuggestion).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,b.a.createElement(W.a,{id:d.a.TIGER_PALM.id})," is your lowest priority ability. You should avoid casting it when you have other damaging abilities like ",b.a.createElement(W.a,{id:d.a.KEG_SMASH.id})," or ",b.a.createElement(W.a,{id:d.a.BLACKOUT_KICK_BRM.id})," available.")).icon(d.a.TIGER_PALM.icon).actual("".concat(Object(p.e)(t),"% of casts while better spells were available")).recommended("< ".concat(Object(p.e)(a),"% is recommended"))}))}},{key:"totalBocHits",get:function(){return this.bocHits}},{key:"bocEmpoweredThreshold",get:function(){return this.selectedCombatant.hasTalent(d.a.BLACKOUT_COMBO_TALENT.id)?{actual:this.totalBocHits/this.totalCasts,isLessThan:{minor:.95,average:.9,major:.85},style:ae.a.PERCENTAGE}:null}},{key:"badCastSuggestion",get:function(){return{actual:this.badCasts/this.totalCasts,isGreaterThan:{minor:.05,average:.1,major:.15},style:ae.a.PERCENTAGE}}}]),a}(h.c);se.dependencies={boc:V,brews:Q,statTracker:te.a,spellUsable:z.b};var re=se,le=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e,n,i;Object(s.a)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(i=t.call.apply(t,[this].concat(l))).cdr=(e={},Object(S.a)(e,d.a.PURIFYING_BREW.id,0),Object(S.a)(e,d.a.CELESTIAL_BREW.id,0),e),i.wastedCDR=(n={},Object(S.a)(n,d.a.PURIFYING_BREW.id,0),Object(S.a)(n,d.a.CELESTIAL_BREW.id,0),n),i.casts=0,i.active=i.selectedCombatant.hasTalent(d.a.BLACK_OX_BREW_TALENT.id),i.addEventListener(m.f.cast.by(h.a).spell(d.a.BLACK_OX_BREW_TALENT),i.onCast),i}return Object(u.a)(a,[{key:"suggestionThreshold",get:function(){return{actual:this.wastedCDR/(this.cdr+this.wastedCDR),isGreaterThan:{minor:.1,average:.2,major:.3},style:"percentage"}}}]),Object(u.a)(a,[{key:"_trackCdr",value:function(e){var t=this.spellUsable.cooldownRemaining(e);this.cdr[e]+=t;var a=this.abilities.getExpectedCooldownDuration(e,this.spellUsable.cooldownTriggerEvent(e))-t;this.wastedCDR[e]+=a}},{key:"_resetPB",value:function(){for(var e=d.a.PURIFYING_BREW.id;this.spellUsable.isOnCooldown(e);)this._trackCdr(e),this.spellUsable.endCooldown(e,!1)}},{key:"_resetCB",value:function(){var e=d.a.CELESTIAL_BREW.id;this.spellUsable.isOnCooldown(e)?(this._trackCdr(e),this.spellUsable.endCooldown(e,!1)):this.wastedCDR[e]=this.abilities.getExpectedCooldownDuration(e,this.spellUsable.cooldownTriggerEvent(e))}},{key:"onCast",value:function(e){this.casts+=1,this._resetPB(),this._resetCB()}},{key:"suggestions",value:function(e){e(this.suggestionThreshold).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,"Your ",b.a.createElement(W.a,{id:d.a.BLACK_OX_BREW_TALENT.id})," usage can be improved.")).icon(d.a.BLACK_OX_BREW_TALENT.icon).actual(M.i18n._({id:"monk.brewmaster.suggestions.blackOxBrew.cdrWasted",defaults:"{0}% of Cooldown Reduction wasted",values:{0:Object(p.e)(t)}})).recommended("< ".concat(Object(p.e)(a),"% is recommended"))}))}}]),a}(h.c);le.dependencies={spellUsable:z.b,abilities:U};var oe=le,ce=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._totalHaste=0,n._newHaste=0,n._lastHasteChange=0,n.ks=void 0,n.tp=void 0,n.bob=void 0,n.abilities=void 0,n._lastHasteChange=n.owner.fight.start_time,n.addEventListener(new C.c(m.b.ChangeHaste),n._updateHaste),n.addEventListener(m.f.fightend,n._finalizeHaste),n}return Object(u.a)(a,[{key:"statistic",value:function(){return b.a.createElement(v.a,{position:_.a.OPTIONAL(),size:"flexible",tooltip:b.a.createElement(b.a.Fragment,null,"Your cooldowns were reduced by:",b.a.createElement("ul",null,b.a.createElement("li",null,this.ks.totalCasts," Keg Smash casts \u2014 ",b.a.createElement("strong",null,(this.ks.cdr/1e3).toFixed(2),"s")," (",b.a.createElement("strong",null,(this.ks.wastedCDR/1e3).toFixed(2),"s")," wasted)"),this.ks.bocHits>0&&b.a.createElement("li",null,"Using Blackout Combo on ",this.ks.bocHits," Keg Smash hits \u2014 ",b.a.createElement("strong",null,(this.ks.bocCDR/1e3).toFixed(2),"s")," (",b.a.createElement("strong",null,(this.ks.wastedBocCDR/1e3).toFixed(2),"s")," wasted)"),b.a.createElement("li",null,this.tp.totalCasts," Tiger Palm hits \u2014 ",b.a.createElement("strong",null,(this.tp.cdr/1e3).toFixed(2),"s")," (",b.a.createElement("strong",null,(this.tp.wastedCDR/1e3).toFixed(2),"s")," wasted)"),this.bob.active&&b.a.createElement("li",null,this.bob.casts," Black Ox Brew casts \u2014 ",b.a.createElement("strong",null,(this.bob.cdr[d.a.PURIFYING_BREW.id]/1e3).toFixed(2),"s")," (",b.a.createElement("strong",null,(this.bob.wastedCDR[d.a.PURIFYING_BREW.id]/1e3).toFixed(2),"s")," wasted)")),b.a.createElement("strong",null,"Total cooldown reduction:")," ",(this.totalCDR/1e3).toFixed(2),"s.",b.a.createElement("br",null))},b.a.createElement(y.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{id:d.a.TIGER_PALM.id})," Effective Brew CDR")},b.a.createElement(b.a.Fragment,null,Object(p.e)(this.cooldownReductionRatio)," %")))}},{key:"_updateHaste",value:function(e){this._totalHaste+=e.oldHaste*(e.timestamp-this._lastHasteChange),this._lastHasteChange=e.timestamp,this._newHaste=e.newHaste}},{key:"_finalizeHaste",value:function(){this._totalHaste+=this._newHaste*(this.owner.fight.end_time-this._lastHasteChange)}},{key:"meanHaste",get:function(){return this._totalHaste/this.owner.fightDuration}},{key:"totalCDR",get:function(){var e=0;return e+=this.ks.cdr,e+=this.ks.bocCDR,e+=this.tp.cdr,e+=this.bob.cdr[d.a.PURIFYING_BREW.id]}},{key:"cooldownReductionRatio",get:function(){return this.totalCDR/(this.owner.fightDuration+this.totalCDR)}},{key:"avgCooldown",get:function(){return this.abilities.getAbility(d.a.PURIFYING_BREW.id).getCooldown(this.meanHaste)}}]),a}(h.c);ce.dependencies={ks:ee,tp:re,bob:oe,abilities:U};var ue=ce,de=a(120),he=a(66),me=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"onCast",value:function(e){e.ability.guid!==d.a.CRACKLING_JADE_LIGHTNING.id&&Object(de.a)(Object(he.a)(a.prototype),"onCast",this).call(this,e)}}]),a}(a(811).a),ge=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).addEventListener(m.f.applydebuff.by(h.a).spell(d.a.CRACKLING_JADE_LIGHTNING),n.onApplyDebuff),n.addEventListener(m.f.removedebuff.by(h.a).spell(d.a.CRACKLING_JADE_LIGHTNING),n.onRemoveDebuff),n.addEventListener(m.f.removebuff.by(h.a).spell(d.a.CRACKLING_JADE_LIGHTNING),n.onRemoveBuff),n}return Object(u.a)(a,[{key:"onCast",value:function(e){e.ability.guid!==d.a.CRACKLING_JADE_LIGHTNING.id&&(e.ability.guid!==d.a.ZEN_MEDITATION.id?Object(de.a)(Object(he.a)(a.prototype),"onCast",this).call(this,e):this.beginChannel(e))}},{key:"cancelChannel",value:function(e,t){this.isChannelingSpell(d.a.CRACKLING_JADE_LIGHTNING.id)||this.isChannelingSpell(d.a.ZEN_MEDITATION.id)?(this.log("Marking",this._currentChannel.ability.name,"as ended since we started casting something else"),this.endChannel(e)):Object(de.a)(Object(he.a)(a.prototype),"cancelChannel",this).call(this,e,t)}},{key:"onApplyDebuff",value:function(e){this.beginChannel(e)}},{key:"onRemoveDebuff",value:function(e){this.isChannelingSpell(d.a.CRACKLING_JADE_LIGHTNING.id)&&this.endChannel(e)}},{key:"onRemoveBuff",value:function(e){e.ability.guid===d.a.ZEN_MEDITATION.id&&this.isChannelingSpell(d.a.ZEN_MEDITATION.id)&&this.endChannel(e)}}]),a}(a(814).a),fe=a(203),Ee=a(767),be=a(757),pe=a(777),_e=d.a.RUSHING_JADE_WIND_TALENT_BREWMASTER,ve=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).active=e.selectedCombatant.hasTalent(d.a.RUSHING_JADE_WIND_TALENT_BREWMASTER.id),e}return Object(u.a)(a,[{key:"uptimeThreshold",get:function(){return this.active?{actual:this.uptime,isLessThan:{minor:.85,average:.75,major:.65},style:"percentage"}:null}},{key:"uptime",get:function(){return this.selectedCombatant.getBuffUptime(_e.id)/this.owner.fightDuration}}]),Object(u.a)(a,[{key:"suggestions",value:function(e){e(this.uptimeThreshold).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,"You had low uptime on ",b.a.createElement(W.a,{id:d.a.RUSHING_JADE_WIND.id}),". Try to maintain 100% uptime by refreshing the buff before it drops.")).icon(d.a.RUSHING_JADE_WIND.icon).actual(M.i18n._({id:"monk.brewmaster.suggestions.rushingJadeWind.uptime",defaults:"{0}% uptime",values:{0:Object(p.e)(t)}})).recommended("".concat(Math.round(Object(p.e)(a)),"% is recommended"))}))}}]),a}(h.c),ye=a(953);var Oe=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).purifies=[],n.purifyDelays=[],n.heavyPurifies=0,n._heavyStaggerDropped=!1,n._lastHit=void 0,n._msTilPurify=0,n.brews=void 0,n.spells=void 0,n.abilities=void 0,n.cdr=void 0,n.addEventListener(m.f.removedebuff.to(h.a).spell(d.a.HEAVY_STAGGER_DEBUFF),n._removeHeavyStagger),n.addEventListener(new C.c(m.b.AddStagger),n._addstagger),n.addEventListener(new C.c(m.b.RemoveStagger),n._removestagger),n}return Object(u.a)(a,[{key:"suggestions",value:function(e){e(this.purifyDelaySuggestion).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,"You should delay your ",b.a.createElement(W.a,{id:d.a.PURIFYING_BREW.id})," cast as little as possible after being hit to maximize its effectiveness.")).icon(d.a.PURIFYING_BREW.icon).actual(M.i18n._({id:"monk.brewmaster.suggestions.purifyingBrew.avgdelay",defaults:"{0}s Average Delay",values:{0:t.toFixed(2)}})).recommended("< ".concat(a.toFixed(2),"s is recommended"))}))}},{key:"statistic",value:function(){var e={mark:"bar",transform:[{calculate:"datum.timestamp - ".concat(this.owner.fight.start_time),as:"timestamp"},{calculate:"datum.timestamp / 60000",as:"time_min"},{calculate:Object(ye.b)(),as:"time_label"}],encoding:{x:{field:"time_min",type:"quantitative",axis:{labelExpr:Object(ye.b)("(datum.value * 60000)"),grid:!1},title:null,scale:{zero:!0}},y:{field:"amount",type:"quantitative",title:null,axis:{grid:!1,format:"~s"}},tooltip:[{field:"time_label",type:"nominal",title:"Time"},{field:"amount",type:"quantitative",title:"Amount Purified",format:".3~s"}]}};return b.a.createElement(v.a,{size:"flexible",position:_.a.OPTIONAL(),tooltip:b.a.createElement(b.a.Fragment,null,"Purifying Brew removed ",b.a.createElement("strong",null,Object(p.d)(this.totalPurified))," damage in total over ",this.totalPurifies," casts.",b.a.createElement("br",null),"The smallest purify removed ",b.a.createElement("strong",null,Object(p.d)(this.minPurify))," and the largest purify removed ",b.a.createElement("strong",null,Object(p.d)(this.maxPurify)),".",b.a.createElement("br",null),"Your purifies were delayed from the nearest peak by ",b.a.createElement("strong",null,(this.avgPurifyDelay/1e3).toFixed(2),"s")," on average.")},b.a.createElement(y.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{id:d.a.PURIFYING_BREW.id})," Avg. Mitigation per Purifying Brew")},b.a.createElement(b.a.Fragment,null,Object(p.d)(this.meanPurify)," ",b.a.createElement("br",null),b.a.createElement(ye.a,{data:this.purifies,spec:e}))))}},{key:"_removeHeavyStagger",value:function(e){e.ability.guid===d.a.HEAVY_STAGGER_DEBUFF.id&&(this._heavyStaggerDropped=!0)}},{key:"_addstagger",value:function(e){this._lastHit=e,this._msTilPurify=this.spells.isAvailable(d.a.PURIFYING_BREW.id)?0:this.spells.cooldownRemaining(d.a.PURIFYING_BREW.id)}},{key:"_removestagger",value:function(e){if(void 0!==this._lastHit){var t=e.timestamp-this._lastHit.timestamp;if(e.trigger.ability&&e.trigger.ability.guid===d.a.STAGGER.id&&this._msTilPurify-t>0&&(this._msTilPurify=Math.max(0,this._msTilPurify-t),this._lastHit=e),e.trigger.ability&&e.trigger.ability.guid===d.a.PURIFYING_BREW.id){this.purifies.push(e);var a=e.timestamp-this._lastHit.timestamp-this._msTilPurify;this.purifyDelays.push(a);var n=this.selectedCombatant.hasBuff(d.a.HEAVY_STAGGER_DEBUFF.id)||this._heavyStaggerDropped,i=e.trigger;i.type===m.b.Cast&&function(e,t,a){var n=[];if(t>750&&n.push(b.a.createElement("li",{key:"PURIFY_DELAY_THRESHOLD"},"You delayed casting it for ",b.a.createElement("b",null,(t/1e3).toFixed(2),"s")," after being hit, allowing Stagger to tick down.")),0!==n.length){var i=e.meta||{};i.isInefficientCast=!0,i.inefficientCastReason=b.a.createElement(b.a.Fragment,null,"This Purifying Brew cast was inefficient because:",b.a.createElement("ul",null,n)),e.meta=i}}(i,a),n&&(this.heavyPurifies+=1),this._heavyStaggerDropped=!1}else this._heavyStaggerDropped=!1}else e.amount>0&&console.warn("Stagger removed but player hasn't been hit yet",e)}},{key:"meanPurify",get:function(){return 0===this.purifies.length?0:this.totalPurified/this.totalPurifies}},{key:"minPurify",get:function(){return 0===this.purifies.length?0:this.purifies.reduce((function(e,t){return e<t.amount?e:t.amount}),1/0)}},{key:"maxPurify",get:function(){return this.purifies.reduce((function(e,t){return e>t.amount?e:t.amount}),0)}},{key:"totalPurified",get:function(){return this.purifies.reduce((function(e,t){return e+t.amount}),0)}},{key:"totalPurifies",get:function(){return this.purifies.length}},{key:"avgPurifyDelay",get:function(){return 0===this.purifyDelays.length?0:this.purifyDelays.reduce((function(e,t){return e+t}))/this.purifyDelays.length}},{key:"purifyDelaySuggestion",get:function(){return{actual:this.avgPurifyDelay/1e3,isGreaterThan:{minor:1,average:.75,major:1.75},style:ae.a.SECONDS}}}]),a}(h.c);Oe.dependencies={brews:Q,spells:z.b,abilities:G.a,cdr:ue};var Te=Oe,Ce=a(756),Ae=a(923),Re=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).hitsWith=0,n.hitsWithout=0,n.enemies=void 0,n.addEventListener(m.f.damage.to(h.a),n._damageTaken),n}return Object(u.a)(a,[{key:"_damageTaken",value:function(e){e.ability.guid!==d.a.STAGGER_TAKEN.id&&(Object(Ae.b)(this.enemies,e)||(this.selectedCombatant.hasBuff(d.a.SHUFFLE.id)?this.hitsWith+=1:this.hitsWithout+=1))}},{key:"suggestions",value:function(e){e(this.uptimeSuggestionThreshold).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,"You should maintain ",b.a.createElement(W.a,{id:d.a.SHUFFLE.id})," while actively tanking.")).icon(d.a.SHUFFLE.icon).actual("".concat(Object(p.e)(t),"% of hits mitigated by Shuffle.")).recommended("at least ".concat(Object(p.e)(a),"% is recommended"))}))}},{key:"uptimeSuggestionThreshold",get:function(){return{actual:this.hitsWith/(this.hitsWith+this.hitsWithout),isLessThan:{minor:.98,average:.96,major:.94},style:ae.a.PERCENTAGE}}}]),a}(h.c);Re.dependencies={enemies:Ce.a};var Le=a(770),Se=a(762),Ie=a(763),we=a(771),ke=a(772),He=function(e){var t=e.combatant,a=e.castEfficiency,n=e.thresholds,i=function(e){return b.a.createElement(ke.a,Object.assign({castEfficiency:a.getCastEfficiencyForSpellId(e.spell)},e))};return b.a.createElement(Le.a,null,b.a.createElement(Se.c,{name:b.a.createElement(b.a.Fragment,null,"Use ",b.a.createElement(W.a,{id:d.a.CELESTIAL_BREW.id,onClick:function(e){return e.preventDefault()}})," effectively"),description:b.a.createElement(b.a.Fragment,null,b.a.createElement(W.a,{id:d.a.CELESTIAL_BREW.id})," is a key part of your defensive toolkit. While it might be tempting to wait to cast it until you have max ",b.a.createElement(W.a,{id:d.a.PURIFIED_CHI.id}),", it is much better to get more total casts off in most situations.")},b.a.createElement(i,{spell:d.a.CELESTIAL_BREW.id,name:b.a.createElement(b.a.Fragment,null,b.a.createElement(W.a,{id:d.a.CELESTIAL_BREW.id})," cast efficiency")}),b.a.createElement(Ie.a,{name:b.a.createElement(b.a.Fragment,null,b.a.createElement(W.a,{id:d.a.CELESTIAL_BREW.id})," Absorbs Effectively Used"),thresholds:n.goodCBCasts,tooltip:"A cast is counted as effective if at least 75% of the shield is used."})),b.a.createElement(Se.c,{name:b.a.createElement(b.a.Fragment,null,"Use ",b.a.createElement(W.a,{id:d.a.PURIFYING_BREW.id,onClick:function(e){return e.preventDefault()}})," effectively"),performanceMethod:Se.a.HARMONIC,description:b.a.createElement(b.a.Fragment,null,"Effective use of ",b.a.createElement(W.a,{id:d.a.PURIFYING_BREW.id})," is fundamental to playing Brewmaster successfully. While we cannot ",b.a.createElement("em",null,"automatically")," tell whether a purify is effective or not, there are some simple guidelines that naturally lead to more effective purifies:",b.a.createElement("ul",null,b.a.createElement("li",null,"Spend all of your charges of ",b.a.createElement(W.a,{id:d.a.PURIFYING_BREW.id}),"."),b.a.createElement("li",null,"Avoid casting ",b.a.createElement(W.a,{id:d.a.PURIFYING_BREW.id})," at less than ",b.a.createElement(W.a,{id:d.a.HEAVY_STAGGER_DEBUFF.id}),"\u2014but not if it would waste charges! In a raid environment, ",b.a.createElement(W.a,{id:d.a.HEAVY_STAGGER_DEBUFF.id})," is not dangerous in itself. While not every fight will put you into ",b.a.createElement(W.a,{id:d.a.HEAVY_STAGGER_DEBUFF.id})," consistently, this remains a good rule of thumb."),b.a.createElement("li",null,"If you are going to purify a hit, do so as soon as possible after it lands. Every half-second delayed after the hit causes you to take 5% of the hit's damage from ",b.a.createElement(W.a,{id:d.a.STAGGER.id}),".")),"For more information on effective use of ",b.a.createElement(W.a,{id:d.a.PURIFYING_BREW.id}),", see the ",b.a.createElement("a",{href:"https://www.peakofserenity.com/bfa/brewmaster/purifying/"},"Peak of Serenity guide"),".")},b.a.createElement(i,{spell:d.a.PURIFYING_BREW.id,name:b.a.createElement(b.a.Fragment,null,b.a.createElement(W.a,{id:d.a.PURIFYING_BREW.id})," cast efficiency")}),b.a.createElement(Ie.a,{name:b.a.createElement(b.a.Fragment,null,"Maintain ",b.a.createElement(W.a,{id:d.a.SHUFFLE.id})," while tanking"),thresholds:n.shuffleHits,tooltip:"Shuffle increases the power of your Purifies. Maintain it by casting your rotational abilities."}),b.a.createElement(Ie.a,{name:"Average Purification Delay",thresholds:n.purifyDelay,tooltip:"The delay is tracked from the most recent time you were able to purify after a hit. If the hit occurred when no charges were available, you are not penalized."})),b.a.createElement(Se.c,{name:"Top the Damage Charts",description:b.a.createElement(b.a.Fragment,null,"While the ",b.a.createElement("em",null,"primary")," role of a tank is to get hit in the face a bunch and not die in the process, once that is under control we get to spend some energy dealing damage! Maintaining a ",b.a.createElement("a",{href:"https://www.peakofserenity.com/bfa/brewmaster/guide/"},"correct DPS rotation")," also provides optimal brew generation. ",b.a.createElement("strong",null,"However, if you are dying, ignore this checklist item!")," As much as we may enjoy padding for those sweet orange parses, not-wiping takes precedence.")},b.a.createElement(i,{spell:d.a.KEG_SMASH.id}),b.a.createElement(i,{spell:d.a.BLACKOUT_KICK_BRM.id}),b.a.createElement(i,{spell:d.a.INVOKE_NIUZAO_THE_BLACK_OX.id}),b.a.createElement(i,{spell:d.a.TOUCH_OF_DEATH.id}),b.a.createElement(Ie.a,{name:b.a.createElement(b.a.Fragment,null,b.a.createElement(W.a,{id:d.a.TIGER_PALM.id})," casts while better abilities were available"),tooltip:"Tiger Palm is a filler ability and should only be used when other spells are on cooldown.",thresholds:n.badTp}),t.hasTalent(d.a.BLACKOUT_COMBO_TALENT.id)&&b.a.createElement(b.a.Fragment,null,b.a.createElement(Ie.a,{name:b.a.createElement(b.a.Fragment,null,b.a.createElement(W.a,{id:d.a.BLACKOUT_COMBO_TALENT.id}),"-empowered ",b.a.createElement(W.a,{id:d.a.TIGER_PALM.id},"Tiger Palms")),thresholds:n.bocTp}),b.a.createElement(Ie.a,{name:b.a.createElement(b.a.Fragment,null,b.a.createElement(W.a,{id:d.a.BLACKOUT_COMBO_TALENT.id},"Blackout Combos")," spent on ",b.a.createElement(W.a,{id:d.a.TIGER_PALM.id})),thresholds:n.bocDpsWaste})),t.hasTalent(d.a.RUSHING_JADE_WIND_TALENT_BREWMASTER.id)&&b.a.createElement(Ie.a,{name:b.a.createElement(b.a.Fragment,null,b.a.createElement(W.a,{id:d.a.RUSHING_JADE_WIND.id})," uptime"),thresholds:n.rjw})),b.a.createElement(we.a,{thresholds:n}))},Fe=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._absorbs=void 0,n._currentAbsorb=void 0,n._currentChiStacks=0,n._expireTime=null,n._absorbs=[],n.addEventListener(m.f.absorbed.by(h.a).spell(d.a.CELESTIAL_BREW),n._cbAbsorb),n.addEventListener(m.f.cast.by(h.a).spell(d.a.CELESTIAL_BREW),n._resetAbsorb),n.addEventListener(m.f.removebuff.spell(d.a.CELESTIAL_BREW),n._expireAbsorb),n.addEventListener(m.f.applybuff.to(h.a).spell(d.a.PURIFIED_CHI),n._purifiedChiApplied),n.addEventListener(m.f.applybuffstack.to(h.a).spell(d.a.PURIFIED_CHI),n._purifiedChiStackApplied),n.addEventListener(m.f.removebuff.spell(d.a.PURIFIED_CHI).to(h.a),n._expirePurifiedChi),n.addEventListener(m.f.fightend,n._finalize),n}return Object(u.a)(a,[{key:"expireChi",value:function(e){this._expireTime&&e-this._expireTime>150&&(this._expireTime=null,this._currentChiStacks=0)}},{key:"suggestions",value:function(e){e(this.goodCastSuggestion).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,"You should try to use ",b.a.createElement(W.a,{id:d.a.CELESTIAL_BREW.id})," when most or all of the absorb will be consumed.")).icon(d.a.CELESTIAL_BREW.icon).actual("".concat(Object(p.e)(t),"% of your absorbs expired with more than 25% remaining.")).recommended("< ".concat(Object(p.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){var e=0===this._absorbs.length?0:this._absorbs.reduce((function(e,t){return e+t.amount}),0)/this._absorbs.length,t=this._absorbs.reduce((function(e,t){return e+t.wasted}),0),a=0===this._absorbs.length?0:this._absorbs.reduce((function(e,t){return e+t.stacks}),0)/this._absorbs.length,n={mark:"bar",transform:[{fold:["amount","wasted"]},{calculate:"datum.timestamp / 60000",as:"time_min"},{calculate:Object(ye.b)(),as:"time_label"}],encoding:{x:{field:"time_min",type:"quantitative",axis:{title:null,labelExpr:Object(ye.b)("(datum.value * 60000)"),grid:!1},scale:{zero:!0}},y:{field:"value",type:"quantitative",title:null,axis:{format:"~s",tickCount:3,grid:!1},stack:!0},color:{field:"key",type:"nominal",legend:null,scale:{domain:["amount","wasted"],range:["rgb(112, 181, 112)","rgb(255, 128, 0)"]}},order:{field:"key"},tooltip:[{field:"time_label",type:"nominal",title:"Time"},{field:"stacks",type:"ordinal",title:"Purified Chi Stacks"},{field:"amount",type:"quantitative",title:"Damage Absorbed",format:".3~s"},{field:"wasted",type:"quantitative",title:"Absorb Wasted",format:".3~s"}]}};return b.a.createElement(v.a,{position:_.a.OPTIONAL(),size:"flexible",tooltip:b.a.createElement(b.a.Fragment,null,"Does not include ",b.a.createElement("strong",null,Object(p.d)(t)," wasted absorb")," (avg: ",b.a.createElement("strong",null,Object(p.d)(t/this._absorbs.length)),").",b.a.createElement("br",null),"You cast Celestial Brew with an average of ",b.a.createElement("strong",null,a.toFixed(2)," stacks")," of Purified Chi, increasing the absorb amount by ",b.a.createElement("strong",null,Object(p.e)(.2*a),"%"),".")},b.a.createElement(y.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{id:d.a.CELESTIAL_BREW.id})," Avg. Absorb per Celestial Brew")},b.a.createElement(b.a.Fragment,null,Object(p.d)(e)," % ",b.a.createElement("br",null),b.a.createElement(ye.a,{spec:n,data:this._absorbs}))))}},{key:"_expirePurifiedChi",value:function(e){this._expireTime=e.timestamp}},{key:"_purifiedChiApplied",value:function(e){this.expireChi(e.timestamp),this._currentChiStacks=1}},{key:"_purifiedChiStackApplied",value:function(e){this._currentChiStacks=e.stack}},{key:"_resetAbsorb",value:function(e){this.expireChi(e.timestamp),this._currentAbsorb&&this._absorbs.push(this._currentAbsorb),this._currentAbsorb={cast:e,timestamp:e.timestamp-this.owner.fight.start_time,amount:0,wasted:0,stacks:this._currentChiStacks},this._currentChiStacks=0}},{key:"_cbAbsorb",value:function(e){void 0!==this._currentAbsorb?this._currentAbsorb.amount+=e.amount:console.error("CB absorb detected without CB active!",e)}},{key:"_expireAbsorb",value:function(e){void 0!==this._currentAbsorb?this._currentAbsorb.wasted=e.absorb||0:console.error("CB expired but was never applied!",e)}},{key:"_finalize",value:function(){this._currentAbsorb&&this._absorbs.push(this._currentAbsorb)}},{key:"goodCastSuggestion",get:function(){return{actual:this._absorbs.filter((function(e){var t=e.amount;return t/(t+e.wasted)>=.75})).length/this._absorbs.length,isLessThan:{minor:.9,average:.8,major:.7},style:ae.a.PERCENTAGE}}}]),a}(h.c),De=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).combatants=void 0,e.prep=void 0,e.castEfficiency=void 0,e.boc=void 0,e.tp=void 0,e.rjw=void 0,e.pb=void 0,e.shuffle=void 0,e.cb=void 0,e}return Object(u.a)(a,[{key:"render",value:function(){return b.a.createElement(He,{combatant:this.combatants.selected,castEfficiency:this.castEfficiency,thresholds:Object(A.a)(Object(A.a)({},this.prep.thresholds),{},{bocDpsWaste:this.boc.dpsWasteThreshold,bocTp:this.tp.bocEmpoweredThreshold,badTp:this.tp.badCastSuggestion,rjw:this.rjw.uptimeThreshold,purifyDelay:this.pb.purifyDelaySuggestion,shuffleHits:this.shuffle.uptimeSuggestionThreshold,goodCBCasts:this.cb.goodCastSuggestion})})}}]),a}(fe.a);De.dependencies={combatants:be.a,castEfficiency:Ee.a,prep:pe.a,boc:V,tp:re,rjw:ve,pb:Te,shuffle:Re,cb:Fe};var je=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).hitsWithBoF=0,n.hitsWithoutBoF=0,n.addEventListener(m.f.damage.to(h.a),n.onDamageTaken),n}return Object(u.a)(a,[{key:"uptime",get:function(){return this.enemies.getBuffUptime(d.a.BREATH_OF_FIRE_DEBUFF.id)/this.owner.fightDuration}},{key:"mitigatedHits",get:function(){return this.hitsWithBoF/(this.hitsWithBoF+this.hitsWithoutBoF)}},{key:"suggestionThreshold",get:function(){return{actual:this.mitigatedHits,isLessThan:{minor:.7,average:.6,major:.5},style:"percentage"}}}]),Object(u.a)(a,[{key:"onDamageTaken",value:function(e){if(e.ability.guid!==d.a.STAGGER_TAKEN.id&&!Object(Ae.b)(this.enemies,e)){var t=this.enemies.enemies[e.sourceID];t&&t.hasBuff(d.a.BREATH_OF_FIRE_DEBUFF.id)?this.hitsWithBoF+=1:this.hitsWithoutBoF+=1}}},{key:"suggestions",value:function(e){e(this.suggestionThreshold).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,"Your ",b.a.createElement(W.a,{id:d.a.BREATH_OF_FIRE.id})," usage can be improved. The associated debuff is a key part of our damage mitigation.")).icon(d.a.BREATH_OF_FIRE.icon).actual(M.i18n._({id:"monk.brewmaster.suggestions.breathOfFire.hitsMitigated",defaults:"{0}% of hits mitigated with Breath of Fire",values:{0:Object(p.e)(t)}})).recommended("> ".concat(Object(p.e)(a),"% is recommended"))}))}}]),a}(h.c);je.dependencies={enemies:Ce.a};var Be=je,Ne=a(31),xe=a(21),Pe=a(135),Ge=a(5),Ue=a(207),We=a(28),Me=a(49),Ye=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._totalHealing=0,n.critBonusHealing=0,n._overhealing=0,n._healingByEntityBySpell={},n._currentAbsorbs={},n._lastMaxHp=0,n._nextCFHeal=null,n.addEventListener(m.f.heal.to(h.a),n.onHeal),n.addEventListener(m.f.absorbed.to(h.a),n.onAbsorb),n.addEventListener(m.f.removebuff.to(h.a),n.onRemoveBuff),n}return Object(u.a)(a,[{key:"totalHealing",get:function(){return this._totalHealing}},{key:"hps",get:function(){return this._totalHealing/(this.owner.fightDuration/1e3)}},{key:"bonusCritRatio",get:function(){return 1-this.stats.baseCritPercentage/this.stats.currentCritPercentage}}]),Object(u.a)(a,[{key:"onHeal",value:function(e){if(this._lastMaxHp=e.maxHitPoints?e.maxHitPoints:this._lastMaxHp,e.ability.guid===d.a.CELESTIAL_FORTUNE_HEAL.id){var t=e.amount+(e.absorbed||0),a=e.overheal||0;return this._totalHealing+=t,this.critBonusHealing+=Math.max(0,t*this.bonusCritRatio),this._overhealing+=a,void this._queueHealing(e)}this._addHealing(e)}},{key:"onAbsorb",value:function(e){if(e.ability.guid!==d.a.STAGGER.id){this._currentAbsorbs[e.sourceID]||(this._currentAbsorbs[e.sourceID]={});var t=this._currentAbsorbs[e.sourceID];t[e.ability.guid]=t[e.ability.guid]?t[e.ability.guid]+e.amount:e.amount}}},{key:"onRemoveBuff",value:function(e){if(this._currentAbsorbs[e.sourceID]){var t=this._currentAbsorbs[e.sourceID];t[e.ability.guid]&&(this._addAbsorb(t[e.ability.guid],e),t[e.ability.guid]=void 0)}}},{key:"_queueHealing",value:function(e){null!==this._nextCFHeal&&console.warn("Resetting CF healing",e),this._nextCFHeal=e}},{key:"_initHealing",value:function(e,t,a){this._healingByEntityBySpell[e]||(this._healingByEntityBySpell[e]={_totalHealing:0}),this._healingByEntityBySpell[e][t]||(this._healingByEntityBySpell[e][t]={amount:0,absorb:a})}},{key:"_addHealing",value:function(e){if(null!==this._nextCFHeal){var t=this._nextCFHeal.amount+(this._nextCFHeal.overheal||0),a=e.amount+(e.overheal||0);Math.abs(t-.65*a)>.1*a&&a>100&&console.warn("Potential CF misalignment",e,this._nextCFHeal);var n=e.ability.guid,i=e.sourceID;this._initHealing(i,n,!1),this._healingByEntityBySpell[i][n].amount+=this._nextCFHeal.amount,this._healingByEntityBySpell[i]._totalHealing+=this._nextCFHeal.amount,this._nextCFHeal=null}}},{key:"_addAbsorb",value:function(e,t){var a=this.stats.currentCritPercentage,n=t.sourceID,i=t.ability.guid;this._initHealing(n,i,!0);var s=(e+t.absorb)*a/(1+a),r=Math.max(0,s-t.absorb);this._healingByEntityBySpell[n][i].amount+=r,this._healingByEntityBySpell[n]._totalHealing+=r,this._totalHealing+=r,this.critBonusHealing+=r*this.bonusCritRatio}},{key:"statistic",value:function(){return b.a.createElement(v.a,{size:"flexible",position:_.a.OPTIONAL()},b.a.createElement(y.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{id:d.a.CELESTIAL_FORTUNE_HEAL.id})," Celestial Fortune Healing")},b.a.createElement(b.a.Fragment,null,Object(p.d)(this.hps)," HPS")))}},{key:"entries",value:function(){var e=this;function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{float:"left"},a=this.combatants.players[e];if(!a)return"";var n=Ge.a[a.specId],i=n.className.replace(" ","");return b.a.createElement("span",{style:t,className:i},b.a.createElement(Ue.a,{id:n.id})," ".concat(a.name))}var a=Object.entries(this._healingByEntityBySpell).sort((function(e,t){var a=Object(Ne.a)(e,2),n=(a[0],a[1]),i=Object(Ne.a)(t,2);i[0];return i[1]._totalHealing-n._totalHealing})).map((function(a){var n=Object(Ne.a)(a,2),i=n[0],s=n[1],r=Object.entries(s).filter((function(t){var a=Object(Ne.a)(t,2);a[0];return a[1].amount>.01*e._lastMaxHp})).sort((function(e,t){var a=Object(Ne.a)(e,2),n=(a[0],a[1]),i=Object(Ne.a)(t,2);i[0];return i[1].amount-n.amount}));return 0===r.length?null:b.a.createElement("tbody",{key:i},b.a.createElement("tr",null,b.a.createElement("th",{style:{width:"20%"}},t.call(e,i)),b.a.createElement("th",{style:{width:"20%"}},"Spell"),b.a.createElement("th",{style:{width:"10%"}},"HPS"),b.a.createElement("th",null,"Fraction of CF Healing"),b.a.createElement("th",null)),r.filter((function(e){var t=Object(Ne.a)(e,2),a=t[0];t[1];return"_totalHealing"!==a})).map((function(t){var a=Object(Ne.a)(t,2),n=a[0],i=a[1],s=i.absorb,r=i.amount;return b.a.createElement("tr",{key:n},b.a.createElement("td",null),b.a.createElement("td",null,b.a.createElement(W.a,{id:Number(n),icon:!1},d.a[n]?b.a.createElement(b.a.Fragment,null,b.a.createElement(We.a,{icon:d.a[n].icon})," ",d.a[n].name):xe.a[n]?b.a.createElement(b.a.Fragment,null,b.a.createElement(Pe.a,{id:xe.a[n]})," ",xe.a[n].name):n)),b.a.createElement("td",null,s?"\u2248":"","".concat(Object(p.d)(r/(e.owner.fightDuration/1e3))," HPS")),b.a.createElement("td",{style:{width:"20%"}},b.a.createElement("div",{className:"flex performance-bar-container"},b.a.createElement("div",{className:"flex-sub performance-bar",style:{width:"".concat(r/e._totalHealing*100,"%"),backgroundColor:"#70b570"}}))),b.a.createElement("td",{className:"text-left"},"".concat((r/e._totalHealing*100).toFixed(2),"%")))})),b.a.createElement("tr",null,b.a.createElement("td",null),b.a.createElement("td",null,"Total from ",t.call(e,i,{})),b.a.createElement("td",null,"".concat(Object(p.d)(s._totalHealing/(e.owner.fightDuration/1e3))," HPS")),b.a.createElement("td",{style:{width:"20%"}},b.a.createElement("div",{className:"flex performance-bar-container"},b.a.createElement("div",{className:"flex-sub performance-bar",style:{width:"".concat(s._totalHealing/e._totalHealing*100,"%"),backgroundColor:"#ff8000"}}))),b.a.createElement("td",{className:"text-left"},"".concat((s._totalHealing/e._totalHealing*100).toFixed(2),"%"))))}));return a}},{key:"tab",value:function(){var e=this;return{title:"Celestial Fortune",url:"celestial-fortune",render:function(){return b.a.createElement(Me.a,null,b.a.createElement("div",{style:{marginTop:-10,marginBottom:-10}},b.a.createElement("div",{style:{padding:"1em"}},"Bonus healing provided by ",b.a.createElement(W.a,{id:d.a.CELESTIAL_FORTUNE_HEAL.id}),", broken down by triggering spell and which player cast that spell."),b.a.createElement("table",{className:"data-table",style:{marginTop:10,marginBottom:10}},e.entries())))}}}}]),a}(h.c);Ye.dependencies={stats:te.a,combatants:be.a};var Ke=Ye,qe=a(108),Ve=a(768),ze=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"normalize",value:function(e){return e.map((function(e){return e.type===m.b.Cast&&K.includes(e.ability.guid)&&(e.type="orb-generated",e.__modified=!0),e}))}}]),a}(Ve.a),Xe=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).totalHealing=0,e.agiBonusHealing=0,e.wdpsBonusHealing=0,e._baseAgiHealing=0,e.masteryBonusHealing=0,e._wdps=0,e.orbsGenerated=0,e.orbsConsumed=0,e.expelHarmCasts=0,e.expelHarmOrbsConsumed=0,e.expelHarmOverhealing=0,e._lastEHTimestamp=null,e.addEventListener("orb-generated",e._orbGenerated),e.addEventListener(m.f.cast.by(h.a).spell(d.a.EXPEL_HARM),e._expelCast),e.addEventListener(m.f.heal.by(h.a).spell(Y),e._gotoxHeal),e._wdps=Object(qe.a)(310,122.8,e.selectedCombatant.mainHand.itemLevel),e}return Object(u.a)(a,[{key:"_orbGenerated",value:function(e){this.orbsGenerated+=1}},{key:"_expelCast",value:function(e){this.expelHarmCasts+=1,this._lastEHTimestamp=e.timestamp}},{key:"_gotoxHeal",value:function(e){this.orbsConsumed+=1;var t=e.amount+(e.absorbed||0);this.totalHealing+=t;var a=6*this._wdps+this.stats.currentAgilityRating;this.agiBonusHealing+=t*(this.stats.currentAgilityRating-1468)/a,this.wdpsBonusHealing+=6*t*this._wdps/a,this._baseAgiHealing+=1468*t/a,this.masteryBonusHealing+=t*(this.stats.currentMasteryPercentage-this.stats.masteryPercentage(0,!0))/(1+this.stats.currentMasteryPercentage),e.timestamp===this._lastEHTimestamp&&(this.expelHarmOrbsConsumed+=1,this.expelHarmOverhealing+=e.overheal||0)}},{key:"statistic",value:function(){return b.a.createElement(v.a,{size:"flexible",position:_.a.OPTIONAL(),tooltip:b.a.createElement(b.a.Fragment,null,"You generated ",Object(p.d)(this.orbsGenerated)," healing spheres and consumed ",Object(p.d)(this.orbsConsumed)," of them, healing for ",b.a.createElement("b",null,Object(p.d)(this.totalHealing)),".",b.a.createElement("br",null),Object(p.d)(this.expelHarmOrbsConsumed)," of these were consumed with Expel Harm over ",Object(p.d)(this.expelHarmCasts)," casts.")},b.a.createElement(y.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(T.a,{id:Y[0].id})," Gift of the Ox Healing")},b.a.createElement(b.a.Fragment,null,Object(p.d)(this.totalHealing/(this.owner.fightDuration/1e3))," HPS")))}}]),a}(h.c);Xe.dependencies={stats:te.a};var Je=a(916),Ze=a(750),Qe=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).statisticOrder=Ze.a.CORE(10),e}return Object(u.a)(a,[{key:"suggestions",value:function(e){e(this.totalTimeWasted/this.owner.fightDuration).isGreaterThan(.2).addSuggestion((function(e,t,a){return e("Your downtime can be improved. Try to Always Be Casting (ABC).").icon("spell_mage_altertime").actual(M.i18n._({id:"monk.brewmaster.suggestions.alwaysBeCasting.downtime",defaults:"{0}% downtime",values:{0:Object(p.e)(t)}})).recommended("<".concat(Object(p.e)(a),"% is recommended")).regular(a+.05).major(a+.15)}))}}]),a}(a(780).a),$e=a(26),et=a(788),tt=a(779),at=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e))._hpEvents=[],n._staggerEvents=[],n._deathEvents=[],n._purifyEvents=[],n._lastHp=null,n._lastMaxHp=null,n.addEventListener(m.f.death.to(h.a),n._death),n.addEventListener(m.f.damage.to(h.a),n._damage),n.addEventListener(m.f.heal.to(h.a),n._heal),n.addEventListener(m.b.AddStagger,n._addstagger),n.addEventListener(m.b.RemoveStagger,n._removestagger),n}return Object(u.a)(a,[{key:"_addstagger",value:function(e){this._staggerEvents.push(Object(A.a)(Object(A.a)({},e),{},{hitPoints:this._lastHp,maxHitPoints:this._lastMaxHp}))}},{key:"_removestagger",value:function(e){e.trigger.ability&&e.trigger.ability.guid===d.a.PURIFYING_BREW.id&&this._purifyEvents.push(Object(A.a)(Object(A.a)({},e),{},{previousTimestamp:this._staggerEvents[this._staggerEvents.length-1].timestamp})),this._staggerEvents.push(Object(A.a)(Object(A.a)({},e),{},{hitPoints:this._lastHp,maxHitPoints:this._lastMaxHp}))}},{key:"_death",value:function(e){this._deathEvents.push(e)}},{key:"_damage",value:function(e){this._hpEvents.push(e),this._lastHp=e.hitPoints?e.hitPoints:this._lastHp,this._lastMaxHp=e.maxHitPoints?e.maxHitPoints:this._lastMaxHp}},{key:"_heal",value:function(e){this._hpEvents.push(e),this._lastHp=e.hitPoints?e.hitPoints:this._lastHp,this._lastMaxHp=e.maxHitPoints?e.maxHitPoints:this._lastMaxHp}},{key:"tab",value:function(){var e=this;return{title:"Stagger",url:"stagger",render:function(){return b.a.createElement(Me.a,{title:"Stagger",explanation:b.a.createElement(b.a.Fragment,null,"Damage you take is placed into a ",b.a.createElement("em",null,"pool")," by ",b.a.createElement(W.a,{id:d.a.STAGGER.id}),". This damage is then removed by the damage-over-time component of ",b.a.createElement(W.a,{id:d.a.STAGGER.id})," or by ",b.a.createElement(W.a,{id:d.a.PURIFYING_BREW.id})," (or other sources of purification). This plot shows the amount of damage pooled over the course of the fight.")},e.plot)}}}},{key:"plot",get:function(){var e=this,t={field:"timestamp_shifted",type:"quantitative",axis:{labelExpr:Object(tt.c)("datum.value"),tickCount:25,grid:!1},scale:{nice:!1},title:null},a={data:{name:"combined"},transform:[{filter:"isValid(datum.newPooledDamage)"},{calculate:"datum.timestamp - ".concat(this.owner.fight.start_time),as:"timestamp_shifted"}],encoding:{x:t,tooltip:[{field:"hitPoints",type:"quantitative",title:"Hit Points",format:".3~s"},{field:"newPooledDamage",type:"quantitative",title:"Staggered Damage",format:".3~s"}]},layer:[{mark:{type:"area",line:{interpolate:"linear",color:"#fab700",strokeWidth:1},color:"rgba(250, 183, 0, 0.15)"},encoding:{y:{field:"newPooledDamage",type:"quantitative",title:null,axis:{grid:!1,format:"~s"}}}},{mark:{type:"area",line:{interpolate:"linear",color:"rgb(255, 139, 45)",strokeWidth:1},color:"rgba(255, 139, 45, 0.15)"},encoding:{y:{field:"hitPoints",type:"quantitative",title:null,axis:{grid:!1,format:"~s"}}}},{mark:{type:"rule",color:"grey"},selection:{hover:{type:"single",empty:"none",on:"mouseover",nearest:!0}},encoding:{color:{condition:{selection:{not:"hover"},value:"transparent"}}}},{data:{name:"purifies"},mark:{type:"point",color:"#00ff96",filled:!0,size:60},transform:[{calculate:"datum.timestamp - ".concat(this.owner.fight.start_time),as:"timestamp_shifted"},{calculate:"datum.newPooledDamage + datum.amount",as:"oldPooledDamage"}],encoding:{x:t,y:{field:"oldPooledDamage",type:"quantitative",title:null},tooltip:[{field:"amount",title:"Amount Purified",format:".3~s"},{field:"oldPooledDamage",type:"quantitative",title:"Staggered Damage",format:".3~s"}]}},{data:{name:"deaths"},mark:{type:"rule",color:"red"},transform:[{calculate:"datum.timestamp - ".concat(this.owner.fight.start_time),as:"timestamp_shifted"}],encoding:{x:t}}]};if(this._staggerEvents.length>0){var n=[{timestamp:this.owner.fight.start_time,newPooledDamage:0,hitPoints:this._hpEvents[0].maxHitPoints}].concat(Object($e.a)(this._staggerEvents),Object($e.a)(this._hpEvents));return b.a.createElement("div",{className:"graph-container",style:{width:"100%",minHeight:200}},b.a.createElement(et.a,null,(function(t){var i=t.width,s=t.height;return b.a.createElement(tt.a,{spec:a,data:{combined:n,purifies:e._purifyEvents,deaths:e._deathEvents},width:i,height:s})})))}return null}}]),a}(h.c);at.dependencies={fab:N};var nt=at;function it(e){return e.type===m.b.Heal&&K.includes(e.ability.guid)}function st(e){return e.type===m.b.Heal&&e.ability.guid===d.a.CELESTIAL_FORTUNE_HEAL.id}var rt=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"normalize",value:function(e){return e.forEach((function(t,a){if(t.type===m.b.Cast&&t.ability.guid===d.a.EXPEL_HARM.id){e[a+1].timestamp===t.timestamp&&it(e[a+1])&&console.error("gotox orb after eh");for(var n=a;e[n-1].timestamp>t.timestamp-50&&(it(e[n-1])||st(e[n-1]));)n-=1;var i=n;for(n=a;n>i;n-=1)e[n]=e[n-1];e[i]=t}})),e}}]),a}(Ve.a),lt=a(917),ot=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return a}(o.a);ot.specModules={healingDone:g,healingReceived:O,damageTaken:f,stagger:P,staggerFabricator:N,brewCdr:ue,brews:Q,channeling:ge,globalCooldown:me,arcaneTorrent:[c.a,{castEfficiency:null}],checklist:De,alwaysBeCasting:Qe,abilities:U,staggerPoolGraph:nt,purifyingBrew:Te,celestialBrew:Fe,blackoutCombo:V,kegSmash:ee,tigerPalm:re,rjw:ve,bof:Be,bob:oe,highTolerance:F,cf:Ke,gotox:Xe,shuffle:Re,touchOfDeath:Je.a,gotoxNorm:ze,ehNorm:rt,fallenOrder:lt.a};t.default=ot},748:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(53),r=a(4);t.a=function(e){var t=e.spell,a=e.children,n=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(n||"")},i.a.createElement("label",null,i.a.createElement(s.a,{id:t.id})," ",i.a.createElement(r.a,{id:t.id,icon:!1})),i.a.createElement("div",{className:"value"},a))}},752:function(e,t,a){"use strict";function n(e,t){var a=(e.amount||0)+(e.absorbed||0);return a-a/(1+t)}a.d(t,"a",(function(){return n}))},761:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=function(e){var t=e.label,a=e.children,n=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(n||"")},i.a.createElement("label",null,t),i.a.createElement("div",{className:"value"},a))}},762:function(e,t,a){"use strict";a.d(t,"b",(function(){return E})),a.d(t,"a",(function(){return f}));var n=a(7),i=a(26),s=a(31),r=a(0),l=a.n(r),o=a(821),c=a(124),u=a(822),d=a(795);function h(e){var t=Object(i.a)(e);t.sort((function(e,t){return e-t}));var a=Math.floor(t.length/2);return t.length%2?t[a]:(t[a-1]+t[a])/2}function m(e){return e.reduce((function(e,t){return e+t}),0)/e.length}function g(e){return e.length/e.reduce((function(e,t){return e+1/t}),0)}var f,E=l.a.createContext((function(e){}));!function(e){e.DEFAULT="DEFAULT",e.MEDIAN="MEDIAN",e.AVERAGE="AVERAGE",e.LOWEST="LOWEST",e.FIRST="FIRST",e.HARMONIC="HARMONIC"}(f||(f={}));t.c=function(e){var t=Object(r.useState)({requirementPerformances:[],performance:1,passed:!0,expanded:!1}),a=Object(s.a)(t,2),b=a[0],p=a[1],_=Object(r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.DEFAULT;switch(t){case f.DEFAULT:return Math.min(h(e),m(e));case f.MEDIAN:return h(e);case f.AVERAGE:return m(e);case f.LOWEST:return Math.min.apply(Math,Object(i.a)(e));case f.FIRST:return e[0];case f.HARMONIC:return g(e);default:throw new Error("Unknown style: ".concat(t))}}),[]),v=e.name,y=e.children,O=e.description;if(!y||Array.isArray(y)&&!y.some((function(e){return!(!l.a.isValidElement(e)||!(null===e||void 0===e?void 0:e.props))})))return null;return l.a.createElement(E.Provider,{value:function(t){p((function(a){var n=[].concat(Object(i.a)(a.requirementPerformances),[t]),s=n.length>0?_(n,e.performanceMethod):1,r=s>.666;return{requirementPerformances:n,performance:s,passed:r,expanded:!r}}))}},l.a.createElement(u.a,{element:"li",className:b.passed?"passed":"failed",inverseExpanded:function(){p((function(e){return Object(n.a)(Object(n.a)({},e),{},{expanded:!e.expanded})}))},expanded:b.expanded,header:l.a.createElement("div",{className:"flex wrapable"},l.a.createElement("div",{className:"flex-main name"},v),l.a.createElement("div",{className:"flex-sub perf"},l.a.createElement("div",{className:"perf-container"},l.a.createElement("div",{className:"perf-bar",style:{width:"".concat(100*b.performance,"%"),backgroundColor:Object(d.a)(b.performance)}}))),l.a.createElement("div",{className:"flex-sub chevron"},l.a.createElement("div",null,l.a.createElement(o.a,null))))},O&&l.a.createElement("div",{className:"row text-muted description"},l.a.createElement(c.a,null),l.a.createElement("div",{className:"col-md-12"},O)),l.a.createElement("div",{className:"row"},y)))}},763:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(6),o=a(0),c=a.n(o),u=a(124),d=a(33),h=a(22),m=a(795),g=a(164);var f=a(762),E=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),i=t.call(this,e),e.setPerformance(i.performance),i}return Object(i.a)(a,[{key:"formatThresholdsActual",value:function(e){switch(e.style){case g.a.PERCENTAGE:return"".concat(Object(d.e)(e.actual),"%");case g.a.NUMBER:return"".concat(Object(d.d)(e.actual));case g.a.THOUSANDS:return"".concat(Object(d.f)(e.actual));case g.a.DECIMAL:return"".concat(e.actual.toFixed(2));case g.a.BOOLEAN:return e.actual?c.a.createElement(l.Trans,{id:"common.yes"}):c.a.createElement(l.Trans,{id:"common.no"});case g.a.SECONDS:return"".concat(e.actual.toFixed(2),"s");default:throw new Error("Unknown style: ".concat(e.style))}}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.thresholds,n=e.tooltip,i=e.valueTooltip,s=e.prefix,r=e.suffix,l=this.performance,o=void 0,d=a;void 0!==d.max&&(o="/ ".concat(d.max));var g=c.a.createElement(c.a.Fragment,null,s," ",this.formatThresholdsActual(a)," ",o," ",r);return c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"flex-main"},t),n&&c.a.createElement("div",{className:"flex-sub",style:{marginLeft:10}},c.a.createElement(h.b,{content:n},c.a.createElement("div",null,c.a.createElement(u.a,null)))),c.a.createElement("div",{className:"flex-sub content-middle text-muted",style:{minWidth:55,marginLeft:5,marginRight:10}},c.a.createElement("div",{className:"text-right",style:{width:"100%"}},i?c.a.createElement(h.a,{content:i},g):g)),c.a.createElement("div",{className:"flex-sub content-middle",style:{width:50}},c.a.createElement("div",{className:"performance-bar-container"},c.a.createElement("div",{className:"performance-bar small",style:{width:"".concat(100*l,"%"),transition:"background-color 800ms",backgroundColor:Object(m.a)(l)}})))))}},{key:"performance",get:function(){return function(e){if(e.isGreaterThan)return"object"===typeof e.isGreaterThan?function(e,t){var a=t.minor,n=t.average,i=t.major;return e>i?.333*i/e:e>n?.666-(e-n)/(i-n)*.333:e>a?1-(e-a)/(n-a)*.333:1}(e.actual,e.isGreaterThan):e.isGreaterThan/e.actual;if(e.isLessThan)return"object"===typeof e.isLessThan?function(e,t){var a=t.minor,n=t.average,i=t.major;return e<i?.333*e/i:e<n?.333+(e-i)/(n-i)*.333:e<a?.666+(e-n)/(a-n)*.333:1}(e.actual,e.isLessThan):e.actual/e.isLessThan;if(void 0!==e.isEqual)return e.actual!==e.isEqual?1:0;throw new Error("Failed to recognize threshold type")}(this.props.thresholds)}}]),a}(c.a.PureComponent);t.a=function(e){return c.a.createElement(f.b.Consumer,null,(function(t){return c.a.createElement(E,Object.assign({},e,{setPerformance:t}))}))}},770:function(e,t,a){"use strict";var n=a(6),i=a(0),s=a.n(i);a(830);t.a=function(e){var t=e.children;return s.a.createElement("ul",{className:"checklist"},!t&&s.a.createElement("li",null,s.a.createElement("div",{className:"alert alert-danger"},s.a.createElement(n.Trans,{id:"shared.checklist.missingChecklist",components:[s.a.createElement("a",{href:"https://github.com/WoWAnalyzer/WoWAnalyzer"}),s.a.createElement("a",{href:"https://discord.gg/AxphPxU"})]}))),t)}},771:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(6),o=a(0),c=a.n(o),u=a(762),d=a(763),h=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"renderPotionRequirements",value:function(){var e=this.props.thresholds;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.combatPotionsUsed"}),thresholds:e.potionsUsed}),c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.highQualityCombatPotionsUsed"}),thresholds:e.bestPotionUsed}))}},{key:"renderEnchantRequirements",value:function(){var e=this.props.thresholds;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.enchanted"}),thresholds:e.itemsEnchanted}),c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.enchantedHigh"}),thresholds:e.itemsBestEnchanted}))}},{key:"renderWeaponEnhancementRequirements",value:function(){var e=this.props.thresholds;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"All weapons enhanced (oils/stones)"}),thresholds:e.weaponsEnhanced}),c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"Using high quality weapon enhancements"}),thresholds:e.bestWeaponEnhancements}))}},{key:"renderFlaskRequirements",value:function(){var e=this.props.thresholds;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.flaskHigh"}),thresholds:e.higherFlaskPresent}),c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.flask"}),thresholds:e.flaskPresent}))}},{key:"renderFoodRequirements",value:function(){var e=this.props.thresholds;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.foodHigh"}),thresholds:e.higherFoodPresent}),c.a.createElement(d.a,{name:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.food"}),thresholds:e.foodPresent}))}},{key:"render",value:function(){var e=this.props.children;return c.a.createElement(u.c,{name:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.wellPrepared"}),description:c.a.createElement(l.Trans,{id:"shared.modules.features.checklist.wellPreparedDetails"})},this.renderEnchantRequirements(),this.renderWeaponEnhancementRequirements(),this.renderPotionRequirements(),this.renderFlaskRequirements(),this.renderFoodRequirements(),e)}}]),a}(c.a.PureComponent);t.a=h},772:function(e,t,a){"use strict";var n=a(27),i=a(8),s=a(9),r=a(10),l=a(11),o=a(0),c=a.n(o),u=a(4),d=a(40),h=a(763),m=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.spell,a=e.name,i=Object(n.a)(e,["spell","name"]),s=this.thresholds;return s?c.a.createElement(h.a,Object.assign({name:a||c.a.createElement(u.a,{id:t}),thresholds:s},i)):null}},{key:"thresholds",get:function(){if(!this.props.castEfficiency)return Object(d.a)(new Error("GenericCastEfficiencyRequirement requires that you pass the castEfficiency object yourself. Spell: ".concat(this.props.spell))),null;if(this.props.isMaxCasts){var e=this.props.castEfficiency,t=e.casts,a=e.maxCasts;return{actual:t,max:a,isLessThan:{minor:a,average:a-1,major:a-2},style:"number"}}var n=this.props.castEfficiency,i=n.efficiency;return{actual:n.gotMaxCasts?1:i,isLessThan:{minor:n.recommendedEfficiency,average:n.averageIssueEfficiency,major:n.majorIssueEfficiency},style:"percentage"}}}]),a}(c.a.PureComponent);t.a=m},795:function(e,t,a){"use strict";function n(e){return e>=1?"#4ec04e":e>.666?"#a6c34c":e>.5?"#ffc84a":e>.333?"#df7102":"#ac1f39"}a.d(t,"a",(function(){return n}))},798:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=c(a(0)),l=c(a(37)),o=c(a(395));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"},h=["animateOpacity","animationStateClasses","applyInlineTransitions","children","contentClassName","delay","duration","easing","height","onAnimationEnd","onAnimationStart"];function m(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];if(!a.length)return e;for(var i={},s=Object.keys(e),r=0;r<s.length;r++){var l=s[r];-1===a.indexOf(l)&&(i[l]=e[l])}return i}function g(e){e.forEach((function(e){return cancelAnimationFrame(e)}))}function f(e){return!isNaN(parseFloat(e))&&isFinite(e)}function E(e){return"string"===typeof e&&e.search("%")===e.length-1&&f(e.substr(0,e.length-1))}function b(e,t){e&&"function"===typeof e&&e(t)}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.animationFrameIDs=[];var n="auto",s="visible";f(e.height)?(n=e.height<0||"0"===e.height?0:e.height,s="hidden"):E(e.height)&&(n="0%"===e.height?0:e.height,s="hidden"),a.animationStateClasses=i({},d,e.animationStateClasses);var r=a.getStaticStateClasses(n);return a.state={animationStateClasses:r,height:n,overflow:s,shouldUseTransitions:!1},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.state.height;this.contentElement&&this.contentElement.style&&this.hideContent(e)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props,i=n.delay,s=n.duration,r=n.height,l=n.onAnimationEnd,c=n.onAnimationStart;if(this.contentElement&&r!==e.height){var d;this.showContent(t.height),this.contentElement.style.overflow="hidden";var h=this.contentElement.offsetHeight;this.contentElement.style.overflow="";var m=s+i,p=null,_={height:null,overflow:"hidden"},v="auto"===t.height;f(r)?(p=r<0||"0"===r?0:r,_.height=p):E(r)?(p="0%"===r?0:r,_.height=p):(p=h,_.height="auto",_.overflow=null),v&&(_.height=p,p=h);var y=(0,o.default)((u(d={},this.animationStateClasses.animating,!0),u(d,this.animationStateClasses.animatingUp,"auto"===e.height||r<e.height),u(d,this.animationStateClasses.animatingDown,"auto"===r||r>e.height),u(d,this.animationStateClasses.animatingToHeightZero,0===_.height),u(d,this.animationStateClasses.animatingToHeightAuto,"auto"===_.height),u(d,this.animationStateClasses.animatingToHeightSpecific,_.height>0),d)),O=this.getStaticStateClasses(_.height);this.setState({animationStateClasses:y,height:p,overflow:"hidden",shouldUseTransitions:!v}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),v?(_.shouldUseTransitions=!0,g(this.animationFrameIDs),this.animationFrameIDs=function(e){var t=[];return t[0]=requestAnimationFrame((function(){t[1]=requestAnimationFrame((function(){e()}))})),t}((function(){a.setState(_),b(c,{newHeight:_.height})})),this.animationClassesTimeoutID=setTimeout((function(){a.setState({animationStateClasses:O,shouldUseTransitions:!1}),a.hideContent(_.height),b(l,{newHeight:_.height})}),m)):(b(c,{newHeight:p}),this.timeoutID=setTimeout((function(){_.animationStateClasses=O,_.shouldUseTransitions=!1,a.setState(_),"auto"!==r&&a.hideContent(p),b(l,{newHeight:p})}),m))}}},{key:"componentWillUnmount",value:function(){g(this.animationFrameIDs),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),this.timeoutID=null,this.animationClassesTimeoutID=null,this.animationStateClasses=null}},{key:"showContent",value:function(e){0===e&&(this.contentElement.style.display="")}},{key:"hideContent",value:function(e){0===e&&(this.contentElement.style.display="none")}},{key:"getStaticStateClasses",value:function(e){var t;return(0,o.default)((u(t={},this.animationStateClasses.static,!0),u(t,this.animationStateClasses.staticHeightZero,0===e),u(t,this.animationStateClasses.staticHeightSpecific,e>0),u(t,this.animationStateClasses.staticHeightAuto,"auto"===e),t))}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.animateOpacity,s=a.applyInlineTransitions,l=a.children,c=a.className,d=a.contentClassName,g=a.delay,f=a.duration,E=a.easing,b=a.id,p=a.style,_=this.state,v=_.height,y=_.overflow,O=_.animationStateClasses,T=_.shouldUseTransitions,C=i({},p,{height:v,overflow:y||p.overflow});T&&s&&(C.transition="height "+f+"ms "+E+" "+g+"ms",p.transition&&(C.transition=p.transition+", "+C.transition),C.WebkitTransition=C.transition);var A={};n&&(A.transition="opacity "+f+"ms "+E+" "+g+"ms",A.WebkitTransition=A.transition,0===v&&(A.opacity=0));var R=(0,o.default)((u(e={},O,!0),u(e,c,c),e)),L="undefined"!==typeof this.props["aria-hidden"]?this.props["aria-hidden"]:0===v;return r.default.createElement("div",i({},m.apply(void 0,[this.props].concat(h)),{"aria-hidden":L,className:R,id:b,style:C}),r.default.createElement("div",{className:d,style:A,ref:function(e){return t.contentElement=e}},l))}}]),t}(r.default.Component);p.propTypes={"aria-hidden":l.default.bool,animateOpacity:l.default.bool,animationStateClasses:l.default.object,applyInlineTransitions:l.default.bool,children:l.default.any.isRequired,className:l.default.string,contentClassName:l.default.string,delay:l.default.number,duration:l.default.number,easing:l.default.string,height:function(e,t,a){var i=e[t];return"number"===typeof i&&i>=0||E(i)||"auto"===i?null:new TypeError('value "'+i+'" of type "'+("undefined"===typeof i?"undefined":n(i))+'" is invalid type for '+t+" in "+a+'. It needs to be a positive number, string "auto" or percentage string (e.g. "15%").')},id:l.default.string,onAnimationEnd:l.default.func,onAnimationStart:l.default.func,style:l.default.object},p.defaultProps={animateOpacity:!1,animationStateClasses:d,applyInlineTransitions:!0,duration:250,delay:0,easing:"ease",style:{}},t.default=p},816:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(15),o=a(43),c=(a(33),a(752)),u=a(754),d=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).spellUsable=void 0,i.inExecuteWindow=!1,i.inHealthExecuteWindow=!1,i.executeWindowStart=0,i.lastExecuteHitTimestamp=0,i.totalExecuteWindowDuration=0,i.damage=0,i.casts=0,i.castsWithExecute=0,i.addEventListener(l.f.damage.by(i.executeSources),i.onGeneralDamage),i.addEventListener(l.f.cast.by(i.executeSources).spell(i.executeSpells),i.onExecuteCast),i.addEventListener(l.f.damage.by(i.executeSources).spell(i.executeSpells),i.onExecuteDamage),i.addEventListener(l.f.applybuff.to(i.executeSources).spell(i.executeOutsideRangeEnablers),i.applyExecuteEnablerBuff),i.addEventListener(l.f.removebuff.to(i.executeSources).spell(i.executeOutsideRangeEnablers),i.removeExecuteEnablerBuff),i.addEventListener(l.f.fightend,i.onFightEnd),i}return Object(i.a)(a,[{key:"isTargetInExecuteRange",value:function(e){return!(!e.hitPoints||!e.maxHitPoints)&&e.hitPoints/e.maxHitPoints<this.lowerThreshold}},{key:"isTargetInReverseExecuteRange",value:function(e){return!(!e.hitPoints||!e.maxHitPoints)&&e.hitPoints/e.maxHitPoints>this.upperThreshold}},{key:"isTargetInHealthExecuteWindow",value:function(e){return!(!e.hitPoints||!e.maxHitPoints)&&(this.isTargetInExecuteRange(e)||this.isTargetInReverseExecuteRange(e))}},{key:"isExecuteUsableOutsideExecuteRange",get:function(){var e=this,t=!1;return this.executeOutsideRangeEnablers.forEach((function(a){e.selectedCombatant.hasBuff(a.id)&&(t=!0)})),t}},{key:"areExecuteSpellsOnCD",get:function(){var e=this,t=!0;return this.executeSpells.forEach((function(a){e.spellUsable.isOnCooldown(a.id)||(t=!1)})),t}}]),Object(i.a)(a,[{key:"onGeneralDamage",value:function(e){e.targetIsFriendly||(this.areExecuteSpellsOnCD||this.isExecuteUsableOutsideExecuteRange||this.isTargetInHealthExecuteWindow(e)?(this.lastExecuteHitTimestamp=e.timestamp,this.inExecuteWindow||(this.inExecuteWindow=!0,this.inHealthExecuteWindow=!0,this.executeWindowStart=e.timestamp)):this.inExecuteWindow&&e.timestamp>this.lastExecuteHitTimestamp+500&&(this.inExecuteWindow=!1,this.inHealthExecuteWindow=!1,this.totalExecuteWindowDuration+=e.timestamp-this.executeWindowStart))}},{key:"onExecuteCast",value:function(){this.casts+=1,(this.inExecuteWindow||this.inHealthExecuteWindow)&&(this.castsWithExecute+=1)}},{key:"onExecuteDamage",value:function(e){(this.inExecuteWindow||this.inHealthExecuteWindow)&&(this.modifiesDamage?this.damage+=Object(c.a)(e,this.damageModifier):this.damage+=e.amount+(e.absorbed||0))}},{key:"applyExecuteEnablerBuff",value:function(e){this.inExecuteWindow||this.inHealthExecuteWindow||(this.executeWindowStart=e.timestamp),this.inExecuteWindow=!0,this.lastExecuteHitTimestamp=e.timestamp}},{key:"removeExecuteEnablerBuff",value:function(e){this.inHealthExecuteWindow||(this.inExecuteWindow=!1,this.totalExecuteWindowDuration+=e.timestamp-this.executeWindowStart)}},{key:"onFightEnd",value:function(e){this.inExecuteWindow&&(this.totalExecuteWindowDuration+=e.timestamp-this.executeWindowStart,this.inExecuteWindow=!1)}},{key:"executeSources",get:function(){return this.constructor.executeSources}},{key:"executeSpells",get:function(){return this.constructor.executeSpells}},{key:"executeOutsideRangeEnablers",get:function(){return this.constructor.executeOutsideRangeEnablers}},{key:"lowerThreshold",get:function(){return this.constructor.lowerThreshold}},{key:"upperThreshold",get:function(){return this.constructor.upperThreshold}},{key:"modifiesDamage",get:function(){return this.constructor.modifiesDamage}},{key:"damageModifier",get:function(){return this.constructor.damageModifier}},{key:"executeDamage",get:function(){return this.damage}},{key:"totalExecuteDuration",get:function(){return this.totalExecuteWindowDuration}},{key:"totalCasts",get:function(){return this.casts}},{key:"totalExecuteCasts",get:function(){return this.castsWithExecute}}]),a}(o.c);d.dependencies={spellUsable:u.b},d.executeSpells=[],d.executeSources=void 0,d.executeOutsideRangeEnablers=[],d.lowerThreshold=void 0,d.upperThreshold=void 0,d.modifiesDamage=void 0,d.damageModifier=void 0,t.a=d},821:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=function(e){var t=Object.assign({},e);return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 9",className:"icon"},t),i.a.createElement("path",{d:"M14.0059397,2.26485497e-14 C15.1072288,2.26485497e-14 15.3722573,0.627746582 14.5881847,1.41182411 L8.70999225,7.29005337 C8.317902,7.68214607 7.67653023,7.6764822 7.29009898,7.29005337 L1.41183294,1.41182411 C0.632099139,0.632095183 0.894513756,2.26485497e-14 1.99406028,2.26485497e-14 L14.0059397,2.26485497e-14 Z"}))}},822:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return c}));var n=a(31),i=a(0),s=a.n(i),r=a(798),l=a.n(r),o=(a(823),function(e){var t=Object(i.useState)(!1),a=Object(n.a)(t,2),r=a[0],o=a[1],c=e.header,u=e.children,d=e.element,h=e.className;return s.a.createElement(d,{className:"expandable ".concat(r?"expanded":""," ").concat(h||"")},s.a.createElement("div",{className:"meta",onClick:function(){o((function(e){return!e}))}},c),s.a.createElement(l.a,{className:"details",height:r?"auto":0},u))}),c=function(e){var t=e.header,a=e.children,n=e.element,i=e.className;return s.a.createElement(n,{className:"expandable ".concat(e.expanded?"expanded":""," ").concat(i||"")},s.a.createElement("div",{className:"meta",onClick:e.inverseExpanded},t),s.a.createElement(l.a,{className:"details",height:e.expanded?"auto":0},a))}},823:function(e,t,a){},830:function(e,t,a){},916:function(e,t,a){"use strict";var n=a(7),i=a(8),s=a(9),r=a(120),l=a(66),o=a(10),c=a(11),u=a(43),d=a(753),h=a(3),m=a(15),g=a(816),f=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).maxCasts=0,n.cooldown=18e5,n.addEventListener(m.f.fightend,n.adjustMaxCasts),e.abilities.add({spell:h.a.TOUCH_OF_DEATH,category:d.a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{static:1e3},castEfficiency:{suggestion:!0,recommendedEfficiency:.85,maxCasts:function(){return n.maxCasts||0}}}),n}return Object(s.a)(a,[{key:"adjustMaxCasts",value:function(e){Object(r.a)(Object(l.a)(a.prototype),"onFightEnd",this).call(this,e),this.maxCasts+=Math.ceil(this.totalExecuteDuration/this.cooldown)}}]),a}(g.a);f.executeSpells=[h.a.TOUCH_OF_DEATH],f.executeSources=u.a,f.lowerThreshold=.15,f.executeOutsideRangeEnablers=[],f.modifiesDamage=!1,f.dependencies=Object(n.a)(Object(n.a)({},g.a.dependencies),{},{abilities:d.a}),t.a=f},917:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(119),r=a(10),l=a(11),o=a(43),c=a(753),u=a(3),d=a(15),h=a(746),m=a(747),g=a(58),f=a(751),E=a(765),b=a(0),p=a.n(b),_=a(748),v=a(33),y=a(121),O=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).windDamage=0,i.brewDamage=0,i.mistDamage=0,i.mistHealing=0,i.mistOverhealing=0,i.cloneMap=new Map,i.abilities=void 0,i.active=i.selectedCombatant.hasCovenant(y.a.VENTHYR.id),i.active?(i.abilities.add({spell:u.a.FALLEN_ORDER_CAST,category:c.a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.8}}),i.addEventListener(d.f.summon.by(o.a).spell([u.a.FALLEN_ORDER_OX_CLONE,u.a.FALLEN_ORDER_TIGER_CLONE,u.a.FALLEN_ORDER_CRANE_CLONE]),i.trackSummons),i.addEventListener(d.f.heal.by(o.b).spell([u.a.FALLEN_ORDER_ENVELOPING_MIST,u.a.FALLEN_ORDER_SOOTHING_MIST]),i.mistHealingTracker),i.addEventListener(d.f.damage.by(o.b).spell([u.a.FALLEN_ORDER_KEG_SMASH,u.a.FALLEN_ORDER_BREATH_OF_FIRE,u.a.BREATH_OF_FIRE_DEBUFF]),i.brewDamageTracker),i.addEventListener(d.f.damage.by(o.b).spell([u.a.FALLEN_ORDER_SPINNING_CRANE_KICK,u.a.FISTS_OF_FURY_DAMAGE]),i.windDamageTracker),i.addEventListener(d.f.damage.by(o.b).spell(u.a.MELEE),i.handleMelee),i):Object(s.a)(i)}return Object(i.a)(a,[{key:"trackSummons",value:function(e){this.cloneMap.set(e.targetID,e.ability.guid)}},{key:"mistHealingTracker",value:function(e){this.mistHealing+=(e.amount||0)+(e.absorbed||0),this.mistOverhealing+=e.overheal||0}},{key:"brewDamageTracker",value:function(e){this.brewDamage+=e.amount||0}},{key:"windDamageTracker",value:function(e){this.windDamage+=e.amount||0}},{key:"mistDamageTracker",value:function(e){this.mistDamage+=e.amount||0}},{key:"handleMelee",value:function(e){if(e.sourceID){var t=e.sourceID,a=this.cloneMap.get(t);void 0!==a&&(a===u.a.FALLEN_ORDER_OX_CLONE.id?this.brewDamageTracker(e):a===u.a.FALLEN_ORDER_TIGER_CLONE.id?this.windDamageTracker(e):this.mistDamageTracker(e))}}},{key:"statistic",value:function(){var e=this.brewDamage+this.mistDamage+this.windDamage;return p.a.createElement(h.a,{position:m.a.CORE(),size:"flexible",category:g.a.COVENANTS,tooltip:p.a.createElement(p.a.Fragment,null,p.a.createElement("ul",null,p.a.createElement("li",null,"Damage from Brewmaster clones: ",Object(v.d)(this.brewDamage)),p.a.createElement("li",null,"Damage from Mistweaver clones: ",Object(v.d)(this.mistDamage)),p.a.createElement("li",null,"Damage from Windwalker clones: ",Object(v.d)(this.windDamage))))},p.a.createElement(_.a,{spell:u.a.FALLEN_ORDER_CAST},p.a.createElement(E.a,{amount:this.mistHealing}),p.a.createElement("br",null),p.a.createElement(f.a,{amount:e})))}}]),a}(o.c);O.dependencies={abilities:c.a},t.a=O},923:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r}));var n=a(826),i=[];function s(e){return e.ability.type!==n.a.ids.PHYSICAL}function r(e,t){return!function(e,t){return!t.sourceIsFriendly&&void 0!==t.sourceID&&void 0!==e.getEntities()[t.sourceID]}(e,t)||i.includes(t.ability.guid)}}}]);
//# sourceMappingURL=BrewmasterMonk.1e5e1509.chunk.js.map