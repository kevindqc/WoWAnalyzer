(this.webpackJsonpwowanalyzer=this.webpackJsonpwowanalyzer||[]).push([[43],{737:function(e,t,a){"use strict";a.r(t);var n=a(8),i=a(10),s=a(11),l=a(776),r=a(815),c=a(12),o=a(7),d=a(3),u=a(800),h=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(u.a);h.HASTE_BUFFS=Object(o.a)(Object(o.a)({},u.a.HASTE_BUFFS),{},Object(c.a)({},d.a.INTO_THE_FRAY_BUFF.id,{hastePerStack:.03}));var m=h,g=a(9),f=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"spellbook",value:function(){var e=this.selectedCombatant;return[{spell:d.a.DEVASTATE,enabled:!e.hasTalent(d.a.DEVASTATOR_TALENT.id),gcd:{base:1500},category:a.SPELL_CATEGORIES.ROTATIONAL,timelineSortIndex:3},{spell:d.a.WHIRLWIND,category:a.SPELL_CATEGORIES.ROTATIONAL_AOE,gcd:{base:1500}},{spell:d.a.SHATTERING_THROW,gcd:{base:1500},cooldown:180,category:a.SPELL_CATEGORIES.OTHERS,timelineSortIndex:3},{spell:d.a.EXECUTE,gcd:{base:1500},cooldown:function(e){return 6/(1+e)},category:a.SPELL_CATEGORIES.ROTATIONAL,timelineSortIndex:3},{spell:d.a.REVENGE,gcd:{base:1500},buffSpellId:d.a.REVENGE_FREE_CAST.id,cooldown:function(e){return 3/(1+e)},category:a.SPELL_CATEGORIES.ROTATIONAL,timelineSortIndex:3},{spell:d.a.SHIELD_SLAM,gcd:{base:1500},category:a.SPELL_CATEGORIES.ROTATIONAL,buffSpellId:d.a.PUNISH_DEBUFF.id,cooldown:function(e){return 9/(1+e)},timelineSortIndex:1},{spell:d.a.THUNDER_CLAP,gcd:{base:1500},category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:function(t){return e.hasTalent(d.a.UNSTOPPABLE_FORCE_TALENT.id)&&e.hasBuff(d.a.AVATAR_TALENT.id)?3/(1+t):6/(1+t)},castEfficiency:{suggestion:!0,recommendedEfficiency:.9,extraSuggestion:"Casting Thunder Clap regularly is very important for performing well."},timelineSortIndex:2},{spell:d.a.IGNORE_PAIN,category:a.SPELL_CATEGORIES.DEFENSIVE,buffSpellId:d.a.IGNORE_PAIN.id,timelineSortIndex:4},{spell:d.a.SHIELD_BLOCK,buffSpellId:d.a.SHIELD_BLOCK_BUFF.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:function(e){return 16/(1+e)},charges:2,timelineSortIndex:5},{spell:d.a.DEMORALIZING_SHOUT,buffSpellId:d.a.DEMORALIZING_SHOUT.id,category:a.SPELL_CATEGORIES.DEFENSIVE,gcd:{base:1500},cooldown:45,timelineSortIndex:8},{spell:d.a.LAST_STAND,buffSpellId:d.a.LAST_STAND.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:e.hasTalent(d.a.BOLSTER_TALENT.id)?120:180,timelineSortIndex:9},{spell:d.a.SHIELD_WALL,buffSpellId:d.a.SHIELD_WALL.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:240,timelineSortIndex:9},{spell:d.a.SPELL_REFLECTION,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:25},{spell:d.a.HEROIC_LEAP,gcd:{base:1500},category:a.SPELL_CATEGORIES.UTILITY,cooldown:e.hasTalent(d.a.BOUNDING_STRIDE_TALENT.id)?30:45},{spell:d.a.HEROIC_THROW,gcd:{base:1500},category:a.SPELL_CATEGORIES.UTILITY},{spell:d.a.INTERCEPT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:15,charges:2},{spell:d.a.TAUNT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:8},{spell:d.a.BERSERKER_RAGE,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:60,timelineSortIndex:8},{spell:d.a.PUMMEL,category:a.SPELL_CATEGORIES.UTILITY,cooldown:15},{spell:d.a.VICTORY_RUSH,enabled:!e.hasTalent(d.a.IMPENDING_VICTORY_TALENT.id),category:a.SPELL_CATEGORIES.OTHERS},{spell:d.a.STORM_BOLT_TALENT,enabled:e.hasTalent(d.a.STORM_BOLT_TALENT.id),category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},cooldown:30},{spell:d.a.AVATAR_TALENT,buffSpellId:d.a.AVATAR_TALENT.id,category:a.SPELL_CATEGORIES.COOLDOWNS,gcd:{base:1500},cooldown:90,timelineSortIndex:9},{spell:d.a.IMPENDING_VICTORY_TALENT,enabled:e.hasTalent(d.a.IMPENDING_VICTORY_TALENT.id),category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500},cooldown:30},{spell:d.a.RAVAGER_TALENT_PROTECTION,enabled:e.hasTalent(d.a.RAVAGER_TALENT_PROTECTION.id),category:a.SPELL_CATEGORIES.COOLDOWNS,gcd:{base:1500},cooldown:60,castEfficiency:{suggestion:!0,recommendedEfficiency:.9},timelineSortIndex:9},{spell:d.a.DRAGON_ROAR_TALENT,enabled:e.hasTalent(d.a.DRAGON_ROAR_TALENT.id),category:a.SPELL_CATEGORIES.COOLDOWNS,gcd:{base:1500},cooldown:35,timelineSortIndex:9},{spell:d.a.RALLYING_CRY,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},cooldown:180,timelineSortIndex:9}]}}]),a}(a(753).a),E=a(0),b=a.n(E),p=a(33),v=a(780),O=a(13),y=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"suggestions",value:function(e){e(this.totalTimeWasted/this.owner.fightDuration).isGreaterThan(.2).addSuggestion((function(e,t,a){return e(b.a.createElement("span",null," Your downtime can be improved. Try to Always Be Casting (ABC)..")).icon("spell_mage_altertime").actual(O.i18n._({id:"warrior.protection.suggestions.alwaysBeCasting.downtime",defaults:"{0}% downtime",values:{0:Object(p.e)(t)}})).recommended("".concat(Math.round(Number(Object(p.e)(a))),"% is recommended")).regular(a+.05).major(a+.15)}))}}]),a}(v.a),T=a(120),k=a(66),S=a(754),A=a(811),C=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).hasDevastator=void 0,i.lastPotentialTriggerForShieldSlam=null,i.globalCooldown=void 0,i.hasDevastator=i.selectedCombatant.hasTalent(d.a.DEVASTATOR_TALENT.id),i}return Object(g.a)(a,[{key:"onCast",value:function(e){Object(T.a)(Object(k.a)(a.prototype),"onCast",this).call(this,e);var t=e.ability.guid;t===d.a.MELEE.id&&this.hasDevastator?this.lastPotentialTriggerForShieldSlam=e:t===d.a.DEVASTATE.id||t===d.a.THUNDER_CLAP.id||t===d.a.REVENGE.id?(this.lastPotentialTriggerForShieldSlam=Object(o.a)({},e),this.lastPotentialTriggerForShieldSlam.timestamp+=this.globalCooldown.getGlobalCooldownDuration(t)):t===d.a.SHIELD_SLAM.id&&(this.lastPotentialTriggerForShieldSlam=null)}},{key:"beginCooldown",value:function(e,t){e===d.a.SHIELD_SLAM.id&&this.isOnCooldown(e)&&this.endCooldown(e,void 0,this.lastPotentialTriggerForShieldSlam?this.lastPotentialTriggerForShieldSlam.timestamp:void 0),Object(T.a)(Object(k.a)(a.prototype),"beginCooldown",this).call(this,e,t)}}]),a}(S.b);C.dependencies=Object(o.a)(Object(o.a)({},S.b.dependencies),{},{globalCooldown:A.a});var L=C,_=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).buffCheckPhysical=[d.a.SHIELD_BLOCK_BUFF.id],i.buffCheckMagical=[d.a.SPELL_REFLECTION.id],i.buffCheckPhysAndMag=[d.a.IGNORE_PAIN.id,d.a.LAST_STAND.id,d.a.SHIELD_WALL.id],i.debuffCheckPhysAndMag=[d.a.DEMORALIZING_SHOUT.id],i}return a}(a(849).a),R=a(797),I=a(810),j=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"buffs",value:function(){return[{spellId:Object.keys(I.a).map((function(e){return Number(e)})),timelineHighlight:!0},{spellId:d.a.AVATAR_TALENT.id,timelineHighlight:!0},{spellId:d.a.LAST_STAND.id,timelineHighlight:!0},{spellId:d.a.SHIELD_BLOCK_BUFF.id,timelineHighlight:!0},{spellId:d.a.SHIELD_WALL.id,timelineHighlight:!0},{spellId:d.a.SPELL_REFLECTION.id,timelineHighlight:!0}]}}]),a}(R.a),D=a(26),w=a(785),N=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(w.b);N.cooldownSpells=[].concat(Object(D.a)(w.b.cooldownSpells),[{spell:d.a.AVATAR_TALENT,summary:[w.a.DAMAGE]}]);var B=N,P=a(4),H=a(43),F=a(746),M=a(748),G=a(164),U=a(15),x=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).goodCast=0,e.badCast=0,e.bolster=e.selectedCombatant.hasTalent(d.a.BOLSTER_TALENT.id),e.ssNeeded=e.selectedCombatant.hasTalent(d.a.DEVASTATOR_TALENT.id)?1:0,e.shieldBlocksOffensive=[],e.shieldBlocksDefensive=[],e.shieldBlocksOverall=[],e.addEventListener(U.f.cast.by(H.a).spell(d.a.SHIELD_BLOCK),e.onCast),e.addEventListener(U.f.damage.by(H.a),e.onDamage),e.addEventListener(U.f.damage.to(H.a),e.onDamageTaken),e.addEventListener(U.f.fightend,e.onFightend),e}return Object(g.a)(a,[{key:"suggestionThresholds",get:function(){return{actual:this.goodCast/(this.goodCast+this.badCast),isLessThan:{minor:.9,average:.8,major:.7},style:G.a.PERCENTAGE}}}]),Object(g.a)(a,[{key:"onCast",value:function(e){this.shieldBlocksDefensive.length>0&&this.checkLastBlock(),this.shieldBlockCast(e)}},{key:"onDamage",value:function(e){var t=e.ability.guid;this.selectedCombatant.hasBuff(d.a.SHIELD_BLOCK_BUFF.id)&&(0===this.shieldBlocksOffensive.length&&this.shieldBlockCast(e),t===d.a.SHIELD_SLAM.id&&this.shieldSlamCast(e))}},{key:"onDamageTaken",value:function(e){this.selectedCombatant.hasBuff(d.a.SHIELD_BLOCK_BUFF.id)&&(this.selectedCombatant.hasBuff(d.a.LAST_STAND.id)&&this.bolster||(0===this.shieldBlocksDefensive.length&&this.shieldBlockCast(e),e.blocked>0&&(this.shieldBlocksDefensive[this.shieldBlocksDefensive.length-1].blockAbleEvents+=1,this.shieldBlocksDefensive[this.shieldBlocksDefensive.length-1].eventName.add(e.ability.name),this.shieldBlocksDefensive[this.shieldBlocksDefensive.length-1].eventSpellId.add(e.ability.guid)),this.shieldBlocksDefensive[this.shieldBlocksDefensive.length-1].blockedDamage+=e.blocked||0,this.shieldBlocksDefensive[this.shieldBlocksDefensive.length-1].damageTaken+=e.amount+e.absorbed||0,this.shieldBlocksDefensive[this.shieldBlocksDefensive.length-1].blockAbleEvents>1&&(this.shieldBlocksDefensive[this.shieldBlocksDefensive.length-1].good=!0)))}},{key:"shieldBlockCast",value:function(e){var t={shieldBlock:this.shieldBlocksOffensive.length+1,shieldSlamCasts:0,bonusDamage:0,timeStamp:e.timestamp,good:!1,event:e};this.shieldBlocksOffensive.push(t);var a={shieldBlock:this.shieldBlocksDefensive.length+1,blockAbleEvents:0,blockedDamage:0,damageTaken:0,eventName:new Set,eventSpellId:new Set,good:!1};this.shieldBlocksDefensive.push(a)}},{key:"shieldSlamCast",value:function(e){this.shieldBlocksOffensive[this.shieldBlocksOffensive.length-1].shieldSlamCasts+=1,this.shieldBlocksOffensive[this.shieldBlocksOffensive.length-1].shieldSlamCasts>this.ssNeeded&&(this.shieldBlocksOffensive[this.shieldBlocksOffensive.length-1].good=!0);var t=this.shieldBlocksOffensive[this.shieldBlocksOffensive.length-1].bonusDamage||0,a=(e.amount||0)+(e.absorbed||0),n=Math.round(a-a/1.3);this.shieldBlocksOffensive[this.shieldBlocksOffensive.length-1].bonusDamage=t+n}},{key:"checkLastBlock",value:function(){var e={shieldBlock:this.shieldBlocksOffensive[this.shieldBlocksOffensive.length-1].shieldBlock,good:this.shieldBlocksOffensive[this.shieldBlocksOffensive.length-1].good||this.shieldBlocksDefensive[this.shieldBlocksDefensive.length-1].good};if(e.good)this.goodCast+=1;else{this.badCast+=1;var t=this.shieldBlocksOffensive[this.shieldBlocksOffensive.length-1].event;t.meta=t.meta||{},t.meta.isInefficientCast=!0,t.meta.inefficientCastReason="This Shield Block didn't block enough damage nor did you cast enough Shield Slams.",this.shieldBlocksOffensive[this.shieldBlocksOffensive.length-1].event=t}this.shieldBlocksOverall.push(e)}},{key:"onFightend",value:function(){this.shieldBlocksDefensive.length>0&&this.checkLastBlock()}},{key:"suggestions",value:function(e){var t=this;e(this.suggestionThresholds).addSuggestion((function(e,a,n){return e(b.a.createElement(b.a.Fragment,null," You had uneventful ",b.a.createElement(P.a,{id:d.a.SHIELD_BLOCK.id})," cast(s) where there was either no blockable damage events or you didn't cast shield slam enough. ")).icon(d.a.SHIELD_BLOCK.icon).actual(O.i18n._({id:"warrior.protection.suggestions.shieldBlock.goodCasts",defaults:"{0} good casts of shield block",values:{0:t.goodCast}})).recommended("".concat(Math.floor(n*(t.goodCast+t.badCast))," is recommended"))}))}},{key:"statistic",value:function(){for(var e=0,t=0,a=0,n=this.shieldBlocksOverall.length,i=0;i<this.shieldBlocksOverall.length;i+=1)e+=this.shieldBlocksOverall[i].good?1:0,t+=this.shieldBlocksOffensive[i].good?1:0,a+=this.shieldBlocksDefensive[i].good?1:0;return b.a.createElement(F.a,{size:"flexible",tooltip:b.a.createElement(b.a.Fragment,null,"Overall bad casts: ",n-e,b.a.createElement("br",null),"Good offensive casts: ",t,b.a.createElement("br",null),"Good offensive casts where you cast ",b.a.createElement(P.a,{id:d.a.SHIELD_SLAM.id})," during the ",b.a.createElement(P.a,{id:d.a.SHIELD_BLOCK.id})," buff to take advantage of increased ",b.a.createElement(P.a,{id:d.a.SHIELD_SLAM.id})," damage.",b.a.createElement("br",null),b.a.createElement("br",null),"Good defensive casts: ",a,b.a.createElement("br",null),"Good defensive casts where you blocked several hits.",b.a.createElement("br",null),b.a.createElement("br",null),"Some casts may be good both offensively and defensively.",b.a.createElement("br",null),b.a.createElement("br",null),"Try to maximize the efficiency of your ",b.a.createElement(P.a,{id:d.a.SHIELD_BLOCK.id})," casts by ensuring that you take advantage of the offensive or defensive effects each time.")},b.a.createElement(M.a,{spell:d.a.SHIELD_BLOCK},"Bad Defensive Casts: ",n-a,b.a.createElement("br",null)))}}]),a}(H.c),W=a(53),V=a(750),Y=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).physicalHitsWithBlock=0,e.physicalHitsWithoutBlock=0,e.rawDamageWithBlock=0,e.rawDamageWithoutBlock=0,e.bolster=e.selectedCombatant.hasTalent(d.a.BOLSTER_TALENT.id),e.heavyRepercussions=e.selectedCombatant.hasTalent(d.a.HEAVY_REPERCUSSIONS_TALENT.id),e.noHRorBlThresholds={minor:.4,average:.35,major:.3},e.blnoHRThresholds={minor:.85,average:.75,major:.7},e.blHRThresholds={minor:.95,average:.9,major:.8},e.statisticOrder=V.a.CORE(10),e.listOfEvents=[],e.bolster&&e.heavyRepercussions?e.thresholdsToUse=e.blHRThresholds:e.bolster&&!e.heavyRepercussions?e.thresholdsToUse=e.blnoHRThresholds:e.thresholdsToUse=e.noHRorBlThresholds,e.addEventListener(U.f.damage.to(H.a),e.onDamageTaken),e.addEventListener(U.f.fightend.to(H.a),e.onFightend),e}return Object(g.a)(a,[{key:"suggestionThresholds",get:function(){return{actual:this.rawDamageWithBlock/(this.rawDamageWithBlock+this.rawDamageWithoutBlock),isLessThan:this.thresholdsToUse,style:G.a.PERCENTAGE}}}]),Object(g.a)(a,[{key:"onDamageTaken",value:function(e){1===e.ability.type&&(e.prot={shieldBlock:this.selectedCombatant.hasBuff(d.a.SHIELD_BLOCK_BUFF.id),bloster:this.bolster&&this.selectedCombatant.hasBuff(d.a.LAST_STAND.id)},this.listOfEvents.push(e))}},{key:"onFightend",value:function(){var e=this,t=new Set;t.add(1),this.shieldBlock.shieldBlocksDefensive.forEach((function(e){e.eventSpellId.forEach((function(e){t.add(e)}))})),this.listOfEvents.forEach((function(a){t.has(a.ability.guid)&&(a.prot.shieldBlock||a.prot.bloster?(e.physicalHitsWithBlock+=1,e.rawDamageWithBlock+=a.unmitigatedAmount||0):(e.physicalHitsWithoutBlock+=1,e.rawDamageWithoutBlock+=a.unmitigatedAmount||0))}))}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,"You only had ",b.a.createElement(P.a,{id:d.a.SHIELD_BLOCK_BUFF.id})," or ",b.a.createElement(P.a,{id:d.a.LAST_STAND.id})," for ",Object(p.e)(t),"% of physical damage taken. You should have one of the two up to mitigate as much physical damage as possible.")).icon(d.a.SHIELD_BLOCK_BUFF.icon).actual(O.i18n._({id:"warrior.protection.suggestions.block.damageMitigated",defaults:"{0}% was mitigated by a block spell",values:{0:Object(p.e)(t)}})).recommended("".concat(Math.round(Object(p.e)(a)),"% or more is recommended but this may vary between fights"))}))}},{key:"statistic",value:function(){var e=this.physicalHitsWithBlock/(this.physicalHitsWithBlock+this.physicalHitsWithoutBlock),t=this.rawDamageWithBlock/(this.rawDamageWithBlock+this.rawDamageWithoutBlock);return b.a.createElement(V.b,{icon:b.a.createElement(W.a,{id:d.a.SHIELD_BLOCK_BUFF.id}),value:"".concat(Object(p.e)(e),"%"),label:"Physical Hits Mitigated",tooltip:b.a.createElement(b.a.Fragment,null,"Shield Block usage breakdown:",b.a.createElement("ul",null,b.a.createElement("li",null,"You were hit ",b.a.createElement("strong",null,this.physicalHitsWithBlock)," times with block up (",b.a.createElement("strong",null,Object(p.f)(this.rawDamageWithBlock))," damage)."),b.a.createElement("li",null,"You were hit ",b.a.createElement("strong",null,this.physicalHitsWithoutBlock)," times ",b.a.createElement("strong",null,b.a.createElement("em",null,"without"))," block up (",b.a.createElement("strong",null,Object(p.f)(this.rawDamageWithoutBlock))," damage).")),b.a.createElement("strong",null,Object(p.e)(e),"%")," of physical attacks were mitigated with Block (",b.a.createElement("strong",null,Object(p.e)(t),"%")," of physical damage taken).")})}}]),a}(H.c);Y.dependencies={shieldBlock:x};var K=Y,z=a(203),Z=a(767),q=a(757),J=a(819),X=a(777),Q=a(796),$=a(88),ee=a(770),te=a(762),ae=a(763),ne=a(771),ie=a(772),se=function(e){var t=e.combatant,a=e.castEfficiency,n=e.thresholds,i=function(e){return b.a.createElement(ie.a,Object.assign({castEfficiency:a.getCastEfficiencyForSpellId(e.spell)},e))};return b.a.createElement(ee.a,null,b.a.createElement(te.c,{name:"Rotational Spells",description:b.a.createElement(b.a.Fragment,null,"Be sure to use ",b.a.createElement(P.a,{id:d.a.SHIELD_SLAM.id})," and ",b.a.createElement(P.a,{id:d.a.THUNDER_CLAP.id})," on cooldown to maximise your ",b.a.createElement(Q.a,{id:$.a.RAGE.id})," generation and damage output.",b.a.createElement("br",null)," ",b.a.createElement(P.a,{id:d.a.REVENGE.id})," can be used to avoid rage capping and ",b.a.createElement(P.a,{id:d.a.DEVASTATE.id})," should only be used when every other spell mentioned here is on cooldown.")},b.a.createElement(i,{spell:d.a.THUNDER_CLAP.id}),b.a.createElement(ae.a,{name:b.a.createElement(P.a,{id:d.a.SHIELD_SLAM.id}),thresholds:n.shieldSlam}),b.a.createElement(i,{spell:d.a.SHIELD_BLOCK.id}),b.a.createElement(ae.a,{name:b.a.createElement(b.a.Fragment,null,"Effective ",b.a.createElement(P.a,{id:d.a.SHIELD_BLOCK.id})," Casts "),thresholds:n.shieldBlock}),t.hasTalent(d.a.BOOMING_VOICE_TALENT.id)&&b.a.createElement(i,{spell:d.a.DEMORALIZING_SHOUT.id}),t.hasTalent(d.a.DRAGON_ROAR_TALENT.id)&&b.a.createElement(i,{spell:d.a.DRAGON_ROAR_TALENT.id})),b.a.createElement(te.c,{name:"Defensive Cooldowns",description:b.a.createElement(b.a.Fragment,null,"Protection warriors have a multitude of defensive spells on a fairly short cooldown. Be sure to use these to further mitigate incoming damage.")},b.a.createElement(i,{spell:d.a.SHIELD_WALL.id}),b.a.createElement(i,{spell:d.a.LAST_STAND.id}),b.a.createElement(ae.a,{name:b.a.createElement(b.a.Fragment,null,"Magic damage with ",b.a.createElement(P.a,{id:d.a.SPELL_REFLECTION.id})),thresholds:n.spellReflect}),!t.hasTalent(d.a.BOOMING_VOICE_TALENT.id)&&b.a.createElement(i,{spell:d.a.DEMORALIZING_SHOUT.id})),b.a.createElement(te.c,{name:"Offensive Cooldowns",description:b.a.createElement(b.a.Fragment,null,"Using ",b.a.createElement(P.a,{id:d.a.AVATAR_TALENT.id})," as often as possible is very important because it will increase your overall damage a lot and provides 20 ",b.a.createElement(Q.a,{id:$.a.RAGE.id}),".",b.a.createElement("br",null)," If you are also using ",b.a.createElement(P.a,{id:d.a.UNSTOPPABLE_FORCE_TALENT.id})," remember that ",b.a.createElement(P.a,{id:d.a.THUNDER_CLAP.id})," will have a reduced cooldown so you can use it every other GCD.")},b.a.createElement(i,{spell:d.a.AVATAR_TALENT.id}),b.a.createElement(i,{spell:d.a.DEMORALIZING_SHOUT.id}),t.hasTalent(d.a.RAVAGER_TALENT_PROTECTION.id)&&b.a.createElement(i,{spell:d.a.RAVAGER_TALENT_PROTECTION.id})),b.a.createElement(te.c,{name:"Don't get too angry",description:b.a.createElement(b.a.Fragment,null,"Minimizing your wasted ",b.a.createElement(Q.a,{id:$.a.RAGE.id})," should be top priority as a protection warrior so be sure to use ",b.a.createElement(P.a,{id:d.a.IGNORE_PAIN.id})," and ",b.a.createElement(P.a,{id:d.a.REVENGE.id})," to avoid this.")},b.a.createElement(ae.a,{name:"Lost Rage",thresholds:n.rageDetails})),b.a.createElement(te.c,{name:"Utility",description:b.a.createElement(b.a.Fragment,null,"Warriors main raid utility comes from ",b.a.createElement(P.a,{id:d.a.RALLYING_CRY.id})," - it should be used on high damage spikes to help people survive.")},b.a.createElement(i,{spell:d.a.RALLYING_CRY.id}),b.a.createElement(i,{spell:d.a.INTERCEPT.id})),b.a.createElement(ne.a,{thresholds:n}))},le=a(49),re=a(28),ce=a(781),oe=a(773),de=a(766),ue=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).lastMeleeTaken=0,i.maxResource=100,i.ragePerMeleeHit=2,i.resource=$.a.RAGE,i.selectedCombatant.hasTalent(d.a.WAR_MACHINE_PROTECTION_TALENT.id)&&(i.ragePerMeleeHit+=1),i.addEventListener(U.f.damage.by(H.a).spell(d.a.MELEE),i.onDamage),i.addEventListener(U.f.damage.to(H.a).spell(d.a.MELEE),i.onDamageTaken),i}return Object(g.a)(a,[{key:"onDamage",value:function(e){this.processInvisibleEnergize(d.a.RAGE_AUTO_ATTACKS.id,this.ragePerMeleeHit)}},{key:"onDamageTaken",value:function(e){e.hitType!==de.a.DODGE&&e.hitType!==de.a.PARRY&&e.timestamp-this.lastMeleeTaken>=1e3&&(this.processInvisibleEnergize(d.a.RAGE_DAMAGE_TAKEN.id,3),this.lastMeleeTaken=e.timestamp)}}]),a}(oe.a),he=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).statisticOrder=V.a.CORE(3),e.rageTracker=void 0,e}return Object(g.a)(a,[{key:"suggestions",value:function(e){var t=this;e(this.suggestionThresholds).addSuggestion((function(e,a,n){return e("You wasted ".concat(Object(p.e)(t.wastedPercent),"% of your Rage.")).icon("spell_nature_reincarnation").actual(O.i18n._({id:"warrior.protection.suggestions.rage.wasted",defaults:"{0}% wasted",values:{0:Object(p.e)(a)}})).recommended("<".concat(Object(p.e)(n),"% is recommended"))}))}},{key:"statistic",value:function(){return b.a.createElement(V.b,{icon:b.a.createElement(re.a,{icon:"spell_nature_reincarnation"}),value:"".concat(Object(p.e)(this.wastedPercent)," %"),label:"Rage wasted",tooltip:"".concat(this.rageTracker.wasted," out of ").concat(this.rageTracker.wasted+this.rageTracker.generated," Rage wasted.")})}},{key:"tab",value:function(){var e=this;return{title:"Rage usage",url:"rage-usage",render:function(){return b.a.createElement(le.a,null,b.a.createElement(ce.a,{tracker:e.rageTracker,showSpenders:!0}))}}}},{key:"wastedPercent",get:function(){return this.rageTracker.wasted/(this.rageTracker.wasted+this.rageTracker.generated)||0}},{key:"efficiencySuggestionThresholds",get:function(){return{actual:1-this.wastedPercent,isLessThan:{minor:.95,average:.9,major:.85},style:G.a.PERCENTAGE}}},{key:"suggestionThresholds",get:function(){return{actual:this.wastedPercent,isGreaterThan:{minor:.05,average:.1,major:.15},style:G.a.PERCENTAGE}}}]),a}(H.c);he.dependencies={rageTracker:ue};var me=he,ge=a(122),fe=a(755),Ee=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).timeOnCd=0,i.currentCd=0,i.lastCast=0,i.averageCd=0,i.actualCasts=0,i.totalCastsAssumed=0,i.statTracker=void 0,i.abilityTracker=void 0,i.lastCast=i.owner.fight.start_time/1e3,i.addEventListener(U.f.cast.by(H.a).spell(d.a.SHIELD_SLAM),i.onSlamCast),i.addEventListener(U.f.fightend,i.handleFightEnd),i}return Object(g.a)(a,[{key:"onSlamCast",value:function(e){0===this.currentCd&&(this.timeOnCd=e.timestamp/1e3-this.owner.fight.start_time/1e3),1.05*(e.timestamp/1e3-this.lastCast)>this.currentCd&&(this.timeOnCd+=e.timestamp/1e3-this.lastCast),0!==this.currentCd&&(this.averageCd+=this.currentCd),this.currentCd=9/(1+this.statTracker.hastePercentage(this.statTracker.currentHasteRating)),this.lastCast=e.timestamp/1e3,this.totalCastsAssumed+=1}},{key:"handleFightEnd",value:function(){this.actualCasts=this.abilityTracker.getAbility(d.a.SHIELD_SLAM.id).casts,1.05*(this.owner.fight.end_time/1e3-this.lastCast)>this.currentCd&&(this.timeOnCd+=this.owner.fight.end_time/1e3-this.lastCast),this.averageCd=this.averageCd/this.totalCastsAssumed,this.totalCastsAssumed+=this.timeOnCd/this.averageCd}},{key:"suggestions",value:function(e){var t=this;e(this.suggestionThresholds).addSuggestion((function(e,a,n){return e(b.a.createElement(b.a.Fragment,null,"Try to cast ",b.a.createElement(P.a,{id:d.a.SHIELD_SLAM.id})," more often - it is your main ",b.a.createElement(Q.a,{id:$.a.RAGE.id})," generator and damage source.")).icon(d.a.SHIELD_SLAM.icon).actual(O.i18n._({id:"warrior.protection.suggestions.shieldSlam.casts",defaults:"{0} shield slam casts",values:{0:t.actualCasts}})).recommended("".concat((n*t.totalCastsAssumed).toFixed(0)," recommended out of ").concat(t.totalCastsAssumed," maximum"))}))}},{key:"slamRatio",get:function(){return this.actualCasts/this.totalCastsAssumed}},{key:"suggestionThresholds",get:function(){return{actual:this.slamRatio,isLessThan:{minor:.9,average:.8,major:.7},style:G.a.PERCENTAGE}}}]),a}(H.c);Ee.dependencies={statTracker:ge.a,abilityTracker:fe.a};var be=Ee,pe=a(826),ve=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).magicDamage=0,i.magicDamageReduced=0,i.totalDamage=0,i.statTracker=void 0,i.abilityTracker=void 0,i.addEventListener(U.f.damage.to(H.a),i.onDamage),i}return Object(g.a)(a,[{key:"onDamage",value:function(e){e.ability.type!==pe.a.ids.PHYSICAL&&(this.magicDamage+=e.unmitigatedAmount||0,this.selectedCombatant.hasBuff(d.a.SPELL_REFLECTION.id)&&(this.magicDamageReduced+=e.unmitigatedAmount||0))}},{key:"fightEndDebug",value:function(){console.log("magic damage ".concat(this.magicDamage)),console.log("magic damage with mit ".concat(this.magicDamageReduced)),console.log("total damage ".concat(this.totalDamage))}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,"Try to cast ",b.a.createElement(P.a,{id:d.a.SPELL_REFLECTION.id})," more often when magic damage is going out to take less damage.")).icon(d.a.SPELL_REFLECTION.icon).actual(O.i18n._({id:"warrior.protection.suggestions.spellReflect.efficiency",defaults:"{0} % magic damage With Spell Reflect Up",values:{0:Object(p.e)(t)}})).recommended("".concat(Object(p.e)(a)," % recommended"))}))}},{key:"suggestionThresholds",get:function(){return{actual:this.magicDamageReduced/this.magicDamage,isLessThan:{minor:.25,average:.15,major:.05},style:G.a.PERCENTAGE}}}]),a}(H.c);ve.dependencies={statTracker:ge.a,abilityTracker:fe.a};var Oe=ve,ye=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).combatants=void 0,e.castEfficiency=void 0,e.manaValues=void 0,e.preparationRuleAnalyzer=void 0,e.alwaysBeCasting=void 0,e.rageDetails=void 0,e.rageTracker=void 0,e.shieldSlam=void 0,e.shieldBlock=void 0,e.blockCheck=void 0,e.spellReflect=void 0,e}return Object(g.a)(a,[{key:"render",value:function(){return b.a.createElement(se,{combatant:this.combatants.selected,castEfficiency:this.castEfficiency,thresholds:Object(o.a)(Object(o.a)({},this.preparationRuleAnalyzer.thresholds),{},{downtimeSuggestionThresholds:this.alwaysBeCasting.downtimeSuggestionThresholds,rageDetails:this.rageDetails.suggestionThresholds,shieldSlam:this.shieldSlam.suggestionThresholds,shieldBlock:this.shieldBlock.suggestionThresholds,blockCheck:this.blockCheck.suggestionThresholds,spellReflect:this.spellReflect.suggestionThresholds})})}}]),a}(z.a);ye.dependencies={combatants:q.a,castEfficiency:Z.a,manaValues:J.a,preparationRuleAnalyzer:X.a,alwaysBeCasting:y,rageDetails:me,rageTracker:ue,shieldSlam:be,shieldBlock:x,blockCheck:K,spellReflect:Oe};var Te=ye,ke=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"uptime",get:function(){return this.selectedCombatant.getBuffUptime(d.a.IGNORE_PAIN.id)/this.owner.fightDuration}},{key:"uptimeSuggestionThresholds",get:function(){return{actual:this.uptime,isLessThan:{minor:.95,average:.9,major:.8},style:G.a.PERCENTAGE}}}]),a}(H.c),Se=a(752),Ae=a(18),Ce=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).bonusDmg=0,i.statisticOrder=V.a.CORE(5),i.addEventListener(new Ae.c(U.b.Damage).by(H.a),i.handleDamage),i}return Object(g.a)(a,[{key:"handleDamage",value:function(e){this.selectedCombatant.hasBuff(d.a.AVATAR_TALENT.id)&&(this.bonusDmg+=Object(Se.a)(e,.2))}},{key:"statistic",value:function(){return b.a.createElement(V.b,{icon:b.a.createElement(W.a,{id:d.a.AVATAR_TALENT.id}),value:"".concat(Object(p.d)(this.bonusDmg/this.owner.fightDuration*1e3)," DPS"),label:"Damage contributed",tooltip:b.a.createElement(b.a.Fragment,null,"Avatar contributed ",Object(p.d)(this.bonusDmg)," total damage (",Object(p.e)(this.owner.getPercentageOfTotalDamageDone(this.bonusDmg)),"%). ",b.a.createElement("br",null),"Uptime was ",Object(p.e)(this.uptime),"%")})}},{key:"uptime",get:function(){return this.selectedCombatant.getBuffUptime(d.a.AVATAR_TALENT.id)/this.owner.fightDuration}}]),a}(H.c),Le=a(761),_e=a(58),Re=a(747),Ie=[d.a.AVATAR_TALENT.id,d.a.SHIELD_WALL.id],je=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).totalRageSpend=0,i.wastedReduction={},i.effectiveReduction={},i.statisticOrder=Re.a.CORE(4),i.spellUsable=void 0,i.active=i.selectedCombatant.hasTalent(d.a.ANGER_MANAGEMENT_TALENT.id),i.addEventListener(U.f.cast.by(H.a),i.onCast),Ie.forEach((function(e){i.wastedReduction[e]=0,i.effectiveReduction[e]=0})),i}return Object(g.a)(a,[{key:"onCast",value:function(e){var t,a=this,n=null===(t=e.classResources)||void 0===t?void 0:t.find((function(e){return e.type===$.a.RAGE.id}));if(n&&n.cost){var i=n.cost/10,s=i/10*1e3;Ie.forEach((function(e){if(a.spellUsable.isOnCooldown(e)){var t=a.spellUsable.reduceCooldown(e,s);a.effectiveReduction[e]+=t,a.wastedReduction[e]+=s-t}else a.wastedReduction[e]+=s})),this.totalRageSpend+=i}}},{key:"statistic",value:function(){return b.a.createElement(F.a,{position:Re.a.OPTIONAL(13),size:"flexible",category:_e.a.TALENTS,dropdown:this.tooltip},b.a.createElement(Le.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(P.a,{id:d.a.ANGER_MANAGEMENT_TALENT.id})," Possible cooldown reduction")}))}},{key:"tooltip",get:function(){var e=this;return b.a.createElement("table",{className:"table table-condensed"},b.a.createElement("thead",null,b.a.createElement("tr",null,b.a.createElement("th",null,"Spell"),b.a.createElement("th",null,"Effective"),b.a.createElement("th",null,"Wasted"))),b.a.createElement("tbody",null,Ie.map((function(t){return b.a.createElement("tr",{key:t},b.a.createElement("td",null,d.a[t].name),b.a.createElement("td",null,Object(p.a)(e.effectiveReduction[t]/1e3)),b.a.createElement("td",null,Object(p.a)(e.wastedReduction[t]/1e3)))}))))}}]),a}(H.c);je.dependencies={spellUsable:S.b};var De=je,we=a(756),Ne=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).rageGenerated=0,i.rageWasted=0,i.bonusDmg=0,i.maxRage=100,i.nextCastWasted=0,i.statisticOrder=Re.a.CORE(5),i.enemies=void 0,i.active=i.selectedCombatant.hasTalent(d.a.BOOMING_VOICE_TALENT.id),i.addEventListener(U.f.cast.by(H.a).spell(d.a.DEMORALIZING_SHOUT),i.onShoutCast),i.addEventListener(U.f.energize.to(H.a).spell(d.a.DEMORALIZING_SHOUT),i.onShoutEnergize),i.addEventListener(U.f.damage.by(H.a),i.onDamage),i}return Object(g.a)(a,[{key:"onShoutCast",value:function(e){0!==this.nextCastWasted&&(e.meta=e.meta||{},e.meta.isInefficientCast=!0,e.meta.inefficientCastReason="This cast wasted ".concat(this.nextCastWasted," Rage."),this.nextCastWasted=0)}},{key:"onShoutEnergize",value:function(e){this.rageGenerated+=e.resourceChange;var t=e.waste||0;this.rageWasted+=t,this.nextCastWasted=t}},{key:"onDamage",value:function(e){if(!e.targetIsFriendly){var t=this.enemies.getEntity(e);t&&t.hasBuff(d.a.DEMORALIZING_SHOUT.id)&&(this.bonusDmg+=Object(Se.a)(e,.2))}}},{key:"suggestions",value:function(e){var t=this;e(this.uptimeSuggestionThresholds).addSuggestion((function(e,a,n){return e(b.a.createElement(b.a.Fragment,null,"You wasted Rage by casting ",b.a.createElement(P.a,{id:d.a.DEMORALIZING_SHOUT.id})," with more than ",t.maxRage-40," Rage.")).icon(d.a.BOOMING_VOICE_TALENT.icon).actual(O.i18n._({id:"warrior.protection.suggestions.boominVoice.rage.wasted",defaults:"{actual} Rage wasted",values:{actual:a}})).recommended("<".concat(n," wasted Rage is recommended"))}))}},{key:"statistic",value:function(){return b.a.createElement(F.a,{position:Re.a.OPTIONAL(13),size:"flexible",category:_e.a.TALENTS,tooltip:b.a.createElement(b.a.Fragment,null,Object(p.d)(this.bonusDmg)," damage contributed",b.a.createElement("br",null),this.rageWasted," Rage wasted")},b.a.createElement(Le.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(P.a,{id:d.a.BOOMING_VOICE_TALENT.id})," Rage generated")},b.a.createElement(b.a.Fragment,null,this.rageGenerated," ",b.a.createElement("small",null,"rage"))))}},{key:"uptimeSuggestionThresholds",get:function(){return{actual:this.rageWasted,isGreaterThan:{minor:0,average:10,major:20},style:G.a.NUMBER}}}]),a}(H.c);Ne.dependencies={enemies:we.a};var Be=Ne,Pe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).sbExtended=0,i.sbCasts=0,i.statisticOrder=Re.a.CORE(5),i.rageTracker=void 0,i.active=i.selectedCombatant.hasTalent(d.a.HEAVY_REPERCUSSIONS_TALENT.id),i.addEventListener(U.f.cast.by(H.a).spell(d.a.SHIELD_SLAM),i.onSlamCast),i}return Object(g.a)(a,[{key:"onSlamCast",value:function(e){this.sbCasts+=1,this.selectedCombatant.hasBuff(d.a.SHIELD_BLOCK_BUFF.id)&&(this.sbExtended+=1)}},{key:"suggestions",value:function(e){e(this.uptimeSuggestionThresholds).addSuggestion((function(e,t,a){return e(b.a.createElement(b.a.Fragment,null,"Try and cast ",b.a.createElement(P.a,{id:d.a.SHIELD_SLAM.id}),"'s during ",b.a.createElement(P.a,{id:d.a.SHIELD_BLOCK.id})," to increase the uptime of ",b.a.createElement(P.a,{id:d.a.SHIELD_BLOCK.id})," and the damage of ",b.a.createElement(P.a,{id:d.a.SHIELD_SLAM.id}),".")).icon(d.a.HEAVY_REPERCUSSIONS_TALENT.icon).actual(O.i18n._({id:"warrior.protection.suggestions.heavyRepercussions.shieldBlockCasts",defaults:"{0}% cast during Shield Block",values:{0:Object(p.e)(t)}})).recommended("".concat(Object(p.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){var e=1e3*this.sbExtended,t=(this.rageTracker.getGeneratedBySpell(d.a.SHIELD_SLAM.id)+this.rageTracker.getWastedBySpell(d.a.SHIELD_SLAM.id))/18*3;return b.a.createElement(F.a,{position:Re.a.OPTIONAL(13),size:"flexible",category:_e.a.TALENTS,tooltip:b.a.createElement(b.a.Fragment,null,"You casted Shield Slam ",this.sbExtended," times during Shield Block, resulting in additional ",e/1e3," sec uptime.",b.a.createElement("br",null))},b.a.createElement(Le.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(P.a,{id:d.a.HEAVY_REPERCUSSIONS_TALENT.id})," Extra Shield Block and Rage")},b.a.createElement(b.a.Fragment,null,Object(p.e)(e/(this.shieldBlockuptime-e)),"% ",b.a.createElement("br",null),t," ",b.a.createElement("small",null,"rage"))))}},{key:"shieldBlockuptime",get:function(){return this.selectedCombatant.getBuffUptime(d.a.SHIELD_BLOCK_BUFF.id)}},{key:"uptimeSuggestionThresholds",get:function(){return{actual:this.sbExtended/this.sbCasts,isLessThan:{minor:.9,average:.85,major:.8},style:G.a.PERCENTAGE}}}]),a}(H.c);Pe.dependencies={rageTracker:ue};var He=Pe,Fe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).buffStacks=void 0,i.lastStacks=0,i.lastUpdate=i.owner.fight.start_time,i.statisticOrder=Re.a.CORE(5),i.active=i.selectedCombatant.hasTalent(d.a.INTO_THE_FRAY_TALENT.id),i.addEventListener(U.f.applybuff.by(H.a).spell(d.a.INTO_THE_FRAY_BUFF),i.handleStacks),i.addEventListener(U.f.applybuffstack.by(H.a).spell(d.a.INTO_THE_FRAY_BUFF),i.handleStacks),i.addEventListener(U.f.removebuff.by(H.a).spell(d.a.INTO_THE_FRAY_BUFF),i.handleStacks),i.addEventListener(U.f.removebuffstack.by(H.a).spell(d.a.INTO_THE_FRAY_BUFF),i.handleStacks),i.addEventListener(U.f.fightend,i.fightEnd),i.buffStacks=Array.from({length:6},(function(){return[0]})),i}return Object(g.a)(a,[{key:"handleStacks",value:function(e,t){var a=e;(a.type===U.b.RemoveBuff||isNaN(a.stack))&&(a.stack=0),e.type===U.b.ApplyBuff&&(a.stack=1),t&&(a.stack=t),this.buffStacks[this.lastStacks].push(a.timestamp-this.lastUpdate),this.lastUpdate=a.timestamp,this.lastStacks=a.stack}},{key:"fightEnd",value:function(e){this.handleStacks(e,this.lastStacks)}},{key:"statistic",value:function(){var e=this;return b.a.createElement(F.a,{position:Re.a.OPTIONAL(13),size:"flexible",category:_e.a.TALENTS,dropdown:b.a.createElement("table",{className:"table table-condensed"},b.a.createElement("thead",null,b.a.createElement("tr",null,b.a.createElement("th",null,"Haste-Bonus"),b.a.createElement("th",null,"Time (s)"),b.a.createElement("th",null,"Time (%)"))),b.a.createElement("tbody",null,this.buffStacks.map((function(t,a){return b.a.createElement("tr",{key:a},b.a.createElement("th",null,(2*a).toFixed(0),"%"),b.a.createElement("td",null,Object(p.a)(t.reduce((function(e,t){return e+t}),0)/1e3)),b.a.createElement("td",null,Object(p.e)(t.reduce((function(e,t){return e+t}),0)/e.owner.fightDuration),"%"))}))))},b.a.createElement(Le.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(P.a,{id:d.a.INTO_THE_FRAY_TALENT.id})," average haste gained")},this.averageHaste,"%"))}},{key:"averageHaste",get:function(){var e=this,t=0;return this.buffStacks.forEach((function(a,n){t+=a.reduce((function(e,t){return e+t}))/e.owner.fightDuration*n})),(2*t).toFixed(2)}}]),a}(H.c),Me=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).rageTracker=void 0,i.active=i.selectedCombatant.hasTalent(d.a.WAR_MACHINE_PROTECTION_TALENT.id),i}return Object(g.a)(a,[{key:"statistic",value:function(){var e=(this.rageTracker.getGeneratedBySpell(d.a.RAGE_AUTO_ATTACKS.id)+this.rageTracker.getWastedBySpell(d.a.RAGE_AUTO_ATTACKS.id))/3;return b.a.createElement(F.a,{position:Re.a.OPTIONAL(13),size:"flexible",category:_e.a.TALENTS},b.a.createElement(Le.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(P.a,{id:d.a.WAR_MACHINE_PROTECTION_TALENT.id})," Extra Rage From Melees")},b.a.createElement(b.a.Fragment,null,e," ",b.a.createElement("small",null,"rage"))))}}]),a}(H.c);Me.dependencies={rageTracker:ue};var Ge=Me,Ue=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).bonusDmg=0,i.statisticOrder=Re.a.CORE(5),i.enemies=void 0,i.active=i.selectedCombatant.hasTalent(d.a.PUNISH_TALENT.id),i.addEventListener(U.f.damage.by(H.a).spell(d.a.SHIELD_SLAM),i.onSlamDamage),i}return Object(g.a)(a,[{key:"onSlamDamage",value:function(e){this.bonusDmg+=Object(Se.a)(e,.2)}},{key:"statistic",value:function(){return b.a.createElement(F.a,{position:Re.a.OPTIONAL(13),size:"flexible",category:_e.a.TALENTS,tooltip:b.a.createElement(b.a.Fragment,null,"Punish added a total of ",Object(p.d)(this.bonusDmg)," damage to your Shield Slams (",Object(p.e)(this.owner.getPercentageOfTotalDamageDone(this.bonusDmg)),"%). ",b.a.createElement("br",null),Object(p.e)(this.uptime),"% debuff uptime.")},b.a.createElement(Le.a,{label:b.a.createElement(b.a.Fragment,null,b.a.createElement(P.a,{id:d.a.PUNISH_TALENT.id})," Damage contributed")},b.a.createElement(b.a.Fragment,null,Object(p.d)(this.bonusDmg/this.owner.fightDuration*1e3)," ",b.a.createElement("small",null,"DPS"))))}},{key:"uptime",get:function(){return this.enemies.getBuffUptime(d.a.PUNISH_DEBUFF.id)/this.owner.fightDuration}}]),a}(H.c);Ue.dependencies={enemies:we.a};var xe=Ue,We=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).ability=d.a.DRAGON_ROAR_TALENT,i.active=i.selectedCombatant.hasTalent(i.ability.id),i}return a}(a(966).a),Ve=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(l.a);Ve.specModules={haste:m,mitigationCheck:_,buffs:j,abilities:f,alwaysBeCasting:y,shieldBlock:x,blockCheck:K,spellUsable:L,cooldownThroughputTracker:B,checklist:Te,ignorePain:ke,rageTracker:ue,rageDetails:me,avatar:Ce,shieldSlam:be,spellReflect:Oe,angerManagement:De,boomingVoice:Be,heavyRepercussions:He,intoTheFray:Fe,warMachine:Ge,punish:xe,dragonRoar:We,arcaneTorrent:[r.a,{castEfficiency:null}]};t.default=Ve},748:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(53),l=a(4);t.a=function(e){var t=e.spell,a=e.children,n=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(n||"")},i.a.createElement("label",null,i.a.createElement(s.a,{id:t.id})," ",i.a.createElement(l.a,{id:t.id,icon:!1})),i.a.createElement("div",{className:"value"},a))}},752:function(e,t,a){"use strict";function n(e,t){var a=(e.amount||0)+(e.absorbed||0);return a-a/(1+t)}a.d(t,"a",(function(){return n}))},761:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=function(e){var t=e.label,a=e.children,n=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(n||"")},i.a.createElement("label",null,t),i.a.createElement("div",{className:"value"},a))}},773:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),l=a(11),r=a(43),c=a(123),o=a(15),d=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).eventEmitter=void 0,i.current=0,i.resourceUpdates=[],i.buildersObj={},i.spendersObj={},i.resource=void 0,i.maxResource=void 0,i.addEventListener(o.f.energize.to(r.a),i.onEnergize),i.addEventListener(o.f.cast.by(r.a),i.onCast),i}return Object(i.a)(a,[{key:"initBuilderAbility",value:function(e){this.buildersObj[e]={generated:0,wasted:0,casts:0}}},{key:"initSpenderAbility",value:function(e){this.spendersObj[e]={spent:0,spentByCast:[],casts:0}}},{key:"onEnergize",value:function(e){var t=e.ability.guid;if(e.resourceChangeType===this.resource.id){var a=e.waste,n=e.resourceChange-a;this._applyBuilder(t,n,a,this.getResource(e),e.timestamp)}}},{key:"processInvisibleEnergize",value:function(e,t){var a=void 0!==this.maxResource?this.maxResource-this.current:t,n=Math.min(t,a),i=Math.max(t-a,0);this._applyBuilder(e,n,i)}},{key:"_applyBuilder",value:function(e,t,a,n,i){this.buildersObj[e]||this.initBuilderAbility(e),this.buildersObj[e].wasted+=a,this.buildersObj[e].generated+=t,this.buildersObj[e].casts+=1,null!==n&&void 0!==n&&void 0!==n.amount?(this.current=n.amount,void 0!==n.max&&(this.maxResource=n.max)):this.current+=t,this.resourceUpdates.push({timestamp:i,current:this.current,waste:a,generated:t,used:0})}},{key:"onCast",value:function(e){var t=e.ability.guid;if(this.shouldProcessCastEvent(e)){var a=this.getResource(e);if(a){a.max&&(this.maxResource=a.max);var n=this.getReducedCost(e);this.spendersObj[t]||this.initSpenderAbility(t),n&&0!==n&&(this.spendersObj[t].casts+=1,this.spendersObj[t].spentByCast.push(n),n>0&&(this.spendersObj[t].spent+=n),this.current=a.amount-n,this.resourceUpdates.push({timestamp:e.timestamp,current:this.current,waste:0,generated:0,used:a.amount}),this.triggerSpendEvent(n,e))}}}},{key:"getReducedCost",value:function(e){var t;return e.resourceCost&&void 0!==e.resourceCost[this.resource.id]?e.resourceCost[this.resource.id]:null===(t=this.getResource(e))||void 0===t?void 0:t.cost}},{key:"getResource",value:function(e){var t=this;return e.classResources?e.classResources.find((function(e){return e.type===t.resource.id})):void 0}},{key:"triggerSpendEvent",value:function(e,t){var a={type:o.b.SpendResource,timestamp:t.timestamp,sourceID:t.sourceID,targetID:t.targetID,resourceChange:e,resourceChangeType:this.resource.id,ability:t.ability,__fabricated:!0};this.eventEmitter.fabricateEvent(a,t)}},{key:"shouldProcessCastEvent",value:function(e){return Boolean(this.getResource(e))}},{key:"getGeneratedBySpell",value:function(e){return this.buildersObj[e]&&this.buildersObj[e].generated||0}},{key:"getWastedBySpell",value:function(e){return this.buildersObj[e]&&this.buildersObj[e].wasted||0}},{key:"getBuilderCastsBySpell",value:function(e){return this.buildersObj[e]&&this.buildersObj[e].casts||0}},{key:"generated",get:function(){return Object.values(this.buildersObj).reduce((function(e,t){return e+t.generated}),0)}},{key:"wasted",get:function(){return Object.values(this.buildersObj).reduce((function(e,t){return e+t.wasted}),0)}},{key:"spent",get:function(){return Object.values(this.spendersObj).reduce((function(e,t){return e+t.spent}),0)}},{key:"spendersCasts",get:function(){return Object.values(this.spendersObj).reduce((function(e,t){return e+t.casts}),0)}}]),a}(r.c);d.dependencies={eventEmitter:c.a},t.a=d},781:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),l=a(11),r=a(0),c=a.n(r),o=a(4),d=a(33),u=a(22),h=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"prepareGenerated",value:function(e){return Object.keys(e).map((function(t){return{abilityId:Number(t),generated:e[Number(t)].generated,wasted:e[Number(t)].wasted}})).sort((function(e,t){return t.generated-e.generated})).filter((function(e){return e.generated>0||e.wasted}))}},{key:"prepareSpent",value:function(e){return Object.keys(e).map((function(t){return{abilityId:Number(t),spent:e[Number(t)].spent,casts:e[Number(t)].casts}})).sort((function(e,t){return t.spent-e.spent})).filter((function(e){return e.spent>0}))}},{key:"render",value:function(){var e=this.props,t=e.tracker,a=e.showSpenders,n=t.resource.name,i=this.prepareGenerated(t.buildersObj),s=this.prepareSpent(t.spendersObj),l=t.generated,r=t.wasted,h=t.spent,m=t.spendersCasts;return l=0===l?1:l,r=0===r?1:r,h=0===h?1:h,m=0===m?1:m,c.a.createElement(c.a.Fragment,null,c.a.createElement("table",{className:"data-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Ability"),c.a.createElement("th",{colSpan:2},n," generated"),c.a.createElement("th",{colSpan:2},c.a.createElement(u.a,{content:"This is the amount of resources that were generated while you were already at cap."},n," wasted")))),c.a.createElement("tbody",null,i&&i.map((function(e){return c.a.createElement("tr",{key:e.abilityId},c.a.createElement("td",{style:{width:"30%"}},c.a.createElement(o.a,{id:e.abilityId})),c.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"center"}},c.a.createElement(u.a,{content:"".concat(Object(d.e)(e.generated/l)," %")},e.generated.toFixed(0))),c.a.createElement("td",{style:{width:"40%"}},c.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.generated/l*100,"%")}})),c.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"center"}},c.a.createElement(u.a,{content:"".concat(Object(d.e)(e.wasted/r)," %")},e.wasted.toFixed(0))),c.a.createElement("td",{style:{width:"30%"}},c.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.wasted/r*100,"%")}})))})))),a&&c.a.createElement("table",{className:"data-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Ability"),c.a.createElement("th",{colSpan:2},n," spent"),c.a.createElement("th",{colSpan:2},"Casts"))),c.a.createElement("tbody",null,s&&s.map((function(e){return c.a.createElement("tr",{key:e.abilityId},c.a.createElement("td",{style:{width:"30%"}},c.a.createElement(o.a,{id:e.abilityId})),c.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"center"}},c.a.createElement(u.a,{content:"".concat(Object(d.e)(e.spent/h)," %")},e.spent.toFixed(0))),c.a.createElement("td",{style:{width:"40%"}},c.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.spent/h*100,"%")}})),c.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"center"}},c.a.createElement(u.a,{content:"".concat(Object(d.e)(e.casts/m)," %")},e.casts)),c.a.createElement("td",{style:{width:"30%"}},c.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.casts/m*100,"%")}})))})))))}}]),a}(c.a.Component);t.a=h},786:function(e,t,a){"use strict";var n=a(27),i=a(0),s=a.n(i),l=a(88),r=a(796),c=a(28);t.a=function(e){var t=e.id,a=e.noLink,i=Object(n.a)(e,["id","noLink"]);var o=l.a[t]||{name:"Spell not recognized",icon:"inv_misc_questionmark"},d=s.a.createElement(c.a,Object.assign({icon:o.icon,alt:o.name},i));return a?d:s.a.createElement(r.a,{id:t,icon:!1},d)}},796:function(e,t,a){"use strict";var n=a(31),i=a(27),s=a(0),l=a.n(s),r=a(81),c=a(88),o=a(786);t.a=function(e){var t=e.icon,a=void 0===t||t,d=Object(i.a)(e,["icon"]),u=Object(s.useState)(null),h=Object(n.a)(u,2),m=h[0],g=h[1];Object(s.useEffect)((function(){r.a.refresh(m)}));var f=d.id,E=d.children,b=d.category,p=void 0===b?void 0:b,v=Object(i.a)(d,["id","children","category"]);return l.a.createElement("a",Object.assign({href:r.a.resource(f),target:"_blank",rel:"noopener noreferrer",className:p,ref:function(e){g(e)}},v),a&&l.a.createElement(o.a,{id:f,noLink:!0})," ",E||c.a[f].name)}},798:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=o(a(0)),r=o(a(37)),c=o(a(395));function o(e){return e&&e.__esModule?e:{default:e}}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"},h=["animateOpacity","animationStateClasses","applyInlineTransitions","children","contentClassName","delay","duration","easing","height","onAnimationEnd","onAnimationStart"];function m(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];if(!a.length)return e;for(var i={},s=Object.keys(e),l=0;l<s.length;l++){var r=s[l];-1===a.indexOf(r)&&(i[r]=e[r])}return i}function g(e){e.forEach((function(e){return cancelAnimationFrame(e)}))}function f(e){return!isNaN(parseFloat(e))&&isFinite(e)}function E(e){return"string"===typeof e&&e.search("%")===e.length-1&&f(e.substr(0,e.length-1))}function b(e,t){e&&"function"===typeof e&&e(t)}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.animationFrameIDs=[];var n="auto",s="visible";f(e.height)?(n=e.height<0||"0"===e.height?0:e.height,s="hidden"):E(e.height)&&(n="0%"===e.height?0:e.height,s="hidden"),a.animationStateClasses=i({},u,e.animationStateClasses);var l=a.getStaticStateClasses(n);return a.state={animationStateClasses:l,height:n,overflow:s,shouldUseTransitions:!1},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.state.height;this.contentElement&&this.contentElement.style&&this.hideContent(e)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props,i=n.delay,s=n.duration,l=n.height,r=n.onAnimationEnd,o=n.onAnimationStart;if(this.contentElement&&l!==e.height){var u;this.showContent(t.height),this.contentElement.style.overflow="hidden";var h=this.contentElement.offsetHeight;this.contentElement.style.overflow="";var m=s+i,p=null,v={height:null,overflow:"hidden"},O="auto"===t.height;f(l)?(p=l<0||"0"===l?0:l,v.height=p):E(l)?(p="0%"===l?0:l,v.height=p):(p=h,v.height="auto",v.overflow=null),O&&(v.height=p,p=h);var y=(0,c.default)((d(u={},this.animationStateClasses.animating,!0),d(u,this.animationStateClasses.animatingUp,"auto"===e.height||l<e.height),d(u,this.animationStateClasses.animatingDown,"auto"===l||l>e.height),d(u,this.animationStateClasses.animatingToHeightZero,0===v.height),d(u,this.animationStateClasses.animatingToHeightAuto,"auto"===v.height),d(u,this.animationStateClasses.animatingToHeightSpecific,v.height>0),u)),T=this.getStaticStateClasses(v.height);this.setState({animationStateClasses:y,height:p,overflow:"hidden",shouldUseTransitions:!O}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),O?(v.shouldUseTransitions=!0,g(this.animationFrameIDs),this.animationFrameIDs=function(e){var t=[];return t[0]=requestAnimationFrame((function(){t[1]=requestAnimationFrame((function(){e()}))})),t}((function(){a.setState(v),b(o,{newHeight:v.height})})),this.animationClassesTimeoutID=setTimeout((function(){a.setState({animationStateClasses:T,shouldUseTransitions:!1}),a.hideContent(v.height),b(r,{newHeight:v.height})}),m)):(b(o,{newHeight:p}),this.timeoutID=setTimeout((function(){v.animationStateClasses=T,v.shouldUseTransitions=!1,a.setState(v),"auto"!==l&&a.hideContent(p),b(r,{newHeight:p})}),m))}}},{key:"componentWillUnmount",value:function(){g(this.animationFrameIDs),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),this.timeoutID=null,this.animationClassesTimeoutID=null,this.animationStateClasses=null}},{key:"showContent",value:function(e){0===e&&(this.contentElement.style.display="")}},{key:"hideContent",value:function(e){0===e&&(this.contentElement.style.display="none")}},{key:"getStaticStateClasses",value:function(e){var t;return(0,c.default)((d(t={},this.animationStateClasses.static,!0),d(t,this.animationStateClasses.staticHeightZero,0===e),d(t,this.animationStateClasses.staticHeightSpecific,e>0),d(t,this.animationStateClasses.staticHeightAuto,"auto"===e),t))}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.animateOpacity,s=a.applyInlineTransitions,r=a.children,o=a.className,u=a.contentClassName,g=a.delay,f=a.duration,E=a.easing,b=a.id,p=a.style,v=this.state,O=v.height,y=v.overflow,T=v.animationStateClasses,k=v.shouldUseTransitions,S=i({},p,{height:O,overflow:y||p.overflow});k&&s&&(S.transition="height "+f+"ms "+E+" "+g+"ms",p.transition&&(S.transition=p.transition+", "+S.transition),S.WebkitTransition=S.transition);var A={};n&&(A.transition="opacity "+f+"ms "+E+" "+g+"ms",A.WebkitTransition=A.transition,0===O&&(A.opacity=0));var C=(0,c.default)((d(e={},T,!0),d(e,o,o),e)),L="undefined"!==typeof this.props["aria-hidden"]?this.props["aria-hidden"]:0===O;return l.default.createElement("div",i({},m.apply(void 0,[this.props].concat(h)),{"aria-hidden":L,className:C,id:b,style:S}),l.default.createElement("div",{className:u,style:A,ref:function(e){return t.contentElement=e}},r))}}]),t}(l.default.Component);p.propTypes={"aria-hidden":r.default.bool,animateOpacity:r.default.bool,animationStateClasses:r.default.object,applyInlineTransitions:r.default.bool,children:r.default.any.isRequired,className:r.default.string,contentClassName:r.default.string,delay:r.default.number,duration:r.default.number,easing:r.default.string,height:function(e,t,a){var i=e[t];return"number"===typeof i&&i>=0||E(i)||"auto"===i?null:new TypeError('value "'+i+'" of type "'+("undefined"===typeof i?"undefined":n(i))+'" is invalid type for '+t+" in "+a+'. It needs to be a positive number, string "auto" or percentage string (e.g. "15%").')},id:r.default.string,onAnimationEnd:r.default.func,onAnimationStart:r.default.func,style:r.default.object},p.defaultProps={animateOpacity:!1,animationStateClasses:u,applyInlineTransitions:!0,duration:250,delay:0,easing:"ease",style:{}},t.default=p},844:function(e,t,a){"use strict";function n(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t/1e3/e+a-1}a.d(t,"a",(function(){return n}))},849:function(e,t,a){"use strict";var n=a(26),i=a(8),s=a(9),l=a(119),r=a(10),c=a(11),o=a(0),d=a.n(o),u=a(43),h=a(3),m=a(53),g=a(33),f=a(4),E=a(756),b=a(54),p=a(750),v=a(766),O=a(826),y=a(15),T=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];if((e=t.call.apply(t,[this].concat(r))).checksPassedMap=new Map,e.checksFailedMap=new Map,e.checksPhysical=[],e.checksMagical=[],e.buffCheckPhysical=[],e.buffCheckMagical=[],e.buffCheckPhysAndMag=[],e.debuffCheckPhysical=[],e.debuffCheckMagical=[],e.debuffCheckPhysAndMag=[],null==e.owner.boss)return e.active=!1,Object(l.a)(e);var o=Object(b.a)(e.owner.boss.id);return o.fight.softMitigationChecks&&o.fight.softMitigationChecks.physical&&o.fight.softMitigationChecks.magical?(e.checksPhysical=o.fight.softMitigationChecks.physical,e.checksMagical=o.fight.softMitigationChecks.magical,void 0!==e.checksPhysical&&void 0!==e.checksMagical||(e.checksPhysical=[],e.checksMagical=[])):(e.checksPhysical=[],e.checksMagical=[],e.buffCheckPhysical=[],e.buffCheckMagical=[],e.buffCheckPhysAndMag=[],e.debuffCheckPhysical=[],e.debuffCheckMagical=[],e.debuffCheckPhysAndMag=[]),[].concat(Object(n.a)(e.checksPhysical),Object(n.a)(e.checksMagical)).forEach((function(t){e.checksPassedMap.set(t,0),e.checksFailedMap.set(t,0)})),e.addEventListener(y.f.damage.to(u.a),e.onDamageTaken),e}return Object(s.a)(a,[{key:"onDamageTaken",value:function(e){var t=this,a=e.ability.guid,i=[],s=[],l=[];if(e.ability.type===O.a.ids.PHYSICAL?(i=this.checksPhysical,s=[].concat(Object(n.a)(this.buffCheckPhysical),Object(n.a)(this.buffCheckPhysAndMag)),l=[].concat(Object(n.a)(this.debuffCheckPhysical),Object(n.a)(this.debuffCheckPhysAndMag))):(i=this.checksMagical,s=[].concat(Object(n.a)(this.buffCheckMagical),Object(n.a)(this.buffCheckPhysAndMag)),l=[].concat(Object(n.a)(this.debuffCheckMagical),Object(n.a)(this.debuffCheckPhysAndMag))),i.includes(a)&&!e.tick)if(s.some((function(e){return t.selectedCombatant.hasBuff(e)}))||e.hitType===v.a.IMMUNE)this.checksPassedMap.set(a,this.checksPassedMap.get(a)+1);else{var r=this.enemies.getEntities()[e.sourceID];r&&l.some((function(t){return r.hasBuff(t,e.timestamp)}))?this.checksPassedMap.set(a,this.checksPassedMap.get(a)+1):this.checksFailedMap.set(a,this.checksFailedMap.get(a)+1)}}},{key:"statistic",value:function(){var e=this,t=Array.from(this.checksFailedMap.values()).reduce((function(e,t){return e+t}),0),a=Array.from(this.checksPassedMap.values()).reduce((function(e,t){return e+t}),0);if(t+a===0)return null;var i,s=[].concat(Object(n.a)(this.buffCheckPhysical),Object(n.a)(this.buffCheckMagical),Object(n.a)(this.buffCheckPhysAndMag));i=s.length>0?s[0]:h.a.SHIELD_BLOCK_BUFF.id;var l=this.physicalChecks.length>0?d.a.createElement(d.a.Fragment,null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Physical"),d.a.createElement("th",null,"Ability"),d.a.createElement("th",null,"Passed"),d.a.createElement("th",null,"Failed"))),d.a.createElement("tbody",null,this.physicalChecks.map((function(t){return d.a.createElement("tr",{key:t},d.a.createElement("td",null),d.a.createElement("th",{scope:"row"},d.a.createElement(f.a,{id:t,style:{height:"2.5em"}})),d.a.createElement("td",null,Object(g.d)(e.checksPassedMap.get(t))),d.a.createElement("td",null,Object(g.d)(e.checksFailedMap.get(t))))})))):null,r={borderTop:"none"},c=this.magicalChecks.length>0?d.a.createElement(d.a.Fragment,null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{style:r},"Magical"),d.a.createElement("th",{style:r},"Ability"),d.a.createElement("th",{style:r},"Passed"),d.a.createElement("th",{style:r},"Failed"))),d.a.createElement("tbody",null,this.magicalChecks.map((function(t){return d.a.createElement("tr",{key:t},d.a.createElement("td",null),d.a.createElement("th",{scope:"row"},d.a.createElement(f.a,{id:t,style:{height:"2.5em"}})),d.a.createElement("td",null,Object(g.d)(e.checksPassedMap.get(t))),d.a.createElement("td",null,Object(g.d)(e.checksFailedMap.get(t))))})))):null;return d.a.createElement(p.b,{icon:d.a.createElement(m.a,{id:i}),value:"".concat(Object(g.e)(a/(a+t))," %"),label:"Soft mitigation checks passed.",tooltip:d.a.createElement(d.a.Fragment,null,"Checks if one of the following buffs or debuffs were up during the mechanic:",d.a.createElement("ul",null,this.tooltip))},d.a.createElement("table",{className:"table table-condensed",style:{fontWeight:"bold"}},l,c))}},{key:"tooltip",get:function(){return[].concat(Object(n.a)(this.buffCheckPhysical),Object(n.a)(this.buffCheckMagical),Object(n.a)(this.buffCheckPhysAndMag),Object(n.a)(this.debuffCheckPhysical),Object(n.a)(this.debuffCheckMagical),Object(n.a)(this.debuffCheckPhysAndMag)).map((function(e){return d.a.createElement("li",{key:e},h.a[e].name)}))}},{key:"physicalChecks",get:function(){var e=this;return this.checksPhysical.filter((function(t){return e.checksPassedMap.get(t)+e.checksFailedMap.get(t)>0}))}},{key:"magicalChecks",get:function(){var e=this;return this.checksMagical.filter((function(t){return e.checksPassedMap.get(t)+e.checksFailedMap.get(t)>0}))}}]),a}(u.c);T.dependencies={enemies:E.a},t.a=T},966:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),l=a(11),r=a(43),c=a(53),o=a(844),d=a(753),u=a(4),h=a(750),m=a(33),g=a(15),f=a(164),E=a(0),b=a.n(E),p=a(13),v=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).abilities=void 0,i.ability=void 0,i.bonusDmg=0,i.casts=[],i.addEventListener(g.f.cast.by(r.a),i.onCast),i.addEventListener(g.f.damage.by(r.a),i.onDamage),i}return Object(i.a)(a,[{key:"onCast",value:function(e){e.ability.guid===this.ability.id&&this.casts.push({timestamp:e.timestamp,hits:0})}},{key:"onDamage",value:function(e){e.ability.guid===this.ability.id&&(this.bonusDmg+=e.amount+(e.absorbed||0),this.casts[this.casts.length-1].hits+=1)}},{key:"suggestions",value:function(e){var t=this;e(this.hitSuggestionThreshold).addSuggestion((function(e){return e(b.a.createElement(b.a.Fragment,null,"It's benefitial to delay ",b.a.createElement(u.a,{id:t.ability.id})," to hit multiple targets, but don't delay it too long or you'll miss out on casts and possible hits.")).icon(t.ability.icon).actual(p.i18n._({id:"shared.suggestions.aoeSpells.efficiency",defaults:"{0} total hits",values:{0:t.totalHits}})).recommended("".concat(t.possibleHits," or more hits were possible"))}))}},{key:"statistic",value:function(){return b.a.createElement(h.b,{position:h.a.CORE(5),icon:b.a.createElement(c.a,{id:this.ability.id}),value:"".concat(Object(m.d)(this.bonusDmg/this.owner.fightDuration*1e3)," DPS"),label:"Damage contributed",tooltip:"".concat(this.ability.name," added a total of ").concat(Object(m.d)(this.bonusDmg)," damage (").concat(Object(m.e)(this.owner.getPercentageOfTotalDamageDone(this.bonusDmg)),"%).")})}},{key:"maxCasts",get:function(){var e,t,a=null!==(e=null===(t=this.abilities.getAbility(this.ability.id))||void 0===t?void 0:t.cooldown)&&void 0!==e?e:1/0;return Math.ceil(Object(o.a)(a,this.owner.fightDuration))}},{key:"possibleHits",get:function(){var e,t=this,a=null===(e=this.abilities.getAbility(this.ability.id))||void 0===e?void 0:e.cooldown;if(void 0===a)return 0;var n=1e3*a,i=null,s=0,l=0;return this.casts.forEach((function(e){i?l+=e.timestamp-i-n:l=e.timestamp-t.owner.fight.start_time,i=e.timestamp,s+=Math.floor(l/n),l%=n,e.hits>1&&(l=0)})),l+=this.owner.currentTimestamp-(i||0),s+=Math.floor(l/n),l%=n,Math.max(this.totalHits+s,this.maxCasts)}},{key:"totalHits",get:function(){return this.casts.reduce((function(e,t){return e+t.hits}),0)}},{key:"hitSuggestionThreshold",get:function(){return{actual:this.totalHits/this.possibleHits,isLessThan:{minor:.95,average:.9,major:.8},style:f.a.PERCENTAGE}}}]),a}(r.c);v.dependencies={abilities:d.a},t.a=v}}]);
//# sourceMappingURL=ProtectionWarrior.ffd9e74f.chunk.js.map