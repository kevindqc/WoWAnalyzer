(this.webpackJsonpwowanalyzer=this.webpackJsonpwowanalyzer||[]).push([[20],{1146:function(e,t,a){},1147:function(e,t,a){},713:function(e,t,a){"use strict";a.r(t);var n=a(8),i=a(10),r=a(11),s=a(776),o=a(815),c=a(9),l=a(753),u=a(3),d=a(45),m={1:48,2:51,3:54,4:57,5:60,6:63,7:66,8:69,9:72,10:75,11:78,12:81,13:84,14:87,15:90},E=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"spellbook",value:function(){var e=this.selectedCombatant;return[{spell:u.a.CALL_DREADSTALKERS,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:20,gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.9}},{spell:u.a.HAND_OF_GULDAN_CAST,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500}},{spell:u.a.DEMONBOLT,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500}},{spell:u.a.CORRUPTION_CAST,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500},buffSpellId:u.a.CORRUPTION_DEBUFF.id},{spell:u.a.SOUL_STRIKE_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:10,enabled:e.hasTalent(u.a.SOUL_STRIKE_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.9}},{spell:u.a.SUMMON_VILEFIEND_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:45,enabled:e.hasTalent(u.a.SUMMON_VILEFIEND_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.9}},{spell:u.a.DOOM_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500},enabled:e.hasTalent(u.a.DOOM_TALENT.id),buffSpellId:u.a.DOOM_TALENT.id},{spell:u.a.SHADOW_BOLT_DEMO,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500}},{spell:u.a.BILESCOURGE_BOMBERS_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL_AOE,cooldown:30,enabled:e.hasTalent(u.a.BILESCOURGE_BOMBERS_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.9}},{spell:u.a.IMPLOSION_CAST,category:a.SPELL_CATEGORIES.ROTATIONAL_AOE,gcd:{base:1500}},{spell:u.a.SUMMON_DEMONIC_TYRANT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:90,gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.9}},{spell:u.a.NETHER_PORTAL_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,enabled:e.hasTalent(u.a.NETHER_PORTAL_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.9},buffSpellId:u.a.NETHER_PORTAL_BUFF.id},{spell:u.a.POWER_SIPHON_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:30,enabled:e.hasTalent(u.a.POWER_SIPHON_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.9}},{spell:u.a.GRIMOIRE_FELGUARD_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:120,enabled:e.hasTalent(u.a.GRIMOIRE_FELGUARD_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.9,averageIssueEfficiency:.8,majorIssueEfficiency:.7}},{spell:u.a.DEMONIC_STRENGTH_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:60,enabled:e.hasTalent(u.a.DEMONIC_STRENGTH_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.9}},{spell:u.a.UNENDING_RESOLVE,buffSpellId:u.a.UNENDING_RESOLVE.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:180,gcd:null,castEfficiency:{suggestion:!0,importance:d.a.MINOR,recommendedEfficiency:.33,averageIssueEfficiency:.2,majorIssueEfficiency:.1}},{spell:u.a.DARK_PACT_TALENT,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:60,enabled:e.hasTalent(u.a.DARK_PACT_TALENT.id),gcd:null,castEfficiency:{suggestion:!0,importance:d.a.MINOR,recommendedEfficiency:.33,averageIssueEfficiency:.2,majorIssueEfficiency:.1},buffSpellId:u.a.DARK_PACT_TALENT.id},{spell:u.a.BURNING_RUSH_TALENT,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(u.a.BURNING_RUSH_TALENT.id),gcd:{base:1500},buffSpellId:u.a.BURNING_RUSH_TALENT.id},{spell:u.a.DRAIN_LIFE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.MORTAL_COIL_TALENT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:45,enabled:e.hasTalent(u.a.MORTAL_COIL_TALENT.id),gcd:{base:1500}},{spell:u.a.DEMONIC_CIRCLE_SUMMON,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},cooldown:10,castEfficiency:{suggestion:!1}},{spell:u.a.DEMONIC_CIRCLE_TELEPORT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:30,gcd:{base:1500},castEfficiency:{suggestion:!1}},{spell:u.a.SOULSTONE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.DEMONIC_GATEWAY_CAST,category:a.SPELL_CATEGORIES.UTILITY,cooldown:10,gcd:{base:1500}},{spell:u.a.BANISH,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.CREATE_HEALTHSTONE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.CREATE_SOULWELL,category:a.SPELL_CATEGORIES.UTILITY,cooldown:120,gcd:{base:1500}},{spell:u.a.SUBJUGATE_DEMON,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.EYE_OF_KILROGG,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.FEAR_CAST,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.CURSE_OF_TONGUES,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.CURSE_OF_WEAKNESS,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.CURSE_OF_EXHAUSTION,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.HEALTH_FUNNEL_CAST,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:[u.a.SUMMON_IMP,u.a.SUMMON_VOIDWALKER,u.a.SUMMON_SUCCUBUS,u.a.SUMMON_FELHUNTER,u.a.SUMMON_FELGUARD],category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.SHADOWFURY,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},cooldown:e.hasTalent(u.a.DARKFURY_TALENT.id)?45:60},{spell:u.a.FEL_DOMINATION,category:a.SPELL_CATEGORIES.UTILITY,cooldown:e.hasConduitBySpellID(u.a.FEL_CELERITY.id)?180-m[e.conduitRankBySpellID(u.a.FEL_CELERITY.id)]:180,gcd:{base:1500}},{spell:u.a.UNENDING_BREATH,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.HOWL_OF_TERROR_TALENT,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(u.a.HOWL_OF_TERROR_TALENT.id),cooldown:40,gcd:{base:1500}}]}}]),a}(l.a),h=a(0),f=a.n(h),p=a(780),g=a(33),O=a(4),y=a(750),b=a(13),_=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).statisticOrder=y.a.CORE(1),e}return Object(c.a)(a,[{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(f.a.createElement(f.a.Fragment,null,"Your downtime can be improved. Try to Always Be Casting (ABC), try to reduce the delay between casting spells. Even if you have to move, try casting something instant. Make good use of your ",f.a.createElement(O.a,{id:u.a.DEMONIC_CIRCLE.id})," or ",f.a.createElement(O.a,{id:u.a.BURNING_RUSH_TALENT.id})," when you can.")).icon("spell_mage_altertime").actual(b.i18n._({id:"warlock.demonology.suggestions.alwaysBeCasting.downtime",defaults:"{0}% downtime",values:{0:Object(g.e)(t)}})).recommended("<".concat(Object(g.e)(a),"% is recommended"))}))}},{key:"suggestionThresholds",get:function(){return{actual:this.downtimePercentage,isGreaterThan:{minor:.1,average:.2,major:.3},style:"percentage"}}}]),a}(p.a),T=a(26),v=a(785),S=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(v.b);S.castCooldowns=[].concat(Object(T.a)(v.b.castCooldowns),[{spell:u.a.NETHER_PORTAL_TALENT,duration:20,summary:[v.a.DAMAGE]},{spell:u.a.GRIMOIRE_FELGUARD_TALENT,duration:15,summary:[v.a.DAMAGE]},{spell:u.a.SUMMON_DEMONIC_TYRANT,duration:15,summary:[v.a.DAMAGE]}]);var N=S,A=a(43),I=a(844),L=a(15),D=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._lastDemonicStrengthCast=null,e.mainPetFelstormCount=0,e.addEventListener(L.f.cast.by(A.a).spell(u.a.DEMONIC_STRENGTH_TALENT),e.demonicStrengthCast),e.addEventListener(L.f.applybuff.to(A.b).spell(u.a.FELSTORM_BUFF),e.applyFelstormBuff),e}return Object(c.a)(a,[{key:"maxCasts",get:function(){return Math.ceil(Object(I.a)(30,this.owner.fightDuration))}},{key:"suggestionThresholds",get:function(){return{actual:this.mainPetFelstormCount/this.maxCasts||0,isLessThan:{minor:.9,average:.8,major:.7},style:"percentage"}}}]),Object(c.a)(a,[{key:"demonicStrengthCast",value:function(e){this._lastDemonicStrengthCast=e.timestamp}},{key:"applyFelstormBuff",value:function(e){this._lastDemonicStrengthCast&&e.timestamp<=this._lastDemonicStrengthCast+1500||e.sourceInstance||(this.mainPetFelstormCount+=1)}},{key:"suggestions",value:function(e){var t=this;e(this.suggestionThresholds).addSuggestion((function(e,a,n){return e(f.a.createElement(f.a.Fragment,null,"You should use your Felguard's ",f.a.createElement(O.a,{id:u.a.FELSTORM_BUFF.id})," more often, preferably on cooldown.")).icon(u.a.FELSTORM_BUFF.icon).actual(b.i18n._({id:"warlock.demonology.suggestions.felstorm.casts",defaults:"{0} out of {1} ({2} %) Felstorm casts.",values:{0:t.mainPetFelstormCount,1:t.maxCasts,2:Object(g.e)(a)}})).recommended("> ".concat(Object(g.e)(n)," % is recommended"))}))}}]),a}(A.c),R=a(7),M=a(203),C=a(767),P=a(757),j=a(777),U=a(781),w=a(49),k=a(747),F=a(746),G=a(748),B=a(120),H=a(66),x=a(773),W=a(88),Y=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).resource=W.a.SOUL_SHARDS,e}return Object(c.a)(a,[{key:"onCast",value:function(e){if(this.shouldProcessCastEvent(e)){var t=this._getClassResourceIndex(e);e.classResources[t].amount/=10,e.classResources[t].cost/=10,e.classResources[t].max/=10,Object(B.a)(Object(H.a)(a.prototype),"onCast",this).call(this,e)}}},{key:"getReducedCost",value:function(e){var t=Object(B.a)(Object(H.a)(a.prototype),"getReducedCost",this).call(this,e);return e.ability.guid===u.a.CALL_DREADSTALKERS.id&&this.selectedCombatant.hasBuff(u.a.DEMONIC_CALLING_BUFF.id)&&(t-=1),t}},{key:"_getClassResourceIndex",value:function(e){return Object.keys(e.classResources).find((function(t){return e.classResources[t].type===W.a.SOUL_SHARDS}))||0}}]),a}(x.a),K=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).statisticOrder=k.a.CORE(2),e}return Object(c.a)(a,[{key:"suggestions",value:function(e){var t=this.soulShardTracker.wasted;e(this.suggestionThresholds).addSuggestion((function(e,a,n){return e("You are wasting Soul Shards. Try to use them and not let them cap and go to waste unless you're preparing for bursting adds etc.").icon("inv_misc_gem_amethyst_02").actual(b.i18n._({id:"warlock.demonology.suggestions.soulShards.wastedPerMinutes",defaults:"{shardsWasted} Soul Shards wasted ({0} per minute)",values:{0:a.toFixed(2),shardsWasted:t}})).recommended("< ".concat(n.toFixed(2)," Soul Shards per minute wasted are recommended"))}))}},{key:"statistic",value:function(){var e=this.soulShardTracker.wasted;return f.a.createElement(F.a,{position:k.a.CORE(3),size:"flexible",tooltip:f.a.createElement(f.a.Fragment,null,"In order for Focus Magic to compete with the other talents on that row, you need to ensure you are getting as much uptime out of the buff as possible. Therefore, if you forget to put the buff on another player or if they player you gave it to is not getting crits very often, then you might need to consider giving the buff to someone else. Ideally, you should aim to trade buffs with another mage who has also taken Focus Magic so you both get the full benefit.")},f.a.createElement(G.a,{spell:u.a.SOUL_SHARDS},e," ",f.a.createElement("small",null,"Wasted Soul Shards")))}},{key:"tab",value:function(){var e=this;return{title:"Soul Shard usage",url:"soul-shards",render:function(){return f.a.createElement(w.a,null,f.a.createElement(U.a,{tracker:e.soulShardTracker,showSpenders:!0}))}}}},{key:"suggestionThresholds",get:function(){return{actual:this.soulShardTracker.wasted/this.owner.fightDuration*1e3*60,isGreaterThan:{minor:.5,average:5/3,major:10/3},style:"number"}}}]),a}(A.c);K.dependencies={soulShardTracker:Y};var z=K,V=a(756),q=a(58),Z=a(751),J=a(760),X=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).damage=0,e.active=e.selectedCombatant.hasTalent(u.a.DOOM_TALENT.id),e.addEventListener(L.f.damage.by(A.a).spell(u.a.DOOM_TALENT),e.handleDoomDamage),e}return Object(c.a)(a,[{key:"uptime",get:function(){return this.enemies.getBuffUptime(u.a.DOOM_TALENT.id)/this.owner.fightDuration}},{key:"suggestionThresholds",get:function(){return{actual:this.uptime,isLessThan:{minor:.95,average:.9,major:.8},style:"percentage"}}}]),Object(c.a)(a,[{key:"handleDoomDamage",value:function(e){this.damage+=e.amount+(e.absorbed||0)}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(f.a.createElement(f.a.Fragment,null,"Your ",f.a.createElement(O.a,{id:u.a.DOOM_TALENT.id})," uptime can be improved. Try to pay more attention to your Doom on the boss, as it is one of your Soul Shard generators.")).icon(u.a.DOOM_TALENT.icon).actual(b.i18n._({id:"warlock.demonology.suggestions.doom.uptime",defaults:"{0}% Doom uptime",values:{0:Object(g.e)(t)}})).recommended(">".concat(Object(g.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"".concat(Object(g.f)(this.damage)," damage")},f.a.createElement(G.a,{spell:u.a.DOOM_TALENT},f.a.createElement(Z.a,{amount:this.damage}),f.a.createElement("br",null),f.a.createElement(J.a,null)," ",Object(g.e)(this.uptime),"% ",f.a.createElement("small",null,"Uptime")))}}]),a}(A.c);X.dependencies={enemies:V.a};var Q=X,$=a(770),ee=a(762),te=a(763),ae=a(771),ne=a(772),ie=function(e){var t=e.combatant,a=e.castEfficiency,n=e.thresholds,i=e.shardTracker,r=function(e){return f.a.createElement(te.a,{name:f.a.createElement(f.a.Fragment,null,f.a.createElement(O.a,{id:e.id,icon:!0})," uptime"),thresholds:e.thresholds})},s=function(e){return f.a.createElement(ne.a,Object.assign({castEfficiency:a.getCastEfficiencyForSpellId(e.spell)},e))};return f.a.createElement($.a,null,f.a.createElement(ee.c,{name:"Use your core spells",description:f.a.createElement(f.a.Fragment,null,"Demonology has a lot of short cooldowns that make up majority of your rotation, such as ",f.a.createElement(O.a,{id:u.a.CALL_DREADSTALKERS.id})," or Felguard's ",f.a.createElement(O.a,{id:u.a.FELSTORM_BUFF.id}),". Try to use them as much as possible.")},f.a.createElement(s,{spell:u.a.CALL_DREADSTALKERS.id}),f.a.createElement(te.a,{name:f.a.createElement(O.a,{id:u.a.FELSTORM_BUFF.id}),thresholds:n.felstorm}),t.hasTalent(u.a.BILESCOURGE_BOMBERS_TALENT.id)&&f.a.createElement(s,{spell:u.a.BILESCOURGE_BOMBERS_TALENT.id}),t.hasTalent(u.a.POWER_SIPHON_TALENT.id)&&f.a.createElement(s,{spell:u.a.POWER_SIPHON_TALENT.id}),t.hasTalent(u.a.DOOM_TALENT.id)&&f.a.createElement(r,{id:u.a.DOOM_TALENT.id,thresholds:n.doom}),t.hasTalent(u.a.SOUL_STRIKE_TALENT.id)&&f.a.createElement(s,{spell:u.a.SOUL_STRIKE_TALENT.id})),f.a.createElement(ee.c,{name:"Don't cap your Soul Shards",description:"Avoid overcapping Soul Shards."},f.a.createElement(te.a,{name:"Wasted shards per minute",thresholds:n.soulShards,valueTooltip:"You wasted ".concat(i.wasted," shards.")})),f.a.createElement(ee.c,{name:"Use your cooldowns",description:"Be mindful of your cooldowns if you are specced into them and use them when it's appropriate. It's okay to hold a cooldown for a little bit when the encounter requires it (burn phases), but generally speaking you should use them as much as you can."},f.a.createElement(s,{spell:u.a.SUMMON_DEMONIC_TYRANT.id}),t.hasTalent(u.a.DEMONIC_STRENGTH_TALENT.id)&&f.a.createElement(s,{spell:u.a.DEMONIC_STRENGTH_TALENT.id}),t.hasTalent(u.a.SUMMON_VILEFIEND_TALENT.id)&&f.a.createElement(s,{spell:u.a.SUMMON_VILEFIEND_TALENT.id}),t.hasTalent(u.a.GRIMOIRE_FELGUARD_TALENT.id)&&f.a.createElement(s,{spell:u.a.GRIMOIRE_FELGUARD_TALENT.id}),t.hasTalent(u.a.NETHER_PORTAL_TALENT.id)&&f.a.createElement(s,{spell:u.a.NETHER_PORTAL_TALENT.id})),f.a.createElement(ee.c,{name:"Use your utility and defensive spells",description:f.a.createElement(f.a.Fragment,null,"Use other spells in your toolkit to your advantage. For example, you can try to minimize necessary movement by using ",f.a.createElement(O.a,{id:u.a.DEMONIC_GATEWAY_CAST.id,icon:!0}),", ",f.a.createElement(O.a,{id:u.a.DEMONIC_CIRCLE.id,icon:!0}),", ",f.a.createElement(O.a,{id:u.a.BURNING_RUSH_TALENT.id,icon:!0})," or mitigate incoming damage with ",f.a.createElement(O.a,{id:u.a.UNENDING_RESOLVE.id,icon:!0}),"/",f.a.createElement(O.a,{id:u.a.DARK_PACT_TALENT.id,icon:!0}),".",f.a.createElement("br",null),"While you shouldn't cast these defensives on cooldown, be aware of them and use them whenever effective. Not using them at all indicates you might not be aware of them or not using them optimally.")},f.a.createElement(s,{spell:u.a.DEMONIC_CIRCLE_TELEPORT.id}),t.hasTalent(u.a.DARK_PACT_TALENT.id)&&f.a.createElement(s,{spell:u.a.DARK_PACT_TALENT.id}),f.a.createElement(s,{spell:u.a.UNENDING_RESOLVE.id})),f.a.createElement(ee.c,{name:"Always be casting",description:f.a.createElement(f.a.Fragment,null,"You should try to avoid doing nothing during the fight. When you're waiting for cooldowns, keep building Soul Shards to summon additional Wild Imps. When you have to move, use your instant abilities like ",f.a.createElement(O.a,{id:u.a.DEMONBOLT.id})," (with Demonic Core) or ",f.a.createElement(O.a,{id:u.a.SOUL_STRIKE_TALENT.id})," or try to utilize ",f.a.createElement(O.a,{id:u.a.DEMONIC_CIRCLE.id,icon:!0},"Teleport")," or ",f.a.createElement(O.a,{id:u.a.DEMONIC_GATEWAY_CAST.id,icon:!0},"Gateway")," to reduce the movement even further.")},f.a.createElement(te.a,{name:"Downtime",thresholds:n.downtime})),f.a.createElement(ae.a,{thresholds:n}))},re=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return f.a.createElement(ie,{castEfficiency:this.castEfficiency,combatant:this.combatants.selected,thresholds:Object(R.a)(Object(R.a)({},this.preparationRuleAnalyzer.thresholds),{},{doom:this.doom.suggestionThresholds,felstorm:this.felstorm.suggestionThresholds,soulShards:this.soulShardDetails.suggestionThresholds,downtime:this.alwaysBeCasting.suggestionThresholds}),shardTracker:this.soulShardTracker})}}]),a}(M.a);re.dependencies={combatants:P.a,castEfficiency:C.a,alwaysBeCasting:_,preparationRuleAnalyzer:j.a,felstorm:D,soulShardDetails:z,soulShardTracker:Y,doom:Q};var se,oe=re,ce=a(860),le="empowered",ue="inefficient",de="This pet was empowered by Demonic Tyrant",me="This Wild Imp was later Imploded",Ee="This Wild Imp was later killed with Demonic Consumption",he="This Wild Imp was later killed by Power Siphon",fe="Killed by having 0 energy",pe="Killed with Implosion",ge="Killed with Demonic Consumption",Oe="Killed with Power Siphon",ye="Killed by summoning new permanent pet",be=function(){function e(t,a,i,r,s,o,c){Object(n.a)(this,e),this.name="unknown",this.guid=null,this.id=null,this.instance=null,this.spawn=null,this.expectedDespawn=null,this.realDespawn=null,this.despawnedBy=null,this.summonAbility=null,this.summonedBy=null,this.history=[],this.meta={iconClass:"",tooltip:""},this.x=null,this.y=null,this.shouldImplode=!1,this.name=t.name,this.guid=t.guid,this.id=a,this.instance=i,this.spawn=r,this.expectedDespawn=r+s,this.summonedBy=o,this.summonAbility=c}return Object(c.a)(e,[{key:"setWildImpProperties",value:function(e){this.x=e.x,this.y=e.y,this.shouldImplode=!1,this.currentEnergy=100}},{key:"updatePosition",value:function(e){this.x=e.x,this.y=e.y}},{key:"despawn",value:function(e,t){this.realDespawn=e,this.despawnedBy=t}},{key:"pushHistory",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this.history.push([].concat(t))}},{key:"extend",value:function(){this.expectedDespawn+=15e3,this.setMeta(le,de)}},{key:"setMeta",value:function(e,t){this.meta.iconClass=e,this.meta.tooltip=t}}]),e}(),_e={WILD_IMP_HOG:{guid:55659,duration:15e3,summonAbility:u.a.WILD_IMP_HOG_SUMMON.id},DREADSTALKER:{guid:98035,duration:12e3,summonAbility:u.a.DREADSTALKER_SUMMON_1.id},VILEFIEND:{guid:135816,duration:15e3,summonAbility:u.a.SUMMON_VILEFIEND_TALENT.id},GRIMOIRE_FELGUARD:{guid:17252,duration:15e3,summonAbility:u.a.GRIMOIRE_FELGUARD_TALENT.id},DEMONIC_TYRANT:{guid:135002,duration:15e3,summonAbility:u.a.SUMMON_DEMONIC_TYRANT.id},WILD_IMP_INNER_DEMONS:{guid:143622,duration:15e3,summonAbility:u.a.WILD_IMP_ID_SUMMON.id},BILESCOURGE:{guid:136404,duration:15e3,summonAbility:u.a.BILESCOURGE_SUMMON.id,isRandom:!0},VICIOUS_HELLHOUND:{guid:136399,duration:15e3,summonAbility:u.a.VICIOUS_HELLHOUND_SUMMON.id,isRandom:!0},SHIVARRA:{guid:136406,duration:15e3,summonAbility:u.a.SHIVARRA_SUMMON.id,isRandom:!0},DARKHOUND:{guid:136408,duration:15e3,summonAbility:u.a.DARKHOUND_SUMMON.id,isRandom:!0},ILLIDARI_SATYR:{guid:136398,duration:15e3,summonAbility:u.a.ILLIDARI_SATYR_SUMMON.id,isRandom:!0},VOID_TERROR:{guid:136403,duration:15e3,summonAbility:u.a.VOID_TERROR_SUMMON.id,isRandom:!0},URZUL:{guid:136402,duration:15e3,summonAbility:u.a.URZUL_SUMMON.id,isRandom:!0},WRATHGUARD:{guid:136407,duration:15e3,summonAbility:u.a.WRATHGUARD_SUMMON.id,isRandom:!0},EYE_OF_GULDAN:{guid:136401,duration:15e3,summonAbility:u.a.EYE_OF_GULDAN_SUMMON.id,isRandom:!0},PRINCE_MALCHEZAAR:{guid:136397,duration:15e3,summonAbility:u.a.PRINCE_MALCHEZAAR_SUMMON.id,isRandom:!0}},Te=(se=_e,Object.keys(se).forEach((function(e){var t=se[e];se[t.guid]=t})),se),ve=function(e){return e===Te.WILD_IMP_HOG.guid||e===Te.WILD_IMP_INNER_DEMONS.guid},Se=function(e){return Object(ce.a)(e)||Boolean(Te[e])},Ne=function(){function e(){Object(n.a)(this,e),this.timeline=[]}return Object(c.a)(e,[{key:"addPet",value:function(e){this.timeline.push(e)}},{key:"find",value:function(e){return this.timeline.find(e)}},{key:"filter",value:function(e){return this.timeline.filter(e)}},{key:"tryDespawnLastPermanentPet",value:function(e){var t=this.timeline.filter((function(e){return Object(ce.a)(e.guid)}));t.length>0&&t[t.length-1].despawn(e,ye)}},{key:"getPetsAtTimestamp",value:function(e){return this.timeline.filter((function(t){return Se(t.guid)&&t.spawn<=e&&e<=(t.realDespawn||t.expectedDespawn)}))}},{key:"groupPetsBySummonAbility",value:function(){return this.timeline.reduce((function(e,t){var a=-1!==t.summonedBy?t.summonedBy:"unknown",n=u.a[t.summonedBy]&&u.a[t.summonedBy].name||"unknown";return e[a]=e[a]||{spellName:n,pets:[]},e[a].pets.push(t),e}),{})}}]),e}(),Ae=function(){function e(){Object(n.a)(this,e),this.pets={}}return Object(c.a)(e,[{key:"addDamage",value:function(e,t,a){this._ensureFieldExists(e.guid,e.name,t),this.pets[e.guid].instances[t]+=a,this.pets[e.guid].total+=a}},{key:"getDamageForGuid",value:function(e,t){return null===t?this.pets[e].total:this.pets[e].instances[t]}},{key:"_ensureFieldExists",value:function(e,t,a){this.pets[e]=this.pets[e]||{name:t,instances:{},total:0},this.pets[e].instances[a]=this.pets[e].instances[a]||0}},{key:"hasEntry",value:function(e,t){return null===t?Boolean(this.pets[e]):this.pets[e]&&void 0!==this.pets[e].instances[t]}},{key:"permanentPetDamage",get:function(){var e=this;return Object.keys(this.pets).filter((function(e){return Object(ce.a)(e)})).map((function(t){return e.getDamageForGuid(t,null)})).reduce((function(e,t){return e+t}),0)}}]),e}(),Ie=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).damage=new Ae,e.timeline=new Ne,e}return Object(c.a)(a,[{key:"getPetDamage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=a?e:this._toGuid(e);return this.damage.hasEntry(n,t)?this.damage.getDamageForGuid(n,t):0}},{key:"getPetCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.owner.currentTimestamp,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.timeline.getPetsAtTimestamp(e).filter((function(e){return!t||e.id===t})).length}},{key:"_getPets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.owner.currentTimestamp;return this.timeline.getPetsAtTimestamp(e)}},{key:"_getPetFromTimeline",value:function(e,t){return this.timeline.find((function(a){return a.id===e&&a.instance===t}))}},{key:"_getPetInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(t?this.owner.playerPets.find((function(t){return t.guid===e})):this.owner.playerPets.find((function(t){return t.id===e})))||null}},{key:"_toGuid",value:function(e){return this._getPetInfo(e).guid}},{key:"currentPets",get:function(){return this._getPets()}},{key:"permanentPetDamage",get:function(){return this.damage.permanentPetDamage}},{key:"petsBySummonAbility",get:function(){return this.timeline.groupPetsBySummonAbility()}}]),a}(A.c),Le=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).demonicTyrantPower=[],e._hasDemonicConsumption=!1,e._petsPerCast=[],e.addEventListener(L.f.cast.by(A.a).spell(u.a.SUMMON_DEMONIC_TYRANT),e.summonDemonicTyrantCast),e._hasDemonicConsumption=e.selectedCombatant.hasTalent(u.a.DEMONIC_CONSUMPTION_TALENT.id),e}return Object(c.a)(a,[{key:"summonDemonicTyrantCast",value:function(){var e=this.demoPets.currentPets,t={},a=0;e.forEach((function(e){ve(e.guid)&&(a+=e.currentEnergy/2),t[e.summonedBy]=(t[e.summonedBy]||0)+1})),this.demonicTyrantPower.push(a),this._petsPerCast.push(t)}},{key:"statistic",value:function(){var e=this,t=this._petsPerCast.reduce((function(e,t){return e+Object.values(t).reduce((function(e,t){return e+t}),0)}),0)/this._petsPerCast.length||0,a={};this._petsPerCast.forEach((function(e){Object.keys(e).forEach((function(t){a[t]=(a[t]||0)+e[t]}))}));var n=[];Object.keys(a).forEach((function(t){n.push(f.a.createElement("tr",{key:t},f.a.createElement("td",{align:"left"},f.a.createElement(O.a,{id:Number(t)})),f.a.createElement("td",{align:"middle"},(a[t]/e._petsPerCast.length).toFixed(2))))}));var i=this.demonicTyrantPower.reduce((function(e,t){return e+t}),0)/this.demonicTyrantPower.length||0,r=this._hasDemonicConsumption?"Average demonic consumption power: ".concat(i.toFixed(2),"%"):null,s=this._petsPerCast.length>0?f.a.createElement(f.a.Fragment,null,f.a.createElement("thead",null,f.a.createElement("tr",null,f.a.createElement("th",null,"Pet Source"),f.a.createElement("th",null,"Avg Pets per Cast"))),f.a.createElement("tbody",null,n)):null;return f.a.createElement(F.a,{position:k.a.CORE(6),size:"flexible",tooltip:"Number of pets empowered by each Demonic Tyrant summon.",dropdown:s,footer:r},f.a.createElement(G.a,{spell:u.a.SUMMON_DEMONIC_TYRANT},"".concat(t.toFixed(2))," ",f.a.createElement("small",null,"Avg. demons empowered")))}}]),a}(A.c);Le.dependencies={demoPets:Ie};var De=Le,Re=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).casts=0,e.damage=0,e.addEventListener(L.f.cast.by(A.b).spell(u.a.FELGUARD_LEGION_STRIKE),e.legionStrikeCast),e.addEventListener(L.f.damage.by(A.b).spell(u.a.FELGUARD_LEGION_STRIKE),e.legionStrikeDamage),e}return Object(c.a)(a,[{key:"suggestionThresholds",get:function(){return{actual:this.casts,isLessThan:{minor:1,average:0,major:0},style:"number"}}}]),Object(c.a)(a,[{key:"legionStrikeCast",value:function(e){this._isPermanentPet(e.sourceID)&&(this.casts+=1)}},{key:"legionStrikeDamage",value:function(e){this._isPermanentPet(e.sourceID)&&(this.damage+=e.amount+(e.absorbed||0))}},{key:"_getPetGuid",value:function(e){return this.owner.playerPets.find((function(t){return t.id===e})).guid}},{key:"_isPermanentPet",value:function(e){var t=this._getPetGuid(e);return Object(ce.a)(t)}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(f.a.createElement(f.a.Fragment,null,"Your Felguard didn't cast ",f.a.createElement(O.a,{id:u.a.FELGUARD_LEGION_STRIKE.id})," at all. Remember to turn on the auto-cast for this ability as it's a great portion of your total damage.")).icon(u.a.FELGUARD_LEGION_STRIKE.icon).actual(b.i18n._({id:"warlock.demonology.suggestions.legionStrike.casts",defaults:"{actual} Legion Strike casts",values:{actual:t}})).recommended("> ".concat(a," casts are recommended"))}))}},{key:"statistic",value:function(){return f.a.createElement(F.a,{position:k.a.CORE(5),size:"flexible",tooltip:"".concat(Object(g.f)(this.damage)," damage")},f.a.createElement(G.a,{spell:u.a.FELGUARD_LEGION_STRIKE},f.a.createElement(Z.a,{amount:this.damage})))}}]),a}(A.c),Me=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).addEventListener(L.f.damage.by(A.b),e.onPetDamage),e}return Object(c.a)(a,[{key:"onPetDamage",value:function(e){var t=this.demoPets._getPetInfo(e.sourceID);if(t){var a=e.amount+(e.absorbed||0);this.demoPets.damage.addDamage(t,e.sourceInstance,a)}}}]),a}(A.c);Me.dependencies={demoPets:Ie};var Ce,Pe,je=Me,Ue=a(12),we=[u.a.SUMMON_IMP.id,u.a.SUMMON_VOIDWALKER.id,u.a.SUMMON_FELHUNTER.id,u.a.SUMMON_SUCCUBUS.id,u.a.SUMMON_FELGUARD.id,u.a.FEL_IMP_SUMMON.id,u.a.VOIDLORD_SUMMON.id,u.a.OBSERVER_SUMMON.id,u.a.SHADOW_SUCCUBUS_SUMMON.id,u.a.SHIVARRA_PERMANENT_SUMMON.id,u.a.WRATHGUARD_PERMANENT_SUMMON.id],ke=[u.a.WILD_IMP_HOG_SUMMON.id,u.a.DREADSTALKER_SUMMON_1.id,u.a.DREADSTALKER_SUMMON_2.id,u.a.SUMMON_VILEFIEND_TALENT.id,u.a.GRIMOIRE_FELGUARD_TALENT.id,u.a.SUMMON_DEMONIC_TYRANT.id,u.a.WILD_IMP_ID_SUMMON.id,u.a.BILESCOURGE_SUMMON.id,u.a.VICIOUS_HELLHOUND_SUMMON.id,u.a.SHIVARRA_SUMMON.id,u.a.DARKHOUND_SUMMON.id,u.a.ILLIDARI_SATYR_SUMMON.id,u.a.VOID_TERROR_SUMMON.id,u.a.URZUL_SUMMON.id,u.a.WRATHGUARD_SUMMON.id,u.a.EYE_OF_GULDAN_SUMMON.id,u.a.PRINCE_MALCHEZAAR_SUMMON.id],Fe=[].concat(we,ke),Ge=(Ce={},Object(Ue.a)(Ce,u.a.SUMMON_IMP.id,u.a.SUMMON_IMP.id),Object(Ue.a)(Ce,u.a.FEL_IMP_SUMMON.id,u.a.SUMMON_IMP.id),Object(Ue.a)(Ce,u.a.SUMMON_VOIDWALKER.id,u.a.SUMMON_VOIDWALKER.id),Object(Ue.a)(Ce,u.a.VOIDLORD_SUMMON.id,u.a.SUMMON_VOIDWALKER.id),Object(Ue.a)(Ce,u.a.SUMMON_FELHUNTER.id,u.a.SUMMON_FELHUNTER.id),Object(Ue.a)(Ce,u.a.OBSERVER_SUMMON.id,u.a.SUMMON_FELHUNTER.id),Object(Ue.a)(Ce,u.a.SUMMON_SUCCUBUS.id,u.a.SUMMON_SUCCUBUS.id),Object(Ue.a)(Ce,u.a.SHADOW_SUCCUBUS_SUMMON.id,u.a.SUMMON_SUCCUBUS.id),Object(Ue.a)(Ce,u.a.SHIVARRA_PERMANENT_SUMMON.id,u.a.SUMMON_SUCCUBUS.id),Object(Ue.a)(Ce,u.a.SUMMON_FELGUARD.id,u.a.SUMMON_FELGUARD.id),Object(Ue.a)(Ce,u.a.WRATHGUARD_PERMANENT_SUMMON.id,u.a.SUMMON_FELGUARD.id),Object(Ue.a)(Ce,u.a.WILD_IMP_HOG_SUMMON.id,u.a.HAND_OF_GULDAN_CAST.id),Object(Ue.a)(Ce,u.a.DREADSTALKER_SUMMON_1.id,u.a.CALL_DREADSTALKERS.id),Object(Ue.a)(Ce,u.a.DREADSTALKER_SUMMON_2.id,u.a.CALL_DREADSTALKERS.id),Object(Ue.a)(Ce,u.a.SUMMON_VILEFIEND_TALENT.id,u.a.SUMMON_VILEFIEND_TALENT.id),Object(Ue.a)(Ce,u.a.GRIMOIRE_FELGUARD_TALENT.id,u.a.GRIMOIRE_FELGUARD_TALENT.id),Object(Ue.a)(Ce,u.a.SUMMON_DEMONIC_TYRANT.id,u.a.SUMMON_DEMONIC_TYRANT.id),Object(Ue.a)(Ce,u.a.WILD_IMP_ID_SUMMON.id,u.a.INNER_DEMONS_TALENT.id),Ce),Be=(Pe={},Object(Ue.a)(Pe,u.a.IMP_FIREBOLT.id,u.a.SUMMON_IMP.id),Object(Ue.a)(Pe,u.a.VOIDWALKER_CONSUMING_SHADOWS.id,u.a.SUMMON_VOIDWALKER.id),Object(Ue.a)(Pe,u.a.FELHUNTER_SHADOW_BITE.id,u.a.SUMMON_FELHUNTER.id),Object(Ue.a)(Pe,u.a.SUCCUBUS_LASH_OF_PAIN.id,u.a.SUMMON_SUCCUBUS.id),Object(Ue.a)(Pe,u.a.FELGUARD_PURSUIT.id,u.a.SUMMON_FELGUARD.id),Object(Ue.a)(Pe,u.a.FELSTORM_DAMAGE.id,u.a.SUMMON_FELGUARD.id),Object(Ue.a)(Pe,u.a.FELGUARD_LEGION_STRIKE.id,u.a.SUMMON_FELGUARD.id),Object(Ue.a)(Pe,u.a.FELSTORM_BUFF.id,u.a.SUMMON_FELGUARD.id),Pe),He=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._lastDemonicTyrantCast=null,i._lastIDtick=null,i._lastSpendResource=null,i._lastPlayerPosition={x:0,y:0},i.addEventListener(L.f.summon.by(A.a),i.onSummon),i.addEventListener(L.f.cast.by(A.a),i.onCast),i.addEventListener(L.f.SpendResource.by(A.a),i.onSpendResource),i.addEventListener(L.f.damage.to(A.a),i.onDamageTaken),i.addEventListener(L.f.energize.to(A.a),i.onEnergize),i.addEventListener(L.f.heal.to(A.a),i.onHealTaken),i.addEventListener(L.f.absorbed.to(A.a),i.onAbsorb),i}return Object(c.a)(a,[{key:"onSummon",value:function(e){var t=this.demoPets._getPetInfo(e.targetID);if(t){Object(ce.a)(t.guid)&&this.demoPets.timeline.tryDespawnLastPermanentPet(e.timestamp);var a=new be(t,e.targetID,e.targetInstance,e.timestamp,this._getPetDuration(e.targetID),this._getSummonSpell(e),e.ability.guid);if(ve(a.guid)&&a.setWildImpProperties(this._lastPlayerPosition),"Demonic Tyrant"===t.name&&this.selectedCombatant.hasTalent(u.a.DEMONIC_CONSUMPTION_TALENT.id)){var n=this.demoPets.currentPets.filter((function(e){return ve(e.guid)})).map((function(e){return e.currentEnergy})).reduce((function(e,t){return e+t}),0);a.setMeta(le,"Empowered by ".concat((n/2).toFixed(2)," % from consuming imps"))}this.demoPets.timeline.addPet(a),a.pushHistory(e.timestamp,"Summoned",e),a.summonedBy===u.a.INNER_DEMONS_TALENT.id&&(this._lastIDtick=e.timestamp)}}},{key:"onCast",value:function(e){this._updatePlayerPosition(e),e.ability.guid===u.a.SUMMON_DEMONIC_TYRANT.id&&(this._lastDemonicTyrantCast=e.timestamp)}},{key:"onSpendResource",value:function(e){this._lastSpendResource=e.timestamp}},{key:"onDamageTaken",value:function(e){this._updatePlayerPosition(e)}},{key:"onEnergize",value:function(e){this._updatePlayerPosition(e)}},{key:"onHealTaken",value:function(e){this._updatePlayerPosition(e)}},{key:"onAbsorb",value:function(e){this._updatePlayerPosition(e)}},{key:"_getPetDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.demoPets._getPetInfo(e,t);if(!a)return-1;if(Object(ce.a)(a.guid))return 1/0;if(!Te[a.guid])return-1;if(ve(a.guid)&&this.selectedCombatant.hasBuff(u.a.DEMONIC_POWER.id)){var n=this._lastDemonicTyrantCast+15e3-this.owner.currentTimestamp;return Te[a.guid].duration+n}return Te[a.guid].duration}},{key:"_getSummonSpell",value:function(e){return Ge[e.ability.guid]?Ge[e.ability.guid]:e.timestamp<=this._lastIDtick+150?u.a.INNER_DEMONS_TALENT.id:this.selectedCombatant.hasBuff(u.a.NETHER_PORTAL_BUFF.id)&&e.timestamp<=this._lastSpendResource+150?u.a.NETHER_PORTAL_TALENT.id:-1}},{key:"_updatePlayerPosition",value:function(e){e.x&&e.y&&(this._lastPlayerPosition.x=e.x,this._lastPlayerPosition.y=e.y)}}]),a}(A.c);He.dependencies={demoPets:Ie};var xe=He,We=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._wildImpIds=[],e.initializeWildImps(),e.addEventListener(L.f.cast.by(A.b),e.onPetCast),e}return Object(c.a)(a,[{key:"onPetCast",value:function(e){if(this._wildImpIds.includes(e.sourceID)){var t=this.demoPets._getPetFromTimeline(e.sourceID,e.sourceInstance);if(t&&!(t.realDespawn&&e.timestamp>=t.realDespawn)){var a=e.classResources&&e.classResources.find((function(e){return e.type===W.a.ENERGY.id}));if(a){t.updatePosition(e);var n=t.currentEnergy,i=a.amount-(a.cost||0);t.currentEnergy=i,n===t.currentEnergy&&t.setMeta(le,de),t.pushHistory(e.timestamp,"Cast",e,"old energy",n,"new energy",t.currentEnergy),0===t.currentEnergy&&(t.despawn(e.timestamp,fe),t.pushHistory(e.timestamp,"Killed by 0 energy",e))}}}}},{key:"initializeWildImps",value:function(){this._wildImpIds.push(this._toId(Te.WILD_IMP_HOG.guid)),this.selectedCombatant.hasTalent(u.a.INNER_DEMONS_TALENT.id)&&this._wildImpIds.push(this._toId(Te.WILD_IMP_INNER_DEMONS.guid))}},{key:"_toId",value:function(e){return this.demoPets._getPetInfo(e,!0).id}}]),a}(A.c);We.dependencies={demoPets:Ie};var Ye=We,Ke=a(764),ze=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).active=e.selectedCombatant.hasTalent(u.a.POWER_SIPHON_TALENT.id),e.addEventListener(L.f.cast.by(A.a).spell(u.a.POWER_SIPHON_TALENT),e.onPowerSiphonCast),e}return Object(c.a)(a,[{key:"onPowerSiphonCast",value:function(e){!e.activeImpsAfterCast||e.activeImpsAfterCast.length;var t=this.demoPets.currentPets.filter((function(e){return ve(e.guid)&&!e.shouldImplode})).sort((function(e,t){return e.currentEnergy-t.currentEnergy||e.spawn-t.spawn})),a=t.filter((function(t){return!e.activeImpsAfterCast.includes(Object(Ke.b)(t.id,t.instance))}));0!==a.length&&a.slice(0,2).forEach((function(t){t.despawn(e.timestamp,Oe),t.setMeta(ue,he),t.pushHistory(e.timestamp,"Killed by Power Siphon",e)}))}}]),a}(A.c);ze.dependencies={demoPets:Ie};var Ve=ze,qe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._lastCast=null,e._hasDemonicConsumption=!1,e._hasDemonicConsumption=e.selectedCombatant.hasTalent(u.a.DEMONIC_CONSUMPTION_TALENT.id),e.addEventListener(L.f.cast.by(A.a).spell(u.a.SUMMON_DEMONIC_TYRANT),e.onDemonicTyrantCast),e.addEventListener(L.f.removebuff.to(A.a).spell(u.a.DEMONIC_POWER),e.onDemonicPowerRemove),e}return Object(c.a)(a,[{key:"onDemonicTyrantCast",value:function(e){var t=this;this._lastCast=e.timestamp;var a=this.demoPets.currentPets;a.forEach((function(a){a.extend(),a.pushHistory(e.timestamp,"Extended with Demonic Tyrant",e),t._hasDemonicConsumption&&ve(a.guid)&&(a.despawn(e.timestamp,ge),a.setMeta(ue,Ee),a.pushHistory(e.timestamp,"Killed by Demonic Consumption",e))}))}},{key:"onDemonicPowerRemove",value:function(e){var t=e.timestamp-this._lastCast;this.demoPets.currentPets.filter((function(e){return ve(e.guid)})).forEach((function(a){var n=a.expectedDespawn;a.expectedDespawn=a.spawn+Te.WILD_IMP_HOG.duration+t,a.pushHistory(e.timestamp,"Updated expected despawn from",n,"to",a.expectedDespawn)}))}}]),a}(A.c);qe.dependencies={demoPets:Ie};var Ze=qe,Je=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._lastCast=null,e._targetsHit=[],e.addEventListener(L.f.cast.by(A.a).spell(u.a.IMPLOSION_CAST),e.onImplosionCast),e.addEventListener(L.f.damage.by(A.a).spell(u.a.IMPLOSION_DAMAGE),e.onImplosionDamage),e}return Object(c.a)(a,[{key:"onImplosionCast",value:function(e){var t=this.demoPets.currentPets.filter((function(e){return ve(e.guid)}));t.some((function(e){return null===e.x||null===e.y}))||(t.forEach((function(t){t.shouldImplode=!0,t.pushHistory(e.timestamp,"Marked for implosion",e)})),this._lastCast=e.timestamp,this._targetsHit=[])}},{key:"onImplosionDamage",value:function(e){var t=this;if(e.x&&e.y){var a=Object(Ke.b)(e.targetID,e.targetInstance);if(0===this._targetsHit.length);else if(this._targetsHit.includes(a));else if(this._targetsHit.length>0&&!this._targetsHit.includes(a))return void this._targetsHit.push(a);this._targetsHit=[a];var n=this.demoPets._getPets(this._lastCast).filter((function(e){return ve(e.guid)&&e.shouldImplode&&!e.realDespawn})).sort((function(a,n){return t._getDistance(a.x,a.y,e.x,e.y)-t._getDistance(n.x,n.y,e.x,e.y)}));if(0!==n.length)n[0].despawn(e.timestamp,pe),n[0].setMeta(ue,me),n[0].pushHistory(e.timestamp,"Killed by Implosion",e);else{if(!this.demoPets._getPets(this._lastCast).some((function(e){return ve(e.guid)})))return;this.demoPets._getPets(this._lastCast).some((function(e){return ve(e.guid)&&e.shouldImplode}))}}}},{key:"_getDistance",value:function(e,t,a,n){return Math.sqrt((e-a)*(e-a)+(t-n)*(t-n))}}]),a}(A.c);Je.dependencies={demoPets:Ie};var Xe=Je,Qe=a(857),$e=a(933),et=a(27),tt=a(23),at=a(1143),nt=a.n(at),it=(a(1145),a(28)),rt=(a(1146),a(22)),st=function(e){var t=e.start,a=e.secondWidth,n=e.deaths,i=e.resurrections;return f.a.createElement(f.a.Fragment,null,n.map((function(e){var n=e.start||e.timestamp,i=(n-t)/1e3,r=(n-t)/1e3*a;return f.a.createElement(rt.b,{key:"death-".concat(e.timestamp),content:"".concat(Object(g.a)(i,3),": You died")},f.a.createElement("div",{className:"death",style:{left:r}}))})),i.map((function(e){var n=e.start||e.timestamp,i=(n-t)/1e3,r=(n-t)/1e3*a;return f.a.createElement(rt.b,{key:"resurrection-".concat(e.timestamp),content:"".concat(Object(g.a)(i,3),": You were resurrected")},f.a.createElement("div",{className:"resurrection",style:{left:r}}))})))},ot=a(53),ct=function(e){var t=e.className,a=e.pets,n=e.start,i=e.totalWidth,r=e.secondWidth;return f.a.createElement("div",{className:"events ".concat(t||""),style:{width:i}},a.map((function(e,t){var a=(e.spawn-n)/1e3*r,s=(e.spawn-n)/1e3*r,o=i-s,c=Math.min(o,((e.realDespawn||e.expectedDespawn)-e.spawn)/1e3*r),l=Boolean(u.a[e.summonAbility]),d=""!==e.meta.tooltip;return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{key:"".concat(t,"-icon"),style:{left:a,top:-1,zIndex:10}},l&&(d?f.a.createElement(rt.b,{content:e.meta.tooltip},f.a.createElement("div",null,f.a.createElement(ot.a,{id:e.summonAbility,className:e.meta.iconClass}))):f.a.createElement(ot.a,{id:e.summonAbility,className:e.meta.iconClass})),!l&&f.a.createElement(rt.b,{content:e.name},f.a.createElement("div",null,f.a.createElement(it.a,{icon:"inv_misc_questionmark"})))),f.a.createElement("div",{key:"".concat(t,"-duration"),style:{left:s,width:c,background:"rgba(150, 150, 150, 0.4)"},"data-effect":"float"}))})))},lt=function(e){var t=e.className,a=e.events,n=e.start,i=e.totalWidth,r=e.secondWidth;return f.a.createElement("div",{className:"events ".concat(t||""),style:{width:i}},a.map((function(e,t){if(e.type===L.b.Cast){var a=(e.timestamp-n)/1e3*r,s=[];e.extraInfo&&s.push(e.extraInfo),e.nearbyCasts&&s.push("This cast overlaps with following casts: ".concat(e.nearbyCasts.join(", "),"."));var o=s.length>0;return f.a.createElement("div",{key:t,style:{left:a,top:-1,zIndex:e.important?20:10}},o?f.a.createElement(rt.b,{content:s.join("\n")},f.a.createElement("div",null,f.a.createElement(ot.a,{id:e.abilityId,className:e.important&&"enhanced"}))):f.a.createElement(ot.a,{id:e.abilityId,className:e.important&&"enhanced"}))}if("duration"===e.type){var c=(e.timestamp-n)/1e3*r,l=i-c,u=Math.min(l,(e.endTimestamp-e.timestamp)/1e3*r);return f.a.createElement("div",{key:t,style:{left:c,width:u,background:"rgba(133, 59, 255, 0.7)"},"data-effect":"float"})}return null})))},ut=(a(1147),function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).gemini=null,e.handleMouseWheel=e.handleMouseWheel.bind(Object(tt.a)(e)),e.state={zoom:2},e}return Object(c.a)(a,[{key:"pets",get:function(){return this.props.petTimeline.groupPetsBySummonAbility()}},{key:"keyEvents",get:function(){var e=this.importantEvents;return e=this.decorateCloseCasts(e),e=this.decorateImplosionCasts(e)}},{key:"importantEvents",get:function(){var e=this.props,t=e.historyBySpellId,a=e.selectedCombatant,n=[],i=[u.a.SUMMON_DEMONIC_TYRANT.id,u.a.IMPLOSION_CAST.id,u.a.NETHER_PORTAL_TALENT.id,u.a.POWER_SIPHON_TALENT.id],r=this.filterHistoryCasts(u.a.SUMMON_DEMONIC_TYRANT.id),s=this.filterHistoryCasts(u.a.IMPLOSION_CAST.id),o=this.filterHistoryCasts(u.a.POWER_SIPHON_TALENT.id);if(n.push.apply(n,Object(T.a)(r).concat(Object(T.a)(s),Object(T.a)(o))),a.hasTalent(u.a.NETHER_PORTAL_TALENT.id)){var c=this.filterHistoryCasts(u.a.NETHER_PORTAL_TALENT.id),l=c.map((function(e){return{type:"duration",timestamp:e.timestamp,endTimestamp:e.timestamp+15e3}})),d=[];c.length>0&&Object.keys(t).filter((function(e){return!i.includes(Number(e))})).map((function(e){return t[e]})).forEach((function(e){var t=e.filter((function(e){return e.type===L.b.Cast&&l.some((function(t){return t.timestamp<=e.timestamp&&e.timestamp<=t.endTimestamp}))})).map((function(e){return{type:L.b.Cast,timestamp:e.timestamp,abilityId:e.ability.guid,abilityName:e.ability.name}}));d.push.apply(d,Object(T.a)(t))})),n.push.apply(n,Object(T.a)(c).concat(Object(T.a)(l),d))}return n.sort((function(e,t){return e.timestamp-t.timestamp}))}}]),Object(c.a)(a,[{key:"handleMouseWheel",value:function(e){this.gemini&&this.gemini.scrollbar&&(e.preventDefault(),e.stopPropagation(),e.detail>0?this.gemini.scrollbar._viewElement.scrollLeft-=e.deltaY:this.gemini.scrollbar._viewElement.scrollLeft+=e.deltaY)}},{key:"decorateCloseCasts",value:function(e){for(var t=0;t<e.length;t+=1){var a=e[t];if(a.type===L.b.Cast)for(var n=Math.max(t-3,0),i=Math.min(t+3,e.length-1),r=a.timestamp-250,s=a.timestamp+250,o=n;o<=i;o+=1)o!==t&&e[o].type===L.b.Cast&&r<=e[o].timestamp&&e[o].timestamp<=s&&(a.nearbyCasts=a.nearbyCasts||[],a.nearbyCasts.push(e[o].abilityName))}return e}},{key:"decorateImplosionCasts",value:function(e){var t=this.props.petTimeline;return e.filter((function(e){return e.type===L.b.Cast&&e.abilityId===u.a.IMPLOSION_CAST.id})).forEach((function(e){var a=t.getPetsAtTimestamp(e.timestamp).filter((function(e){return ve(e.guid)})).length;e.extraInfo="Imploded ".concat(a," Wild Imp").concat(a>1?"s":"")})),e}},{key:"filterHistoryCasts",value:function(e){var t=this.props.historyBySpellId;return t[e]?t[e].filter((function(e){return e.type===L.b.Cast})).map((function(e){return{type:L.b.Cast,important:!0,timestamp:e.timestamp,abilityId:e.ability.guid,abilityName:e.ability.name}})):[]}},{key:"render",value:function(){var e=this,t=this.props,a=t.start,n=t.end,i=t.deaths,r=t.resurrections,s=Object(et.a)(t,["start","end","deaths","resurrections"]);delete s.selectedCombatant,delete s.historyBySpellId,delete s.petTimeline;var o=this.pets,c=n-a,l=Math.ceil(c/1e3),u=80/this.state.zoom,d=Math.ceil(40/u),m=49+28*(Object.keys(o).length+1),E=l*u;return f.a.createElement("div",Object.assign({className:"spell-timeline flex"},s),f.a.createElement("div",{className:"flex-sub legend"},f.a.createElement("div",{className:"lane ruler-lane"},f.a.createElement("div",{className:"btn-group"},[1,1.5,2,2.5,3,5].map((function(t){return f.a.createElement("button",{key:t,className:"btn btn-default btn-xs ".concat(t===e.state.zoom?"active":""),onClick:function(){return e.setState({zoom:t})}},t,"x")})))),f.a.createElement("div",{className:"lane",key:"casts"},"Key casts"),Object.keys(o).map((function(e){return f.a.createElement("div",{className:"lane",key:e},"unknown"!==e&&f.a.createElement(O.a,{id:Number(e)}),"unknown"===e&&f.a.createElement(f.a.Fragment,null,f.a.createElement(it.a,{icon:"inv_misc_questionmark"})," Unknown pet"))}))),f.a.createElement(nt.a,{className:"timeline flex-main",style:{height:m},onWheel:this.handleMouseWheel,ref:function(t){e.gemini=t}},f.a.createElement("div",{className:"ruler interval-".concat(d),style:{width:E}},l>0&&Object(T.a)(Array(l)).map((function(e,t){return t%d!==0?null:f.a.createElement("div",{key:t,className:"lane",style:{width:u*d}},Object(g.a)(t))}))),f.a.createElement(lt,{key:"keyCastsRow",className:"lane",events:this.keyEvents,start:a,totalWidth:E,secondWidth:u}),Object.keys(o).map((function(e){return f.a.createElement(ct,{key:e,className:"lane",pets:o[e].pets,start:a,totalWidth:E,secondWidth:u})})),f.a.createElement(st,{start:a,secondWidth:u,deaths:i,resurrections:r,invalidated:i.length+r.length})))}}]),a}(f.a.PureComponent)),dt=function(e){var t=e.selectedCombatant;return f.a.createElement(w.a,{style:{padding:"10px 22px 0"}},f.a.createElement("div",{className:"text-muted"},"This timeline shows the pets you have summoned over the fight, together with key spell casts like ",t.hasTalent(u.a.POWER_SIPHON_TALENT.id)&&f.a.createElement(f.a.Fragment,null,f.a.createElement(O.a,{id:u.a.POWER_SIPHON_TALENT.id}),", "),t.hasTalent(u.a.NETHER_PORTAL_TALENT.id)&&f.a.createElement(f.a.Fragment,null,f.a.createElement(O.a,{id:u.a.NETHER_PORTAL_TALENT.id}),", "),f.a.createElement(O.a,{id:u.a.IMPLOSION_CAST.id})," or ",f.a.createElement(O.a,{id:u.a.SUMMON_DEMONIC_TYRANT.id}),"."),f.a.createElement(ut,Object.assign({},e,{style:{marginTop:10,marginLeft:-22,marginRight:-22}})))},mt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"tab",value:function(){var e=this;return{title:"Pet Timeline",url:"pet-timeline",order:3,render:function(){return f.a.createElement(dt,{selectedCombatant:e.selectedCombatant,start:e.owner.fight.start_time,end:e.owner.currentTimestamp>=0?e.owner.currentTimestamp:e.owner.fight.end_time,deaths:e.deathTracker.deaths,petTimeline:e.demoPets.timeline,resurrections:e.deathTracker.resurrections,historyBySpellId:e.spellHistory.historyBySpellId})}}}}]),a}(A.c);mt.dependencies={spellHistory:$e.a,deathTracker:Qe.a,demoPets:Ie};var Et=mt,ht=a(768),ft=[L.b.BeginCast,L.b.Cast,L.b.Damage],pt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"normalize",value:function(e){for(var t=this.owner.fight.start_time+3e4,a=[],n=[],i=0;i<e.length;i+=1){var r=e[i];if(r.timestamp>t)break;if(r.type===L.b.Summon&&r.ability&&Fe.includes(r.ability.guid))a.push(Object(Ke.b)(r.targetID,r.targetInstance));else if(ft.includes(r.type)&&this.owner.byPlayerPet(r)){var s=r.sourceID,o=r.sourceInstance,c=Object(Ke.b)(s,o);if(!a.includes(c)){var l=void 0;if(this._verifyPermanentPet(s)){if(!Be[r.ability.guid])continue;l=u.a[Be[r.ability.guid]]}else{var d=this._getPetGuid(s);if(!Te[d])continue;l=u.a[Te[d].summonAbility]}var m={timestamp:this.owner.fight.start_time,type:L.b.Summon,sourceID:this.owner.playerId,targetID:s,targetInstance:o,sourceIsFriendly:!0,targetIsFriendly:!0,ability:{guid:l.id,name:l.name,abilityIcon:l.icon},__fabricated:!0};a.push(c),n.push(m)}}}return e.unshift.apply(e,n),e}},{key:"_getPetGuid",value:function(e){return this.owner.playerPets.find((function(t){return t.id===e})).guid}},{key:"_verifyPermanentPet",value:function(e){var t=this._getPetGuid(e);return Object(ce.a)(t)}}]),a}(ht.a),gt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"normalize",value:function(e){var t=this,a=[];return e.forEach((function(e,n){if(a.push(e),t.isDogSummon(e)||t.isTyrantSummon(e))for(var i=e.timestamp,r=n;r>=0;r-=1){var s=a[r];if(i-s.timestamp>100)break;(t.isSharpenedDreadfangs(s,e)||t.isDemonicConsumption(s,e)||t.isDemonFire(s,e))&&t.swapEvents(a,r,s)}})),a}},{key:"isSharpenedDreadfangs",value:function(e,t){return e.type===L.b.Cast&&e.ability.guid===u.a.SHARPENED_DREADFANGS.id&&e.sourceInstance===t.targetInstance}},{key:"isTyrantSummon",value:function(e){return e.type===L.b.Summon&&e.ability.guid===u.a.SUMMON_DEMONIC_TYRANT.id}},{key:"isDogSummon",value:function(e){return e.type===L.b.Summon&&(e.ability.guid===u.a.DREADSTALKER_SUMMON_1.id||e.ability.guid===u.a.DREADSTALKER_SUMMON_2.id)}},{key:"swapEvents",value:function(e,t,a){e.splice(t,1),e.push(a),a.__modified=!0}},{key:"isDemonFire",value:function(e,t){return e.type===L.b.BeginCast&&e.ability.guid===u.a.DEMONIC_TYRANT_DAMAGE.id&&e.sourceInstance===t.targetInstance}},{key:"isDemonicConsumption",value:function(e,t){return e.type===L.b.Cast&&e.ability.guid===u.a.DEMONIC_CONSUMPTION_CAST.id&&e.sourceInstance===t.targetInstance}}]),a}(ht.a),Ot=[L.b.BeginCast,L.b.Cast],yt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"normalize",value:function(e){if(!this.selectedCombatant.hasTalent(u.a.POWER_SIPHON_TALENT.id))return e;for(var t=null,a=[],n=0;n<e.length;n+=1){var i=e[n];if(t||i.ability&&i.ability.guid===u.a.POWER_SIPHON_TALENT.id)if(i.ability&&i.ability.guid===u.a.POWER_SIPHON_TALENT.id)t&&(t.activeImpsAfterCast=Object(T.a)(a),t.__modified=!0,a=[]),t=i;else if(Ot.includes(i.type)&&this.owner.byPlayerPet(i)&&this._isFromWildImp(i)){var r=Object(Ke.b)(i.sourceID,i.sourceInstance);a.includes(r)||a.push(r)}}return t.activeImpsAfterCast=Object(T.a)(a),t.__modified=!0,e}},{key:"_isFromWildImp",value:function(e){var t=this.owner.playerPets.find((function(t){return t.id===e.sourceID}));return!!t&&ve(t.guid)}}]),a}(ht.a),bt=a(801),_t=a(752),Tt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._primaryTarget=null,e.cleavedDamage=0,e.bonusDamage=0,e.active=e.selectedCombatant.hasTalent(u.a.DREADLASH_TALENT.id),e.addEventListener(L.f.damage.by(A.b).spell(u.a.DREADBITE),e.handleDreadbite),e.addEventListener(L.f.cast.by(A.a).spell(u.a.CALL_DREADSTALKERS),e.handleDreadstalkerCast),e}return Object(c.a)(a,[{key:"handleDreadbite",value:function(e){var t=Object(Ke.b)(e.targetID,e.targetInstance);this._primaryTarget===t?this.bonusDamage+=Object(_t.a)(e,.25):this.cleavedDamage+=e.amount+(e.absorbed||0)}},{key:"handleDreadstalkerCast",value:function(e){this._primaryTarget=Object(Ke.b)(e.targetID,e.targetInstance)}},{key:"statistic",value:function(){var e=this.cleavedDamage+this.bonusDamage;return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:f.a.createElement(f.a.Fragment,null,Object(g.f)(e)," bonus damage",f.a.createElement("br",null),"Bonus damage on primary target hits: ",Object(g.f)(this.bonusDamage)," (",this.owner.formatItemDamageDone(this.bonusDamage),")",f.a.createElement("br",null),"Bonus cleaved damage: ",Object(g.f)(this.cleavedDamage)," (",this.owner.formatItemDamageDone(this.cleavedDamage),")")},f.a.createElement(G.a,{spell:u.a.DREADLASH_TALENT},f.a.createElement(Z.a,{amount:e})))}}]),a}(A.c),vt=a(1045),St=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._removedAt=null,e.damage=0,e.active=e.selectedCombatant.hasTalent(u.a.DEMONIC_STRENGTH_TALENT.id),e.addEventListener(L.f.damage.by(A.b).spell(u.a.FELSTORM_DAMAGE),e.handleFelstormDamage),e.addEventListener(L.f.removebuff.by(A.a).spell(u.a.DEMONIC_STRENGTH_TALENT),e.handleRemoveDemonicStrength),e}return Object(c.a)(a,[{key:"handleFelstormDamage",value:function(e){this.owner.playerPets.find((function(t){return t.id===e.sourceID})).guid!==Te.GRIMOIRE_FELGUARD.guid&&((this.pets.getSourceEntity(e).hasBuff(u.a.DEMONIC_STRENGTH_TALENT.id)||e.timestamp<=this._removedAt+200)&&(this.damage+=e.amount+(e.absorbed||0)))}},{key:"handleRemoveDemonicStrength",value:function(e){this._removedAt=e.timestamp}},{key:"statistic",value:function(){return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"".concat(Object(g.f)(this.damage)," damage")},f.a.createElement(G.a,{spell:u.a.DEMONIC_STRENGTH_TALENT},f.a.createElement(Z.a,{amount:this.damage})))}}]),a}(A.c);St.dependencies={pets:vt.a};var Nt=St,At=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).damage=0,e.active=e.selectedCombatant.hasTalent(u.a.BILESCOURGE_BOMBERS_TALENT.id),e.addEventListener(L.f.damage.by(A.a).spell(u.a.BILESCOURGE_BOMBERS_DAMAGE),e.handleBilescourgeDamage),e}return Object(c.a)(a,[{key:"handleBilescourgeDamage",value:function(e){this.damage+=e.amount+(e.absorbed||0)}},{key:"statistic",value:function(){return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"".concat(Object(g.f)(this.damage)," damage")},f.a.createElement(G.a,{spell:u.a.BILESCOURGE_BOMBERS_TALENT},f.a.createElement(Z.a,{amount:this.damage})))}}]),a}(A.c),It=a(754),Lt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).wastedProcs=0,e._expectedBuffEnd=null,e.active=e.selectedCombatant.hasTalent(u.a.DEMONIC_CALLING_TALENT.id),e.addEventListener(L.f.applybuff.to(A.a).spell(u.a.DEMONIC_CALLING_BUFF),e.applyDemonicCallingBuff),e.addEventListener(L.f.refreshbuff.to(A.a).spell(u.a.DEMONIC_CALLING_BUFF),e.refreshDemonicCallingBuff),e.addEventListener(L.f.removebuff.to(A.a).spell(u.a.DEMONIC_CALLING_BUFF),e.removeDemonicCallingBuff),e}return Object(c.a)(a,[{key:"suggestionThresholds",get:function(){return{actual:this.wastedProcs/this.owner.fightDuration*1e3*60,isGreaterThan:{minor:1,average:1.5,major:2},style:"number"}}}]),Object(c.a)(a,[{key:"applyDemonicCallingBuff",value:function(e){this._expectedBuffEnd=e.timestamp+2e4}},{key:"refreshDemonicCallingBuff",value:function(e){this.spellUsable.isAvailable(u.a.CALL_DREADSTALKERS.id)&&(this.wastedProcs+=1),this._expectedBuffEnd=e.timestamp+2e4}},{key:"removeDemonicCallingBuff",value:function(e){e.timestamp>=this._expectedBuffEnd&&(this.wastedProcs+=1)}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(f.a.createElement(f.a.Fragment,null,"You should try to use your cheaper ",f.a.createElement(O.a,{id:u.a.CALL_DREADSTALKERS.id})," as much as possible as Dreadstalkers make a great portion of your damage.",f.a.createElement("br",null),f.a.createElement("br",null),f.a.createElement("small",null,"NOTE: Some wasted procs are probably unavoidable (e.g. ",f.a.createElement(O.a,{id:u.a.CALL_DREADSTALKERS.id})," on cooldown, proc waiting but gets overwritten by another)"))).icon(u.a.DEMONIC_CALLING_TALENT.icon).actual(b.i18n._({id:"warlock.demonology.suggestions.demonicCalling.wastedProcsPerMinute",defaults:"{0} wasted procs per minute",values:{0:t.toFixed(2)}})).recommended("< ".concat(a," is recommended"))}))}},{key:"statistic",value:function(){return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible"},f.a.createElement(G.a,{spell:u.a.DEMONIC_CALLING_TALENT},this.wastedProcs," ",f.a.createElement("small",null,"Wasted procs")))}}]),a}(A.c);Lt.dependencies={spellUsable:It.b};var Dt=Lt,Rt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._cast=null,e._count=0,e.casts=[],e.active=e.selectedCombatant.hasTalent(u.a.POWER_SIPHON_TALENT.id),e.addEventListener(L.f.cast.by(A.a).spell(u.a.POWER_SIPHON_TALENT),e.handlePowerSiphonCast),e.addEventListener(L.f.applybuff.to(A.a).spell(u.a.DEMONIC_CORE_BUFF),e.handleDemonicCore),e.addEventListener(L.f.applybuffstack.to(A.a).spell(u.a.DEMONIC_CORE_BUFF),e.handleDemonicCore),e.addEventListener(L.f.refreshbuff.to(A.a).spell(u.a.DEMONIC_CORE_BUFF),e.handleDemonicCore),e.addEventListener(L.f.fightend,e.onFinished),e}return Object(c.a)(a,[{key:"totalCores",get:function(){return this.casts.reduce((function(e,t){return e+t}),0)}},{key:"averageCores",get:function(){return this.totalCores/this.casts.length||0}}]),Object(c.a)(a,[{key:"handlePowerSiphonCast",value:function(e){null!==this._cast&&this.casts.push(this._count),this._cast=e.timestamp,this._count=0}},{key:"handleDemonicCore",value:function(e){this._cast&&e.timestamp<=this._cast+350&&(this._count+=1)}},{key:"onFinished",value:function(){this.casts.push(this._count)}},{key:"statistic",value:function(){return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"Average Demonic Core stacks per cast: ".concat(this.averageCores.toFixed(2))},f.a.createElement(G.a,{spell:u.a.POWER_SIPHON_TALENT},this.totalCores," ",f.a.createElement("small",null,"Bonus cores")))}}]),a}(A.c),Mt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).damage=0,e.active=e.selectedCombatant.hasTalent(u.a.FROM_THE_SHADOWS_TALENT.id),e.addEventListener(L.f.damage.by(A.a).spell([u.a.DEMONBOLT,u.a.HAND_OF_GULDAN_DAMAGE,u.a.IMPLOSION_DAMAGE]),e.handleDamage),e}return Object(c.a)(a,[{key:"handleDamage",value:function(e){var t=this.enemies.getEntity(e);t&&t.hasBuff(u.a.FROM_THE_SHADOWS_DEBUFF.id)&&(this.damage+=Object(_t.a)(e,.2))}},{key:"statistic",value:function(){return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"".concat(Object(g.f)(this.damage)," bonus damage")},f.a.createElement(G.a,{spell:u.a.FROM_THE_SHADOWS_TALENT},f.a.createElement(Z.a,{amount:this.damage})))}}]),a}(A.c);Mt.dependencies={enemies:V.a};var Ct=Mt,Pt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).damage=0,e.active=e.selectedCombatant.hasTalent(u.a.SOUL_STRIKE_TALENT.id),e.addEventListener(L.f.damage.by(A.b).spell(u.a.SOUL_STRIKE_DAMAGE),e.handleSoulStrikeDamage),e}return Object(c.a)(a,[{key:"handleSoulStrikeDamage",value:function(e){this.damage+=e.amount+(e.absorbed||0)}},{key:"statistic",value:function(){var e=this.soulShardTracker.getGeneratedBySpell(u.a.SOUL_STRIKE_SHARD_GEN.id);return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"".concat(Object(g.f)(this.damage)," damage")},f.a.createElement(G.a,{spell:u.a.SOUL_STRIKE_TALENT},f.a.createElement(Z.a,{amount:this.damage}),f.a.createElement("br",null),e," ",f.a.createElement("small",null,"Shards generated")))}}]),a}(A.c);Pt.dependencies={soulShardTracker:Y};var jt=Pt,Ut=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).damage=0,e.active=e.selectedCombatant.hasTalent(u.a.SUMMON_VILEFIEND_TALENT.id),e}return Object(c.a)(a,[{key:"statistic",value:function(){var e=this.demoPets.getPetDamage(Te.VILEFIEND.guid);return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"".concat(Object(g.f)(e)," damage")},f.a.createElement(G.a,{spell:u.a.SUMMON_VILEFIEND_TALENT},f.a.createElement(Z.a,{amount:e})))}}]),a}(A.c);Ut.dependencies={demoPets:Ie};var wt=Ut,kt=a(802),Ft=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).active=e.selectedCombatant.hasTalent(u.a.SOUL_CONDUIT_TALENT.id),e}return Object(c.a)(a,[{key:"statistic",value:function(){var e=this.soulShardTracker.getGeneratedBySpell(u.a.SOUL_CONDUIT_SHARD_GEN.id),t=Math.floor(e/3),a=this.soulShardTracker.spent,n=Object(kt.d)(a,(function(e,t){return Object(kt.b)(e,t,.15)})).max;return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:f.a.createElement(f.a.Fragment,null,"You gained ",e," Shards from this talent",n>0?f.a.createElement(f.a.Fragment,null,", which is ",f.a.createElement("strong",null,Object(g.e)(e/n),"%")," of Shards you were most likely to get in this fight (",n," Shards)."):", while you were most likely to not get any Shards.",f.a.createElement("br",null),"You would get ",t," extra 3 shard Hands of Gul'dan with shards from this talent.")},f.a.createElement(G.a,{spell:u.a.SOUL_CONDUIT_TALENT},e," ",f.a.createElement("small",null,"Shards generated")))}}]),a}(A.c);Ft.dependencies={soulShardTracker:Y};var Gt=Ft,Bt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).active=e.selectedCombatant.hasTalent(u.a.INNER_DEMONS_TALENT.id),e}return Object(c.a)(a,[{key:"damage",get:function(){var e=this;return this.demoPets.getPetDamage(Te.WILD_IMP_INNER_DEMONS.guid)+this.demoPets.timeline.filter((function(e){return t=e.guid,Se(t)&&!Object(ce.a)(t)&&Te[t].isRandom&&e.summonedBy===u.a.INNER_DEMONS_TALENT.id;var t})).map((function(t){return e.demoPets.getPetDamage(t.guid,t.instance)})).reduce((function(e,t){return e+t}),0)}}]),Object(c.a)(a,[{key:"statistic",value:function(){return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:f.a.createElement(f.a.Fragment,null,Object(g.f)(this.damage)," damage",f.a.createElement("br",null),"Note that this only counts the direct damage from them, not Implosion damage (if used) from Wild Imps")},f.a.createElement(G.a,{spell:u.a.INNER_DEMONS_TALENT},f.a.createElement(Z.a,{amount:this.damage})))}}]),a}(A.c);Bt.dependencies={demoPets:Ie};var Ht=Bt,xt=a(755),Wt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).active=e.selectedCombatant.hasTalent(u.a.GRIMOIRE_FELGUARD_TALENT.id),e}return Object(c.a)(a,[{key:"statistic",value:function(){var e=this.demoPets.getPetDamage(Te.GRIMOIRE_FELGUARD.guid);return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"".concat(Object(g.f)(e)," damage")},f.a.createElement(G.a,{spell:u.a.GRIMOIRE_FELGUARD_TALENT},f.a.createElement(Z.a,{amount:e})))}}]),a}(A.c);Wt.dependencies={abilityTracker:xt.a,demoPets:Ie};var Yt=Wt,Kt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._shadowBoltDamage=0,e._demonboltDamage=0,e._queue=[],e.active=e.selectedCombatant.hasTalent(u.a.SACRIFICED_SOULS_TALENT.id),e.addEventListener(L.f.cast.by(A.a).spell([u.a.SHADOW_BOLT_DEMO,u.a.DEMONBOLT]),e.handleCast),e.addEventListener(L.f.damage.by(A.a).spell([u.a.SHADOW_BOLT_DEMO,u.a.DEMONBOLT]),e.handleDamage),e}return Object(c.a)(a,[{key:"totalBonusDamage",get:function(){return this._shadowBoltDamage+this._demonboltDamage}}]),Object(c.a)(a,[{key:"handleCast",value:function(e){var t=.04*this.demoPets.getPetCount();this._queue.push({timestamp:e.timestamp,spellId:e.ability.guid,targetID:e.targetID,targetInstance:e.targetInstance,bonus:t})}},{key:"handleDamage",value:function(e){this._queue=this._queue.filter((function(t){return t.timestamp>e.timestamp-3e3}));var t=this._queue.findIndex((function(t){return t.targetID===e.targetID&&t.targetInstance===e.targetInstance&&t.spellId===e.ability.guid}));if(-1!==t){var a=Object(_t.a)(e,this._queue[t].bonus);this._queue.splice(t,1),e.ability.guid===u.a.SHADOW_BOLT_DEMO.id?this._shadowBoltDamage+=a:this._demonboltDamage+=a}}},{key:"statistic",value:function(){var e=this.selectedCombatant.hasTalent(u.a.POWER_SIPHON_TALENT.id);return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:f.a.createElement(f.a.Fragment,null,Object(g.f)(this.totalBonusDamage)," bonus damage",f.a.createElement("br",null),"Bonus Shadow Bolt damage: ",Object(g.f)(this._shadowBoltDamage)," (",this.owner.formatItemDamageDone(this._shadowBoltDamage),")",f.a.createElement("br",null),"Bonus Demonbolt damage: ",Object(g.f)(this._demonboltDamage)," (",this.owner.formatItemDamageDone(this._demonboltDamage),")",e&&f.a.createElement(f.a.Fragment,null,f.a.createElement("br",null),f.a.createElement("br",null),"* Since you have Power Siphon talent, it's highly likely that it messes up getting current pets at certain time because sometimes the number of Imps we sacrifice in code doesn't agree with what happens in logs. Therefore, this value is most likely a little wrong."))},f.a.createElement(G.a,{spell:u.a.SACRIFICED_SOULS_TALENT},f.a.createElement(Z.a,{amount:this.totalBonusDamage})))}}]),a}(A.c);Kt.dependencies={demoPets:Ie};var zt=Kt,Vt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._currentBonus=0,e.damage=0,e.active=e.selectedCombatant.hasTalent(u.a.DEMONIC_CONSUMPTION_TALENT.id),e.addEventListener(L.f.cast.by(A.a).spell(u.a.SUMMON_DEMONIC_TYRANT),e.handleCast),e.addEventListener(L.f.damage.by(A.b).spell(u.a.DEMONIC_TYRANT_DAMAGE),e.handleDemonicTyrantDamage),e}return Object(c.a)(a,[{key:"handleCast",value:function(){var e=this.demoPets.currentPets.filter((function(e){return ve(e.guid)&&!e.shouldImplode}));this._currentBonus=.005*e.map((function(e){return e.currentEnergy})).reduce((function(e,t){return e+t}),0)}},{key:"handleDemonicTyrantDamage",value:function(e){this.damage+=Object(_t.a)(e,this._currentBonus)}},{key:"statistic",value:function(){return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"".concat(Object(g.f)(this.damage)," damage")},f.a.createElement(G.a,{spell:u.a.DEMONIC_CONSUMPTION_TALENT},f.a.createElement(Z.a,{amount:this.damage})))}}]),a}(A.c);Vt.dependencies={demoPets:Ie};var qt=Vt,Zt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).active=e.selectedCombatant.hasTalent(u.a.NETHER_PORTAL_TALENT.id),e}return Object(c.a)(a,[{key:"damage",get:function(){var e=this;return this.demoPets.timeline.filter((function(e){return e.summonedBy===u.a.NETHER_PORTAL_TALENT.id})).map((function(t){return e.demoPets.getPetDamage(t.guid,t.instance)})).reduce((function(e,t){return e+t}),0)}}]),Object(c.a)(a,[{key:"statistic",value:function(){return f.a.createElement(F.a,{category:q.a.TALENTS,size:"flexible",tooltip:"".concat(Object(g.f)(this.damage)," damage")},f.a.createElement(G.a,{spell:u.a.NETHER_PORTAL_TALENT},f.a.createElement(Z.a,{amount:this.damage})))}}]),a}(A.c);Zt.dependencies={demoPets:Ie};var Jt=Zt,Xt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).active=Object.keys(e.constructor.dependencies).filter((function(t){return e[t].subStatistic})).map((function(t){return e[t].active})).includes(!0),e}return Object(c.a)(a,[{key:"statistic",value:function(){var e=this;return f.a.createElement(bt.b,{position:bt.a.CORE(4),title:"Talents"},Object.keys(this.constructor.dependencies).map((function(t){return e[t]})).filter((function(e){return e.active&&e.subStatistic})).map((function(e){return e.subStatistic()})))}}]),a}(A.c);Xt.dependencies={dreadlash:Tt,demonicStrength:Nt,bilescourgeBombers:At,demonicCalling:Dt,powerSiphon:Rt,doom:Q,fromTheShadows:Ct,soulStrike:jt,summonVilefiend:wt,soulConduit:Gt,innerDemons:Ht,grimoireFelguard:Yt,sacrificedSouls:zt,demonicConsumption:qt,netherPortal:Jt};var Qt=Xt,$t=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(s.a);$t.specModules={abilities:E,alwaysBeCasting:_,cooldownThroughputTracker:N,felstorm:D,checklist:oe,summonDemonicTyrant:De,legionStrike:Re,soulShardTracker:Y,soulShardDetails:z,demoPets:Ie,petDamageHandler:je,petSummonHandler:xe,wildImpEnergyHandler:Ye,powerSiphonHandler:Ve,demonicTyrantHandler:Ze,implosionHandler:Xe,petTimelineTab:Et,summonOrderNormalizer:gt,prepullPetNormalizer:pt,powerSiphonNormalizer:yt,talents:Qt,dreadlash:Tt,demonicStrength:Nt,bilescourgeBombers:At,demonicCalling:Dt,soulConduit:Gt,innerDemons:Ht,fromTheShadows:Ct,soulStrike:jt,summonVilefiend:wt,powerSiphon:Rt,doom:Q,grimoireFelguard:Yt,sacrificedSouls:zt,demonicConsumption:qt,netherPortal:Jt,arcaneTorrent:[o.a,{castEfficiency:null}]};t.default=$t},748:function(e,t,a){"use strict";var n=a(0),i=a.n(n),r=a(53),s=a(4);t.a=function(e){var t=e.spell,a=e.children,n=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(n||"")},i.a.createElement("label",null,i.a.createElement(r.a,{id:t.id})," ",i.a.createElement(s.a,{id:t.id,icon:!1})),i.a.createElement("div",{className:"value"},a))}},752:function(e,t,a){"use strict";function n(e,t){var a=(e.amount||0)+(e.absorbed||0);return a-a/(1+t)}a.d(t,"a",(function(){return n}))},760:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=function(e){var t=Object.assign({},e);return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"10 10 80 80",className:"icon"},t),i.a.createElement("path",{d:"M50,86.4865c17.4361,0,31.6216-14.1855,31.6216-31.6216c0-16.6168-12.8865-30.2714-29.1892-31.5189v-4.9677h7.2973v-4.8649  H40.2703v4.8649h7.2973v4.9677c-16.3027,1.2475-29.1892,14.902-29.1892,31.5189C18.3784,72.3009,32.5639,86.4865,50,86.4865z M52.4324,28.2236c3.1101,0.2817,6.0664,1.0982,8.7798,2.356l-8.7798,15.2073V28.2236z M47.5676,28.2236v26.6412 c0,1.1008,0.7393,2.0647,1.8029,2.3497c0.209,0.0561,0.4205,0.0827,0.6295,0.0827c0.8533,0,1.6642-0.4504,2.1065-1.2162 l13.3146-23.0616c6.8507,4.8503,11.3357,12.8315,11.3357,21.8454c0,14.7537-12.0031,26.7567-26.7568,26.7567 s-26.7568-12.003-26.7568-26.7567C23.2432,40.9315,33.9501,29.4573,47.5676,28.2236z"}))}},773:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(43),c=a(123),l=a(15),u=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).eventEmitter=void 0,i.current=0,i.resourceUpdates=[],i.buildersObj={},i.spendersObj={},i.resource=void 0,i.maxResource=void 0,i.addEventListener(l.f.energize.to(o.a),i.onEnergize),i.addEventListener(l.f.cast.by(o.a),i.onCast),i}return Object(i.a)(a,[{key:"initBuilderAbility",value:function(e){this.buildersObj[e]={generated:0,wasted:0,casts:0}}},{key:"initSpenderAbility",value:function(e){this.spendersObj[e]={spent:0,spentByCast:[],casts:0}}},{key:"onEnergize",value:function(e){var t=e.ability.guid;if(e.resourceChangeType===this.resource.id){var a=e.waste,n=e.resourceChange-a;this._applyBuilder(t,n,a,this.getResource(e),e.timestamp)}}},{key:"processInvisibleEnergize",value:function(e,t){var a=void 0!==this.maxResource?this.maxResource-this.current:t,n=Math.min(t,a),i=Math.max(t-a,0);this._applyBuilder(e,n,i)}},{key:"_applyBuilder",value:function(e,t,a,n,i){this.buildersObj[e]||this.initBuilderAbility(e),this.buildersObj[e].wasted+=a,this.buildersObj[e].generated+=t,this.buildersObj[e].casts+=1,null!==n&&void 0!==n&&void 0!==n.amount?(this.current=n.amount,void 0!==n.max&&(this.maxResource=n.max)):this.current+=t,this.resourceUpdates.push({timestamp:i,current:this.current,waste:a,generated:t,used:0})}},{key:"onCast",value:function(e){var t=e.ability.guid;if(this.shouldProcessCastEvent(e)){var a=this.getResource(e);if(a){a.max&&(this.maxResource=a.max);var n=this.getReducedCost(e);this.spendersObj[t]||this.initSpenderAbility(t),n&&0!==n&&(this.spendersObj[t].casts+=1,this.spendersObj[t].spentByCast.push(n),n>0&&(this.spendersObj[t].spent+=n),this.current=a.amount-n,this.resourceUpdates.push({timestamp:e.timestamp,current:this.current,waste:0,generated:0,used:a.amount}),this.triggerSpendEvent(n,e))}}}},{key:"getReducedCost",value:function(e){var t;return e.resourceCost&&void 0!==e.resourceCost[this.resource.id]?e.resourceCost[this.resource.id]:null===(t=this.getResource(e))||void 0===t?void 0:t.cost}},{key:"getResource",value:function(e){var t=this;return e.classResources?e.classResources.find((function(e){return e.type===t.resource.id})):void 0}},{key:"triggerSpendEvent",value:function(e,t){var a={type:l.b.SpendResource,timestamp:t.timestamp,sourceID:t.sourceID,targetID:t.targetID,resourceChange:e,resourceChangeType:this.resource.id,ability:t.ability,__fabricated:!0};this.eventEmitter.fabricateEvent(a,t)}},{key:"shouldProcessCastEvent",value:function(e){return Boolean(this.getResource(e))}},{key:"getGeneratedBySpell",value:function(e){return this.buildersObj[e]&&this.buildersObj[e].generated||0}},{key:"getWastedBySpell",value:function(e){return this.buildersObj[e]&&this.buildersObj[e].wasted||0}},{key:"getBuilderCastsBySpell",value:function(e){return this.buildersObj[e]&&this.buildersObj[e].casts||0}},{key:"generated",get:function(){return Object.values(this.buildersObj).reduce((function(e,t){return e+t.generated}),0)}},{key:"wasted",get:function(){return Object.values(this.buildersObj).reduce((function(e,t){return e+t.wasted}),0)}},{key:"spent",get:function(){return Object.values(this.spendersObj).reduce((function(e,t){return e+t.spent}),0)}},{key:"spendersCasts",get:function(){return Object.values(this.spendersObj).reduce((function(e,t){return e+t.casts}),0)}}]),a}(o.c);u.dependencies={eventEmitter:c.a},t.a=u},781:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(0),c=a.n(o),l=a(4),u=a(33),d=a(22),m=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"prepareGenerated",value:function(e){return Object.keys(e).map((function(t){return{abilityId:Number(t),generated:e[Number(t)].generated,wasted:e[Number(t)].wasted}})).sort((function(e,t){return t.generated-e.generated})).filter((function(e){return e.generated>0||e.wasted}))}},{key:"prepareSpent",value:function(e){return Object.keys(e).map((function(t){return{abilityId:Number(t),spent:e[Number(t)].spent,casts:e[Number(t)].casts}})).sort((function(e,t){return t.spent-e.spent})).filter((function(e){return e.spent>0}))}},{key:"render",value:function(){var e=this.props,t=e.tracker,a=e.showSpenders,n=t.resource.name,i=this.prepareGenerated(t.buildersObj),r=this.prepareSpent(t.spendersObj),s=t.generated,o=t.wasted,m=t.spent,E=t.spendersCasts;return s=0===s?1:s,o=0===o?1:o,m=0===m?1:m,E=0===E?1:E,c.a.createElement(c.a.Fragment,null,c.a.createElement("table",{className:"data-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Ability"),c.a.createElement("th",{colSpan:2},n," generated"),c.a.createElement("th",{colSpan:2},c.a.createElement(d.a,{content:"This is the amount of resources that were generated while you were already at cap."},n," wasted")))),c.a.createElement("tbody",null,i&&i.map((function(e){return c.a.createElement("tr",{key:e.abilityId},c.a.createElement("td",{style:{width:"30%"}},c.a.createElement(l.a,{id:e.abilityId})),c.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"center"}},c.a.createElement(d.a,{content:"".concat(Object(u.e)(e.generated/s)," %")},e.generated.toFixed(0))),c.a.createElement("td",{style:{width:"40%"}},c.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.generated/s*100,"%")}})),c.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"center"}},c.a.createElement(d.a,{content:"".concat(Object(u.e)(e.wasted/o)," %")},e.wasted.toFixed(0))),c.a.createElement("td",{style:{width:"30%"}},c.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.wasted/o*100,"%")}})))})))),a&&c.a.createElement("table",{className:"data-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Ability"),c.a.createElement("th",{colSpan:2},n," spent"),c.a.createElement("th",{colSpan:2},"Casts"))),c.a.createElement("tbody",null,r&&r.map((function(e){return c.a.createElement("tr",{key:e.abilityId},c.a.createElement("td",{style:{width:"30%"}},c.a.createElement(l.a,{id:e.abilityId})),c.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"center"}},c.a.createElement(d.a,{content:"".concat(Object(u.e)(e.spent/m)," %")},e.spent.toFixed(0))),c.a.createElement("td",{style:{width:"40%"}},c.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.spent/m*100,"%")}})),c.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"center"}},c.a.createElement(d.a,{content:"".concat(Object(u.e)(e.casts/E)," %")},e.casts)),c.a.createElement("td",{style:{width:"30%"}},c.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.casts/E*100,"%")}})))})))))}}]),a}(c.a.Component);t.a=m},801:function(e,t,a){"use strict";var n=a(27),i=a(0),r=a.n(i),s=a(22),o=(a(858),a(58)),c=a(747);a.d(t,"a",(function(){return c.a}));var l=function(e){var t=e.title,a=e.tooltip,i=e.children,o=e.bodyStyle,c=Object(n.a)(e,["title","tooltip","children","bodyStyle"]);return delete c.category,delete c.position,r.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-12"},r.a.createElement("div",Object.assign({className:"panel statistic statistic-box statistic-box-list"},c),t&&r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h2",null,a?r.a.createElement(s.a,{content:a},t):t)),r.a.createElement("div",{className:"panel-body items",style:o},i)))};l.defaultProps={category:o.a.GENERAL},t.b=l},802:function(e,t,a){"use strict";a.d(t,"c",(function(){return E})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return f})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return _}));var n=a(26),i=a(8),r=a(9),s=a(10),o=a(11),c=a(0),l=a.n(c),u=a(788),d=a(779),m=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={hover:null},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.probabilities,a=e.actualEvent,n=e.xAxis,i=e.yAxis,r=e.yDomain,s=e.tooltip,o={probabilities:t,actual:a},c={encoding:{x:{field:"x",type:"quantitative",title:n.title,axis:{grid:!1,format:n.tickFormat}},y:{field:"y",type:"quantitative",title:i.title,axis:{grid:!1,format:".0%"},scale:{domain:r}}},layer:[{data:{name:"probabilities"},mark:{type:"area",color:"rgba(250, 183, 0, 0.15)",line:{color:"#fab700",strokeWidth:1}}},{data:{name:"actual"},mark:{type:"point",filled:!0,color:"#00ff96",size:60},encoding:{tooltip:[{field:"x",title:s}]}}]};return l.a.createElement(u.a,{disableHeight:!0},(function(e){var t=e.width;return l.a.createElement(d.a,{height:150,width:t,spec:c,data:o})}))}}]),a}(l.a.Component);function E(e,t){return e*t}function h(e,t,a){return function(e,t){for(var a=1,n=1,i=e-t+1;i<=e;i+=1)a*=i;for(var r=1;r<=t;r+=1)n*=r;return a/n}(t,e)*Math.pow(a,e)*Math.pow(1-a,t-e)}function f(e,t,a){for(var n=0,i=0;i<=e;i+=1)n+=h(i,t,a);return n}function p(e,t){for(var a=-1,n=0,i=0;i<=e;i+=1){var r=t(i,e);r>n&&(a=i,n=r)}return{max:a,p:n}}function g(e,t,a){return Array.from({length:t},(function(e,n){return"number"===typeof a?{x:n,y:h(n,t,a)}:{x:n,y:b(n,t,a)}}))}function O(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001,i=g(0,t,a),r=i.findIndex((function(e){return e.y>=n})),s=r+i.slice(r).findIndex((function(e){return e.y<n}));return{procProbabilities:i,rangeMin:r,rangeMax:s}}function y(e,t,a,n){if(-1===e)return 0;if(e===t+1)return 0;if(0===e&&0===t)return 1;if(null!==n[e][t])return n[e][t];var i=(1-a[t-1])*y(e,t-1,a,n)+a[t-1]*y(e-1,t-1,a,n);return n[e][t]=i,i}function b(e,t,a){if(a.length!==t)throw new Error("You must supply a probability vector with the same length as the number of total tries into Poisson Binomial PMF");var i=Object(n.a)(Array(t+1)).map((function(e){return Array(t+1).fill(null)}));return y(e,t,a,i)}function _(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Procs",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,.4],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{title:n,tickFormat:"~k"},o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{title:"Likelihood"},c=O(e,t,a),u=c.procProbabilities,d=c.rangeMin,E=c.rangeMax,f="number"===typeof a?h(e,t,a):b(e,t,a);return l.a.createElement(m,{probabilities:u.slice(d,E+1),actualEvent:{x:e,y:f},yDomain:r,xAxis:s,yAxis:o,tooltip:i})}},844:function(e,t,a){"use strict";function n(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t/1e3/e+a-1}a.d(t,"a",(function(){return n}))},860:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e.toString().length>6}}}]);
//# sourceMappingURL=DemonologyWarlock.d743fecc.chunk.js.map