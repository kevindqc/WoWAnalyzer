{"version":3,"sources":["parser/priest/holy/modules/features/HealingReceived.tsx","parser/priest/holy/modules/features/SpellUsable.tsx","parser/priest/holy/modules/spells/holyword/HolyWordBase.tsx","parser/priest/holy/modules/spells/holyword/HolyWordSanctify.tsx","parser/priest/holy/modules/spells/holyword/HolyWordSerenity.tsx","parser/priest/holy/modules/features/HealingTargetTracker.tsx","parser/priest/holy/modules/spells/Renew.tsx","parser/priest/holy/modules/talents/45/CosmicRipple.tsx","interface/others/HolyPriestSpreadsheet.js","parser/priest/holy/modules/core/AbilityTracker.tsx","parser/priest/holy/modules/Abilities.ts","parser/priest/holy/constants.ts","parser/priest/holy/modules/core/SpellManaCost.tsx","parser/priest/holy/modules/spells/DivineHymn.tsx","parser/priest/holy/modules/spells/GuardianSpirit.tsx","parser/priest/holy/modules/spells/HolyNova.tsx","parser/priest/holy/modules/spells/holyword/HolyWordChastise.tsx","parser/priest/holy/modules/spells/holyword/HolyWordSalvation.tsx","common/aprilFools.ts","parser/priest/holy/modules/spells/SpiritOfRedemption.tsx","parser/priest/holy/modules/spells/HymnBuffBenefit.tsx","parser/priest/holy/modules/spells/PrayerOfMending.tsx","parser/priest/holy/modules/spells/CircleOfHealing.tsx","parser/priest/holy/modules/talents/15/RenewedFaith.tsx","parser/priest/holy/modules/talents/15/Enlightenment.tsx","parser/priest/holy/modules/talents/15/TrailOfLight.tsx","parser/priest/holy/modules/talents/30/AngelicFeather.tsx","parser/priest/holy/modules/talents/30/AngelsMercy.tsx","parser/priest/holy/modules/talents/30/BodyAndSoul.tsx","parser/priest/holy/modules/talents/45/Afterlife.tsx","parser/priest/holy/modules/talents/45/GuardianAngel.tsx","parser/priest/holy/modules/talents/60/Censure.tsx","parser/priest/holy/modules/talents/60/PsychicVoice.tsx","parser/priest/holy/modules/talents/60/ShiningForce.tsx","parser/priest/holy/modules/talents/75/BindingHeal.tsx","parser/priest/holy/modules/talents/75/PrayerCircle.tsx","parser/priest/holy/modules/talents/75/SurgeOfLight.tsx","parser/priest/holy/modules/talents/90/Benediction.tsx","parser/priest/holy/modules/talents/90/DivineStar.tsx","parser/priest/holy/modules/talents/90/Halo.tsx","parser/priest/holy/modules/talents/100/Apotheosis.tsx","parser/priest/holy/modules/talents/100/HolyWordSalvation.tsx","parser/priest/holy/modules/talents/100/LightOfTheNaaru.tsx","parser/priest/holy/modules/talents/index.ts","parser/priest/holy/modules/features/AlwaysBeCasting.tsx","parser/priest/holy/modules/checklist/Component.tsx","parser/priest/holy/modules/checklist/Module.tsx","parser/priest/holy/modules/features/CooldownThroughputTracker.tsx","parser/priest/holy/modules/core/EchoOfLightMastery.tsx","parser/priest/holy/modules/core/FortitudeRaidBuff.tsx","parser/priest/holy/modules/core/HolyWordsReductionBySpell.tsx","parser/priest/holy/modules/core/HolyWordWastedAmounts.tsx","parser/priest/holy/modules/features/StatValuesSpellInfo.tsx","parser/priest/holy/modules/features/StatWeights.tsx","parser/priest/holy/modules/features/HolyPriestHealingEfficiencyTracker.tsx","parser/priest/holy/modules/features/HolyPriestHealingEfficiencyBreakdown.tsx","parser/priest/holy/modules/features/HolyPriestHealingEfficiencyDetails.tsx","parser/priest/holy/modules/shadowlands/conduits/ResonantWords.tsx","parser/priest/holy/CombatLogParser.tsx","interface/statistics/components/BoringSpellValueText/index.tsx","parser/shared/modules/resources/resourcetracker/ResourceTracker.ts","interface/statistics/components/ConduitSpellText/index.tsx","common/ResourceIcon.tsx","common/ResourceLink.tsx","../node_modules/react-animate-height/lib/AnimateHeight.js","parser/core/healingEfficiency/ManaTracker.ts","parser/core/healingEfficiency/HealingEfficiencyTracker.ts","interface/others/LazyLoadStatisticBox.js","interface/PerformanceBar.tsx","parser/shared/modules/features/images/QE-Logo-New-Small.png","parser/core/healingEfficiency/HealingEfficiencyBreakdown.tsx","interface/others/StatisticWrapper.js","parser/shared/modules/features/SpellInfo.js","parser/shared/modules/features/BaseHealerStatValues.js","interface/ItemManaGained/ItemManaGained.tsx"],"names":["HealingReceived","options","HealingReceivedExternal","HealingReceivedSelf","addEventListener","Events","heal","to","SELECTED_PLAYER","onHeal","event","sourceID","this","owner","playerId","amount","Analyzer","SpellUsable","dispel","by","onDispel","spellId","ability","guid","SPELLS","PURIFY","id","cooldownTriggerEvent","CoreSpellUsable","dependencies","HolyWordBase","manaCost","baseCooldown","serendipityReduction","remainingCooldown","serendipityProccers","holyWordHealing","holyWordOverhealing","holyWordCasts","holyWordWastedCooldown","baseHolyWordReductionBySpell","lightOfTheNaruActive","lightOfTheNaruMultiplier","lightOfTheNaruReductionBySpell","apotheosisCasts","apotheosisActive","apotheosisMultiplier","apotheosisReductionBySpell","apotheosisManaReduction","holyWordApotheosisCasts","holyWordHealingDuringApotheosis","holyWordOverhealingDuringApotheosis","spellUsable","selectedCombatant","hasTalent","LIGHT_OF_THE_NAARU_TALENT","cast","onCast","applybuff","spell","APOTHEOSIS_TALENT","onApplyBuff","removebuff","onRemoveBuff","reductionAmount","parseSerendipityCast","isOnCooldown","reduceCooldown","timestamp","baseReductionAmount","baseReduction","lightOfTheNaaruReduction","apotheosisReduction","overheal","totalCDR","spellID","lotnCDR","apothCDR","totalReduction","key","base","apotheosis","lightOfTheNaaru","baseCooldownReduction","lightOfTheNaaruCooldownReduction","apotheosisCooldownReduction","HolyWordSanctify","HOLY_WORD_SANCTIFY","PRAYER_OF_HEALING","BINDING_HEAL_TALENT","RENEW","HolyWordSerenity","HOLY_WORD_SERENITY","GREATER_HEAL","FLASH_HEAL","HealingTargetTracker","healingDoneToSelf","overHealingDoneToSelf","healingDoneTotal","overHealingDoneTotal","targetID","Renew","totalRenewHealing","totalRenewOverhealing","totalRenewAbsorbs","totalRenewTicks","lastRenewCast","renewsCast","goodRenews","badRenewReason","betterspell","stationary","totalRenewApplications","salvationActive","lastSalvationCast","renewsFromSalvation","benedictionActive","renewsFromBenedictionAndRenew","lastGCD","lastCast","distanceMoved","HOLY_WORD_SALVATION_TALENT","BENEDICTION_TALENT","refreshbuff","onRefreshBuff","GlobalCooldown","onGCD","applicationCount","absorbed","validateRenew","handleRenewApplication","movedSinceCast","sanctifyOnCooldown","serenityOnCooldown","cohOnCooldown","CIRCLE_OF_HEALING_TALENT","timeSinceCast","timeSinceLastMovement","when","badRenewThreshold","addSuggestion","suggest","actual","recommended","SpellLink","icon","badRenews","isGreaterThan","minor","fightDuration","average","major","style","ThresholdStyle","NUMBER","DistanceMoved","CosmicRipple","totalHealing","overhealing","totalHits","totalRipples","lastRippleTimeStamp","active","COSMIC_RIPPLE_TALENT","COSMIC_RIPPLE_HEAL","Statistic","size","category","STATISTIC_CATEGORY","TALENTS","position","STATISTIC_ORDER","OPTIONAL","BoringSpellValueText","ItemHealingDone","HolyPriestSpreadsheet","props","parser","styles","cellBorder","borderTop","table","borderBottom","align","padding","float","margin","getAbility","getModule","AbilityTracker","overhealingSpell","healingOverheal","healingEffective","toFixed","cpm","casts","targetsPerCast","healId","undefined","count","healingHits","castEfficiency","efficiency","CastEfficiency","getCastEfficiencyForSpellId","maxCasts","Infinity","rawHealing","getChosenTalent","talentRow","ENLIGHTENMENT_TALENT","name","TRAIL_OF_LIGHT_TALENT","ENDURING_RENEWAL_TALENT","ANGELS_MERCY_TALENT","PERSEVERANCE_TALENT","ANGELIC_FEATHER_TALENT","GUARDIAN_ANGEL_TALENT","AFTERLIFE_TALENT","PSYCHIC_VOICE_TALENT","CENSURE_TALENT","SHINING_FORCE_TALENT","SURGE_OF_LIGHT_TALENT","DIVINE_STAR_TALENT","HALO_TALENT","href","target","rel","_combatantInfo","intellect","critSpell","hasteSpell","mastery","versatilityHealingDone","leech","avoidance","speed","HealingDone","_total","_regular","DamageTaken","DamageDone","DeathTracker","deaths","length","ManaValues","endingMana","Math","floor","renewsFromEnduringRenewal","renewsFromBenediction","rawHealingDoneTotal","rawHealingDoneToSelf","PRAYER_OF_MENDING_HEAL","PRAYER_OF_MENDING_CAST","GUARDIAN_SPIRIT","DIVINE_HYMN_HEAL","DIVINE_HYMN_CAST","DESPERATE_PRAYER","HALO_HEAL","HOLY_NOVA_HEAL","HOLY_NOVA","ECHO_OF_LIGHT_HEAL","LEECH","CoreAbilityTracker","Abilities","combatant","SPELL_CATEGORIES","ROTATIONAL","cooldown","haste","gcd","suggestion","buffSpellId","PRAYER_OF_MENDING_BUFF","healSpellIds","DEFENSIVE","recommendedEfficiency","averageIssueEfficiency","majorIssueEfficiency","COOLDOWNS","enabled","SYMBOL_OF_HOPE","DIVINE_STAR_HEAL","OTHERS","DISPEL_MAGIC","UTILITY","HOLY_FIRE","HEALER_DAMAGING_SPELL","HOLY_WORD_CHASTISE","SMITE","FADE","GUARDIAN_SPIRIT_HEAL","LEAP_OF_FAITH","LEVITATE","PSYCHIC_SCREAM","MASS_DISPEL","charges","SPIRIT_OF_REDEMPTION_BUFF","SHADOW_WORD_PAIN","MIND_BLAST","MIND_SOOTHE","POWER_INFUSION","SHADOW_WORD_DEATH","FLESHCRAFT","hasCovenant","COVENANTS","NECROLORD","UNHOLY_NOVA_BUFF","CoreAbilities","ABILITIES_AFFECTED_BY_HEALING_INCREASES","ABILITIES_THAT_TRIGGER_MASTERY","ABILITIES_AFFECTED_BY_APOTHEOSIS_TALENT","RESONANT_WORDS_RANKS","SpellManaCost","cost","hasBuff","includes","CoreSpellManaCost","DivineHymn","healing","ticks","i18n","_","regular","GuardianSpirit","totalHealingFromGSBuff","abilityTracker","fetchWcl","report","code","start","fight","start_time","end","end_time","filter","then","json","entries","reduce","healingFromBuff","entry","total","LazyLoadStatisticBox","loader","load","bind","SpellIcon","value","label","tooltip","totalGSCasts","formatNumber","EventType","ApplyBuff","RemoveBuff","HolyNova","StatisticBox","display","averageFriendlyTargetsHit","averageEnemyTargetsHit","effectiveHealing","ItemDamageDone","damageDone","formatPercentage","overhealPercent","holyNovaThreshold","healingAbsorbed","overHealing","damageHits","damageEffective","isLessThan","HolyWordSalvation","aprilFools","SpiritOfRedemption","sorStartTime","timeSpentRedeeming","timeSpendDead","eventEmitter","deathDowntime","fabricateEvent","type","Cast","now","Date","getMonth","getDate","isItAprilFoolDay","deadTimeThresholds","totalDowntime","deadTime","spiritUptime","EventEmitter","DeathDowntime","HymnBuffBenefit","totalHealingFromHymnBuff","PrayerOfMending","totalPoMHealing","totalPoMOverhealing","totalPoMAbsorption","pomCasts","salvCasts","pomHealTicks","pomBuffCount","pomRemovalCount","prepullPomBuffs","lastSalvCastTime","pomTicksFromSalv","changebuffstack","onChangeBuffstack","prepull","stacksGained","CircleOfHealing","circleOfHealingCasts","circleOfHealingHealing","circleOfHealingOverhealing","circleOfHealingTargetsHit","onCohCast","onCohHeal","formatThousands","overHealPercent","averageTargetsHit","GENERAL","RenewedFaith","renewTracker","rawAdditionalHealing","effectiveAdditionalHealing","RENEWED_FAITH_TALENT","onRenewApplication","onRenewRemoval","rawHealAmount","effectiveHealAmount","overhealAmount","percentOverhealing","Enlightenment","spiritOfRedemption","ItemManaGained","enlightenmentMana","aliveTime","normalManaRegen","TrailOfLight","totalToLProcs","totalToLHealing","totalToLOverhealing","TRAIL_OF_LIGHT_HEAL","AngelicFeather","angelicFeatherCasts","angelicFeatherEffects","AngelsMercy","desperatePrayersCast","desperatePrayerTimeReduced","lastDesperatePrayerTimestamp","timeSinceLastDP","BodyAndSoul","buffCount","BODY_AND_SOUL_TALENT","bodyAndSoulApplied","Afterlife","spiritOfRedemptionCount","spiritOfRedemptionTotalTime","spiritOfRedemptionBonusTime","spiritOfRedemptionStartTime","timeInSoR","sorCount","inSpiritOfRedemption","healingInAfterlife","timeInSpiritOfRedemption","GuardianAngel","guardianSpiritRemovalCount","guardianSpiritHealCount","_parseGsRemove","_parseGsHeal","gsValue","gsGuardianSpiritCastsPossible","guardianSpiritCastCount","guardianSpiritRefreshCount","castDelta","baseGuardianSpiritCastsPossible","Censure","chastiseCasts","censureStuns","censureIncomp","applydebuff","HOLY_WORD_CHASTISE_CENSURE_INCAPACITATE","HOLY_WORD_CHASTISE_CENSURE_STUN","onApplyDebuff","PsychicVoice","psychicScreamCasts","psychicScreamHits","ShiningForce","shiningForceCasts","shiningForceHits","BindingHeal","bindingHealCasts","bindingHealSelfHealing","bindingHealSelfOverhealing","bindingHealPartyHealing","bindingHealPartyOverhealing","bindingHealTargets","healingDone","overhealingDone","getOverhealPercent","bindingHealHealing","PrayerCircle","lastCohCastAt","lastCastStartWasBuffed","buffedCohCasts","abilities","PRAYER_CIRCLE_TALENT","cohCast","begincast","startPohCast","finishPohCast","PRAYER_CIRCLE_BUFF","unbuffedCohCasts","SurgeOfLight","solStacksGained","solStacksLost","solFlashHeals","currentSolStacks","solStacksSpent","solHealing","solOverHealing","freeFlashHealPending","SURGE_OF_LIGHT_BUFF","onChangeBuffStack","newStacks","solManaSaved","Benediction","renew","healingFromBenedictionRenews","healingFromRenew","DivineStar","divineStarDamage","divineStarHealing","divineStarOverhealing","divineStarCasts","damage","DIVINE_STAR_DAMAGE","onDamage","Halo","haloDamage","haloHealing","haloOverhealing","haloCasts","HALO_DAMAGE","Apotheosis","sanctify","serenity","chastise","HolyWordChastise","salvTicks","healingFromSalv","overhealingFromSalv","absorptionFromSalv","prayerOfMending","absorptionFromRenew","healingFromPom","absorptionFromPom","renewCount","overhealingFromRenew","averagePomTickHeal","pomCount","averagePomTickOverheal","averagePomTickAbsorption","overHealingFromRenew","overHealingFromPom","LightOfTheNaaru","ceil","t15","t30","t45","t60","t75","t90","t100","AlwaysBeCasting","statisticOrder","CORE","totalTimeWasted","CoreAlwaysBeCastingHealing","HEALING_ABILITIES_ON_GCD","HolyPriestChecklist","thresholds","AbilityRequirement","GenericCastEfficiencyRequirement","Rule","description","ARCANE_TORRENT_MANA1","Tooltip","content","Requirement","nonHealingTimeSuggestionThresholds","downtimeSuggestionThresholds","ResourceLink","RESOURCE_TYPES","MANA","manaLeft","PreparationRule","Checklist","combatants","preparationRuleAnalyzer","alwaysBeCasting","manaValues","Component","selected","suggestionThresholds","BaseChecklist","Combatants","PreparationRuleAnalyzer","CooldownThroughputTracker","CoreCooldownThroughputTracker","cooldownSpells","summary","BUILT_IN_SUMMARY_TYPES","HEALING","OVERHEALING","EchoOfLightMastery","masteryHealingBySpell","targetMasteryPool","testValues","precastValues","effective","handleEolTick","handleEolApplication","targetId","tick","remainingTicks","applicationTime","pendingHealingTotal","pendingHealingBySpell","pendingCritTotal","hitType","HIT_TYPES","CRIT","tickEffectiveHealing","tickOverhealing","poolDrainPercent","poolDrainTotal","rawCritValue","effectiveCritValue","eolCritAmount","Object","keys","constructor","spellContributionPercent","overHealingPercent","dropdown","className","masteryTable","ECHO_OF_LIGHT_MASTERY","spellDetails","map","sort","a","b","rows","i","getPercentOfTotalHealingBySpell","push","Number","height","getMasteryOverhealPercentBySpell","FortitudeRaidBuff","uptimeSuggestionThresholds","POWER_WORD_FORTITUDE","getBuffUptime","uptime","PERCENTAGE","HolyWordsReductionBySpell","lightOfTheNaaruActive","salvation","currentList","newList","cooldownType","reductionRatio","reductionBySpell","HOLY_WORDS","e","totalCooldownReduction","totalReductionBySpell","sumCooldown","totalHolyWordReductionPerSpellPerTalent","HolyWordWastedAmounts","percWastedVersusTotal","int","crit","hasteHpm","hasteHpct","vers","StatWeights","spellInfo","PRIEST_HEAL_INFO","qeLive","statTracker","healVal","_isCrit","_getCritChance","baseCritChance","ratingCritChanceContribution","ratingCritChance","rating","currentCritRating","masteryPercentage","currentMasteryRating","STAT","INTELLECT","CRITICAL_STRIKE","HASTE_HPCT","HASTE_HPM","MASTERY","VERSATILITY","VERSATILITY_DR","BaseHealerStatValues","critEffectBonus","CritEffectBonus","StatTracker","Mastery","HolyPriestHealingEfficiencyTracker","includeEchoOfLight","echoOfLight","healingSpellIds","getRenewDetails","getPomDetails","getSalvationDetails","addEcho","pomTicksFromCast","totalOverHealing","totalAbsorbed","forEach","healingSpellId","HealingEfficiencyTracker","manaTracker","ManaTracker","HolyPriestHealingEfficiencyBreakdown","showEchoOfLight","tracker","marginLeft","marginRight","defaultChecked","icons","onChange","setState","detailedView","checked","htmlFor","showCooldowns","showHealing","state","DetailHeader","BarHeader","HealingEfficiencyTable","HealingEfficiencyBreakdown","HolyPriestHealingEfficiencyDetails","healingEfficiencyTracker","title","url","render","Panel","ResonantWords","totalResonantWords","wastedResonantWords","bonusHealing","healingMultiplier","conduitRank","conduitIncrease","bonusRadianceHealing","conduitRankBySpellID","RESONANT_WORDS","RESONANT_WORDS_BUFF","onResonantWordsApply","onFlashHeal","onHolyWordCast","eventBonusAmount","ConduitSpellText","rank","CombatLogParser","adjustForDowntime","results","tabs","CoreCombatLogParser","abilitiesAffectedByHealingIncreases","specModules","spellManaCost","lowHealthHealing","LowHealthHealing","manaLevelChart","ManaLevelChart","manaUsageChart","ManaUsageChart","checklist","cooldownThroughputTracker","healingReceived","healingTargetTracker","echoOfLightMastery","fortitudeRaidBuff","holyWordsReductionBySpell","holyWordWastedAmounts","divineHymn","guardianSpirit","holyNova","hymnBuffBenefit","holyWordSanctify","holyWordSerenity","holyWordChastise","holyWordSalvation","HolyWordSalvationCooldown","statWeights","circleOfHealing","Talents","LightOfTheNaru","hpmDetails","HealingEfficiencyDetails","hpmTracker","resonantWords","children","ResourceTracker","current","resourceUpdates","buildersObj","spendersObj","resource","maxResource","energize","onEnergize","generated","wasted","spent","spentByCast","resourceChangeType","waste","gain","resourceChange","_applyBuilder","getResource","maxGain","min","max","initBuilderAbility","used","shouldProcessCastEvent","eventResource","getReducedCost","initSpenderAbility","triggerSpendEvent","resourceCost","classResources","find","r","fabricatedEvent","SpendResource","__fabricated","Boolean","values","acc","ResourceIcon","noLink","others","alt","useState","elem","setElem","useEffect","TooltipProvider","refresh","other","ref","defineProperty","exports","_typeof","Symbol","iterator","obj","prototype","_extends","assign","arguments","source","hasOwnProperty","call","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react2","_interopRequireDefault","require","_propTypes2","_classnames2","__esModule","default","_defineProperty","ANIMATION_STATE_CLASSES","animating","animatingUp","animatingDown","animatingToHeightZero","animatingToHeightAuto","animatingToHeightSpecific","static","staticHeightZero","staticHeightAuto","staticHeightSpecific","PROPS_TO_OMIT","omit","_len","Array","_key","res","objectKeys","indexOf","cancelAnimationFrames","requestAnimationFrameIDs","cancelAnimationFrame","isNumber","n","isNaN","parseFloat","isFinite","isPercentage","search","substr","runCallback","callback","params","AnimateHeight","_React$Component","instance","TypeError","_classCallCheck","_this","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","animationFrameIDs","overflow","animationStateClasses","getStaticStateClasses","shouldUseTransitions","subClass","superClass","create","setPrototypeOf","_inherits","contentElement","hideContent","prevProps","prevState","_this2","_props","delay","duration","onAnimationEnd","onAnimationStart","_cx","showContent","contentHeight","offsetHeight","totalDuration","newHeight","timeoutState","isCurrentHeightAuto","timeoutAnimationStateClasses","clearTimeout","timeoutID","animationClassesTimeoutID","requestAnimationFrame","startAnimationHelper","setTimeout","_cx2","_cx3","_this3","_props2","animateOpacity","applyInlineTransitions","contentClassName","easing","_state","componentStyle","transition","WebkitTransition","contentStyle","opacity","componentClasses","ariaHidden","createElement","apply","concat","el","propTypes","bool","object","any","isRequired","string","number","propName","componentName","func","defaultProps","damageAbsorbed","manaSpent","manaGained","percentOverhealingDone","percentHealingDone","percentDamageDone","manaPercentSpent","hpm","dpm","timeSpentCasting","percentTimeSpentCasting","hpet","dpet","healingAbility","spenders","getCustomSpellStats","getTimeSpentCasting","gcdSpent","includeCooldowns","spells","topHpm","topDpm","topHpet","topDpet","index","getSpellStats","loaded","loading","handleClick","result","context","updateResults","onClick","cursor","React","PureComponent","contextTypes","PropTypes","PerformanceBar","percent","width","backgroundColor","colorForPerformance","module","getAllSpellStats","spellArray","spellRows","spellDetail","HealingEfficiencySpellRow","DetailView","BarView","colSpan","hasHealing","hasDamage","barWidth","hasOverhealing","formatDuration","StatisticWrapper","multiplier","HEALTHSTONE","MARK_OF_THE_ANCIENT_PRIESTESS","fallbackSpellInfo","sharedSpellInfo","CORE_SPELL_INFO","mentioned","totalAdjustedHealing","totalOneInt","totalOneCrit","totalOneHasteHpct","totalOneHasteHpm","totalOneMastery","totalOneVers","totalOneVersDr","totalOneLeech","playerHealthMissing","scaleWeightsWithHealth","moreInformationLink","SELECTED_PLAYER_PET","onAbsorb","onHealTaken","onDamageTaken","fightend","onFightend","specSpecific","shared","HealingValue","_handleHealEvent","absorb","_getSpellInfo","targetHealthPercentage","hitPoints","maxHitPoints","_handleHeal","eventForWeights","_adjustGain","ignored","_leech","_intellect","_criticalStrike","_hasteHpct","_hasteHpm","_mastery","_versatility","mult","Heal","currentLeechPercentage","_leechHasLeech","_leechPrediction","currentLeechRating","toPlayer","healIncreaseFromOneLeech","statMultiplier","ratingNeededForNextPercentage","statBaselineRatingPerPercent","raw","healIncreaseFromOneInt","currentIntellectRating","baseCritPercentage","totalCritChance","critMult","getBonus","rawBaseHealing","effectiveCritHealing","currHastePerc","currentHastePercentage","healIncreaseFromOneHaste","currentHasteRating","HASTE","Error","currVersPerc","currentVersatilityPercentage","healIncreaseFromOneVers","versatility","currentVersatilityRating","_updateMissingHealth","damageVal","DamageValue","blocked","overkill","_versatilityDamageReduction","baseStats","itemLevel","hps","primary","calculatePrimaryStat","hpsPerIntellect","criticalStrike","calculateSecondaryStatDefault","hpsPerCriticalStrike","hpsPerHaste","hpsPerMastery","hpsPerVersatility","hpsPerLeech","oneRatingHealing","stat","_prepareResults","urlParts","statValue","weight","_getGain","statName","getName","replace","join","data-place","Info","minWidth","fontWeight","row","_getTooltip","ratingForOne","_ratingPerOnePercent","Icon","getIcon","gainPerSecond","informationIconTooltip","getClassNameColor","getNameTranslated","Information","hpsPerHasteHPCT","hpsPerHasteHPM","approximate","Mana"],"mappings":"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","file":"static/js/HolyPriest.8710044d.chunk.js","sourcesContent":["import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Events, { HealEvent } from 'parser/core/Events';\r\n\r\nclass HealingReceived extends Analyzer {\r\n  HealingReceivedExternal = 0;\r\n  HealingReceivedSelf = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(Events.heal.to(SELECTED_PLAYER), this.onHeal);\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    if (event.sourceID === this.owner.playerId) {\r\n      this.HealingReceivedSelf += event.amount;\r\n    } else {\r\n      this.HealingReceivedExternal += event.amount;\r\n    }\r\n  }\r\n}\r\n\r\nexport default HealingReceived;\r\n","import SPELLS from 'common/SPELLS';\r\nimport CoreSpellUsable from 'parser/shared/modules/SpellUsable';\r\nimport Events, { AnyEvent, DispelEvent } from 'parser/core/Events';\r\nimport { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\n\r\nclass SpellUsable extends CoreSpellUsable {\r\n  static dependencies = {\r\n    ...CoreSpellUsable.dependencies,\r\n  };\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(Events.dispel.by(SELECTED_PLAYER), this.onDispel);\r\n  }\r\n\r\n  onDispel(event: DispelEvent) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === SPELLS.PURIFY.id) {\r\n      super.beginCooldown(spellId, event);\r\n    }\r\n  }\r\n\r\n  beginCooldown(spellId: number, cooldownTriggerEvent: AnyEvent) {\r\n    // Essentially having the purify cast not be able to trigger the cooldown, the dispel event does it instead.\r\n    if (spellId === SPELLS.PURIFY.id) {\r\n      return;\r\n    }\r\n\r\n    super.beginCooldown(spellId, cooldownTriggerEvent);\r\n  }\r\n}\r\n\r\nexport default SpellUsable;\r\n","import SPELLS from 'common/SPELLS/index';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SpellUsable from 'parser/priest/holy/modules/features/SpellUsable';\r\nimport Events, { ApplyBuffEvent, CastEvent, HealEvent, RemoveBuffEvent } from 'parser/core/Events';\r\n\r\nclass HolyWordBase extends Analyzer {\r\n  static dependencies = {\r\n    spellUsable: SpellUsable,\r\n  };\r\n  spellId = 0;\r\n  manaCost = 0;\r\n  baseCooldown = 60000;\r\n  serendipityReduction = 6000;\r\n  remainingCooldown = 0;\r\n  serendipityProccers: any = {};\r\n  holyWordHealing = 0;\r\n  holyWordOverhealing = 0;\r\n  holyWordCasts = 0;\r\n  holyWordWastedCooldown = 0;\r\n  baseHolyWordReductionBySpell: any = {};\r\n  lightOfTheNaruActive = false;\r\n  lightOfTheNaruMultiplier = 1.333;\r\n  lightOfTheNaruReductionBySpell: any = {};\r\n  apotheosisCasts = 0;\r\n  apotheosisActive = false;\r\n  apotheosisMultiplier = 3;\r\n  apotheosisReductionBySpell: any = {};\r\n  apotheosisManaReduction = 0;\r\n  holyWordApotheosisCasts = 0;\r\n  holyWordHealingDuringApotheosis = 0;\r\n  holyWordOverhealingDuringApotheosis = 0;\r\n  protected spellUsable!: SpellUsable;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n\r\n    // Set up proper serendipity reduction values\r\n    if (this.selectedCombatant.hasTalent(SPELLS.LIGHT_OF_THE_NAARU_TALENT.id)) {\r\n      this.lightOfTheNaruActive = true;\r\n    }\r\n\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER), this.onCast);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this.onHeal);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.APOTHEOSIS_TALENT), this.onApplyBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER).spell(SPELLS.APOTHEOSIS_TALENT), this.onRemoveBuff);\r\n  }\r\n\r\n  get baseCooldownReduction() {\r\n    let totalCDR = 0;\r\n\r\n    for (const spellID in this.baseHolyWordReductionBySpell) {\r\n      totalCDR += this.baseHolyWordReductionBySpell[spellID];\r\n    }\r\n    return totalCDR;\r\n  }\r\n\r\n  get lightOfTheNaaruCooldownReduction() {\r\n    let lotnCDR = 0;\r\n\r\n    for (const spellID in this.lightOfTheNaruReductionBySpell) {\r\n      lotnCDR += this.lightOfTheNaruReductionBySpell[spellID];\r\n    }\r\n    return lotnCDR;\r\n  }\r\n\r\n  get apotheosisCooldownReduction() {\r\n    let apothCDR = 0;\r\n\r\n    for (const spellID in this.apotheosisReductionBySpell) {\r\n      apothCDR += this.apotheosisReductionBySpell[spellID];\r\n    }\r\n    return apothCDR;\r\n  }\r\n\r\n  get totalHolyWordReductionPerSpell() {\r\n    const totalReduction: any = {};\r\n    for (const key in this.baseHolyWordReductionBySpell) {\r\n      totalReduction[key] = totalReduction[key] || 0;\r\n      totalReduction[key] += this.baseHolyWordReductionBySpell[key];\r\n    }\r\n\r\n    for (const key in this.apotheosisReductionBySpell) {\r\n      totalReduction[key] = totalReduction[key] || 0;\r\n      totalReduction[key] += this.apotheosisReductionBySpell[key];\r\n    }\r\n\r\n    for (const key in this.lightOfTheNaruReductionBySpell) {\r\n      totalReduction[key] = totalReduction[key] || 0;\r\n      totalReduction[key] += this.lightOfTheNaruReductionBySpell[key];\r\n    }\r\n\r\n    return totalReduction;\r\n  }\r\n\r\n  get totalHolyWordReductionPerSpellPerTalent() {\r\n    const totalReduction: any = {};\r\n    for (const key in this.baseHolyWordReductionBySpell) {\r\n      totalReduction[key] = totalReduction[key] || {};\r\n      totalReduction[key].base = totalReduction[key].base || 0;\r\n      totalReduction[key].base += this.baseHolyWordReductionBySpell[key];\r\n    }\r\n\r\n    for (const key in this.apotheosisReductionBySpell) {\r\n      totalReduction[key] = totalReduction[key] || {};\r\n      totalReduction[key].apotheosis = totalReduction[key].apotheosis || 0;\r\n      totalReduction[key].apotheosis += this.apotheosisReductionBySpell[key];\r\n    }\r\n\r\n    for (const key in this.lightOfTheNaruReductionBySpell) {\r\n      totalReduction[key] = totalReduction[key] || {};\r\n      totalReduction[key].lightOfTheNaaru = totalReduction[key].lightOfTheNaaru || 0;\r\n      totalReduction[key].lightOfTheNaaru += this.lightOfTheNaruReductionBySpell[key];\r\n    }\r\n\r\n    return totalReduction;\r\n  }\r\n\r\n  get totalCooldownReduction() {\r\n    return this.baseCooldownReduction + this.lightOfTheNaaruCooldownReduction + this.apotheosisCooldownReduction;\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === this.spellId) {\r\n      this.holyWordCasts += 1;\r\n      this.remainingCooldown = this.baseCooldown;\r\n\r\n      if (this.apotheosisActive) {\r\n        this.apotheosisManaReduction += this.manaCost;\r\n        this.holyWordApotheosisCasts += 1;\r\n      }\r\n\r\n    } else if (this.serendipityProccers[spellId] != null) {\r\n      const reductionAmount = this.parseSerendipityCast(spellId);\r\n      this.remainingCooldown -= reductionAmount;\r\n\r\n      if (this.spellUsable.isOnCooldown(this.spellId)) {\r\n        this.spellUsable.reduceCooldown(this.spellId, reductionAmount, event.timestamp);\r\n      }\r\n\r\n      if (this.remainingCooldown < 0) {\r\n        this.holyWordWastedCooldown += this.remainingCooldown * -1;\r\n        this.remainingCooldown = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  parseSerendipityCast(spellId: number) {\r\n    // We are casting a spell that will reduce a Holy Word Cooldown.\r\n    // Get the base amount of the reduction\r\n    const baseReductionAmount = this.serendipityProccers[spellId].baseReduction();\r\n    this.baseHolyWordReductionBySpell[spellId] = this.baseHolyWordReductionBySpell[spellId] || 0;\r\n    this.baseHolyWordReductionBySpell[spellId] += baseReductionAmount;\r\n\r\n    // Get the modified reduction by spell\r\n    if (this.lightOfTheNaruActive) {\r\n      const lightOfTheNaaruReduction = this.serendipityProccers[spellId].lightOfTheNaaruReduction();\r\n      this.lightOfTheNaruReductionBySpell[spellId] = this.lightOfTheNaruReductionBySpell[spellId] || 0;\r\n      this.lightOfTheNaruReductionBySpell[spellId] += lightOfTheNaaruReduction - baseReductionAmount;\r\n      return lightOfTheNaaruReduction;\r\n    } else if (this.apotheosisActive) {\r\n      const apotheosisReduction = this.serendipityProccers[spellId].apotheosisReduction();\r\n      this.apotheosisReductionBySpell[spellId] = this.apotheosisReductionBySpell[spellId] || 0;\r\n      this.apotheosisReductionBySpell[spellId] += apotheosisReduction - baseReductionAmount;\r\n      return apotheosisReduction;\r\n    } else {\r\n      return baseReductionAmount;\r\n    }\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === this.spellId) {\r\n      this.holyWordHealing += event.amount || 0;\r\n      this.holyWordOverhealing += event.overheal || 0;\r\n\r\n      if (this.apotheosisActive) {\r\n        this.holyWordHealingDuringApotheosis += event.amount || 0;\r\n        this.holyWordOverhealingDuringApotheosis += event.overheal || 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  onApplyBuff(event: ApplyBuffEvent) {\r\n    this.apotheosisCasts += 1;\r\n    this.apotheosisActive = true;\r\n  }\r\n\r\n  onRemoveBuff(event: RemoveBuffEvent) {\r\n    this.apotheosisActive = false;\r\n  }\r\n}\r\n\r\nexport default HolyWordBase;\r\n","import SPELLS from 'common/SPELLS';\r\nimport { Options } from 'parser/core/Analyzer';\r\n\r\nimport HolyWordBase from './HolyWordBase';\r\n\r\nconst PRAYER_OF_HEALING_SERENDIPITY_REDUCTION = 6000;\r\nconst RENEW_SERENDIPITY_REDUCTION = 2000;\r\nconst BINDING_HEAL_SERENDIPITY_REDUCTION = 3000;\r\n\r\nclass HolyWordSanctify extends HolyWordBase {\r\n  constructor(options: Options) {\r\n    super(options);\r\n\r\n    this.serendipityReduction = 6000;\r\n    this.spellId = SPELLS.HOLY_WORD_SANCTIFY.id;\r\n    this.manaCost = 5000;\r\n    this.serendipityProccers = {\r\n      [SPELLS.PRAYER_OF_HEALING.id]: {\r\n        baseReduction: () => PRAYER_OF_HEALING_SERENDIPITY_REDUCTION,\r\n        lightOfTheNaaruReduction: () => PRAYER_OF_HEALING_SERENDIPITY_REDUCTION * this.lightOfTheNaruMultiplier,\r\n        apotheosisReduction: () => PRAYER_OF_HEALING_SERENDIPITY_REDUCTION * this.apotheosisMultiplier,\r\n      },\r\n      [SPELLS.BINDING_HEAL_TALENT.id]: {\r\n        baseReduction: () => BINDING_HEAL_SERENDIPITY_REDUCTION,\r\n        lightOfTheNaaruReduction: () => BINDING_HEAL_SERENDIPITY_REDUCTION * this.lightOfTheNaruMultiplier,\r\n        apotheosisReduction: () => BINDING_HEAL_SERENDIPITY_REDUCTION * this.apotheosisMultiplier,\r\n      },\r\n      [SPELLS.RENEW.id]: {\r\n        baseReduction: () => RENEW_SERENDIPITY_REDUCTION,\r\n        lightOfTheNaaruReduction: () => RENEW_SERENDIPITY_REDUCTION * this.lightOfTheNaruMultiplier,\r\n        apotheosisReduction: () => RENEW_SERENDIPITY_REDUCTION * this.apotheosisMultiplier,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport default HolyWordSanctify;\r\n","import SPELLS from 'common/SPELLS';\r\nimport { Options } from 'parser/core/Analyzer';\r\n\r\nimport HolyWordBase from './HolyWordBase';\r\n\r\nconst GREATER_HEAL_SERENDIPITY_REDUCTION = 6000;\r\nconst FLASH_HEAL_SERENDIPITY_REDUCTION = 6000;\r\nconst BINDING_HEAL_SERENDIPITY_REDUCTION = 3000;\r\n\r\nclass HolyWordSerenity extends HolyWordBase {\r\n  constructor(options: Options) {\r\n    super(options);\r\n\r\n    this.spellId = SPELLS.HOLY_WORD_SERENITY.id;\r\n    this.manaCost = 4000;\r\n    this.serendipityProccers = {\r\n      [SPELLS.GREATER_HEAL.id]: {\r\n        baseReduction: () => GREATER_HEAL_SERENDIPITY_REDUCTION,\r\n        lightOfTheNaaruReduction: () => GREATER_HEAL_SERENDIPITY_REDUCTION * this.lightOfTheNaruMultiplier,\r\n        apotheosisReduction: () => GREATER_HEAL_SERENDIPITY_REDUCTION * this.apotheosisMultiplier,\r\n      },\r\n      [SPELLS.FLASH_HEAL.id]: {\r\n        baseReduction: () => FLASH_HEAL_SERENDIPITY_REDUCTION,\r\n        lightOfTheNaaruReduction: () => FLASH_HEAL_SERENDIPITY_REDUCTION * this.lightOfTheNaruMultiplier,\r\n        apotheosisReduction: () => FLASH_HEAL_SERENDIPITY_REDUCTION * this.apotheosisMultiplier,\r\n      },\r\n      [SPELLS.BINDING_HEAL_TALENT.id]: {\r\n        baseReduction: () => BINDING_HEAL_SERENDIPITY_REDUCTION,\r\n        lightOfTheNaaruReduction: () => BINDING_HEAL_SERENDIPITY_REDUCTION * this.lightOfTheNaruMultiplier,\r\n        apotheosisReduction: () => BINDING_HEAL_SERENDIPITY_REDUCTION * this.apotheosisMultiplier,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport default HolyWordSerenity;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Events, { HealEvent } from 'parser/core/Events';\r\n\r\nclass HealingTargetTracker extends Analyzer {\r\n  healingDoneToSelf = 0;\r\n  overHealingDoneToSelf = 0;\r\n  healingDoneTotal = 0;\r\n  overHealingDoneTotal = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this.onHeal);\r\n  }\r\n\r\n  get rawHealingDoneToSelf() {\r\n    return this.healingDoneToSelf + this.overHealingDoneToSelf;\r\n  }\r\n\r\n  get rawHealingDoneTotal() {\r\n    return this.healingDoneTotal + this.overHealingDoneTotal;\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    if (event.targetID === this.owner.playerId) {\r\n      this.healingDoneToSelf += event.amount;\r\n      this.overHealingDoneToSelf += event.overheal || 0;\r\n    }\r\n    this.healingDoneTotal += event.amount;\r\n    this.overHealingDoneTotal += event.overheal || 0;\r\n  }\r\n}\r\n\r\nexport default HealingTargetTracker;\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport { ThresholdStyle, When } from 'parser/core/ParseResults';\r\nimport DistanceMoved from 'parser/shared/modules/others/DistanceMoved';\r\nimport SpellUsable from 'parser/shared/modules/SpellUsable';\r\nimport SpellLink from 'common/SpellLink';\r\nimport Events, { ApplyBuffEvent, CastEvent, GlobalCooldownEvent, HealEvent, RefreshBuffEvent } from 'parser/core/Events';\r\n\r\nconst MS_BUFFER = 100;\r\n\r\nclass Renew extends Analyzer {\r\n  static dependencies = {\r\n    distanceMoved: DistanceMoved,\r\n    spellUsable: SpellUsable,\r\n  };\r\n  totalRenewHealing = 0;\r\n  totalRenewOverhealing = 0;\r\n  totalRenewAbsorbs = 0;\r\n  totalRenewTicks = 0;\r\n  lastRenewCast: number = 0;\r\n  renewsCast = 0;\r\n  goodRenews = 0;\r\n  // A list of the reasons that a renew is listed as \"bad\". I may expand upon this later in a card.\r\n  badRenewReason = {\r\n    betterspell: 0,\r\n    stationary: 0,\r\n  };\r\n  totalRenewApplications = 0;\r\n  salvationActive = false;\r\n  lastSalvationCast = 0;\r\n  renewsFromSalvation = 0;\r\n  benedictionActive = false;\r\n  renewsFromBenedictionAndRenew = 0;\r\n  lastGCD: GlobalCooldownEvent | null = null;\r\n  lastCast: CastEvent | null = null;\r\n  protected distanceMoved!: DistanceMoved;\r\n  protected spellUsable!: SpellUsable;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n\r\n    if (this.selectedCombatant.hasTalent(SPELLS.HOLY_WORD_SALVATION_TALENT.id)) {\r\n      this.salvationActive = true;\r\n    }\r\n    if (this.selectedCombatant.hasTalent(SPELLS.BENEDICTION_TALENT.id)) {\r\n      this.benedictionActive = true;\r\n    }\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.RENEW), this.onHeal);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER), this.onCast);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.RENEW), this.onApplyBuff);\r\n    this.addEventListener(Events.refreshbuff.by(SELECTED_PLAYER).spell(SPELLS.RENEW), this.onRefreshBuff);\r\n    this.addEventListener(Events.GlobalCooldown.by(SELECTED_PLAYER), this.onGCD);\r\n  }\r\n\r\n  get renewsFromBenediction() {\r\n    return this.renewsFromBenedictionAndRenew - this.renewsCast;\r\n  }\r\n\r\n  get badRenews() {\r\n    return this.renewsCast - this.goodRenews;\r\n  }\r\n\r\n  get badRenewThreshold() {\r\n    return {\r\n      actual: this.badRenews,\r\n      isGreaterThan: {\r\n        minor: 2 * this.owner.fightDuration / 1000 / 60,\r\n        average: 3 * this.owner.fightDuration / 1000 / 60,\r\n        major: 4 * this.owner.fightDuration / 1000 / 60,\r\n      },\r\n      style: ThresholdStyle.NUMBER,\r\n    };\r\n  }\r\n\r\n  healingFromRenew(applicationCount: number) {\r\n    const averageHealingPerRenewApplication = this.totalRenewHealing / this.totalRenewApplications;\r\n    return averageHealingPerRenewApplication * applicationCount;\r\n  }\r\n\r\n  overhealingFromRenew(applicationCount: number) {\r\n    const averageOverHealingPerRenewApplication = this.totalRenewOverhealing / this.totalRenewApplications;\r\n    return averageOverHealingPerRenewApplication * applicationCount;\r\n  }\r\n\r\n  absorptionFromRenew(applicationCount: number) {\r\n    const averageAbsorptionPerRenewApplication = this.totalRenewOverhealing / this.totalRenewApplications;\r\n    return averageAbsorptionPerRenewApplication * applicationCount;\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    this.totalRenewHealing += event.amount || 0;\r\n    this.totalRenewOverhealing += event.overheal || 0;\r\n    this.totalRenewAbsorbs += event.absorbed || 0;\r\n    this.totalRenewTicks += 1;\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    const spellId = event.ability.guid;\r\n\r\n    if (this.lastCast) {\r\n      // If our last cast was a renew cast, validate that it was used well.\r\n      this.validateRenew(event);\r\n    }\r\n    if (spellId === SPELLS.RENEW.id) {\r\n      this.renewsCast += 1;\r\n      this.lastCast = event;\r\n    } else if (spellId === SPELLS.HOLY_WORD_SALVATION_TALENT.id) {\r\n      this.lastSalvationCast = event.timestamp;\r\n    }\r\n  }\r\n\r\n  onApplyBuff(event: ApplyBuffEvent) {\r\n    this.handleRenewApplication(event);\r\n  }\r\n\r\n  onRefreshBuff(event: RefreshBuffEvent) {\r\n    this.handleRenewApplication(event);\r\n  }\r\n\r\n  handleRenewApplication(event: ApplyBuffEvent | RefreshBuffEvent) {\r\n    this.totalRenewApplications += 1;\r\n\r\n    if (this.salvationActive && event.timestamp - this.lastSalvationCast < MS_BUFFER) {\r\n      this.renewsFromSalvation += 1;\r\n    } else {\r\n      this.renewsFromBenedictionAndRenew += 1;\r\n    }\r\n  }\r\n\r\n  onGCD(event: GlobalCooldownEvent) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId !== SPELLS.RENEW.id) {\r\n      return;\r\n    }\r\n    this.lastGCD = event;\r\n  }\r\n\r\n  // This function validates if a renew should have been cast at all.\r\n  validateRenew(event: CastEvent) {\r\n    this.lastRenewCast = event.timestamp;\r\n    if (this.lastGCD && this.movedSinceCast(event)) {\r\n      // We are moving, but do we have any other instant cast spells?\r\n      const sanctifyOnCooldown = this.spellUsable.isOnCooldown(SPELLS.HOLY_WORD_SANCTIFY.id);\r\n      const serenityOnCooldown = this.spellUsable.isOnCooldown(SPELLS.HOLY_WORD_SERENITY.id);\r\n      let cohOnCooldown = true;\r\n      if (this.selectedCombatant.hasTalent(SPELLS.CIRCLE_OF_HEALING_TALENT.id)) {\r\n        cohOnCooldown = this.spellUsable.isOnCooldown(SPELLS.CIRCLE_OF_HEALING_TALENT.id);\r\n      }\r\n      if (sanctifyOnCooldown && serenityOnCooldown && cohOnCooldown) {\r\n        this.goodRenews += 1;\r\n      } else {\r\n        this.badRenewReason.betterspell = (this.badRenewReason.betterspell || 0) + 1;\r\n      }\r\n    }\r\n    this.badRenewReason.stationary = (this.badRenewReason.stationary || 0) + 1;\r\n\r\n    // Reset the cast history\r\n    this.lastGCD = null;\r\n    this.lastCast = null;\r\n  }\r\n\r\n  movedSinceCast(event: CastEvent) {\r\n    if (this.lastGCD == null) {\r\n      return false;\r\n    }\r\n    const timeSinceCast = event.timestamp - this.lastGCD.timestamp;\r\n    const timeSinceLastMovement = this.distanceMoved.timeSinceLastMovement();\r\n\r\n    if (timeSinceLastMovement !== null && timeSinceLastMovement < timeSinceCast) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  suggestions(when: When) {\r\n    when(this.badRenewThreshold)\r\n      .addSuggestion((suggest, actual, recommended) => suggest(<>You should cast <SpellLink id={SPELLS.RENEW.id} /> less.</>)\r\n        .icon(SPELLS.RENEW.icon)\r\n        .actual(<>\r\n          You used Renew {this.badRenews} times when another spell would have been more productive.\r\n          Renew is one of the least efficient spells Holy Priests have, and should only be cast when moving with no other instants available.</>)\r\n        .recommended(`Two or less per minute is recommended, except for movement heavy fights.`),\r\n      );\r\n  }\r\n}\r\n\r\nexport default Renew;\r\n","import React from 'react';\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport Events, { HealEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/C2NGDav6KHgc8ZWd/28-Mythic+Taloc+-+Kill+(7:07)/13-Ariemah\r\nclass CosmicRipple extends Analyzer {\r\n  totalHealing = 0;\r\n  overhealing = 0;\r\n  absorbed = 0;\r\n  totalHits = 0;\r\n  totalRipples = 0;\r\n  lastRippleTimeStamp = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.COSMIC_RIPPLE_TALENT.id);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.COSMIC_RIPPLE_HEAL), this.onHeal);\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    this.overhealing += event.overheal || 0;\r\n    this.totalHealing += (event.amount || 0) + (event.absorbed || 0);\r\n    this.totalHits += 1;\r\n\r\n    if (event.timestamp - this.lastRippleTimeStamp > 1000) {\r\n      this.totalRipples += 1;\r\n      this.lastRippleTimeStamp = event.timestamp;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(3)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.COSMIC_RIPPLE_HEAL}>\r\n          <ItemHealingDone amount={this.totalHealing} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CosmicRipple;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport SPELLS from 'common/SPELLS';\r\nimport AbilityTracker from 'parser/shared/modules/AbilityTracker';\r\nimport CastEfficiency from 'parser/shared/modules/CastEfficiency';\r\nimport HealingDone from 'parser/shared/modules/throughput/HealingDone';\r\nimport HealingReceived from 'parser/priest/holy/modules/features/HealingReceived';\r\nimport DamageTaken from 'parser/shared/modules/throughput/DamageTaken';\r\nimport DeathTracker from 'parser/shared/modules/DeathTracker';\r\nimport ManaValues from 'parser/shared/modules/ManaValues';\r\nimport HolyWordSanctify from 'parser/priest/holy/modules/spells/holyword/HolyWordSanctify';\r\nimport HolyWordSerenity from 'parser/priest/holy/modules/spells/holyword/HolyWordSerenity';\r\nimport HealingTargetTracker from 'parser/priest/holy/modules/features/HealingTargetTracker';\r\nimport Renew from 'parser/priest/holy/modules/spells/Renew';\r\nimport CosmicRipple from 'parser/priest/holy/modules/talents/45/CosmicRipple';\r\nimport DamageDone from 'parser/shared/modules/throughput/DamageDone';\r\n\r\nconst HolyPriestSpreadsheet = props => {\r\n  const { parser } = props;\r\n\r\n  const styles = {\r\n    cellBorder: { borderTop: '.5px solid #dddddd' },\r\n    table: { borderBottom: '1px solid #dddddd', borderTop: '1px solid #dddddd', align: 'left', padding: '8px', float: 'left', margin: '2px' },\r\n  };\r\n\r\n  const getAbility = spellId => parser.getModule(AbilityTracker).getAbility(spellId);\r\n\r\n  const overhealingSpell = spellId => ((getAbility(spellId).healingOverheal || 0) / ((getAbility(spellId).healingOverheal || 0) + (getAbility(spellId).healingEffective || 0)) || 0).toFixed(5);\r\n\r\n  const cpm = spellId => (getAbility(spellId).casts / (parser.fightDuration / 1000 / 60) || 0).toFixed(5);\r\n\r\n  const targetsPerCast = (spellId, healId) => {\r\n    const ability = getAbility(spellId);\r\n    const heal = healId === undefined ? getAbility(spellId) : getAbility(healId);\r\n\r\n    if (ability.ability == null) {\r\n      return 'N/A';\r\n    }\r\n\r\n    const count = heal.healingHits / ability.casts;\r\n    if (count) {\r\n      return count.toFixed(5);\r\n    }\r\n\r\n    return 1;\r\n  };\r\n\r\n  const castEfficiency = (spellId) => {\r\n    const efficiency = parser.getModule(CastEfficiency).getCastEfficiencyForSpellId(spellId, true);\r\n\r\n    if (!efficiency) {\r\n      return 'N/A';\r\n    } else if (efficiency.efficiency) {\r\n      return efficiency.efficiency.toFixed(5);\r\n    } else if (efficiency.maxCasts !== Infinity) {\r\n      return '0.00000';\r\n    } else {\r\n      return 1;\r\n    }\r\n  };\r\n\r\n  const rawHealing = (spellId) => {\r\n    const ability = getAbility(spellId);\r\n    if (ability.ability) {\r\n      return ability.healingEffective + ability.healingOverheal;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  const getChosenTalent = (talentRow) => {\r\n    switch (talentRow) {\r\n      case 15:\r\n        if (parser.selectedCombatant.hasTalent(SPELLS.ENLIGHTENMENT_TALENT.id)) {\r\n          return SPELLS.ENLIGHTENMENT_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.TRAIL_OF_LIGHT_TALENT.id)) {\r\n          return SPELLS.TRAIL_OF_LIGHT_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.ENDURING_RENEWAL_TALENT.id)) {\r\n          return SPELLS.ENDURING_RENEWAL_TALENT.name;\r\n        }\r\n        break;\r\n      case 30:\r\n        if (parser.selectedCombatant.hasTalent(SPELLS.ANGELS_MERCY_TALENT.id)) {\r\n          return SPELLS.ANGELS_MERCY_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.PERSEVERANCE_TALENT.id)) {\r\n          return SPELLS.PERSEVERANCE_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.ANGELIC_FEATHER_TALENT.id)) {\r\n          return SPELLS.ANGELIC_FEATHER_TALENT.name;\r\n        }\r\n        break;\r\n      case 45:\r\n        if (parser.selectedCombatant.hasTalent(SPELLS.COSMIC_RIPPLE_TALENT.id)) {\r\n          return SPELLS.COSMIC_RIPPLE_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.GUARDIAN_ANGEL_TALENT.id)) {\r\n          return SPELLS.GUARDIAN_ANGEL_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.AFTERLIFE_TALENT.id)) {\r\n          return SPELLS.AFTERLIFE_TALENT.name;\r\n        }\r\n        break;\r\n      case 60:\r\n        if (parser.selectedCombatant.hasTalent(SPELLS.PSYCHIC_VOICE_TALENT.id)) {\r\n          return SPELLS.PSYCHIC_VOICE_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.CENSURE_TALENT.id)) {\r\n          return SPELLS.CENSURE_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.SHINING_FORCE_TALENT.id)) {\r\n          return SPELLS.SHINING_FORCE_TALENT.name;\r\n        }\r\n        break;\r\n      case 75:\r\n        if (parser.selectedCombatant.hasTalent(SPELLS.SURGE_OF_LIGHT_TALENT.id)) {\r\n          return SPELLS.SURGE_OF_LIGHT_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.BINDING_HEAL_TALENT.id)) {\r\n          return SPELLS.BINDING_HEAL_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.CIRCLE_OF_HEALING_TALENT.id)) {\r\n          return SPELLS.CIRCLE_OF_HEALING_TALENT.name;\r\n        }\r\n        break;\r\n      case 90:\r\n        if (parser.selectedCombatant.hasTalent(SPELLS.BENEDICTION_TALENT.id)) {\r\n          return SPELLS.BENEDICTION_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.DIVINE_STAR_TALENT.id)) {\r\n          return SPELLS.DIVINE_STAR_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.HALO_TALENT.id)) {\r\n          return SPELLS.HALO_TALENT.name;\r\n        }\r\n        break;\r\n      case 100:\r\n        if (parser.selectedCombatant.hasTalent(SPELLS.LIGHT_OF_THE_NAARU_TALENT.id)) {\r\n          return SPELLS.LIGHT_OF_THE_NAARU_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.APOTHEOSIS_TALENT.id)) {\r\n          return SPELLS.APOTHEOSIS_TALENT.name;\r\n        } else if (parser.selectedCombatant.hasTalent(SPELLS.HOLY_WORD_SALVATION_TALENT.id)) {\r\n          return SPELLS.HOLY_WORD_SALVATION_TALENT.name;\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return 'Unknown talent choice!';\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ padding: '0px 22px 15px 0px' }}>Please use the below table to populate the Player Log section of the Holy Priest Spreadsheet by Niphyr. <a href=\"https://docs.google.com/spreadsheets/d/1a8dNKpU49UkUxzWBgffWM-zXxhPWOUl8sFSM6Bp9Sl0/edit\" target=\"_blank\" rel=\"noopener noreferrer\">Link to the sheet</a><br /></div>\r\n      <div>\r\n        <table style={styles.table}>\r\n          <tbody>\r\n            <tr>\r\n              <td>Intellect Rating</td>\r\n              <td>{parser.selectedCombatant._combatantInfo.intellect}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Critical Strike Rating</td>\r\n              <td>{parser.selectedCombatant._combatantInfo.critSpell}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Haste Rating</td>\r\n              <td>{parser.selectedCombatant._combatantInfo.hasteSpell}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Mastery Rating</td>\r\n              <td>{parser.selectedCombatant._combatantInfo.mastery}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Versatility Rating</td>\r\n              <td>{parser.selectedCombatant._combatantInfo.versatilityHealingDone}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Leech Rating</td>\r\n              <td>{parser.selectedCombatant._combatantInfo.leech}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Avoidance Rating</td>\r\n              <td>{parser.selectedCombatant._combatantInfo.avoidance}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Speed Rating</td>\r\n              <td>{parser.selectedCombatant._combatantInfo.speed}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Healing Done</td>\r\n              <td>{parser.getModule(HealingDone)._total._regular}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Self Healing</td>\r\n              <td>{parser.getModule(HealingReceived).HealingReceivedSelf}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Damage Taken</td>\r\n              <td>{parser.getModule(DamageTaken)._total._regular}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Damage Done</td>\r\n              <td>{parser.getModule(DamageDone)._total._regular}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Deaths</td>\r\n              <td>{parser.getModule(DeathTracker).deaths.length}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Ending Mana</td>\r\n              <td>{parser.getModule(ManaValues).endingMana}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Fight Length</td>\r\n              <td>{Math.floor(parser.fightDuration / 1000)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Sanctify CDR (s)</td>\r\n              <td>{parser.getModule(HolyWordSanctify).baseCooldownReduction / 1000}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Serenity CDR (s)</td>\r\n              <td>{parser.getModule(HolyWordSerenity).baseCooldownReduction / 1000}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Sanctify CDR wasted (s)</td>\r\n              <td>{parser.getModule(HolyWordSanctify).holyWordWastedCooldown / 1000}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Serenity CDR wasted (s)</td>\r\n              <td>{parser.getModule(HolyWordSerenity).holyWordWastedCooldown / 1000}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Renews refreshed by Enduring Renewal</td>\r\n              <td>{parser.getModule(Renew).renewsFromEnduringRenewal}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Renews from benediction</td>\r\n              <td>{parser.getModule(Renew).renewsFromBenediction}</td>\r\n            </tr>\r\n\r\n            <tr>\r\n              <td>Tier 15 Talent</td>\r\n              <td>{getChosenTalent(15)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Tier 30 Talent</td>\r\n              <td>{getChosenTalent(30)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Tier 45 Talent</td>\r\n              <td>{getChosenTalent(45)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Tier 60 Talent</td>\r\n              <td>{getChosenTalent(60)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Tier 75 Talent</td>\r\n              <td>{getChosenTalent(75)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Tier 90 Talent</td>\r\n              <td>{getChosenTalent(90)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Tier 100 Talent</td>\r\n              <td>{getChosenTalent(100)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Total Raw Healing</td>\r\n              <td>{parser.getModule(HealingTargetTracker).rawHealingDoneTotal}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Total Raw Self Healing</td>\r\n              <td>{parser.getModule(HealingTargetTracker).rawHealingDoneToSelf}</td>\r\n            </tr>\r\n\r\n          </tbody>\r\n        </table>\r\n        <table style={styles.table}>\r\n          <tbody>\r\n            <tr>\r\n              <td>Spell Name</td>\r\n              <td>Raw Healing</td>\r\n              <td>Overheal %</td>\r\n              <td>CPM</td>\r\n              <td>Casting Efficiency %</td>\r\n              <td>Average Targets / Cast</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Heal</td>\r\n              <td>{rawHealing(SPELLS.GREATER_HEAL.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.GREATER_HEAL.id)}</td>\r\n              <td>{cpm(SPELLS.GREATER_HEAL.id)}</td>\r\n              <td>{castEfficiency(SPELLS.GREATER_HEAL.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.GREATER_HEAL.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Flash Heal</td>\r\n              <td>{rawHealing(SPELLS.FLASH_HEAL.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.FLASH_HEAL.id)}</td>\r\n              <td>{cpm(SPELLS.FLASH_HEAL.id)}</td>\r\n              <td>{castEfficiency(SPELLS.FLASH_HEAL.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.FLASH_HEAL.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Renew</td>\r\n              <td>{rawHealing(SPELLS.RENEW.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.RENEW.id)}</td>\r\n              <td>{cpm(SPELLS.RENEW.id)}</td>\r\n              <td>{castEfficiency(SPELLS.RENEW.id)}</td>\r\n              <td>1</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Prayer of Healing</td>\r\n              <td>{rawHealing(SPELLS.PRAYER_OF_HEALING.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.PRAYER_OF_HEALING.id)}</td>\r\n              <td>{cpm(SPELLS.PRAYER_OF_HEALING.id)}</td>\r\n              <td>{castEfficiency(SPELLS.PRAYER_OF_HEALING.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.PRAYER_OF_HEALING.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Prayer of Mending</td>\r\n              <td>{rawHealing(SPELLS.PRAYER_OF_MENDING_HEAL.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.PRAYER_OF_MENDING_HEAL.id)}</td>\r\n              <td>{cpm(SPELLS.PRAYER_OF_MENDING_CAST.id)}</td>\r\n              <td>{castEfficiency(SPELLS.PRAYER_OF_MENDING_CAST.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.PRAYER_OF_MENDING_CAST.id, SPELLS.PRAYER_OF_MENDING_HEAL.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Holy Word: Serenity</td>\r\n              <td>{rawHealing(SPELLS.HOLY_WORD_SERENITY.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.HOLY_WORD_SERENITY.id)}</td>\r\n              <td>{cpm(SPELLS.HOLY_WORD_SERENITY.id)}</td>\r\n              <td>{castEfficiency(SPELLS.HOLY_WORD_SERENITY.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.HOLY_WORD_SERENITY.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Holy Word: Sanctify</td>\r\n              <td>{rawHealing(SPELLS.HOLY_WORD_SANCTIFY.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.HOLY_WORD_SANCTIFY.id)}</td>\r\n              <td>{cpm(SPELLS.HOLY_WORD_SANCTIFY.id)}</td>\r\n              <td>{castEfficiency(SPELLS.HOLY_WORD_SANCTIFY.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.HOLY_WORD_SANCTIFY.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Guardian Spirit</td>\r\n              <td>0</td>\r\n              <td>{overhealingSpell(SPELLS.GUARDIAN_SPIRIT.id)}</td>\r\n              <td>{cpm(SPELLS.GUARDIAN_SPIRIT.id)}</td>\r\n              <td>{castEfficiency(SPELLS.GUARDIAN_SPIRIT.id)}</td>\r\n              <td>1</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Divine Hymn</td>\r\n              <td>{rawHealing(SPELLS.DIVINE_HYMN_HEAL.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.DIVINE_HYMN_HEAL.id)}</td>\r\n              <td>{cpm(SPELLS.DIVINE_HYMN_CAST.id)}</td>\r\n              <td>{castEfficiency(SPELLS.DIVINE_HYMN_CAST.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.DIVINE_HYMN_CAST.id, SPELLS.DIVINE_HYMN_HEAL.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Desperate Prayer</td>\r\n              <td>{rawHealing(SPELLS.DESPERATE_PRAYER.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.DESPERATE_PRAYER.id)}</td>\r\n              <td>{cpm(SPELLS.DESPERATE_PRAYER.id)}</td>\r\n              <td>{castEfficiency(SPELLS.DESPERATE_PRAYER.id)}</td>\r\n              <td>1</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Cosmic Ripple</td>\r\n              <td>{rawHealing(SPELLS.COSMIC_RIPPLE_HEAL.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.COSMIC_RIPPLE_HEAL.id)}</td>\r\n              <td>N/A</td>\r\n              <td>N/A</td>\r\n              <td>{parser.getModule(CosmicRipple).totalHits / parser.getModule(CosmicRipple).totalRipples}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Binding Heal</td>\r\n              <td>{rawHealing(SPELLS.BINDING_HEAL_TALENT.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.BINDING_HEAL_TALENT.id)}</td>\r\n              <td>{cpm(SPELLS.BINDING_HEAL_TALENT.id)}</td>\r\n              <td>{castEfficiency(SPELLS.BINDING_HEAL_TALENT.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.BINDING_HEAL_TALENT.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Circle of Healing</td>\r\n              <td>{rawHealing(SPELLS.CIRCLE_OF_HEALING_TALENT.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.CIRCLE_OF_HEALING_TALENT.id)}</td>\r\n              <td>{cpm(SPELLS.CIRCLE_OF_HEALING_TALENT.id)}</td>\r\n              <td>{castEfficiency(SPELLS.CIRCLE_OF_HEALING_TALENT.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.CIRCLE_OF_HEALING_TALENT.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Divine Star</td>\r\n              <td>{rawHealing(SPELLS.DIVINE_STAR_TALENT.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.DIVINE_STAR_TALENT.id)}</td>\r\n              <td>{cpm(SPELLS.DIVINE_STAR_TALENT.id)}</td>\r\n              <td>{castEfficiency(SPELLS.DIVINE_STAR_TALENT.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.DIVINE_STAR_TALENT.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Halo</td>\r\n              <td>{rawHealing(SPELLS.HALO_HEAL.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.HALO_HEAL.id)}</td>\r\n              <td>{cpm(SPELLS.HALO_TALENT.id)}</td>\r\n              <td>{castEfficiency(SPELLS.HALO_TALENT.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.HALO_TALENT.id, SPELLS.HALO_HEAL.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Holy Word: Salvation</td>\r\n              <td>{rawHealing(SPELLS.HOLY_WORD_SALVATION_TALENT.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.HOLY_WORD_SALVATION_TALENT.id)}</td>\r\n              <td>{cpm(SPELLS.HOLY_WORD_SALVATION_TALENT.id)}</td>\r\n              <td>{castEfficiency(SPELLS.HOLY_WORD_SALVATION_TALENT.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.HOLY_WORD_SALVATION_TALENT.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Holy Nova</td>\r\n              <td>{rawHealing(SPELLS.HOLY_NOVA_HEAL.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.HOLY_NOVA_HEAL.id)}</td>\r\n              <td>{cpm(SPELLS.HOLY_NOVA.id)}</td>\r\n              <td>{castEfficiency(SPELLS.HOLY_NOVA.id)}</td>\r\n              <td>{targetsPerCast(SPELLS.HOLY_NOVA.id, SPELLS.HOLY_NOVA_HEAL.id)}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Echo of Light</td>\r\n              <td>{rawHealing(SPELLS.ECHO_OF_LIGHT_HEAL.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.ECHO_OF_LIGHT_HEAL.id)}</td>\r\n              <td>N/A</td>\r\n              <td>N/A</td>\r\n              <td>1</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Leech</td>\r\n              <td>{rawHealing(SPELLS.LEECH.id)}</td>\r\n              <td>{overhealingSpell(SPELLS.LEECH.id)}</td>\r\n              <td>N/A</td>\r\n              <td>N/A</td>\r\n              <td>1</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nHolyPriestSpreadsheet.propTypes = {\r\n  parser: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default HolyPriestSpreadsheet;\r\n","import CoreAbilityTracker from 'parser/shared/modules/AbilityTracker';\r\n\r\nclass AbilityTracker extends CoreAbilityTracker {\r\n\r\n}\r\n\r\nexport default AbilityTracker;\r\n","import SPELLS from 'common/SPELLS';\r\n\r\nimport CoreAbilities from 'parser/core/modules/Abilities';\r\nimport COVENANTS from 'game/shadowlands/COVENANTS';\r\n\r\nclass Abilities extends CoreAbilities {\r\n  spellbook() {\r\n    const combatant = this.selectedCombatant;\r\n    return [\r\n      {\r\n        spell: SPELLS.PRAYER_OF_MENDING_CAST,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: (haste: number) => 12 / (1 + haste),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n        buffSpellId: SPELLS.PRAYER_OF_MENDING_BUFF.id,\r\n        healSpellIds: [\r\n          SPELLS.PRAYER_OF_MENDING_HEAL.id,\r\n        ],\r\n      },\r\n      {\r\n        spell: SPELLS.DESPERATE_PRAYER,\r\n        buffSpellId: SPELLS.DESPERATE_PRAYER.id,\r\n        category: Abilities.SPELL_CATEGORIES.DEFENSIVE,\r\n        cooldown: 90, // todo: Account for Angel's Mercy if possible\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.35,\r\n          averageIssueEfficiency: 0.20,\r\n          majorIssueEfficiency: 0,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.APOTHEOSIS_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 120,\r\n        enabled: combatant.hasTalent(SPELLS.APOTHEOSIS_TALENT.id),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.30,\r\n          averageIssueEfficiency: 0.10,\r\n          majorIssueEfficiency: 0,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.DIVINE_HYMN_CAST,\r\n        buffSpellId: SPELLS.DIVINE_HYMN_HEAL.id,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 180,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.30,\r\n          averageIssueEfficiency: 0.10,\r\n          majorIssueEfficiency: 0,\r\n        },\r\n        healSpellIds: [\r\n          SPELLS.DIVINE_HYMN_HEAL.id,\r\n        ],\r\n      },\r\n      {\r\n        spell: SPELLS.SYMBOL_OF_HOPE,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 300,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.01, // This spell should be cast at least one per encounter\r\n          majorIssueEfficiency: 0,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_WORD_SALVATION_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        cooldown: 720, // reduced by Sanctify and Serenity\r\n        enabled: combatant.hasTalent(SPELLS.HOLY_WORD_SALVATION_TALENT.id),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.30,\r\n          averageIssueEfficiency: 0.10,\r\n          majorIssueEfficiency: 0,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_WORD_SANCTIFY,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 60, // reduced by PoH and Renew\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_WORD_SERENITY,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 60, // reduced by Heal and Flash Heal\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.DIVINE_STAR_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 15,\r\n        enabled: combatant.hasTalent(SPELLS.DIVINE_STAR_TALENT.id),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n        healSpellIds: [\r\n          SPELLS.DIVINE_STAR_HEAL.id,\r\n        ],\r\n      },\r\n      {\r\n        spell: SPELLS.HALO_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 40,\r\n        enabled: combatant.hasTalent(SPELLS.HALO_TALENT.id),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n        healSpellIds: [\r\n          SPELLS.HALO_HEAL.id,\r\n        ],\r\n      },\r\n      {\r\n        spell: SPELLS.CIRCLE_OF_HEALING_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: (haste: number) => 15 / (1 + haste),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.RENEW,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.PRAYER_OF_HEALING,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.GREATER_HEAL,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.FLASH_HEAL,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.BINDING_HEAL_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        enabled: combatant.hasTalent(SPELLS.BINDING_HEAL_TALENT.id),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        castEfficiency: {\r\n          suggestion: true,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.DISPEL_MAGIC,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_FIRE,\r\n        buffSpellId: SPELLS.HOLY_FIRE.id,\r\n        category: Abilities.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,\r\n        // enabling cooldown breaks a lot of logs timelines where the healer actively DPSed\r\n        // not worth showing until the reset is properly implemented\r\n        // cooldown: 10, // can be reset by Holy Nova and smite\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_NOVA,\r\n        category: Abilities.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n        healSpellIds: [\r\n          SPELLS.HOLY_NOVA_HEAL.id,\r\n        ],\r\n      },\r\n      {\r\n        spell: SPELLS.HOLY_WORD_CHASTISE,\r\n        category: Abilities.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,\r\n        cooldown: 60, // gets reduced by Smite\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.SMITE,\r\n        category: Abilities.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.FADE,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 30,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.GUARDIAN_SPIRIT,\r\n        buffSpellId: SPELLS.GUARDIAN_SPIRIT.id,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 180, // guardian angel talent can reduce this\r\n        castEfficiency: {\r\n          suggestion: true,\r\n          recommendedEfficiency: 0.01, // This spell should be cast at least one per encounter\r\n          majorIssueEfficiency: 0,\r\n        },\r\n        healSpellIds: [\r\n          SPELLS.GUARDIAN_SPIRIT_HEAL.id,\r\n        ],\r\n      },\r\n      {\r\n        spell: SPELLS.LEAP_OF_FAITH,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 90,\r\n      },\r\n      {\r\n        spell: SPELLS.LEVITATE,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.PSYCHIC_SCREAM,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: combatant.hasTalent(SPELLS.PSYCHIC_VOICE_TALENT.id) ? 30 : 60,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.MASS_DISPEL,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 45,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.PURIFY,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 8,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.ANGELIC_FEATHER_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        charges: 3,\r\n        cooldown: 20,\r\n        enabled: combatant.hasTalent(SPELLS.ANGELIC_FEATHER_TALENT.id),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.SHINING_FORCE_TALENT,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: 45,\r\n        enabled: combatant.hasTalent(SPELLS.SHINING_FORCE_TALENT.id),\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.SPIRIT_OF_REDEMPTION_BUFF,\r\n        buffSpellId: SPELLS.SPIRIT_OF_REDEMPTION_BUFF.id,\r\n        category: Abilities.SPELL_CATEGORIES.UTILITY,\r\n        cooldown: () => this.owner.fightDuration / 1000,\r\n      },\r\n      {\r\n        spell: SPELLS.SHADOW_WORD_PAIN,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.MIND_BLAST,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.MIND_SOOTHE,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.POWER_INFUSION,\r\n        category: Abilities.SPELL_CATEGORIES.COOLDOWNS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.SHADOW_WORD_DEATH,\r\n        category: Abilities.SPELL_CATEGORIES.OTHERS,\r\n        gcd: {\r\n          base: 1500,\r\n        },\r\n      },\r\n      {\r\n        spell: SPELLS.FLESHCRAFT,\r\n        category: Abilities.SPELL_CATEGORIES.DEFENSIVE,\r\n        cooldown: 120,\r\n        enabled: combatant.hasCovenant(COVENANTS.NECROLORD.id),\r\n      },\r\n      {\r\n        spell: SPELLS.UNHOLY_NOVA_BUFF,\r\n        category: Abilities.SPELL_CATEGORIES.ROTATIONAL,\r\n        cooldown: 120,\r\n        enabled: combatant.hasCovenant(COVENANTS.NECROLORD.id),\r\n      },\r\n    ];\r\n  }\r\n}\r\n\r\nexport default Abilities;\r\n","import SPELLS from 'common/SPELLS';\r\n\r\nexport const ABILITIES_AFFECTED_BY_HEALING_INCREASES = [\r\n  SPELLS.DIVINE_HYMN_HEAL.id,\r\n  SPELLS.GREATER_HEAL.id,\r\n  SPELLS.FLASH_HEAL.id,\r\n  SPELLS.PRAYER_OF_MENDING_HEAL.id,\r\n  SPELLS.PRAYER_OF_HEALING.id,\r\n  SPELLS.RENEW.id,\r\n  SPELLS.HOLY_WORD_SERENITY.id,\r\n  SPELLS.HOLY_WORD_SANCTIFY.id,\r\n  SPELLS.HOLY_WORD_SALVATION_TALENT.id,\r\n  SPELLS.DESPERATE_PRAYER.id,\r\n  SPELLS.COSMIC_RIPPLE_TALENT.id,\r\n  SPELLS.BINDING_HEAL_TALENT.id,\r\n  SPELLS.CIRCLE_OF_HEALING_TALENT.id,\r\n  SPELLS.HALO_HEAL.id,\r\n  SPELLS.DIVINE_STAR_TALENT.id,\r\n  SPELLS.TRAIL_OF_LIGHT_TALENT.id,\r\n];\r\n\r\n// better off making things that -dont- proc it perhaps?\r\nexport const ABILITIES_THAT_TRIGGER_MASTERY = [\r\n  SPELLS.DIVINE_HYMN_HEAL.id,\r\n  SPELLS.GREATER_HEAL.id,\r\n  SPELLS.FLASH_HEAL.id,\r\n  SPELLS.PRAYER_OF_MENDING_HEAL.id,\r\n  SPELLS.PRAYER_OF_HEALING.id,\r\n  SPELLS.HOLY_WORD_SERENITY.id,\r\n  SPELLS.HOLY_WORD_SANCTIFY.id,\r\n  SPELLS.HOLY_WORD_SALVATION_TALENT.id,\r\n  SPELLS.DESPERATE_PRAYER.id,\r\n  SPELLS.COSMIC_RIPPLE_HEAL.id,\r\n  SPELLS.BINDING_HEAL_TALENT.id,\r\n  SPELLS.CIRCLE_OF_HEALING_TALENT.id,\r\n  SPELLS.HALO_HEAL.id,\r\n  SPELLS.DIVINE_STAR_HEAL.id,\r\n  SPELLS.RENEW.id, // this is reduced in calculations, due to the initial tick proccing EoL but not the periodic ticks\r\n  SPELLS.TRAIL_OF_LIGHT_TALENT.id,\r\n  SPELLS.HOLY_NOVA_HEAL.id,\r\n  SPELLS.GUARDIAN_SPIRIT_HEAL.id,\r\n\r\n  // Trinkets\r\n];\r\n\r\nexport const ABILITIES_AFFECTED_BY_APOTHEOSIS_TALENT = [\r\n  SPELLS.HOLY_WORD_SERENITY.id,\r\n  SPELLS.HOLY_WORD_SANCTIFY.id,\r\n];\r\n\r\nexport const HOLY_PRIEST_HEALING_INCREASE_AURA = .4;\r\n\r\nexport const RESONANT_WORDS_RANKS = [\r\n  38, 41.799999, 45.599998, 49.400002, 53.200001, 57, 60.799999, 64.599998, 68.400002, 72.199997, 76, 79.800003, 83.599998, 87.400002, 91.199997\r\n]\r\n","import SPELLS from 'common/SPELLS';\r\nimport CoreSpellManaCost from 'parser/shared/modules/SpellManaCost';\r\nimport { CastEvent } from 'parser/core/Events';\r\n\r\nimport { ABILITIES_AFFECTED_BY_APOTHEOSIS_TALENT } from '../../constants';\r\n\r\nconst debug = false;\r\n\r\nclass SpellManaCost extends CoreSpellManaCost {\r\n  getResourceCost(event: CastEvent) {\r\n    const spellId = event.ability.guid;\r\n    let cost = super.getResourceCost(event);\r\n    if (cost === 0) {\r\n      return cost;\r\n    }\r\n\r\n    // Apotheosis talent reduces the mana cost of Holy Word spells by 100%\r\n    if (this.selectedCombatant.hasBuff(SPELLS.APOTHEOSIS_TALENT.id, event.timestamp)) {\r\n      const isAbilityAffectedByApotheosis = ABILITIES_AFFECTED_BY_APOTHEOSIS_TALENT.includes(spellId);\r\n      if (isAbilityAffectedByApotheosis) {\r\n        debug && console.log(SPELLS.APOTHEOSIS_TALENT.name, 'is active, reducing cost (', cost, ') by 100%');\r\n        cost = 0;\r\n      }\r\n    }\r\n    return cost;\r\n  }\r\n}\r\n\r\nexport default SpellManaCost;\r\n","import SPELLS from 'common/SPELLS';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Events, { CastEvent, HealEvent } from 'parser/core/Events';\r\nimport { When } from 'parser/core/ParseResults';\r\nimport { i18n } from '@lingui/core';\r\nimport { t } from '@lingui/macro';\r\n\r\nclass DivineHymn extends Analyzer {\r\n  healing = 0;\r\n  ticks = 0;\r\n  overhealing = 0;\r\n  absorbed = 0;\r\n  casts = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.DIVINE_HYMN_HEAL), this.onHeal);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.DIVINE_HYMN_CAST), this.onCast);\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    this.healing += event.amount || 0;\r\n    this.overhealing += event.overheal || 0;\r\n    this.absorbed += event.absorbed || 0;\r\n    if (event.sourceID === event.targetID) {\r\n      this.ticks += 1;\r\n    }\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    this.casts += 1;\r\n  }\r\n\r\n  suggestions(when: When) {\r\n    const missedHymnTicks = (this.casts * 5) - this.ticks;\r\n\r\n    when(missedHymnTicks).isGreaterThan(0)\r\n      .addSuggestion((suggest, actual, recommended) => suggest('You wasted Divine Hymn ticks. Try to avoid clipping the end of Divine Hymn as well as positioning such that you will not have to move during its duration. ')\r\n        .icon('spell_holy_divinehymn')\r\n        .actual(i18n._(t('priest.holy.suggestions.divineHymn.wastedTicks')`${actual} missed Hymn ticks`))\r\n        .recommended('0 is recommended')\r\n        .regular(recommended).major(recommended));\r\n  }\r\n}\r\n\r\nexport default DivineHymn;\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport fetchWcl from 'common/fetchWclApi';\r\nimport { WCLHealing, WCLHealingTableResponse } from 'common/WCL_TYPES';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport { formatNumber } from 'common/format';\r\n\r\nimport LazyLoadStatisticBox from 'interface/others/LazyLoadStatisticBox';\r\n\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport AbilityTracker from 'parser/shared/modules/AbilityTracker';\r\nimport { EventType } from 'parser/core/Events';\r\n\r\nconst GUARDIAN_SPIRIT_HEALING_INCREASE = 0.6;\r\n\r\nclass GuardianSpirit extends Analyzer {\r\n  static dependencies = {\r\n    abilityTracker: AbilityTracker,\r\n  };\r\n  // This is an approximation. See the reasoning below.\r\n  totalHealingFromGSBuff = 0;\r\n  protected abilityTracker!: AbilityTracker;\r\n\r\n  get totalGSCasts() {\r\n    return this.abilityTracker.getAbility(SPELLS.GUARDIAN_SPIRIT.id).casts;\r\n  }\r\n\r\n  get filter() {\r\n    return `\r\n    IN RANGE\r\n      FROM type='${EventType.ApplyBuff}'\r\n          AND ability.id=${SPELLS.GUARDIAN_SPIRIT.id}\r\n          AND source.name='${this.selectedCombatant.name}'\r\n      TO type='${EventType.RemoveBuff}'\r\n          AND ability.id=${SPELLS.GUARDIAN_SPIRIT.id}\r\n          AND source.name='${this.selectedCombatant.name}'\r\n      GROUP BY\r\n        target ON target END`;\r\n  }\r\n\r\n  load() {\r\n    return fetchWcl<WCLHealingTableResponse>(`report/tables/healing/${this.owner.report.code}`, {\r\n      start: this.owner.fight.start_time,\r\n      end: this.owner.fight.end_time,\r\n      filter: this.filter,\r\n    })\r\n      .then(json => {\r\n        this.totalHealingFromGSBuff = json.entries.reduce(\r\n          // Because this is a % healing increase and we are unable to parse each healing event individually for its effective healing,\r\n          // we need to do some \"approximations\" using the total overheal in tandem with the total healing. We do not want to naively\r\n          // assume all healing was fully effective, as this would drastically overweight the power of the buff in situations where a\r\n          // lot of overhealing occurs.\r\n          (healingFromBuff, entry: WCLHealing) => healingFromBuff + ((entry.total - entry.total / (1 + GUARDIAN_SPIRIT_HEALING_INCREASE)) * (entry.total / (entry.total + (entry.overheal || 0)))),\r\n          0,\r\n        );\r\n      });\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <LazyLoadStatisticBox\r\n        loader={this.load.bind(this)}\r\n        icon={<SpellIcon id={SPELLS.GUARDIAN_SPIRIT.id} />}\r\n        value={(\r\n          <ItemHealingDone amount={this.totalHealingFromGSBuff} />\r\n        )}\r\n        label=\"Guardian Spirit Buff Contribution\"\r\n        tooltip={(\r\n          <>\r\n            You casted Guardian Spirit {this.totalGSCasts} times, and it contributed {formatNumber(this.totalHealingFromGSBuff)} healing. This includes healing from other healers.<br />\r\n            NOTE: This metric uses an approximation to calculate contribution from the buff due to technical limitations.\r\n          </>\r\n        )}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default GuardianSpirit;\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport { ThresholdStyle, When } from 'parser/core/ParseResults';\r\nimport SpellLink from 'common/SpellLink';\r\nimport AbilityTracker from 'parser/shared/modules/AbilityTracker';\r\nimport StatisticBox from 'interface/others/StatisticBox';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport ItemDamageDone from 'interface/ItemDamageDone';\r\nimport { formatNumber, formatPercentage } from 'common/format';\r\n\r\nclass HolyNova extends Analyzer {\r\n  static dependencies = {\r\n    abilityTracker: AbilityTracker,\r\n  };\r\n\r\n  protected abilityTracker!: AbilityTracker;\r\n\r\n  get casts() {\r\n    return this.abilityTracker.getAbility(SPELLS.HOLY_NOVA.id).casts;\r\n  }\r\n\r\n  get healingHits() {\r\n    return this.abilityTracker.getAbility(SPELLS.HOLY_NOVA_HEAL.id).healingHits;\r\n  }\r\n\r\n  get effectiveHealing() {\r\n    return this.abilityTracker.getAbility(SPELLS.HOLY_NOVA_HEAL.id).healingEffective + this.abilityTracker.getAbility(SPELLS.HOLY_NOVA_HEAL.id).healingAbsorbed;\r\n  }\r\n\r\n  get overHealing() {\r\n    return this.abilityTracker.getAbility(SPELLS.HOLY_NOVA_HEAL.id).healingOverheal;\r\n  }\r\n\r\n  get overhealPercent() {\r\n    return this.overHealing / (this.effectiveHealing + this.overHealing);\r\n  }\r\n\r\n  get damageHits() {\r\n    return this.abilityTracker.getAbility(SPELLS.HOLY_NOVA.id).damageHits;\r\n  }\r\n\r\n  get damageDone() {\r\n    return this.abilityTracker.getAbility(SPELLS.HOLY_NOVA.id).damageEffective;\r\n  }\r\n\r\n  get averageFriendlyTargetsHit() {\r\n    if (this.casts > 0) {\r\n      return this.healingHits / this.casts;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  get averageHealingPerCast() {\r\n    if (this.casts > 0) {\r\n      return this.effectiveHealing / this.casts;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  get averageEnemyTargetsHit() {\r\n    if (this.casts > 0) {\r\n      return this.damageHits / this.casts;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  get averageDamagePerCast() {\r\n    if (this.casts > 0) {\r\n      return this.damageDone / this.casts;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  get holyNovaThreshold() {\r\n    return {\r\n      actual: this.averageFriendlyTargetsHit > 0 ? this.averageFriendlyTargetsHit : 10,\r\n      isLessThan: {\r\n        minor: 10,\r\n        average: 5,\r\n        major: 2,\r\n      },\r\n      style: ThresholdStyle.NUMBER,\r\n    };\r\n  }\r\n\r\n  statistic() {\r\n    if (this.casts === 0) {\r\n      return (<></>);\r\n    }\r\n    return (\r\n      <StatisticBox\r\n        icon={<SpellIcon id={SPELLS.HOLY_NOVA.id} />}\r\n        value={(\r\n          <>\r\n            Average Hits:&nbsp;\r\n            <div style={{ 'color': 'green', display: 'inline-block' }}> {Math.floor(this.averageFriendlyTargetsHit)}</div>\r\n            |\r\n            <div style={{ 'color': 'red', display: 'inline-block' }}> {Math.floor(this.averageEnemyTargetsHit)}</div><br />\r\n            <ItemHealingDone amount={this.effectiveHealing} /><br />\r\n            <ItemDamageDone amount={this.damageDone} />\r\n          </>\r\n        )}\r\n        label=\"Holy Nova\"\r\n        tooltip={(\r\n          <>\r\n            Healing done: {formatNumber(this.effectiveHealing)} ({formatPercentage(this.overhealPercent)}% OH)<br />\r\n            Damage done: {formatNumber(this.damageDone)}\r\n          </>\r\n        )}\r\n      />\r\n    );\r\n  }\r\n\r\n  suggestions(when: When) {\r\n    when(this.holyNovaThreshold)\r\n      .addSuggestion((suggest, actual, recommended) => suggest(<>You should only cast <SpellLink id={SPELLS.HOLY_NOVA.id} /> when you will hit 5 or more targets.</>)\r\n        .icon(SPELLS.HOLY_NOVA.icon)\r\n        .actual(<>You hit an average of {actual} targets when you cast Holy Nova.</>)\r\n        .recommended(`An average of ${recommended} or more healing hits per cast is recommended.`),\r\n      );\r\n  }\r\n}\r\n\r\nexport default HolyNova;\r\n","import SPELLS from 'common/SPELLS/index';\r\nimport { Options } from 'parser/core/Analyzer';\r\n\r\nimport HolyWordBase from './HolyWordBase';\r\n\r\nconst SMITE_SERENDIPITY_REDUCTION = 4000;\r\n\r\nclass HolyWordSanctify extends HolyWordBase {\r\n  constructor(options: Options) {\r\n    super(options);\r\n\r\n    this.spellId = SPELLS.HOLY_WORD_CHASTISE.id;\r\n    this.manaCost = 2000;\r\n    this.serendipityReduction = 4000;\r\n    this.serendipityProccers = {\r\n      [SPELLS.SMITE.id]: {\r\n        baseReduction: () => SMITE_SERENDIPITY_REDUCTION,\r\n        lightOfTheNaaruReduction: () => SMITE_SERENDIPITY_REDUCTION * this.lightOfTheNaruMultiplier,\r\n        apotheosisReduction: () => SMITE_SERENDIPITY_REDUCTION * this.apotheosisMultiplier,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport default HolyWordSanctify;\r\n","import SPELLS from 'common/SPELLS';\r\nimport { Options } from 'parser/core/Analyzer';\r\n\r\nimport HolyWordBase from './HolyWordBase';\r\n\r\nconst HOLY_WORD_SERENDIPITY_REDUCTION = 30000;\r\n\r\nclass HolyWordSalvation extends HolyWordBase {\r\n  constructor(options: Options) {\r\n    super(options);\r\n\r\n    this.serendipityReduction = 30000;\r\n    this.spellId = SPELLS.HOLY_WORD_SALVATION_TALENT.id;\r\n    this.manaCost = 6000;\r\n    this.serendipityProccers = {\r\n      [SPELLS.HOLY_WORD_SERENITY.id]: {\r\n        baseReduction: () => HOLY_WORD_SERENDIPITY_REDUCTION,\r\n        lightOfTheNaaruReduction: () => HOLY_WORD_SERENDIPITY_REDUCTION,\r\n        apotheosisReduction: () => HOLY_WORD_SERENDIPITY_REDUCTION,\r\n      },\r\n      [SPELLS.HOLY_WORD_SANCTIFY.id]: {\r\n        baseReduction: () => HOLY_WORD_SERENDIPITY_REDUCTION,\r\n        lightOfTheNaaruReduction: () => HOLY_WORD_SERENDIPITY_REDUCTION,\r\n        apotheosisReduction: () => HOLY_WORD_SERENDIPITY_REDUCTION,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport default HolyWordSalvation;\r\n","const aprilFools = {\r\n  month: 3,\r\n  date: 1,\r\n};\r\n\r\nexport function isItAprilFoolDay() {\r\n  const now = new Date();\r\n  return (now.getMonth() === aprilFools.month && now.getDate() === aprilFools.date);\r\n}\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport EventEmitter from 'parser/core/modules/EventEmitter';\r\nimport DeathDowntime from 'parser/shared/modules/downtime/DeathDowntime';\r\nimport SpellLink from 'common/SpellLink';\r\nimport { isItAprilFoolDay } from 'common/aprilFools';\r\nimport Events, { ApplyBuffEvent, EventType, RemoveBuffEvent } from 'parser/core/Events';\r\nimport { ThresholdStyle, When } from 'parser/core/ParseResults';\r\nimport { i18n } from '@lingui/core';\r\nimport { t } from '@lingui/macro';\r\n\r\nclass SpiritOfRedemption extends Analyzer {\r\n  static dependencies = {\r\n    eventEmitter: EventEmitter,\r\n    deathDowntime: DeathDowntime,\r\n  };\r\n  sorStartTime = 0;\r\n  timeSpentRedeeming = 0;\r\n  timeSpendDead = 0;\r\n  protected eventEmitter!: EventEmitter;\r\n  protected deathDowntime!: DeathDowntime;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.SPIRIT_OF_REDEMPTION_BUFF), this.onApplyBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER).spell(SPELLS.SPIRIT_OF_REDEMPTION_BUFF), this.onRemoveBuff);\r\n  }\r\n\r\n  get spiritUptime() {\r\n    return this.timeSpentRedeeming;\r\n  }\r\n\r\n  get deadTime() {\r\n    return this.deathDowntime.totalDowntime;\r\n  }\r\n\r\n  get aliveTime() {\r\n    return this.owner.fightDuration - this.deadTime - this.spiritUptime;\r\n  }\r\n\r\n  get deadTimeThresholds() {\r\n    return {\r\n      actual: this.timeSpentRedeeming,\r\n      isLessThan: {\r\n        minor: 10,\r\n        average: 5,\r\n        major: 1,\r\n      },\r\n      style: ThresholdStyle.NUMBER,\r\n    };\r\n  }\r\n\r\n  onApplyBuff(event: ApplyBuffEvent) {\r\n    this.sorStartTime = event.timestamp;\r\n    this.eventEmitter.fabricateEvent({\r\n      ...event,\r\n      type: EventType.Cast,\r\n    }, event);\r\n  }\r\n\r\n  onRemoveBuff(event: RemoveBuffEvent) {\r\n    this.timeSpentRedeeming += event.timestamp - this.sorStartTime;\r\n  }\r\n\r\n  suggestions(when: When) {\r\n    if (isItAprilFoolDay()) {\r\n      when(this.deadTimeThresholds)\r\n        .addSuggestion((suggest, actual, recommended) => suggest(<>We noticed that you didn't die during this encounter. It is recommended that you die within the last 15 seconds of each encounter to make the most of <SpellLink id={SPELLS.SPIRIT_OF_REDEMPTION_BUFF.id} />. If you are having trouble dying, try standing in fire.</>)\r\n          .icon('inv_enchant_essenceeternallarge')\r\n          .actual(i18n._(t('priest.holy.suggestions.spiritOfRedemption.efficiency')`${actual} seconds spent redeeming`))\r\n          .recommended(`${recommended} seconds is recommended`));\r\n    }\r\n  }\r\n}\r\n\r\nexport default SpiritOfRedemption;\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport fetchWcl from 'common/fetchWclApi';\r\nimport { WCLHealing, WCLHealingTableResponse } from 'common/WCL_TYPES';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport { formatNumber } from 'common/format';\r\nimport LazyLoadStatisticBox from 'interface/others/LazyLoadStatisticBox';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport { EventType } from 'parser/core/Events';\r\n\r\nconst DIVINE_HYMN_HEALING_INCREASE = 0.1;\r\n\r\nclass HymnBuffBenefit extends Analyzer {\r\n  // This is an approximation. See the reasoning below.\r\n  totalHealingFromHymnBuff = 0;\r\n\r\n  get filter() {\r\n    return `\r\n    IN RANGE\r\n      FROM type='${EventType.ApplyBuff}'\r\n          AND ability.id=${SPELLS.DIVINE_HYMN_HEAL.id}\r\n          AND source.name='${this.selectedCombatant.name}'\r\n      TO type='${EventType.RemoveBuff}'\r\n          AND ability.id=${SPELLS.DIVINE_HYMN_HEAL.id}\r\n          AND source.name='${this.selectedCombatant.name}'\r\n      GROUP BY\r\n        target ON target END`;\r\n  }\r\n\r\n  load() {\r\n    return fetchWcl<WCLHealingTableResponse>(`report/tables/healing/${this.owner.report.code}`, {\r\n      start: this.owner.fight.start_time,\r\n      end: this.owner.fight.end_time,\r\n      filter: this.filter,\r\n    })\r\n      .then(json => {\r\n        this.totalHealingFromHymnBuff = json.entries.reduce(\r\n          // Because this is a % healing increase and we are unable to parse each healing event individually for its effective healing,\r\n          // we need to do some \"approximations\" using the total overheal in tandem with the total healing. We do not want to naively\r\n          // assume all healing was fully effective, as this would drastically overweight the power of the buff in situations where a\r\n          // lot of overhealing occurs.\r\n          (healingFromBuff: any, entry: WCLHealing) => healingFromBuff + ((entry.total - entry.total / (1 + DIVINE_HYMN_HEALING_INCREASE)) * (entry.total / (entry.total + (entry.overheal || 0)))),\r\n          0,\r\n        );\r\n      });\r\n  }\r\n\r\n  statistic() {\r\n    const fightDuration = this.owner.fightDuration;\r\n\r\n    return (\r\n      <LazyLoadStatisticBox\r\n        loader={this.load.bind(this)}\r\n        icon={<SpellIcon id={SPELLS.DIVINE_HYMN_CAST.id} />}\r\n        value={`≈${formatNumber(this.totalHealingFromHymnBuff / fightDuration * 1000)} HPS`}\r\n        label=\"Hymn Buff Contribution\"\r\n        tooltip={(\r\n          <>\r\n            The Divine Hymn buff contributed {formatNumber(this.totalHealingFromHymnBuff)} healing. This includes healing from other healers.<br />\r\n            NOTE: This metric uses an approximation to calculate contribution from the buff due to technical limitations.\r\n          </>\r\n        )}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default HymnBuffBenefit;\r\n","import SPELLS from 'common/SPELLS';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Events, { ApplyBuffEvent, CastEvent, ChangeBuffStackEvent, HealEvent } from 'parser/core/Events';\r\n\r\nclass PrayerOfMending extends Analyzer {\r\n  totalPoMHealing = 0;\r\n  totalPoMOverhealing = 0;\r\n  totalPoMAbsorption = 0;\r\n  pomCasts = 0;\r\n  salvCasts = 0;\r\n  pomHealTicks = 0;\r\n  pomBuffCount = 0;\r\n  pomRemovalCount = 0;\r\n  prepullPomBuffs = 0;\r\n  lastSalvCastTime = 0;\r\n  pomTicksFromSalv = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell([SPELLS.PRAYER_OF_MENDING_CAST, SPELLS.HOLY_WORD_SALVATION_TALENT]), this.onCast);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell([SPELLS.PRAYER_OF_MENDING_HEAL, SPELLS.HOLY_WORD_SALVATION_TALENT]), this.onHeal);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.PRAYER_OF_MENDING_BUFF), this.onApplyBuff);\r\n    this.addEventListener(Events.changebuffstack.by(SELECTED_PLAYER).spell(SPELLS.PRAYER_OF_MENDING_BUFF), this.onChangeBuffstack);\r\n  }\r\n\r\n  get pomTicksFromCast() {\r\n    return this.pomCasts * 5;\r\n  }\r\n\r\n  get wastedPomStacks() {\r\n    return this.pomBuffCount - this.pomHealTicks;\r\n  }\r\n\r\n  get averagePomTickHeal() {\r\n    return this.totalPoMHealing / this.pomHealTicks;\r\n  }\r\n\r\n  get averagePomTickOverheal() {\r\n    return this.totalPoMOverhealing / this.pomHealTicks;\r\n  }\r\n\r\n  get averagePomTickAbsorption() {\r\n    return this.totalPoMAbsorption / this.pomHealTicks;\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    const spellId = event.ability.guid;\r\n\r\n    if (spellId === SPELLS.PRAYER_OF_MENDING_CAST.id) {\r\n      this.pomCasts += 1;\r\n    }\r\n    if (spellId === SPELLS.HOLY_WORD_SALVATION_TALENT.id) {\r\n      this.lastSalvCastTime = event.timestamp;\r\n      this.salvCasts += 1;\r\n    }\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    const spellId = event.ability.guid;\r\n\r\n    if (spellId === SPELLS.PRAYER_OF_MENDING_HEAL.id) {\r\n      this.pomHealTicks += 1;\r\n      this.totalPoMHealing += event.amount || 0;\r\n      this.totalPoMOverhealing += event.overheal || 0;\r\n      this.totalPoMAbsorption += event.absorbed || 0;\r\n    }\r\n    if (spellId === SPELLS.HOLY_WORD_SALVATION_TALENT.id) {\r\n      this.pomTicksFromSalv += 2;\r\n    }\r\n  }\r\n\r\n  onApplyBuff(event: ApplyBuffEvent) {\r\n    if (event.prepull) {\r\n      this.prepullPomBuffs += 1;\r\n      this.pomCasts += 1;\r\n    }\r\n  }\r\n\r\n  onChangeBuffstack(event: ChangeBuffStackEvent) {\r\n    if (event.stacksGained > 0) {\r\n      this.pomBuffCount += 1;\r\n    } else {\r\n      this.pomRemovalCount += 1;\r\n    }\r\n  }\r\n}\r\n\r\nexport default PrayerOfMending;\r\n","import React from 'react';\r\n\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport Events, { CastEvent, HealEvent } from 'parser/core/Events';\r\nimport { formatPercentage, formatThousands } from 'common/format';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\nclass CircleOfHealing extends Analyzer {\r\n  circleOfHealingCasts = 0;\r\n  circleOfHealingHealing = 0;\r\n  circleOfHealingOverhealing = 0;\r\n  circleOfHealingTargetsHit = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.CIRCLE_OF_HEALING_TALENT), this.onCohCast);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.CIRCLE_OF_HEALING_TALENT), this.onCohHeal);\r\n  }\r\n\r\n  get overHealPercent() {\r\n    return this.circleOfHealingOverhealing / this.rawHealing;\r\n  }\r\n\r\n  get rawHealing() {\r\n    return this.circleOfHealingHealing + this.circleOfHealingOverhealing;\r\n  }\r\n\r\n  get averageTargetsHit() {\r\n    return this.circleOfHealingTargetsHit / this.circleOfHealingCasts;\r\n  }\r\n\r\n  onCohCast(event: CastEvent) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === SPELLS.CIRCLE_OF_HEALING_TALENT.id) {\r\n      this.circleOfHealingCasts += 1;\r\n    }\r\n  }\r\n\r\n  onCohHeal(event: HealEvent) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === SPELLS.CIRCLE_OF_HEALING_TALENT.id) {\r\n      this.circleOfHealingTargetsHit += 1;\r\n      this.circleOfHealingHealing += event.amount || 0;\r\n      this.circleOfHealingOverhealing += event.overheal || 0;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={(\r\n          <>\r\n            Coh Casts: {this.circleOfHealingCasts}<br />\r\n            Total Healing: {formatThousands(this.circleOfHealingHealing)} ({formatPercentage(this.overHealPercent)}% OH)<br />\r\n            Average Targets Hit: {this.averageTargetsHit.toFixed(2)}\r\n          </>\r\n        )}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.GENERAL}\r\n        position={STATISTIC_ORDER.OPTIONAL(5)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.CIRCLE_OF_HEALING_TALENT}>\r\n          <ItemHealingDone amount={this.circleOfHealingHealing} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CircleOfHealing;\r\n","import React from 'react';\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport Events, { ApplyBuffEvent, HealEvent, RemoveBuffEvent } from 'parser/core/Events';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\nimport { formatNumber, formatPercentage } from 'common/format';\r\n\r\nconst RENEWED_FAITH_MULTIPLIER = 1.1;\r\n\r\nclass RenewedFaith extends Analyzer {\r\n  renewTracker: { [combatantId: number]: boolean } = {};\r\n  rawAdditionalHealing: number = 0;\r\n  effectiveAdditionalHealing: number = 0;\r\n  overhealing: number = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.RENEWED_FAITH_TALENT.id);\r\n\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.RENEW), this.onRenewApplication);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER).spell(SPELLS.RENEW), this.onRenewRemoval);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this.onHeal);\r\n  }\r\n\r\n  get percentOverhealing() {\r\n    if (this.rawAdditionalHealing === 0) {\r\n      return 0;\r\n    }\r\n    return this.overhealing / this.rawAdditionalHealing;\r\n  }\r\n\r\n  onRenewApplication(event: ApplyBuffEvent) {\r\n    this.renewTracker[event.targetID] = true;\r\n  }\r\n\r\n  onRenewRemoval(event: RemoveBuffEvent) {\r\n    this.renewTracker[event.targetID] = false;\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    // If the character that you are healing has renew on them...\r\n    if (this.renewTracker[event.targetID]) {\r\n      // Calculate the amount of healing that we can attribute to this talent.\r\n      const rawHealAmount = event.amount - (event.amount / RENEWED_FAITH_MULTIPLIER);\r\n      let effectiveHealAmount = rawHealAmount - (event.overheal || 0);\r\n      // If we overhealed more than 100% of the contribution of RF, the effective heal is 0.\r\n      if (effectiveHealAmount < 0) {\r\n        effectiveHealAmount = 0;\r\n      }\r\n      const overhealAmount = rawHealAmount - effectiveHealAmount;\r\n\r\n      this.rawAdditionalHealing += rawHealAmount;\r\n      this.effectiveAdditionalHealing += effectiveHealAmount;\r\n      this.overhealing += overhealAmount;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={(<>\r\n          Total Healing: {formatNumber(this.rawAdditionalHealing)} ({formatPercentage(this.percentOverhealing)}% OH)\r\n        </>)}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(1)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.RENEWED_FAITH_TALENT}>\r\n          <ItemHealingDone amount={this.effectiveAdditionalHealing} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RenewedFaith;\r\n","import Analyzer, { Options } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport SpiritOfRedemption from 'parser/priest/holy/modules/spells/SpiritOfRedemption';\r\nimport ItemManaGained from 'interface/ItemManaGained';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\nconst MAX_MANA = 100000;\r\nconst BASE_MANA_REGEN = .04;\r\n\r\n// Example Log: /report/PNYB4zgrnR86h7Lc/6-Normal+Zek'voz,+Herald+of+N'zoth/Khadaj\r\nclass Enlightenment extends Analyzer {\r\n\r\n  static dependencies = {\r\n    spiritOfRedemption: SpiritOfRedemption,\r\n  };\r\n  protected spiritOfRedemption!: SpiritOfRedemption;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.ENLIGHTENMENT_TALENT.id);\r\n  }\r\n\r\n  get enlightenmentMana() {\r\n    const normalManaRegen = MAX_MANA * BASE_MANA_REGEN;\r\n    const enlightenmentRegen = normalManaRegen * .1;\r\n    // Convert from MS to S and from 1 second to 5.\r\n    const totalEnlightenmentManaBack = (this.spiritOfRedemption.aliveTime / 1000 / 5) * enlightenmentRegen;\r\n    return totalEnlightenmentManaBack;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(1)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.ENLIGHTENMENT_TALENT}>\r\n          <ItemManaGained amount={this.enlightenmentMana} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Enlightenment;\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport Events, { HealEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/hRd3mpK1yTQ2tDJM/1-Mythic+MOTHER+-+Kill+(2:24)/14-丶寶寶小喵\r\nclass TrailOfLight extends Analyzer {\r\n  totalToLProcs = 0;\r\n  totalToLHealing = 0;\r\n  totalToLOverhealing = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.TRAIL_OF_LIGHT_TALENT.id);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.TRAIL_OF_LIGHT_HEAL), this.onHeal);\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    this.totalToLProcs += 1;\r\n    this.totalToLHealing += event.overheal || 0;\r\n    this.totalToLOverhealing += (event.amount || 0);\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={`Trail of Light Procs: ${this.totalToLProcs}`}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(1)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.TRAIL_OF_LIGHT_TALENT}>\r\n          <ItemHealingDone amount={this.totalToLHealing} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TrailOfLight;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport Events, { ApplyBuffEvent, CastEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/PNYB4zgrnR86h7Lc/6-Normal+Zek'voz,+Herald+of+N'zoth/Khadaj\r\nclass AngelicFeather extends Analyzer {\r\n  angelicFeatherCasts = 0;\r\n  angelicFeatherEffects = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.ANGELIC_FEATHER_TALENT.id);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.ANGELIC_FEATHER_TALENT), this.onCast);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.ANGELIC_FEATHER_TALENT), this.onApplyBuff);\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    this.angelicFeatherCasts += 1;\r\n  }\r\n\r\n  onApplyBuff(event: ApplyBuffEvent) {\r\n    this.angelicFeatherEffects += 1;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(2)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.ANGELIC_FEATHER_TALENT}>\r\n          {this.angelicFeatherCasts} Feather(s) cast\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AngelicFeather;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport Events, { CastEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\nconst DESPERATE_PRAYER_BASE_COOLDOWN = 90000;\r\n\r\n// Example Log: /report/1bgY6k8ADWJLzjPN/7-Mythic+Taloc+-+Kill+(5:45)/1-Cruzco\r\nclass AngelsMercy extends Analyzer {\r\n  desperatePrayersCast = 0;\r\n  desperatePrayerTimeReduced = 0;\r\n  lastDesperatePrayerTimestamp = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.ANGELS_MERCY_TALENT.id);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.DESPERATE_PRAYER), this.onCast);\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    if (this.desperatePrayersCast > 0) {\r\n      const timeSinceLastDP = (event.timestamp - this.lastDesperatePrayerTimestamp);\r\n      const timeReduced = DESPERATE_PRAYER_BASE_COOLDOWN - timeSinceLastDP;\r\n      if (timeReduced > 0) {\r\n        this.desperatePrayerTimeReduced += DESPERATE_PRAYER_BASE_COOLDOWN - timeSinceLastDP;\r\n      }\r\n    }\r\n    this.desperatePrayersCast += 1;\r\n    this.lastDesperatePrayerTimestamp = event.timestamp;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={`Desperate Prayers cast: ${this.desperatePrayersCast}`}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(2)}\r\n      ><BoringSpellValueText spell={SPELLS.ANGELS_MERCY_TALENT}>\r\n        {Math.floor(this.desperatePrayerTimeReduced / 1000)}s Cooldown Reduction Used\r\n      </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AngelsMercy;\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Events, { ApplyBuffEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\nclass BodyAndSoul extends Analyzer {\r\n  buffCount: number = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.BODY_AND_SOUL_TALENT.id);\r\n\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.BODY_AND_SOUL_TALENT), this.bodyAndSoulApplied);\r\n  }\r\n\r\n  bodyAndSoulApplied(event: ApplyBuffEvent) {\r\n    this.buffCount += 1;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(2)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.BODY_AND_SOUL_TALENT}>\r\n          {this.buffCount} Speed Buffs\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BodyAndSoul;\r\n","import React from 'react';\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport Events, { ApplyBuffEvent, HealEvent, RemoveBuffEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\nconst SPIRIT_OF_REDEMPTION_DURATION = 15000;\r\n\r\n// Example Log: /report/zCMpvAPYW16k3bQr/33-Normal+G'huun+-+Wipe+12+(8:24)/60-Кеонна\r\nclass Afterlife extends Analyzer {\r\n  spiritOfRedemptionCount = 0;\r\n  spiritOfRedemptionTotalTime = 0;\r\n  spiritOfRedemptionBonusTime = 0;\r\n  spiritOfRedemptionStartTime = 0;\r\n  timeInSoR = 0;\r\n  sorCount = 0;\r\n  inSpiritOfRedemption = false;\r\n\r\n  healingInAfterlife = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.AFTERLIFE_TALENT.id);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.SPIRIT_OF_REDEMPTION_BUFF), this.onApplyBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER).spell(SPELLS.SPIRIT_OF_REDEMPTION_BUFF), this.onRemoveBuff);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this.onHeal);\r\n  }\r\n\r\n  get extraTimeInSoR() {\r\n    return this.timeInSoR - (SPIRIT_OF_REDEMPTION_DURATION * this.sorCount);\r\n  }\r\n\r\n  onApplyBuff(event: ApplyBuffEvent) {\r\n    this.inSpiritOfRedemption = true;\r\n    this.spiritOfRedemptionStartTime = event.timestamp;\r\n    this.sorCount += 1;\r\n  }\r\n\r\n  onRemoveBuff(event: RemoveBuffEvent) {\r\n    this.inSpiritOfRedemption = false;\r\n    const timeInSpiritOfRedemption = event.timestamp - this.spiritOfRedemptionStartTime;\r\n    this.spiritOfRedemptionTotalTime += timeInSpiritOfRedemption;\r\n    const spiritOfRedemptionBonusTime = timeInSpiritOfRedemption - SPIRIT_OF_REDEMPTION_DURATION;\r\n    if (spiritOfRedemptionBonusTime > 0) {\r\n      this.spiritOfRedemptionBonusTime += spiritOfRedemptionBonusTime;\r\n    }\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    if (this.inSpiritOfRedemption && event.timestamp - this.spiritOfRedemptionStartTime > SPIRIT_OF_REDEMPTION_DURATION) {\r\n      this.healingInAfterlife += event.amount || 0;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={`Extra Spirit of Redemption time: ${Math.floor(this.spiritOfRedemptionBonusTime / 1000)}s`}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(3)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.AFTERLIFE_TALENT}>\r\n          <ItemHealingDone amount={this.healingInAfterlife} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Afterlife;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport AbilityTracker from 'parser/shared/modules/AbilityTracker';\r\nimport Events from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\nconst GS_BASE_COOLDOWN_TIME = (60 * 3) * 1000;\r\nconst GS_MODIFIED_COOLDOWN_TIME = (60 + 10) * 1000; // one minute plus 10 seconds to account for the duration of the buff.\r\n\r\n// Example Log: /report/mFarpncVW9ALwTq4/7-Mythic+Zek'voz+-+Kill+(8:52)/14-Praydien\r\nclass GuardianAngel extends Analyzer {\r\n  static dependencies = {\r\n    abilityTracker: AbilityTracker,\r\n  };\r\n  guardianSpiritRemovalCount = 0;\r\n  guardianSpiritHealCount = 0;\r\n  protected abilityTracker!: AbilityTracker;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.GUARDIAN_ANGEL_TALENT.id);\r\n\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER).spell(SPELLS.GUARDIAN_SPIRIT), this._parseGsRemove);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.GUARDIAN_SPIRIT), this._parseGsHeal);\r\n  }\r\n\r\n  get guardianSpiritCastCount() {\r\n    return this.abilityTracker.getAbility(SPELLS.GUARDIAN_SPIRIT.id).casts;\r\n  }\r\n\r\n  get guardianSpiritRefreshCount() {\r\n    return this.guardianSpiritRemovalCount - this.guardianSpiritHealCount;\r\n  }\r\n\r\n  get baseGuardianSpiritCastsPossible() {\r\n    return Math.floor(this.owner.fightDuration / GS_BASE_COOLDOWN_TIME);\r\n  }\r\n\r\n  get gsGuardianSpiritCastsPossible() {\r\n    return Math.floor(this.owner.fightDuration / GS_MODIFIED_COOLDOWN_TIME);\r\n  }\r\n\r\n  get gsValue() {\r\n    const castDelta = this.guardianSpiritCastCount - this.baseGuardianSpiritCastsPossible;\r\n    return (castDelta) >= 0 ? (castDelta) : 0;\r\n  }\r\n\r\n  _parseGsRemove() {\r\n    this.guardianSpiritRemovalCount += 1;\r\n  }\r\n\r\n  _parseGsHeal() {\r\n    this.guardianSpiritHealCount += 1;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={(\r\n          <>\r\n            You casted Guardian Spirit {this.gsValue} more times than you would have been able to without Guardian Angel.<br />\r\n            You could have theoretically cast Guardian Spirit {this.gsGuardianSpiritCastsPossible - this.guardianSpiritCastCount} more times.\r\n          </>\r\n        )}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(3)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.GUARDIAN_ANGEL_TALENT}>\r\n          {this.guardianSpiritRefreshCount} Guardian Spirit resets<br />\r\n          {this.guardianSpiritHealCount} Guardian Spirits consumed\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GuardianAngel;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport Events, { ApplyDebuffEvent, CastEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/PNYB4zgrnR86h7Lc/6-Normal+Zek'voz,+Herald+of+N'zoth/Khadaj\r\nclass Censure extends Analyzer {\r\n  chastiseCasts = 0;\r\n  censureStuns = 0;\r\n  censureIncomp = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.CENSURE_TALENT.id);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.HOLY_WORD_CHASTISE), this.onCast);\r\n    this.addEventListener(Events.applydebuff.by(SELECTED_PLAYER).spell([SPELLS.HOLY_WORD_CHASTISE_CENSURE_INCAPACITATE, SPELLS.HOLY_WORD_CHASTISE_CENSURE_STUN]), this.onApplyDebuff);\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    this.chastiseCasts += 1;\r\n  }\r\n\r\n  onApplyDebuff(event: ApplyDebuffEvent) {\r\n    const spellId = event.ability.guid;\r\n\r\n    if (spellId === SPELLS.HOLY_WORD_CHASTISE_CENSURE_INCAPACITATE.id) {\r\n      this.censureIncomp += 1;\r\n    }\r\n    if (spellId === SPELLS.HOLY_WORD_CHASTISE_CENSURE_STUN.id) {\r\n      this.censureStuns += 1;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={(\r\n          <>\r\n            {this.chastiseCasts} Chastise Casts<br />\r\n            {this.censureStuns} Chastise Stuns<br />\r\n          </>\r\n        )}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(4)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.CENSURE_TALENT}>\r\n          {this.censureStuns + this.censureIncomp} Censure CC(s)\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Censure;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport Events, { ApplyDebuffEvent, CastEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/nWVBjGLrDQvahH7M/15-Mythic+Taloc+-+Kill+(6:50)/3-Claver\r\nclass PsychicVoice extends Analyzer {\r\n  psychicScreamCasts = 0;\r\n  psychicScreamHits = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.PSYCHIC_VOICE_TALENT.id);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.PSYCHIC_SCREAM), this.onCast);\r\n    this.addEventListener(Events.applydebuff.by(SELECTED_PLAYER).spell(SPELLS.PSYCHIC_SCREAM), this.onApplyDebuff);\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    this.psychicScreamCasts += 1;\r\n  }\r\n\r\n  onApplyDebuff(event: ApplyDebuffEvent) {\r\n    this.psychicScreamHits += 1;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(4)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.PSYCHIC_VOICE_TALENT}>\r\n          ${this.psychicScreamHits} Targets Feared\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PsychicVoice;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport Events, { ApplyDebuffEvent, CastEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/NcKyHD94nrj31tG2/10-Mythic+Zek'voz+-+Kill+(9:35)/3-旧时印月\r\nclass ShiningForce extends Analyzer {\r\n  shiningForceCasts = 0;\r\n  shiningForceHits = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.SHINING_FORCE_TALENT.id);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.SHINING_FORCE_TALENT), this.onCast);\r\n    this.addEventListener(Events.applydebuff.by(SELECTED_PLAYER).spell(SPELLS.SHINING_FORCE_TALENT), this.onApplyDebuff);\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    this.shiningForceCasts += 1;\r\n  }\r\n\r\n  onApplyDebuff(event: ApplyDebuffEvent) {\r\n    this.shiningForceHits += 1;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(4)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.SHINING_FORCE_TALENT}>\r\n          {this.shiningForceHits} Knock Back(s)\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShiningForce;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport { formatPercentage, formatThousands } from 'common/format';\r\nimport Events, { CastEvent, HealEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/PNYB4zgrnR86h7Lc/6-Normal+Zek'voz,+Herald+of+N'zoth/Khadaj\r\nclass BindingHeal extends Analyzer {\r\n  bindingHealCasts = 0;\r\n  bindingHealSelfHealing = 0;\r\n  bindingHealSelfOverhealing = 0;\r\n  bindingHealPartyHealing = 0;\r\n  bindingHealPartyOverhealing = 0;\r\n\r\n  bindingHealTargets = {};\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.BINDING_HEAL_TALENT.id);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.BINDING_HEAL_TALENT), this.onCast);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.BINDING_HEAL_TALENT), this.onHeal);\r\n  }\r\n\r\n  get bindingHealHealing() {\r\n    return this.bindingHealSelfHealing + this.bindingHealPartyHealing;\r\n  }\r\n\r\n  get bindingHealOverHealing() {\r\n    return this.bindingHealSelfHealing + this.bindingHealPartyHealing;\r\n  }\r\n\r\n  getOverhealPercent(healingDone: number, overhealingDone: number) {\r\n    const percent = overhealingDone / (healingDone + overhealingDone);\r\n    return percent;\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    this.bindingHealCasts += 1;\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    //this.bindingHealTargets[ev] = event.ability;\r\n    if (event.targetID === this.owner.selectedCombatant._combatantInfo.sourceID) {\r\n      // Self Heal\r\n      if (event.overheal) {\r\n        this.bindingHealSelfOverhealing += event.overheal;\r\n      }\r\n      this.bindingHealSelfHealing += event.amount;\r\n    } else {\r\n      // Party Heal\r\n      if (event.overheal) {\r\n        this.bindingHealPartyOverhealing += event.overheal;\r\n      }\r\n      this.bindingHealPartyHealing += event.amount;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={(\r\n          <>\r\n            Casts: {this.bindingHealCasts}<br />\r\n            Self Healing: {formatThousands(this.bindingHealSelfHealing)} ({formatPercentage(this.getOverhealPercent(this.bindingHealSelfHealing, this.bindingHealSelfOverhealing))}% OH)<br />\r\n            Party Healing: {formatThousands(this.bindingHealPartyHealing)} ({formatPercentage(this.getOverhealPercent(this.bindingHealPartyHealing, this.bindingHealPartyOverhealing))}% OH)\r\n          </>\r\n        )}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(5)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.BINDING_HEAL_TALENT}>\r\n          <ItemHealingDone amount={this.bindingHealHealing} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BindingHeal;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport Events, { BeginCastEvent, CastEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\nimport AbilityTracker from 'parser/priest/holy/modules/core/AbilityTracker';\r\nimport Abilities from 'parser/priest/holy/modules/Abilities';\r\n\r\n/*\r\n  Using Circle of Healing reduces the cast time of your Prayer of Healing by 25% for 8 sec.\r\n*/\r\nclass PrayerCircle extends Analyzer {\r\n  static dependencies = {\r\n    abilityTracker: AbilityTracker,\r\n    abilities: Abilities,\r\n  };\r\n  lastCohCastAt: number = 0;\r\n  lastCastStartWasBuffed: boolean = false;\r\n  buffedCohCasts = 0;\r\n  protected abilityTracker!: AbilityTracker;\r\n  protected abilities!: Abilities;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.PRAYER_CIRCLE_TALENT.id);\r\n\r\n    if (this.active) {\r\n      this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.CIRCLE_OF_HEALING_TALENT), this.cohCast);\r\n      this.addEventListener(Events.begincast.by(SELECTED_PLAYER).spell(SPELLS.PRAYER_OF_HEALING), this.startPohCast);\r\n      this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.PRAYER_OF_HEALING), this.finishPohCast);\r\n    }\r\n  }\r\n\r\n  get unbuffedCohCasts() {\r\n    return (this.abilityTracker.getAbility(SPELLS.PRAYER_OF_HEALING.id).casts) - this.buffedCohCasts;\r\n  }\r\n\r\n  cohCast(event: CastEvent) {\r\n    this.lastCohCastAt = event.timestamp;\r\n  }\r\n\r\n  startPohCast(event: BeginCastEvent) {\r\n    this.lastCastStartWasBuffed = this.selectedCombatant.hasBuff(SPELLS.PRAYER_CIRCLE_BUFF.id);\r\n  }\r\n\r\n  finishPohCast(event: CastEvent) {\r\n    if (this.lastCastStartWasBuffed) {\r\n      this.buffedCohCasts += 1;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={(\r\n          <>\r\n            {this.buffedCohCasts} casts with Prayer Circle active.<br />\r\n            {this.unbuffedCohCasts} casts without Prayer Circle active.\r\n          </>\r\n        )}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(5)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.PRAYER_CIRCLE_TALENT}>\r\n          <>{this.buffedCohCasts} Faster PoH's</>\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PrayerCircle;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport ItemManaGained from 'interface/ItemManaGained';\r\nimport SpellLink from 'common/SpellLink';\r\nimport Events, { CastEvent, ChangeBuffStackEvent, HealEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/hRd3mpK1yTQ2tDJM/1-Mythic+MOTHER+-+Kill+(2:24)/14-丶寶寶小喵\r\nclass SurgeOfLight extends Analyzer {\r\n  solStacksGained = 0;\r\n  solStacksLost = 0;\r\n  solFlashHeals = 0;\r\n  currentSolStacks = 0;\r\n  solStacksSpent = 0;\r\n  solHealing = 0;\r\n  solOverHealing = 0;\r\n\r\n  freeFlashHealPending = false;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.SURGE_OF_LIGHT_TALENT.id);\r\n    this.addEventListener(Events.changebuffstack.by(SELECTED_PLAYER).spell(SPELLS.SURGE_OF_LIGHT_BUFF), this.onChangeBuffStack);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.FLASH_HEAL), this.onCast);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.FLASH_HEAL), this.onHeal);\r\n  }\r\n\r\n  get solManaSaved() {\r\n    return this.solFlashHeals * SPELLS.FLASH_HEAL.manaCost;\r\n  }\r\n\r\n  onChangeBuffStack(event: ChangeBuffStackEvent) {\r\n    if (event.stacksGained > 0) {\r\n      this.solStacksGained += 1;\r\n    } else {\r\n      this.freeFlashHealPending = true;\r\n      this.solStacksSpent += 1;\r\n    }\r\n    this.currentSolStacks = event.newStacks;\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    if (this.freeFlashHealPending) {\r\n      this.solFlashHeals += 1;\r\n    }\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    if (this.freeFlashHealPending) {\r\n      this.solHealing += event.amount + (event.absorbed || 0);\r\n      this.solOverHealing += event.overheal || 0;\r\n      if (this.currentSolStacks === 0) {\r\n        this.freeFlashHealPending = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={`${this.solFlashHeals}/${this.solStacksGained} Surge of Light buffs used`}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(5)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.SURGE_OF_LIGHT_TALENT}>\r\n          <>\r\n            {this.solFlashHeals} free <SpellLink id={SPELLS.FLASH_HEAL.id} /> casts<br />\r\n            <ItemManaGained amount={this.solManaSaved} />\r\n          </>\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SurgeOfLight;\r\n","import Analyzer, { Options } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport Renew from 'parser/priest/holy/modules/spells/Renew';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/PNYB4zgrnR86h7Lc/6-Normal+Zek'voz,+Herald+of+N'zoth/Khadaj\r\nclass Benediction extends Analyzer {\r\n  static dependencies = {\r\n    renew: Renew,\r\n  };\r\n  protected renew!: Renew;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.BENEDICTION_TALENT.id);\r\n  }\r\n\r\n  get renewsFromBenediction() {\r\n    return this.renew.renewsFromBenediction;\r\n  }\r\n\r\n  get healingFromBenedictionRenews() {\r\n    const healing = this.renew.healingFromRenew(this.renew.renewsFromBenediction);\r\n    return healing;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={`${this.renewsFromBenediction} total Renews from Benediction`}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(6)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.BENEDICTION_TALENT}>\r\n          <ItemHealingDone amount={this.healingFromBenedictionRenews} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Benediction;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport ItemDamageDone from 'interface/ItemDamageDone';\r\nimport Events, { CastEvent, DamageEvent, HealEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/mWZ6TG9JgjPQVdbA/9-Mythic+Zek'voz+-+Kill+(7:24)/1-Allyseia`Ø\r\nclass DivineStar extends Analyzer {\r\n  divineStarDamage = 0;\r\n  divineStarHealing = 0;\r\n  divineStarOverhealing = 0;\r\n  divineStarCasts = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.DIVINE_STAR_TALENT.id);\r\n    this.addEventListener(Events.damage.by(SELECTED_PLAYER).spell([SPELLS.DIVINE_STAR_HEAL, SPELLS.DIVINE_STAR_DAMAGE]), this.onDamage);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.DIVINE_STAR_HEAL), this.onHeal);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.DIVINE_STAR_TALENT), this.onCast);\r\n  }\r\n\r\n  onDamage(event: DamageEvent) {\r\n    // For some reason there are heals that are recoeded as damaging spells. I don't know what's up with that.\r\n    this.divineStarDamage += event.amount || 0;\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    this.divineStarHealing += event.amount || 0;\r\n    this.divineStarOverhealing += event.overheal || 0;\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    this.divineStarCasts += 1;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={`Divine Stars Cast: ${this.divineStarCasts}`}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(6)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.DIVINE_STAR_TALENT}>\r\n          <>\r\n            <ItemHealingDone amount={this.divineStarHealing} /><br />\r\n            <ItemDamageDone amount={this.divineStarDamage} />\r\n          </>\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DivineStar;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport ItemDamageDone from 'interface/ItemDamageDone';\r\nimport Events, { CastEvent, DamageEvent, HealEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/hRd3mpK1yTQ2tDJM/1-Mythic+MOTHER+-+Kill+(2:24)/14-丶寶寶小喵\r\nclass Halo extends Analyzer {\r\n  haloDamage = 0;\r\n  haloHealing = 0;\r\n  haloOverhealing = 0;\r\n  haloCasts = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.HALO_TALENT.id);\r\n    this.addEventListener(Events.damage.by(SELECTED_PLAYER).spell(SPELLS.HALO_DAMAGE), this.onDamage);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.HALO_HEAL), this.onHeal);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.HALO_TALENT), this.onCast);\r\n  }\r\n\r\n  onDamage(event: DamageEvent) {\r\n    this.haloDamage += event.amount || 0;\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    this.haloHealing += event.amount || 0;\r\n    this.haloOverhealing += event.overheal || 0;\r\n  }\r\n\r\n  onCast(event: CastEvent) {\r\n    this.haloCasts += 1;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={`Halos Cast: ${this.haloCasts}`}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(6)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.HALO_TALENT}>\r\n          <ItemHealingDone amount={this.haloHealing} /><br />\r\n          <ItemDamageDone amount={this.haloDamage} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Halo;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport HolyWordSanctify from 'parser/priest/holy/modules/spells/holyword/HolyWordSanctify';\r\nimport HolyWordSerenity from 'parser/priest/holy/modules/spells/holyword/HolyWordSerenity';\r\nimport HolyWordChastise from 'parser/priest/holy/modules/spells/holyword/HolyWordChastise';\r\nimport { formatNumber } from 'common/format';\r\nimport ItemManaGained from 'interface/ItemManaGained';\r\nimport Events, { ApplyBuffEvent, RemoveBuffEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/NfFqTvxrQ8GLWDpY/12-Normal+Fetid+Devourer+-+Kill+(1:25)/6-Yrret\r\nclass Apotheosis extends Analyzer {\r\n  static dependencies = {\r\n    sanctify: HolyWordSanctify,\r\n    serenity: HolyWordSerenity,\r\n    chastise: HolyWordChastise,\r\n  };\r\n  apotheosisCasts = 0;\r\n  apotheosisActive = false;\r\n  protected sanctify!: HolyWordSanctify;\r\n  protected serenity!: HolyWordSerenity;\r\n  protected chastise!: HolyWordChastise;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.APOTHEOSIS_TALENT.id);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.APOTHEOSIS_TALENT), this.onApplyBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER).spell(SPELLS.APOTHEOSIS_TALENT), this.onRemoveBuff);\r\n  }\r\n\r\n  onApplyBuff(event: ApplyBuffEvent) {\r\n    this.apotheosisCasts += 1;\r\n    this.apotheosisActive = true;\r\n  }\r\n\r\n  onRemoveBuff(event: RemoveBuffEvent) {\r\n    this.apotheosisActive = false;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={(\r\n          <>\r\n            Serenity: {this.sanctify.apotheosisCooldownReduction / 1000}s CDR | {this.sanctify.apotheosisManaReduction} Mana saved <br />\r\n            Sanctify: {this.serenity.apotheosisCooldownReduction / 1000}s CDR | {this.serenity.apotheosisManaReduction} Mana saved <br />\r\n            Chastise: {this.chastise.apotheosisCooldownReduction / 1000}s CDR | {this.chastise.apotheosisManaReduction} Mana saved\r\n          </>\r\n        )}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(7)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.APOTHEOSIS_TALENT}>\r\n          <>\r\n            <ItemManaGained amount={this.sanctify.apotheosisManaReduction + this.serenity.apotheosisManaReduction + this.chastise.apotheosisManaReduction} /><br />\r\n            {formatNumber((this.sanctify.apotheosisCooldownReduction + this.serenity.apotheosisCooldownReduction + this.chastise.apotheosisCooldownReduction) / 1000)}s Cooldown Reduction\r\n          </>\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Apotheosis;\r\n","import Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport Renew from 'parser/priest/holy/modules/spells/Renew';\r\nimport PrayerOfMending from 'parser/priest/holy/modules/spells/PrayerOfMending';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport { formatThousands } from 'common/format';\r\nimport Events, { HealEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/PNYB4zgrnR86h7Lc/6-Normal+Zek'voz,+Herald+of+N'zoth/Khadaj\r\nclass HolyWordSalvation extends Analyzer {\r\n  static dependencies = {\r\n    renew: Renew,\r\n    prayerOfMending: PrayerOfMending,\r\n  };\r\n  salvTicks = 0;\r\n  healingFromSalv = 0;\r\n  overhealingFromSalv = 0;\r\n  absorptionFromSalv = 0;\r\n  protected renew!: Renew;\r\n  protected prayerOfMending!: PrayerOfMending;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.HOLY_WORD_SALVATION_TALENT.id);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.HOLY_WORD_SALVATION_TALENT), this.onHeal);\r\n  }\r\n\r\n  get renewCount() {\r\n    return this.renew.renewsFromSalvation;\r\n  }\r\n\r\n  get healingFromRenew() {\r\n    return this.renew.healingFromRenew(this.renewCount);\r\n  }\r\n\r\n  get overHealingFromRenew() {\r\n    return this.renew.overhealingFromRenew(this.renewCount);\r\n  }\r\n\r\n  get absorptionFromRenew() {\r\n    return this.renew.absorptionFromRenew(this.renewCount);\r\n  }\r\n\r\n  get pomCount() {\r\n    return this.prayerOfMending.pomTicksFromSalv;\r\n  }\r\n\r\n  get healingFromPom() {\r\n    return this.prayerOfMending.averagePomTickHeal * this.pomCount;\r\n  }\r\n\r\n  get overHealingFromPom() {\r\n    return this.prayerOfMending.averagePomTickOverheal * this.pomCount;\r\n  }\r\n\r\n  get absorptionFromPom() {\r\n    return this.prayerOfMending.averagePomTickAbsorption * this.pomCount;\r\n  }\r\n\r\n  get totalHealing() {\r\n    return this.healingFromSalv + this.healingFromRenew + this.healingFromPom;\r\n  }\r\n\r\n  get totalOverHealing() {\r\n    return this.overhealingFromSalv + this.overHealingFromRenew + this.overHealingFromPom;\r\n  }\r\n\r\n  get totalAbsorbed() {\r\n    return this.absorptionFromSalv + this.absorptionFromRenew + this.absorptionFromPom;\r\n  }\r\n\r\n  onHeal(event: HealEvent) {\r\n    this.healingFromSalv += event.amount || 0;\r\n    this.overhealingFromSalv += event.overheal || 0;\r\n    this.absorptionFromSalv += event.absorbed || 0;\r\n    this.salvTicks += 1;\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={(\r\n          <>\r\n            Healing from Salv: {formatThousands(this.healingFromSalv + this.absorptionFromSalv)}<br />\r\n            Healing from Renews: {formatThousands(this.healingFromRenew + this.absorptionFromRenew)}<br />\r\n            Healing from PoMs: {formatThousands(this.healingFromPom + this.absorptionFromPom)}\r\n          </>\r\n        )}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(7)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.HOLY_WORD_SALVATION_TALENT}>\r\n          <ItemHealingDone amount={this.totalHealing} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HolyWordSalvation;\r\n","import Analyzer, { Options } from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS';\r\nimport React from 'react';\r\nimport HolyWordSanctify from 'parser/priest/holy/modules/spells/holyword/HolyWordSanctify';\r\nimport HolyWordChastise from 'parser/priest/holy/modules/spells/holyword/HolyWordChastise';\r\nimport HolyWordSerenity from 'parser/priest/holy/modules/spells/holyword/HolyWordSerenity';\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\n\r\n// Example Log: /report/Gvxt7CgLya2W1TYj/5-Normal+Zek'voz+-+Kill+(3:57)/13-弥砂丶\r\nclass LightOfTheNaaru extends Analyzer {\r\n  static dependencies = {\r\n    sanctify: HolyWordSanctify,\r\n    serenity: HolyWordSerenity,\r\n    chastise: HolyWordChastise,\r\n  };\r\n  protected sanctify!: HolyWordSanctify;\r\n  protected serenity!: HolyWordSerenity;\r\n  protected chastise!: HolyWordChastise;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.active = this.selectedCombatant.hasTalent(SPELLS.LIGHT_OF_THE_NAARU_TALENT.id);\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        tooltip={(\r\n          <>\r\n            Serenity: {Math.ceil(this.serenity.lightOfTheNaaruCooldownReduction / 1000)}s CDR<br />\r\n            Sanctify: {Math.ceil(this.sanctify.lightOfTheNaaruCooldownReduction / 1000)}s CDR<br />\r\n            Chastise: {Math.ceil(this.chastise.lightOfTheNaaruCooldownReduction / 1000)}s CDR\r\n          </>\r\n        )}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.TALENTS}\r\n        position={STATISTIC_ORDER.OPTIONAL(7)}\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.LIGHT_OF_THE_NAARU_TALENT}>\r\n          {Math.ceil((this.sanctify.lightOfTheNaaruCooldownReduction + this.serenity.lightOfTheNaaruCooldownReduction + this.chastise.lightOfTheNaaruCooldownReduction) / 1000)}s <small>Cooldown Reduction</small>\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LightOfTheNaaru;\r\n","import * as t15 from './15';\r\nimport * as t30 from './30';\r\nimport * as t45 from './45';\r\nimport * as t60 from './60';\r\nimport * as t75 from './75';\r\nimport * as t90 from './90';\r\nimport * as t100 from './100';\r\n\r\nexport default {\r\n  t15,\r\n  t30,\r\n  t45,\r\n  t60,\r\n  t75,\r\n  t90,\r\n  t100,\r\n};\r\n","import { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport { formatPercentage } from 'common/format';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\n\r\nimport CoreAlwaysBeCastingHealing from 'parser/shared/modules/AlwaysBeCastingHealing';\r\nimport { When } from 'parser/core/ParseResults';\r\n\r\nimport { i18n } from '@lingui/core';\r\nimport { t } from '@lingui/macro';\r\n\r\nclass AlwaysBeCasting extends CoreAlwaysBeCastingHealing {\r\n  static HEALING_ABILITIES_ON_GCD = [\r\n    SPELLS.GREATER_HEAL.id,\r\n    SPELLS.FLASH_HEAL.id,\r\n    SPELLS.PRAYER_OF_MENDING_CAST.id,\r\n    SPELLS.PRAYER_OF_HEALING.id,\r\n    SPELLS.RENEW.id,\r\n    SPELLS.HOLY_WORD_SERENITY.id,\r\n    SPELLS.HOLY_WORD_SANCTIFY.id,\r\n    SPELLS.BINDING_HEAL_TALENT.id,\r\n    SPELLS.CIRCLE_OF_HEALING_TALENT.id,\r\n    SPELLS.HALO_TALENT.id,\r\n    SPELLS.DIVINE_STAR_TALENT.id,\r\n    SPELLS.APOTHEOSIS_TALENT.id,\r\n    SPELLS.DIVINE_HYMN_CAST.id,\r\n    SPELLS.HOLY_WORD_SALVATION_TALENT.id,\r\n  ];\r\n  statisticOrder = STATISTIC_ORDER.CORE(1);\r\n\r\n  suggestions(when: When) {\r\n    const deadTimePercentage = this.totalTimeWasted / this.owner.fightDuration;\r\n\r\n    when(deadTimePercentage).isGreaterThan(0.15)\r\n      .addSuggestion((suggest, actual, recommended) => suggest('Your downtime can be improved. Try to Always Be Casting (ABC).')\r\n        .icon('spell_mage_altertime')\r\n        .actual(i18n._(t('priest.holy.suggestions.alwaysBeCasting.downtime')`${formatPercentage(actual)}% downtime`))\r\n        .recommended(`<${formatPercentage(recommended)}% is recommended`)\r\n        .regular(recommended + 0.05).major(recommended + 0.05));\r\n  }\r\n}\r\n\r\nexport default AlwaysBeCasting;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\n// import ITEMS from 'common/ITEMS';\r\nimport SpellLink from 'common/SpellLink';\r\n// import ItemLink from 'common/ItemLink';\r\nimport ResourceLink from 'common/ResourceLink';\r\nimport RESOURCE_TYPES from 'game/RESOURCE_TYPES';\r\nimport { TooltipElement } from 'common/Tooltip';\r\nimport Checklist from 'parser/shared/modules/features/Checklist';\r\nimport Rule from 'parser/shared/modules/features/Checklist/Rule';\r\nimport Requirement from 'parser/shared/modules/features/Checklist/Requirement';\r\nimport PreparationRule from 'parser/shared/modules/features/Checklist/PreparationRule';\r\nimport GenericCastEfficiencyRequirement from 'parser/shared/modules/features/Checklist/GenericCastEfficiencyRequirement';\r\n\r\nconst HolyPriestChecklist = ({ combatant, castEfficiency, thresholds }: any) => {\r\n  const AbilityRequirement = (props: any) => (\r\n    <GenericCastEfficiencyRequirement\r\n      castEfficiency={castEfficiency.getCastEfficiencyForSpellId(props.spell)}\r\n      {...props}\r\n    />\r\n  );\r\n  AbilityRequirement.propTypes = {\r\n    spell: PropTypes.number.isRequired,\r\n  };\r\n\r\n  return (\r\n    <Checklist>\r\n      <Rule\r\n        name=\"Use core abilities as often as possible\"\r\n        description={(\r\n          <>\r\n            Using your core abilities as often as possible will typically result in better performance, remember to <SpellLink id={SPELLS.SMITE.id} /> as often as you can!\r\n          </>\r\n        )}\r\n      >\r\n        <AbilityRequirement spell={SPELLS.HOLY_WORD_SERENITY.id} />\r\n        <AbilityRequirement spell={SPELLS.HOLY_WORD_SANCTIFY.id} />\r\n        <AbilityRequirement spell={SPELLS.PRAYER_OF_MENDING_CAST.id} />\r\n        <AbilityRequirement spell={SPELLS.CIRCLE_OF_HEALING_TALENT.id} />\r\n\r\n        {combatant.hasTalent(SPELLS.DIVINE_STAR_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.DIVINE_STAR_TALENT.id} />\r\n        )}\r\n        {combatant.hasTalent(SPELLS.HALO_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.HALO_TALENT.id} />\r\n        )}\r\n\r\n      </Rule>\r\n\r\n      <Rule\r\n        name=\"Use cooldowns effectively\"\r\n        description={(\r\n          <>\r\n            Cooldowns are an important part of healing, try to use them to counter fight mechanics. For example if a boss has burst damage every 3 minutes, <SpellLink id={SPELLS.DIVINE_HYMN_CAST.id} /> should be used to counter it.\r\n          </>\r\n        )}\r\n      >\r\n        <AbilityRequirement spell={SPELLS.GUARDIAN_SPIRIT.id} />\r\n        <AbilityRequirement spell={SPELLS.DIVINE_HYMN_CAST.id} />\r\n        <AbilityRequirement spell={SPELLS.DESPERATE_PRAYER.id} />\r\n        <AbilityRequirement spell={SPELLS.SYMBOL_OF_HOPE.id} />\r\n\r\n        {combatant.hasTalent(SPELLS.HOLY_WORD_SALVATION_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.HOLY_WORD_SALVATION_TALENT.id} />\r\n        )}\r\n        {combatant.hasTalent(SPELLS.APOTHEOSIS_TALENT.id) && (\r\n          <AbilityRequirement spell={SPELLS.APOTHEOSIS_TALENT.id} />\r\n        )}\r\n\r\n        {/* We can't detect race, so disable this when it has never been cast. */}\r\n        {castEfficiency.getCastEfficiencyForSpellId(SPELLS.ARCANE_TORRENT_MANA1.id) && (\r\n          <AbilityRequirement spell={SPELLS.ARCANE_TORRENT_MANA1.id} />\r\n        )}\r\n      </Rule>\r\n\r\n      <Rule\r\n        name=\"Try to avoid being inactive for a large portion of the fight\"\r\n        description={(\r\n          <>\r\n            High downtime is inexcusable, while it may be tempting to not cast and save mana, Holy's damage filler <SpellLink id={SPELLS.SMITE.id} /> is free. You can reduce your downtime by reducing the delay between casting spells, anticipating movement, moving during the GCD, and <TooltipElement content=\"You can ignore this while learning Holy, but contributing DPS whilst healing is a major part of becoming a better than average player.\">when you're not healing try to contribute some damage.*</TooltipElement>.\r\n          </>\r\n        )}\r\n      >\r\n        <Requirement name=\"Non healing time\" thresholds={thresholds.nonHealingTimeSuggestionThresholds} />\r\n        <Requirement name=\"Downtime\" thresholds={thresholds.downtimeSuggestionThresholds} />\r\n      </Rule>\r\n\r\n      <Rule\r\n        name={<>Use all of your <ResourceLink id={RESOURCE_TYPES.MANA.id} /> effectively</>}\r\n        description=\"If you have a large amount of mana left at the end of the fight that's mana you could have turned into healing. Try to use all your mana during a fight. A good rule of thumb is to try to match your mana level with the boss's health.\"\r\n      >\r\n        <Requirement name=\"Mana left\" thresholds={thresholds.manaLeft} />\r\n      </Rule>\r\n      <PreparationRule thresholds={thresholds} />\r\n    </Checklist>\r\n  );\r\n};\r\n\r\nHolyPriestChecklist.propTypes = {\r\n  castEfficiency: PropTypes.object.isRequired,\r\n  combatant: PropTypes.shape({\r\n    hasTalent: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n  thresholds: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default HolyPriestChecklist;\r\n","import React from 'react';\r\n\r\nimport BaseChecklist from 'parser/shared/modules/features/Checklist/Module';\r\nimport CastEfficiency from 'parser/shared/modules/CastEfficiency';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\nimport ManaValues from 'parser/shared/modules/ManaValues';\r\nimport PreparationRuleAnalyzer from 'parser/shared/modules/features/Checklist/PreparationRuleAnalyzer';\r\n\r\nimport AlwaysBeCasting from '../features/AlwaysBeCasting';\r\n\r\nimport Component from './Component';\r\n\r\nclass Checklist extends BaseChecklist {\r\n  static dependencies = {\r\n    combatants: Combatants,\r\n    castEfficiency: CastEfficiency,\r\n    alwaysBeCasting: AlwaysBeCasting,\r\n    manaValues: ManaValues,\r\n    preparationRuleAnalyzer: PreparationRuleAnalyzer,\r\n  };\r\n\r\n  protected combatants!: Combatants;\r\n  protected castEfficiency!: CastEfficiency;\r\n  protected preparationRuleAnalyzer!: PreparationRuleAnalyzer;\r\n  protected alwaysBeCasting!: AlwaysBeCasting;\r\n  protected manaValues!: ManaValues;\r\n\r\n  render() {\r\n    return (\r\n      <Component\r\n        combatant={this.combatants.selected}\r\n        castEfficiency={this.castEfficiency}\r\n        thresholds={{\r\n          ...this.preparationRuleAnalyzer.thresholds,\r\n\r\n          nonHealingTimeSuggestionThresholds: this.alwaysBeCasting.nonHealingTimeSuggestionThresholds,\r\n          downtimeSuggestionThresholds: this.alwaysBeCasting.downtimeSuggestionThresholds,\r\n          manaLeft: this.manaValues.suggestionThresholds,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Checklist;\r\n","import SPELLS from 'common/SPELLS';\r\nimport CoreCooldownThroughputTracker, { BUILT_IN_SUMMARY_TYPES } from 'parser/shared/modules/CooldownThroughputTracker';\r\n\r\nclass CooldownThroughputTracker extends CoreCooldownThroughputTracker {\r\n  static cooldownSpells = [\r\n    ...CoreCooldownThroughputTracker.cooldownSpells,\r\n    {\r\n      spell: SPELLS.APOTHEOSIS_TALENT,\r\n      summary: [\r\n        BUILT_IN_SUMMARY_TYPES.HEALING,\r\n        BUILT_IN_SUMMARY_TYPES.OVERHEALING,\r\n        BUILT_IN_SUMMARY_TYPES.MANA,\r\n      ],\r\n    },\r\n  ];\r\n}\r\n\r\nexport default CooldownThroughputTracker;\r\n","import React from 'react';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport SpellIcon from 'common/SpellIcon';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\nimport Analyzer, { Options, SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport AbilityTracker from 'parser/shared/modules/AbilityTracker';\r\nimport HealingDone from 'parser/shared/modules/throughput/HealingDone';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport BoringSpellValueText from 'interface/statistics/components/BoringSpellValueText';\r\nimport { formatNumber, formatPercentage } from 'common/format';\r\nimport { TooltipElement } from 'common/Tooltip';\r\nimport HIT_TYPES from 'game/HIT_TYPES';\r\nimport Events, { ApplyBuffEvent, HealEvent, RefreshBuffEvent } from 'parser/core/Events';\r\nimport Statistic from 'interface/statistics/Statistic';\r\n\r\nimport { ABILITIES_THAT_TRIGGER_MASTERY } from '../../constants';\r\n\r\nconst DEBUG = false;\r\nconst CUTOFF_PERCENT = .01;\r\n\r\ninterface EoLHealEvent extends HealEvent {\r\n  eolCritAmount: number;\r\n}\r\n\r\nclass EchoOfLightMastery extends Analyzer {\r\n  static dependencies = {\r\n    abilityTracker: AbilityTracker,\r\n    healingDone: HealingDone,\r\n    combatants: Combatants,\r\n  };\r\n  // All healing done by spells that can proc mastery\r\n  masteryHealingBySpell: any = {};\r\n  // The eol pools currently on a target\r\n  targetMasteryPool: {\r\n    [targetId: number]: {\r\n      pendingHealingTotal: number,\r\n      pendingHealingBySpell: {\r\n        [spellId: number]: number\r\n      },\r\n      remainingTicks: number,\r\n      applicationTime: number,\r\n      pendingCritTotal: number,\r\n    }\r\n  } = {};\r\n  // The test value so we can see how accurate our EoL values are\r\n  testValues = {\r\n    effectiveHealing: 0,\r\n    overhealing: 0,\r\n    rawHealing: 0,\r\n  };\r\n  precastValues = {\r\n    effectiveHealing: 0,\r\n    overhealing: 0,\r\n    rawHealing: 0,\r\n  };\r\n  protected abilityTracker!: AbilityTracker;\r\n  protected healingDone!: HealingDone;\r\n  protected combatants!: Combatants;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this.onHeal);\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER), this.onApplyBuff);\r\n    this.addEventListener(Events.refreshbuff.by(SELECTED_PLAYER), this.onRefreshBuff);\r\n  }\r\n\r\n  get effectiveHealing() {\r\n    return this.abilityTracker.getAbility(SPELLS.ECHO_OF_LIGHT_HEAL.id).healingEffective + this.abilityTracker.getAbility(SPELLS.ECHO_OF_LIGHT_HEAL.id).healingAbsorbed;\r\n  }\r\n\r\n  get overHealing() {\r\n    return this.abilityTracker.getAbility(SPELLS.ECHO_OF_LIGHT_HEAL.id).healingOverheal;\r\n  }\r\n\r\n  get overHealingPercent() {\r\n    return this.overHealing / this.rawHealing;\r\n  }\r\n\r\n  get rawHealing() {\r\n    return this.effectiveHealing + this.overHealing;\r\n  }\r\n\r\n  get masteryTable() {\r\n    const spellDetails = Object.keys(this.masteryHealingBySpell).map((key) => ({\r\n      spellId: key,\r\n      ...this.masteryHealingBySpell[key],\r\n    })).sort((a, b) => b.effectiveHealing - a.effectiveHealing);\r\n\r\n    const rows = [];\r\n\r\n    for (let i = 0; i < spellDetails.length; i += 1) {\r\n      if (DEBUG || this.getPercentOfTotalHealingBySpell(spellDetails[i].spellId) > CUTOFF_PERCENT) {\r\n        rows.push(\r\n          <tr key={'mastery_' + spellDetails[i].spellId}>\r\n            <td><SpellIcon id={Number(spellDetails[i].spellId)} style={{ height: '2.4em' }} /></td>\r\n            <td>{formatNumber(spellDetails[i].effectiveHealing)}</td>\r\n            <td>{formatPercentage(this.getPercentOfTotalHealingBySpell(spellDetails[i].spellId))}%</td>\r\n            <td>\r\n              <TooltipElement content={`${formatNumber(spellDetails[i].overHealing)} Overhealing`}>\r\n                {formatPercentage(this.getMasteryOverhealPercentBySpell(spellDetails[i].spellId))}%\r\n              </TooltipElement>\r\n            </td>\r\n          </tr>,\r\n        );\r\n      }\r\n    }\r\n\r\n    if (DEBUG) {\r\n      // Add precasted EoL\r\n      rows.push(\r\n        <tr key=\"mastery_precast\">\r\n          <td>Precast</td>\r\n          <td>{formatNumber(this.precastValues.effectiveHealing)}</td>\r\n          <td>{formatPercentage(this.precastValues.effectiveHealing / this.healingDone.total.effective)}%</td>\r\n          <td>\r\n            <TooltipElement content={`${formatNumber(this.precastValues.overhealing)} Overhealing`}>\r\n              {formatPercentage(this.precastValues.overhealing / this.precastValues.rawHealing)}%\r\n            </TooltipElement>\r\n          </td>\r\n        </tr>,\r\n      );\r\n    }\r\n    return rows;\r\n  }\r\n\r\n  getPercentOfTotalMasteryBySpell(spellId: number) {\r\n    return this.masteryHealingBySpell[spellId].rawHealing / this.rawHealing;\r\n  }\r\n\r\n  getPercentOfTotalHealingBySpell(spellId: number) {\r\n    return this.masteryHealingBySpell[spellId].effectiveHealing / this.healingDone.total.effective;\r\n  }\r\n\r\n  getMasteryOverhealPercentBySpell(spellId: number) {\r\n    return this.masteryHealingBySpell[spellId].overHealing / this.masteryHealingBySpell[spellId].rawHealing;\r\n  }\r\n\r\n  onHeal(event: EoLHealEvent) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId === SPELLS.ECHO_OF_LIGHT_HEAL.id) {\r\n      this.handleEolTick(event);\r\n    }\r\n    if (ABILITIES_THAT_TRIGGER_MASTERY.includes(spellId)) {\r\n      this.handleEolApplication(event);\r\n    }\r\n  }\r\n\r\n  handleEolApplication(event: any) {\r\n    const spellId = event.ability.guid;\r\n    const targetId = event.targetID;\r\n    if (spellId === SPELLS.RENEW.id && event.tick) {\r\n      return;\r\n    }\r\n\r\n    if (!this.targetMasteryPool[targetId]) {\r\n      this.targetMasteryPool[targetId] = {\r\n        remainingTicks: 0,\r\n        applicationTime: 0,\r\n        pendingHealingTotal: 0,\r\n        pendingHealingBySpell: {},\r\n        pendingCritTotal: 0,\r\n      };\r\n    }\r\n\r\n    const rawHealing = event.amount + (event.absorbed || 0) + (event.overheal || 0);\r\n    this.targetMasteryPool[targetId].pendingHealingTotal += rawHealing;\r\n    if (!this.targetMasteryPool[targetId].pendingHealingBySpell[spellId]) {\r\n      this.targetMasteryPool[targetId].pendingHealingBySpell[spellId] = 0;\r\n    }\r\n    this.targetMasteryPool[targetId].pendingHealingBySpell[spellId] += rawHealing;\r\n    if (event.hitType === HIT_TYPES.CRIT) {\r\n      // Track how much of a EoL tick can be contributed to a crit.\r\n      this.targetMasteryPool[targetId].pendingCritTotal += (rawHealing / 2);\r\n    }\r\n  }\r\n\r\n  handleEolTick(event: EoLHealEvent) {\r\n    const targetId = event.targetID;\r\n\r\n    // As far as I can tell, this happens when the combat log is out of order. You shouldn't receive a tick of EoL without a target having a buff apply event.\r\n    if (!this.targetMasteryPool[targetId]) {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\r\n      // @ts-ignore\r\n      DEBUG && console.warn(`[${event.timestamp}] There was a mastery tick for ${event.amount + (event.absorbed || 0)} (${event.overheal || 0} OH) on target ${this.combatants.players[targetId] ? this.combatants.players[targetId].name : ''} (${targetId}) that doesn't have a mastery pool!`);\r\n      return;\r\n    }\r\n\r\n    if (this.targetMasteryPool[targetId].remainingTicks < 1) {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\r\n      // @ts-ignore\r\n      DEBUG && console.warn(`[${event.timestamp}] There was a mastery tick for ${event.amount + (event.absorbed || 0)} (${event.overheal || 0} OH) on target ${this.combatants.players[targetId] ? this.combatants.players[targetId].name : ''} (${targetId}) whos mastery pool is empty!`);\r\n      this.targetMasteryPool[targetId].remainingTicks = 1;\r\n    }\r\n\r\n    const tickEffectiveHealing = event.amount + (event.absorbed || 0);\r\n    const tickOverhealing = (event.overheal || 0);\r\n\r\n    // The percentage of the total pool to be drained\r\n    const poolDrainPercent = 1 / this.targetMasteryPool[targetId].remainingTicks;\r\n    // The total amount that should be drained from the pool\r\n    const poolDrainTotal = this.targetMasteryPool[targetId].pendingHealingTotal * poolDrainPercent;\r\n\r\n    const rawCritValue = ((this.targetMasteryPool[targetId].pendingCritTotal || 0) * poolDrainPercent);\r\n    const effectiveCritValue = rawCritValue - tickOverhealing;\r\n    this.targetMasteryPool[targetId].pendingCritTotal -= rawCritValue;\r\n\r\n    if (effectiveCritValue > 0) {\r\n      event.eolCritAmount = effectiveCritValue;\r\n    }\r\n\r\n    if (Object.keys(this.targetMasteryPool[targetId].pendingHealingBySpell).length === 0 && this.targetMasteryPool[targetId].pendingHealingBySpell.constructor === Object) {\r\n      // This must be the result of a precasted EoL Application\r\n      // There is no way to tell which spell caused this EoL, but we can store it for metrics!\r\n      this.precastValues.effectiveHealing += tickEffectiveHealing;\r\n      this.precastValues.overhealing += tickOverhealing;\r\n      this.precastValues.rawHealing += (tickEffectiveHealing + tickOverhealing);\r\n      return;\r\n    }\r\n    for (const spellId in this.targetMasteryPool[targetId].pendingHealingBySpell) {\r\n      // The percent of the pool that should be drained by this spell\r\n      const tickHealingBySpell = this.targetMasteryPool[targetId].pendingHealingBySpell[spellId] * poolDrainPercent;\r\n      const spellContributionPercent = tickHealingBySpell / poolDrainTotal;\r\n\r\n      // Make sure the values are initialized\r\n      if (!this.masteryHealingBySpell[spellId]) {\r\n        this.masteryHealingBySpell[spellId] = {\r\n          effectiveHealing: 0,\r\n          overHealing: 0,\r\n          rawHealing: 0,\r\n        };\r\n      }\r\n\r\n      const effectiveHealing = tickEffectiveHealing * spellContributionPercent;\r\n      const overHealing = tickOverhealing * spellContributionPercent;\r\n\r\n      this.masteryHealingBySpell[spellId].effectiveHealing += effectiveHealing;\r\n      this.masteryHealingBySpell[spellId].overHealing += overHealing;\r\n      this.masteryHealingBySpell[spellId].rawHealing += effectiveHealing + overHealing;\r\n\r\n      this.testValues.effectiveHealing += effectiveHealing;\r\n      this.testValues.overhealing += overHealing;\r\n      this.testValues.rawHealing += effectiveHealing + overHealing;\r\n    }\r\n\r\n    this.targetMasteryPool[targetId].remainingTicks -= 1;\r\n  }\r\n\r\n  onApplyBuff(event: ApplyBuffEvent) {\r\n    const spellId = event.ability.guid;\r\n    const targetId = event.targetID;\r\n    if (spellId === SPELLS.ECHO_OF_LIGHT_HEAL.id) {\r\n      if (!this.targetMasteryPool[targetId]) {\r\n        this.targetMasteryPool[targetId] = {\r\n          applicationTime: 0,\r\n          remainingTicks: 0,\r\n          pendingHealingTotal: 0,\r\n          pendingHealingBySpell: {},\r\n          pendingCritTotal: 0,\r\n        };\r\n      }\r\n\r\n      this.targetMasteryPool[targetId].remainingTicks = 2;\r\n      this.targetMasteryPool[targetId].applicationTime = event.timestamp;\r\n      this.targetMasteryPool[targetId].pendingCritTotal = 0;\r\n    }\r\n  }\r\n\r\n  onRefreshBuff(event: RefreshBuffEvent) {\r\n    const spellId = event.ability.guid;\r\n    const targetId = event.targetID;\r\n    if (spellId === SPELLS.ECHO_OF_LIGHT_HEAL.id) {\r\n      // There is a bug when you apply and refresh EoL at the same exact millisecond.\r\n      // When you do this (via benediction or some other means) there can be 4 ticks of EoL.\r\n      // This code compensates for that.\r\n      if (this.targetMasteryPool[targetId]) {\r\n        if (event.timestamp === this.targetMasteryPool[targetId].applicationTime) {\r\n          // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\r\n          // @ts-ignore\r\n          DEBUG && console.warn(`[${event.timestamp}] There was a double application of EoL tick on target ${this.combatants.players[targetId] ? this.combatants.players[targetId].name : ''} (${targetId}). Applying 4 ticks.`);\r\n          this.targetMasteryPool[targetId].remainingTicks = 4;\r\n        } else {\r\n          this.targetMasteryPool[targetId].remainingTicks = 3;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        size=\"flexible\"\r\n        position={STATISTIC_ORDER.CORE(2)}\r\n        tooltip={(\r\n          <>\r\n            Total Healing: {formatNumber(this.effectiveHealing)} ({formatPercentage(this.overHealingPercent)}% OH)<br />\r\n            Expand for Echo of Light healing breakdown. As our mastery is often very finicky, this could end up wrong in various situations. Please report any logs that seem strange to @Khadaj on the WoWAnalyzer discord.<br /><br />\r\n            <strong>Please do note this may not be 100% accurate.</strong><br /><br />\r\n            Also, a mastery value can be more than just \"healing done times mastery percent\" because Echo of Light is based off raw healing. If the heal itself overheals, but the mastery does not, it can surpass that assumed \"limit\". Don't use this as a reason for a \"strange log\" unless something is absurdly higher than its effective healing.\r\n          </>\r\n        )}\r\n        dropdown={\r\n          <>\r\n            <div>Values under 1% of total are omitted.</div>\r\n            <table className=\"table table-condensed\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Spell</th>\r\n                  <th>Amount</th>\r\n                  <th>% of Total</th>\r\n                  <th>% OH</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.masteryTable}\r\n              </tbody>\r\n            </table>\r\n          </>\r\n        }\r\n      >\r\n        <BoringSpellValueText spell={SPELLS.ECHO_OF_LIGHT_MASTERY}>\r\n          <ItemHealingDone amount={this.effectiveHealing} />\r\n        </BoringSpellValueText>\r\n      </Statistic>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EchoOfLightMastery;\r\n","import SPELLS from 'common/SPELLS';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport { ThresholdStyle, When } from 'parser/core/ParseResults';\r\nimport { formatPercentage } from 'common/format';\r\nimport { i18n } from '@lingui/core';\r\nimport { t } from '@lingui/macro';\r\n\r\nclass FortitudeRaidBuff extends Analyzer {\r\n  get uptime() {\r\n    return this.selectedCombatant.getBuffUptime(SPELLS.POWER_WORD_FORTITUDE.id) / this.owner.fightDuration;\r\n  }\r\n\r\n  get uptimeSuggestionThresholds() {\r\n    return {\r\n      actual: this.uptime,\r\n      isLessThan: {\r\n        minor: .95,\r\n        average: .90,\r\n        major: 0,\r\n      },\r\n      style: ThresholdStyle.PERCENTAGE,\r\n    };\r\n  }\r\n\r\n  suggestions(when: When) {\r\n    when(this.uptimeSuggestionThresholds)\r\n      .addSuggestion((suggest, actual, recommended) => suggest('Remember to have Power Word: Fortitude always up and recast it on death/resurection.')\r\n        .icon(SPELLS.POWER_WORD_FORTITUDE.icon)\r\n        .actual(i18n._(t('priest.holy.suggestions.fortitudeRaidBuff.uptime')`${formatPercentage(actual)}% Power Word: Fortitude uptime`))\r\n        .recommended(`>${formatPercentage(recommended)}% is recommended`));\r\n  }\r\n}\r\n\r\nexport default FortitudeRaidBuff;\r\n","import React from 'react';\r\nimport Analyzer, { Options } from 'parser/core/Analyzer';\r\nimport HolyWordSanctify from 'parser/priest/holy/modules/spells/holyword/HolyWordSanctify';\r\nimport HolyWordChastise from 'parser/priest/holy/modules/spells/holyword/HolyWordChastise';\r\nimport HolyWordSalvation from 'parser/priest/holy/modules/spells/holyword/HolyWordSalvation';\r\nimport HolyWordSerenity from 'parser/priest/holy/modules/spells/holyword/HolyWordSerenity';\r\nimport SPELLS from 'common/SPELLS';\r\nimport StatisticBox, { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport { formatPercentage } from 'common/format';\r\n\r\nclass HolyWordsReductionBySpell extends Analyzer {\r\n  static dependencies = {\r\n    sanctify: HolyWordSanctify,\r\n    serenity: HolyWordSerenity,\r\n    chastise: HolyWordChastise,\r\n    salvation: HolyWordSalvation,\r\n  };\r\n  lightOfTheNaaruActive = false;\r\n  apotheosisActive = false;\r\n  protected sanctify!: HolyWordSanctify;\r\n  protected serenity!: HolyWordSerenity;\r\n  protected chastise!: HolyWordChastise;\r\n  protected salvation!: HolyWordSalvation;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.lightOfTheNaaruActive = this.selectedCombatant.hasTalent(SPELLS.LIGHT_OF_THE_NAARU_TALENT.id);\r\n    this.apotheosisActive = this.selectedCombatant.hasTalent(SPELLS.APOTHEOSIS_TALENT.id);\r\n  }\r\n\r\n  get totalReduction() {\r\n    return this.sanctify.totalCooldownReduction + this.serenity.totalCooldownReduction + this.chastise.totalCooldownReduction;\r\n  }\r\n\r\n  get reductionBySpell() {\r\n    let totalReductionBySpell = {};\r\n\r\n    totalReductionBySpell = this.sumCooldown(totalReductionBySpell, this.sanctify.totalHolyWordReductionPerSpellPerTalent);\r\n    totalReductionBySpell = this.sumCooldown(totalReductionBySpell, this.serenity.totalHolyWordReductionPerSpellPerTalent);\r\n    totalReductionBySpell = this.sumCooldown(totalReductionBySpell, this.chastise.totalHolyWordReductionPerSpellPerTalent);\r\n    totalReductionBySpell = this.sumCooldown(totalReductionBySpell, this.salvation.totalHolyWordReductionPerSpellPerTalent);\r\n\r\n    return totalReductionBySpell;\r\n  }\r\n\r\n  sumCooldown(currentList: any, newList: any) {\r\n    for (const spellId in newList) {\r\n      if (currentList[spellId] == null) {\r\n        currentList[spellId] = newList[spellId];\r\n      } else {\r\n        for (const cooldownType in newList[spellId]) {\r\n          currentList[spellId][cooldownType] = currentList[spellId][cooldownType] || 0;\r\n          currentList[spellId][cooldownType] += newList[spellId][cooldownType];\r\n        }\r\n      }\r\n    }\r\n    return currentList;\r\n  }\r\n\r\n  statistic() {\r\n    const reductionRatio = this.totalReduction / (this.owner.fightDuration + this.totalReduction);\r\n    const reductionBySpell: any = this.reductionBySpell;\r\n\r\n    return (\r\n      <StatisticBox\r\n        position={STATISTIC_ORDER.CORE(6)}\r\n        icon={<SpellIcon id={Number(SPELLS.HOLY_WORDS.id)} />}\r\n        value={`${formatPercentage(reductionRatio)} %`}\r\n        label=\"Effective Holy Word reduction\"\r\n        tooltip={(\r\n          <>\r\n            The % above is the total CD reduction normalize against the fight length.<br />\r\n            This allows for comparision across different fights more easily.<br /><br />\r\n\r\n            Talents like <strong>Light of the Naaru</strong> and <strong>Apotheosis</strong> which provide further CD reduction are taken into account when calculating these numbers.<br /><br />\r\n\r\n            If you took the talent <strong>Holy Word Salvation, Holy Words Sanctify and Serenity</strong> will show since they provide CD reduction for <strong>Holy World Salvation</strong>.\r\n          </>\r\n        )}\r\n      >\r\n        <table className=\"table table-condensed\">\r\n          <thead>\r\n            <tr>\r\n              <td className=\"text-left\">Spell</td>\r\n              <td>Base</td>\r\n              {this.apotheosisActive && <th>Apotheosis</th>}\r\n              {this.lightOfTheNaaruActive && <th>Light of the Naaru</th>}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {Object.keys(reductionBySpell).map((e, i) => (\r\n              <tr key={i}>\r\n                <td className=\"text-left\"><SpellIcon id={Number(e)} /> {SPELLS[e].name}</td>\r\n                <td>{Math.ceil(reductionBySpell[e].base / 1000)}s</td>\r\n                {this.apotheosisActive && <td>{Math.ceil(reductionBySpell[e].apotheosis / 1000)}s</td>}\r\n                {this.lightOfTheNaaruActive && <td>{Math.ceil(reductionBySpell[e].lightOfTheNaaru / 1000)}s</td>}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </StatisticBox>\r\n\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default HolyWordsReductionBySpell;\r\n","import React from 'react';\r\nimport StatisticBox, { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport { formatNumber, formatPercentage } from 'common/format';\r\n\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport Analyzer from 'parser/core/Analyzer';\r\n\r\n// dependencies\r\nimport HolyWordSanctify from 'parser/priest/holy/modules/spells/holyword/HolyWordSanctify';\r\nimport HolyWordChastise from 'parser/priest/holy/modules/spells/holyword/HolyWordChastise';\r\nimport HolyWordSerenity from 'parser/priest/holy/modules/spells/holyword/HolyWordSerenity';\r\n\r\nclass HolyWordWastedAmounts extends Analyzer {\r\n  static dependencies = {\r\n    sanctify: HolyWordSanctify,\r\n    serenity: HolyWordSerenity,\r\n    chastise: HolyWordChastise,\r\n  };\r\n\r\n  protected sanctify!: HolyWordSanctify;\r\n  protected serenity!: HolyWordSerenity;\r\n  protected chastise!: HolyWordChastise;\r\n\r\n  statistic() {\r\n    const percWastedVersusTotal = (this.serenity.holyWordWastedCooldown + this.sanctify.holyWordWastedCooldown) / (this.serenity.totalCooldownReduction + this.sanctify.totalCooldownReduction);\r\n\r\n    return (\r\n      <StatisticBox\r\n        icon={<SpellIcon id={SPELLS.HOLY_WORDS.id} />}\r\n        value={`${formatPercentage(percWastedVersusTotal)}%`}\r\n        label=\"Wasted Holy Words reduction\"\r\n        tooltip={(\r\n          <>\r\n            {formatNumber(this.serenity.holyWordWastedCooldown / 1000)}s wasted Serenity reduction (of {formatNumber(this.serenity.totalCooldownReduction / 1000)}s total)<br />\r\n            {formatNumber(this.sanctify.holyWordWastedCooldown / 1000)}s wasted Sanctify reduction (of {formatNumber(this.sanctify.totalCooldownReduction / 1000)}s total)<br />\r\n          </>\r\n        )}\r\n        position={STATISTIC_ORDER.CORE(4)}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default HolyWordWastedAmounts;\r\n","import SPELLS from 'common/SPELLS';\r\n\r\n/*\r\n * Fields:\r\n * int: spell scales with Intellect\r\n * crit: spell scales with (is able to or procced from) Critical Strike\r\n * hasteHpm: spell does more healing due to Haste, e.g. HoTs that gain more ticks\r\n * hasteHpct: spell can be cast more frequently due to Haste, basically any spell except for non haste scaling CDs\r\n * mastery: spell is boosted by Mastery\r\n * masteryStack: spell's HoT counts as a Mastery Stack\r\n * vers: spell scales with Versatility\r\n * multiplier: spell scales with whatever procs it, should be ignored for purpose of weights and for 'total healing' number\r\n * ignored: spell should be ignored for purpose of stat weights\r\n */\r\n\r\n// This only works with actual healing events; casts are not recognized.\r\n\r\n/* Holy is a bit of a special child for mastery. Our mastery is it's own event, so for the sake of this module,\r\n * the only spell that \"benefits\" from our mastery is our mastery. It seems counter intuitive, but this is an\r\n * easy way to build out this module without a bunch of custom code for holy priests. Mastery doesn't *actually*\r\n * get any additional healing from int, crit, ect, but the amount of mastery generated is directly bound to those\r\n * stats, so they are all set to true here. */\r\nexport default {\r\n  // Mastery\r\n  [SPELLS.ECHO_OF_LIGHT_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: true,\r\n    vers: true,\r\n  },\r\n\r\n  // Spells\r\n  [SPELLS.HOLY_NOVA_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.GREATER_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.FLASH_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.PRAYER_OF_MENDING_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.PRAYER_OF_HEALING.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.RENEW.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: true,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.HOLY_WORD_SERENITY.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.HOLY_WORD_SANCTIFY.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.DESPERATE_PRAYER.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.GUARDIAN_SPIRIT_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.TRAIL_OF_LIGHT_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.COSMIC_RIPPLE_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.DIVINE_HYMN_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n\r\n  // Talents\r\n  [SPELLS.BINDING_HEAL_TALENT.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.CIRCLE_OF_HEALING_TALENT.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.HOLY_WORD_SALVATION_TALENT.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.HALO_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n  [SPELLS.DIVINE_STAR_HEAL.id]: {\r\n    int: true,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: true,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n};\r\n","import SPELLS from 'common/SPELLS';\r\nimport STAT from 'parser/shared/modules/features/STAT';\r\n\r\nimport BaseHealerStatValues from 'parser/shared/modules/features/BaseHealerStatValues';\r\nimport Combatants from 'parser/shared/modules/Combatants';\r\nimport CritEffectBonus from 'parser/shared/modules/helpers/CritEffectBonus';\r\nimport StatTracker from 'parser/shared/modules/StatTracker';\r\n\r\nimport Mastery from '../core/EchoOfLightMastery';\r\n\r\nimport PRIEST_HEAL_INFO from './StatValuesSpellInfo';\r\n\r\nclass StatWeights extends BaseHealerStatValues {\r\n  static dependencies = {\r\n    combatants: Combatants,\r\n    critEffectBonus: CritEffectBonus,\r\n    statTracker: StatTracker,\r\n    mastery: Mastery,\r\n  };\r\n  spellInfo = PRIEST_HEAL_INFO;\r\n  qeLive = false;\r\n  protected statTracker!: StatTracker;\r\n\r\n  _hasteHpm(event: any, healVal: any) {\r\n    if (event.ability.guid === SPELLS.RENEW.id && !event.tick) {\r\n      return 0;\r\n    }\r\n    return super._hasteHpm(event, healVal);\r\n  }\r\n\r\n  _criticalStrike(event: any, healVal: any) {\r\n    if (this._isCrit(event)) {\r\n      return super._criticalStrike(event, healVal);\r\n    } else if (event.eolCritAmount !== undefined && event.eolCritAmount !== 0) {\r\n      const { baseCritChance, ratingCritChance } = this._getCritChance(event);\r\n      const totalCritChance = baseCritChance + ratingCritChance;\r\n      const ratingCritChanceContribution = 1 - baseCritChance / totalCritChance;\r\n      const rating = this.statTracker.currentCritRating;\r\n\r\n      const effectiveCritHealing = event.eolCritAmount;\r\n      return effectiveCritHealing * ratingCritChanceContribution / rating;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  _mastery(event: any, healVal: any) {\r\n    const spellId = event.ability.guid;\r\n    if (spellId !== SPELLS.ECHO_OF_LIGHT_HEAL.id) {\r\n      return 0;\r\n    }\r\n    return healVal.effective * (1 - (this.statTracker.masteryPercentage(this.statTracker.currentMasteryRating - 1, true) / this.statTracker.masteryPercentage(this.statTracker.currentMasteryRating, true)));\r\n  }\r\n\r\n  _prepareResults() {\r\n    return [\r\n      STAT.INTELLECT,\r\n      STAT.CRITICAL_STRIKE,\r\n      STAT.HASTE_HPCT,\r\n      STAT.HASTE_HPM,\r\n      STAT.MASTERY,\r\n      STAT.VERSATILITY,\r\n      STAT.VERSATILITY_DR,\r\n      STAT.LEECH,\r\n    ];\r\n  }\r\n\r\n}\r\n\r\nexport default StatWeights;\r\n","import AbilityTracker from 'parser/shared/modules/AbilityTracker';\r\nimport HealingDone from 'parser/shared/modules/throughput/HealingDone';\r\nimport DamageDone from 'parser/shared/modules/throughput/DamageDone';\r\nimport CastEfficiency from 'parser/shared/modules/CastEfficiency';\r\nimport HealingEfficiencyTracker from 'parser/core/healingEfficiency/HealingEfficiencyTracker';\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport ManaTracker from 'parser/core/healingEfficiency/ManaTracker';\r\n\r\nimport Abilities from 'parser/priest/holy/modules/Abilities';\r\nimport Renew from 'parser/priest/holy/modules/spells/Renew';\r\nimport PrayerOfMending from 'parser/priest/holy/modules/spells/PrayerOfMending';\r\nimport HolyWordSalvation from 'parser/priest/holy/modules/talents/100/HolyWordSalvation';\r\nimport EchoOfLightMastery from 'parser/priest/holy/modules/core/EchoOfLightMastery';\r\n\r\nclass HolyPriestHealingEfficiencyTracker extends HealingEfficiencyTracker {\r\n  static dependencies = {\r\n    manaTracker: ManaTracker,\r\n    abilityTracker: AbilityTracker,\r\n    healingDone: HealingDone,\r\n    damageDone: DamageDone,\r\n    castEfficiency: CastEfficiency,\r\n\r\n    // Custom dependencies\r\n    abilities: Abilities,\r\n    salvation: HolyWordSalvation,\r\n    renew: Renew,\r\n    prayerOfMending: PrayerOfMending,\r\n    echoOfLight: EchoOfLightMastery,\r\n  };\r\n  includeEchoOfLight = false;\r\n  protected salvation!: HolyWordSalvation;\r\n  protected renew!: Renew;\r\n  protected prayerOfMending!: PrayerOfMending;\r\n  protected echoOfLight!: EchoOfLightMastery;\r\n\r\n  getCustomSpellStats(spellInfo: any, spellId: number, healingSpellIds: number[]) {\r\n    // If we have a spell that has custom logic for the healing/damage numbers, do that before the rest of our calculations.\r\n    if (spellId === SPELLS.RENEW.id) {\r\n      spellInfo = this.getRenewDetails(spellInfo);\r\n    } else if (spellId === SPELLS.PRAYER_OF_MENDING_CAST.id) {\r\n      spellInfo = this.getPomDetails(spellInfo);\r\n    } else if (spellId === SPELLS.HOLY_WORD_SALVATION_TALENT.id) {\r\n      spellInfo = this.getSalvationDetails(spellInfo);\r\n    }\r\n\r\n    if (this.includeEchoOfLight) {\r\n      spellInfo = this.addEcho(spellInfo, healingSpellIds);\r\n    }\r\n\r\n    return spellInfo;\r\n  }\r\n\r\n  getRenewDetails(spellInfo: any) {\r\n    // This represents that amount of healing done by HARD CASTING renew.\r\n    // We don't want renew to get Hpm credit for healing that we didn't spend mana on.\r\n    spellInfo.healingDone = this.renew.healingFromRenew(this.renew.renewsCast);\r\n    spellInfo.overhealingDone = this.renew.overhealingFromRenew(this.renew.renewsCast);\r\n    spellInfo.healingAbsorbed = this.renew.absorptionFromRenew(this.renew.renewsCast);\r\n    spellInfo.healingHits = (this.renew.renewsCast / this.renew.totalRenewApplications) * this.renew.totalRenewTicks;\r\n\r\n    return spellInfo;\r\n  }\r\n\r\n  getPomDetails(spellInfo: any) {\r\n    // This represents that amount of healing done by HARD CASTING PoM.\r\n    // We don't want PoM to get Hpm credit for healing that we didn't spend mana on.\r\n    // We *do* want PoM to get credit for any renews it leave behind from Benediction.\r\n    spellInfo.healingDone = this.prayerOfMending.pomTicksFromCast * this.prayerOfMending.averagePomTickHeal;\r\n    spellInfo.overhealingDone = this.prayerOfMending.pomTicksFromCast * this.prayerOfMending.averagePomTickOverheal;\r\n    spellInfo.healingAbsorbed = this.prayerOfMending.pomTicksFromCast * this.prayerOfMending.averagePomTickAbsorption;\r\n    spellInfo.healingHits = this.prayerOfMending.pomTicksFromCast;\r\n\r\n    return spellInfo;\r\n  }\r\n\r\n  getSalvationDetails(spellInfo: any) {\r\n    spellInfo.healingDone = this.salvation.totalHealing;\r\n    spellInfo.overhealingDone = this.salvation.totalOverHealing;\r\n    spellInfo.healingAbsorbed = this.salvation.totalAbsorbed;\r\n\r\n    return spellInfo;\r\n  }\r\n\r\n  addEcho(spellInfo: any, healingSpellIds: number[]) {\r\n    if (this.echoOfLight.masteryHealingBySpell[spellInfo.spell.id]) {\r\n      spellInfo.healingDone += this.echoOfLight.masteryHealingBySpell[spellInfo.spell.id].effectiveHealing;\r\n      spellInfo.overhealingDone += this.echoOfLight.masteryHealingBySpell[spellInfo.spell.id].overHealing;\r\n    }\r\n\r\n    if (healingSpellIds) {\r\n      healingSpellIds.forEach(healingSpellId => {\r\n        if (this.echoOfLight.masteryHealingBySpell[healingSpellId]) {\r\n          spellInfo.healingDone += this.echoOfLight.masteryHealingBySpell[healingSpellId].effectiveHealing;\r\n          spellInfo.overhealingDone += this.echoOfLight.masteryHealingBySpell[healingSpellId].overHealing;\r\n        }\r\n      });\r\n    }\r\n\r\n    return spellInfo;\r\n  }\r\n}\r\n\r\nexport default HolyPriestHealingEfficiencyTracker;\r\n","import React from 'react';\r\nimport HealingEfficiencyBreakdown from 'parser/core/healingEfficiency/HealingEfficiencyBreakdown';\r\nimport Toggle from 'react-toggle';\r\nimport SpellLink from 'common/SpellLink';\r\nimport SPELLS from 'common/SPELLS/index';\r\n\r\nimport HolyPriestHealingEfficiencyTracker from './HolyPriestHealingEfficiencyTracker';\r\n\r\ninterface Props {\r\n  tracker: HolyPriestHealingEfficiencyTracker;\r\n}\r\n\r\nclass HolyPriestHealingEfficiencyBreakdown extends HealingEfficiencyBreakdown {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    super.setState({ showEchoOfLight: false });\r\n  }\r\n\r\n  render() {\r\n    const { tracker } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12\">\r\n            <div className=\"pull-left\">\r\n              <div className=\"toggle-control pull-right\" style={{ marginLeft: '.5em', marginRight: '.5em' }}>\r\n                <Toggle\r\n                  defaultChecked={false}\r\n                  icons={false}\r\n                  onChange={(event: any) => this.setState({ detailedView: event.target.checked })}\r\n                  id=\"detailed-toggle\"\r\n                />\r\n                <label htmlFor=\"detailed-toggle\" style={{ marginLeft: '0.5em' }}>\r\n                  Detailed View\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div className=\"pull-right\">\r\n              <div className=\"toggle-control pull-left\" style={{ marginLeft: '.5em', marginRight: '.5em' }}>\r\n                <Toggle\r\n                  defaultChecked={false}\r\n                  icons={false}\r\n                  onChange={(event: any) => {\r\n                    this.setState({ showEchoOfLight: event.target.checked });\r\n                    (tracker as HolyPriestHealingEfficiencyTracker).includeEchoOfLight = event.target.checked;\r\n                  }}\r\n                  id=\"cooldown-toggle\"\r\n                />\r\n                <label htmlFor=\"cooldown-toggle\" style={{ marginLeft: '0.5em' }}>\r\n                  Include <SpellLink id={SPELLS.ECHO_OF_LIGHT_MASTERY.id} />\r\n                </label>\r\n              </div>\r\n              <div className=\"toggle-control pull-left\" style={{ marginLeft: '.5em', marginRight: '.5em' }}>\r\n                <Toggle\r\n                  defaultChecked={false}\r\n                  icons={false}\r\n                  onChange={(event: any) => this.setState({ showCooldowns: event.target.checked })}\r\n                  id=\"cooldown-toggle\"\r\n                />\r\n                <label htmlFor=\"cooldown-toggle\" style={{ marginLeft: '0.5em' }}>\r\n                  Show Cooldowns\r\n                </label>\r\n              </div>\r\n              <div className=\"toggle-control pull-left\" style={{ marginLeft: '.5em', marginRight: '.5em' }}>\r\n                <label htmlFor=\"healing-toggle\" style={{ marginLeft: '0.5em', marginRight: '1em' }}>\r\n                  Show Damage\r\n                </label>\r\n                <Toggle\r\n                  defaultChecked\r\n                  icons={false}\r\n                  onChange={(event: any) => this.setState({ showHealing: event.target.checked })}\r\n                  id=\"healing-toggle\"\r\n                />\r\n                <label htmlFor=\"healing-toggle\" style={{ marginLeft: '0.5em' }}>\r\n                  Show Healing\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-md-12\">\r\n            <table className=\"data-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Ability</th>\r\n                  {this.state.detailedView ? <this.DetailHeader /> : <this.BarHeader />}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.HealingEfficiencyTable({ tracker })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HolyPriestHealingEfficiencyBreakdown;\r\n","import React from 'react';\r\n\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport Panel from 'interface/others/Panel';\r\n\r\nimport HealingEfficiencyTracker from './HolyPriestHealingEfficiencyTracker';\r\nimport HealingEfficiencyBreakdown from './HolyPriestHealingEfficiencyBreakdown';\r\n\r\nclass HolyPriestHealingEfficiencyDetails extends Analyzer {\r\n  static dependencies = {\r\n    healingEfficiencyTracker: HealingEfficiencyTracker,\r\n  };\r\n\r\n  protected healingEfficiencyTracker!: HealingEfficiencyTracker;\r\n\r\n  tab() {\r\n    return {\r\n      title: 'Mana Efficiency',\r\n      url: 'mana-efficiency',\r\n      render: () => (\r\n        <Panel>\r\n          <HealingEfficiencyBreakdown tracker={this.healingEfficiencyTracker} />\r\n        </Panel>\r\n      ),\r\n    };\r\n  }\r\n}\r\n\r\nexport default HolyPriestHealingEfficiencyDetails;\r\n","import React from 'react';\r\n\r\nimport SPELLS from 'common/SPELLS';\r\n\r\nimport Analyzer, { SELECTED_PLAYER } from 'parser/core/Analyzer';\r\nimport Events, { ApplyBuffEvent, HealEvent } from 'parser/core/Events';\r\nimport { Options } from 'parser/core/Module';\r\n\r\nimport Statistic from 'interface/statistics/Statistic';\r\nimport STATISTIC_ORDER from 'interface/others/STATISTIC_ORDER';\r\nimport STATISTIC_CATEGORY from 'interface/others/STATISTIC_CATEGORY';\r\nimport ConduitSpellText from 'interface/statistics/components/ConduitSpellText';\r\nimport ItemHealingDone from 'interface/ItemHealingDone';\r\nimport { RESONANT_WORDS_RANKS } from 'parser/priest/holy/constants';\r\n\r\nclass ResonantWords extends Analyzer {\r\n  totalResonantWords = 0;\r\n  wastedResonantWords = 0;\r\n  bonusHealing = 0;\r\n  healingMultiplier = RESONANT_WORDS_RANKS[0];\r\n\r\n  conduitRank: number = 0;\r\n  conduitIncrease: number = 0;\r\n  bonusRadianceHealing: number = 0;\r\n\r\n  constructor(options: Options) {\r\n    super(options);\r\n\r\n    this.conduitRank = this.selectedCombatant.conduitRankBySpellID(SPELLS.RESONANT_WORDS.id);\r\n    if (!this.conduitRank) {\r\n      this.active = false;\r\n      return;\r\n    }\r\n    this.healingMultiplier = RESONANT_WORDS_RANKS[this.conduitRank];\r\n\r\n    this.addEventListener(Events.applybuff.by(SELECTED_PLAYER).spell(SPELLS.RESONANT_WORDS_BUFF), this.onResonantWordsApply);\r\n\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER).spell(SPELLS.FLASH_HEAL), this.onFlashHeal);\r\n\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.HOLY_WORD_CHASTISE), this.onHolyWordCast);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.HOLY_WORD_SANCTIFY), this.onHolyWordCast);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.HOLY_WORD_SERENITY), this.onHolyWordCast);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER).spell(SPELLS.HOLY_WORD_SALVATION_TALENT), this.onHolyWordCast);\r\n  }\r\n\r\n  onResonantWordsApply(event: ApplyBuffEvent) {\r\n    this.totalResonantWords += 1;\r\n  }\r\n\r\n  onFlashHeal(event: HealEvent) {\r\n    if (this.selectedCombatant.hasBuff(SPELLS.RESONANT_WORDS_BUFF.id)) {\r\n      const eventBonusAmount = event.amount / (1 + (this.healingMultiplier / 100));\r\n      this.bonusHealing += eventBonusAmount;\r\n    }\r\n  }\r\n\r\n  onHolyWordCast() {\r\n    if (this.selectedCombatant.hasBuff(SPELLS.RESONANT_WORDS_BUFF.id)) {\r\n      this.wastedResonantWords += 1;\r\n    }\r\n  }\r\n\r\n  statistic() {\r\n    return (\r\n      <Statistic\r\n        position={STATISTIC_ORDER.OPTIONAL(13)}\r\n        size=\"flexible\"\r\n        category={STATISTIC_CATEGORY.COVENANTS}\r\n        tooltip={`${this.wastedResonantWords}/${this.totalResonantWords} wasted resonant word buffs.`}\r\n      >\r\n        <ConduitSpellText spell={SPELLS.RESONANT_WORDS} rank={this.conduitRank}>\r\n          <ItemHealingDone amount={this.bonusHealing} />\r\n        </ConduitSpellText>\r\n      </Statistic>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default ResonantWords;\r\n","import React from 'react';\r\n\r\nimport Panel from 'interface/others/Panel';\r\nimport HolyPriestSpreadsheet from 'interface/others/HolyPriestSpreadsheet';\r\n\r\nimport CoreCombatLogParser from 'parser/core/CombatLogParser';\r\nimport LowHealthHealing from 'parser/shared/modules/features/LowHealthHealing';\r\nimport ManaLevelChart from 'parser/shared/modules/resources/mana/ManaLevelChart';\r\nimport ManaUsageChart from 'parser/shared/modules/resources/mana/ManaUsageChart';\r\nimport AbilityTracker from 'parser/priest/holy/modules/core/AbilityTracker';\r\n\r\nimport Abilities from './modules/Abilities';\r\n\r\nimport SpellManaCost from './modules/core/SpellManaCost';\r\n// Spell data\r\nimport DivineHymn from './modules/spells/DivineHymn';\r\nimport GuardianSpirit from './modules/spells/GuardianSpirit';\r\nimport HolyNova from './modules/spells/HolyNova';\r\nimport HolyWordSanctify from './modules/spells/holyword/HolyWordSanctify';\r\nimport HolyWordSerenity from './modules/spells/holyword/HolyWordSerenity';\r\nimport HolyWordChastise from './modules/spells/holyword/HolyWordChastise';\r\nimport HolyWordSalvationCooldown from './modules/spells/holyword/HolyWordSalvation';\r\nimport SpiritOfRedemption from './modules/spells/SpiritOfRedemption';\r\nimport HymnBuffBenefit from './modules/spells/HymnBuffBenefit';\r\nimport Renew from './modules/spells/Renew';\r\nimport PrayerOfMending from './modules/spells/PrayerOfMending';\r\nimport CircleOfHealing from './modules/spells/CircleOfHealing';\r\n\r\n//Talents\r\nimport Talents from './modules/talents';\r\n// Features\r\nimport AlwaysBeCasting from './modules/features/AlwaysBeCasting';\r\nimport Checklist from './modules/checklist/Module';\r\nimport CooldownThroughputTracker from './modules/features/CooldownThroughputTracker';\r\nimport SpellUsable from './modules/features/SpellUsable';\r\nimport HealingReceived from './modules/features/HealingReceived';\r\nimport HealingTargetTracker from './modules/features/HealingTargetTracker';\r\n// Priest Core\r\nimport EchoOfLightMastery from './modules/core/EchoOfLightMastery';\r\nimport FortitudeRaidBuff from './modules/core/FortitudeRaidBuff';\r\nimport HolyWordsReductionBySpell from './modules/core/HolyWordsReductionBySpell';\r\nimport HolyWordWastedAmounts from './modules/core/HolyWordWastedAmounts';\r\nimport StatWeights from './modules/features/StatWeights';\r\n\r\nimport { ABILITIES_AFFECTED_BY_HEALING_INCREASES } from './constants';\r\n\r\n// Mana Tracker\r\nimport HealingEfficiencyDetails from './modules/features/HolyPriestHealingEfficiencyDetails';\r\nimport HealingEfficiencyTracker from './modules/features/HolyPriestHealingEfficiencyTracker';\r\nimport ManaTracker from '../../core/healingEfficiency/ManaTracker';\r\n\r\n// Conduits\r\nimport ResonantWords from './modules/shadowlands/conduits/ResonantWords';\r\n\r\nclass CombatLogParser extends CoreCombatLogParser {\r\n  static abilitiesAffectedByHealingIncreases = ABILITIES_AFFECTED_BY_HEALING_INCREASES;\r\n\r\n  static specModules = {\r\n    spellManaCost: SpellManaCost,\r\n    abilities: Abilities,\r\n    lowHealthHealing: LowHealthHealing,\r\n    abilityTracker: AbilityTracker,\r\n\r\n    // Generic healer things\r\n    manaLevelChart: ManaLevelChart,\r\n    manaUsageChart: ManaUsageChart,\r\n\r\n    // Features\r\n    alwaysBeCasting: AlwaysBeCasting,\r\n    checklist: Checklist,\r\n    cooldownThroughputTracker: CooldownThroughputTracker,\r\n    spellUsable: SpellUsable,\r\n    healingReceived: HealingReceived,\r\n    healingTargetTracker: HealingTargetTracker,\r\n\r\n    // Core\r\n    echoOfLightMastery: EchoOfLightMastery,\r\n    fortitudeRaidBuff: FortitudeRaidBuff,\r\n    holyWordsReductionBySpell: HolyWordsReductionBySpell,\r\n    holyWordWastedAmounts: HolyWordWastedAmounts,\r\n\r\n    // Spells\r\n    divineHymn: DivineHymn,\r\n    guardianSpirit: GuardianSpirit,\r\n    holyNova: HolyNova,\r\n    hymnBuffBenefit: HymnBuffBenefit,\r\n    holyWordSanctify: HolyWordSanctify,\r\n    holyWordSerenity: HolyWordSerenity,\r\n    holyWordChastise: HolyWordChastise,\r\n    holyWordSalvation: HolyWordSalvationCooldown,\r\n    statWeights: StatWeights,\r\n    circleOfHealing: CircleOfHealing,\r\n\r\n    spiritOfRedemption: SpiritOfRedemption,\r\n    renew: Renew,\r\n    prayerOfMending: PrayerOfMending,\r\n\r\n    // Talents\r\n    Enlightenment: Talents.t15.Enlightenment,\r\n    TrailOfLight: Talents.t15.TrailOfLight,\r\n    RenewedFaith: Talents.t15.RenewedFaith,\r\n\r\n    AngelicFeather: Talents.t30.AngelicFeather,\r\n    AngelsMercy: Talents.t30.AngelsMercy,\r\n    BodyAndSoul: Talents.t30.BodyAndSoul,\r\n\r\n    GuardianAngel: Talents.t45.GuardianAngel,\r\n    Afterlife: Talents.t45.Afterlife,\r\n    CosmicRipple: Talents.t45.CosmicRipple,\r\n\r\n    Censure: Talents.t60.Censure,\r\n    ShiningForce: Talents.t60.ShiningForce,\r\n    PsychicVoice: Talents.t60.PsychicVoice,\r\n\r\n    SurgeOfLight: Talents.t75.SurgeOfLight,\r\n    PrayerCircle: Talents.t75.PrayerCircle,\r\n    BindingHeal: Talents.t75.BindingHeal,\r\n\r\n    Halo: Talents.t90.Halo,\r\n    Benediction: Talents.t90.Benediction,\r\n    DivineStar: Talents.t90.DivineStar,\r\n\r\n    LightOfTheNaru: Talents.t100.LightOfTheNaaru,\r\n    HolyWordSalvation: Talents.t100.HolyWordSalvation,\r\n    Apotheosis: Talents.t100.Apotheosis,\r\n\r\n    // Mana Tab\r\n    manaTracker: ManaTracker,\r\n    hpmDetails: HealingEfficiencyDetails,\r\n    hpmTracker: HealingEfficiencyTracker,\r\n\r\n    // Conduits\r\n    resonantWords: ResonantWords,\r\n  };\r\n\r\n  generateResults(adjustForDowntime: boolean) {\r\n    const results = super.generateResults(adjustForDowntime);\r\n\r\n    results.tabs = [\r\n      ...results.tabs,\r\n      {\r\n        title: 'Player Log Data',\r\n        url: 'player-log-data',\r\n        render: () => (\r\n          <Panel style={{ padding: '15px 22px 15px 15px' }}>\r\n            <HolyPriestSpreadsheet parser={this} />\r\n          </Panel>\r\n        ),\r\n      },\r\n    ];\r\n    return results;\r\n  }\r\n}\r\n\r\nexport default CombatLogParser;\r\n","/**\r\n * A simple component that shows the spell value in the most plain way possible.\r\n * Use this only as the very last resort.\r\n */\r\nimport React from 'react';\r\n\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport SpellLink from 'common/SpellLink';\r\nimport Spell from 'common/SPELLS/Spell';\r\n\r\ntype Props = {\r\n  spell: Spell;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nconst BoringSpellValueText = ({ spell, children, className }: Props) => (\r\n  <div className={`pad boring-text ${className || ''}`}>\r\n    <label>\r\n      <SpellIcon id={spell.id} /> <SpellLink id={spell.id} icon={false} />\r\n    </label>\r\n    <div className=\"value\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default BoringSpellValueText;\r\n","import Analyzer, { SELECTED_PLAYER, Options } from 'parser/core/Analyzer';\r\nimport EventEmitter from 'parser/core/modules/EventEmitter';\r\nimport Events, { EventType, ClassResources, EnergizeEvent, CastEvent, HealEvent, SpendResourceEvent } from 'parser/core/Events';\r\nimport { Resource } from 'game/RESOURCE_TYPES';\r\n\r\nexport type BuilderObj = {\r\n  generated: number,\r\n  wasted: number,\r\n  casts: number,\r\n}\r\n\r\nexport type SpenderObj = {\r\n  spent: number,\r\n  spentByCast: number[],\r\n  casts: number,\r\n}\r\n\r\ntype ResourceUpdate = {\r\n  timestamp: number | undefined,\r\n  current: number,\r\n  waste: number,\r\n  generated: number,\r\n  used: number,\r\n}\r\n\r\n/**\r\n * This is an 'abstract' implementation of a framework for tracking resource generating/spending.\r\n * Extend it by following the instructions in the TODO comments below\r\n */\r\nclass ResourceTracker extends Analyzer {\r\n  static dependencies = {\r\n    eventEmitter: EventEmitter,\r\n    // Optional dependency for the `resourceCost` prop of events\r\n    // spellResourceCost: SpellResourceCost,\r\n  };\r\n\r\n  protected eventEmitter!: EventEmitter;\r\n\r\n  current = 0;\r\n  resourceUpdates: ResourceUpdate[] = [];\r\n\r\n  // stores resource gained/spent/wasted by ability ID\r\n  buildersObj: {[index: number]: BuilderObj} = {};\r\n  spendersObj: {[index: number]: SpenderObj} = {};\r\n\r\n  // TODO set this to the resource you wish to track constructor.. see the appropriate objects in game/RESOURCE_TYPES\r\n  resource!: Resource;\r\n\r\n  // TODO a classes 'main' resource passes the max along with events, but for other resources this may need to be defined\r\n  maxResource!: number;\r\n\r\n  constructor(options: Options){\r\n    super(options);\r\n    this.addEventListener(Events.energize.to(SELECTED_PLAYER), this.onEnergize);\r\n    this.addEventListener(Events.cast.by(SELECTED_PLAYER), this.onCast);\r\n  }\r\n\r\n  // FIXME implement natural regen\r\n  // TODO if the tracked resource naturally regenerates (like Energy), set this to true and set the parameters of the regeneration in the below fields\r\n  // naturallyRegenerates = false;\r\n  // baseRegenRate; // TODO resource's base regeneration rate in points per second\r\n  // isRegenHasted; // TODO iff true, regeneration rate will be scaled with haste\r\n\r\n  // TODO if you wish an ability to show in results even if it wasn't used, add it using these functions constructor\r\n  initBuilderAbility(spellId: number) {\r\n    this.buildersObj[spellId] = { generated: 0, wasted: 0, casts: 0 };\r\n  }\r\n  initSpenderAbility(spellId: number) {\r\n    this.spendersObj[spellId] = { spent: 0, spentByCast: [], casts: 0 };\r\n  }\r\n\r\n  // BUILDERS - Handled on energize, using the 'resourceChange' field\r\n  onEnergize(event: EnergizeEvent) {\r\n    const spellId = event.ability.guid;\r\n\r\n    if(event.resourceChangeType !== this.resource.id) {\r\n        return;\r\n    }\r\n\r\n    const waste = event.waste;\r\n    const gain = event.resourceChange - waste;\r\n    this._applyBuilder(spellId, gain, waste, this.getResource(event), event.timestamp);\r\n  }\r\n\r\n  // FIXME Track resource drains too, so that the 'current' value can be more accurate\r\n\r\n  // TODO if a resource gain isn't showing as an energize in events, handle it manually by calling this\r\n  /**\r\n   * FIXME solve with a normalizer instead?\r\n   * Applies an energize of the tracked resource type.\r\n   * @param {number} spellId - The spellId to attribute the resource gain to\r\n   * @param {number} amount - The raw amount of resources to gain\r\n   */\r\n  processInvisibleEnergize(spellId: number, amount: number) {\r\n    const maxGain = this.maxResource !== undefined ? this.maxResource - this.current : amount;\r\n    const gain = Math.min(amount, maxGain);\r\n    const waste = Math.max(amount - maxGain, 0);\r\n    this._applyBuilder(spellId, gain, waste);\r\n  }\r\n\r\n  _applyBuilder(spellId: number, gain: number, waste: number,  resource?: ClassResources, timestamp?: number) {\r\n    if (!this.buildersObj[spellId]) {\r\n        this.initBuilderAbility(spellId);\r\n    }\r\n\r\n    this.buildersObj[spellId].wasted += waste;\r\n    this.buildersObj[spellId].generated += gain;\r\n    this.buildersObj[spellId].casts += 1;\r\n\r\n    // resource.amount for an energize is the amount AFTER the energize\r\n    if (resource !== null && resource !== undefined && resource.amount !== undefined) {\r\n      this.current = resource.amount;\r\n      if (resource.max !== undefined) {\r\n        this.maxResource = resource.max; // track changes in max resource, which can happen due to procs / casts\r\n      }\r\n    } else {\r\n      this.current += gain;\r\n    }\r\n\r\n    this.resourceUpdates.push({\r\n      timestamp: timestamp,\r\n      current: this.current,\r\n      waste: waste,\r\n      generated: gain,\r\n      used: 0,\r\n    });\r\n  }\r\n\r\n  // SPENDERS - Handled on cast, using the 'classResources' field\r\n  onCast(event: CastEvent) {\r\n    const spellId = event.ability.guid;\r\n\r\n    if(!this.shouldProcessCastEvent(event)) {\r\n        return;\r\n    }\r\n    const eventResource = this.getResource(event);\r\n\r\n    if(!eventResource){\r\n      return;\r\n    }\r\n\r\n    if (eventResource.max) {\r\n      this.maxResource = eventResource.max; // track changes in max resource, which can happen due to procs / casts\r\n    }\r\n    const cost = this.getReducedCost(event);\r\n\r\n    if (!this.spendersObj[spellId]) {\r\n      this.initSpenderAbility(spellId);\r\n    }\r\n\r\n    if (!cost || cost === 0) {\r\n      return;\r\n    }\r\n\r\n    this.spendersObj[spellId].casts += 1;\r\n    this.spendersObj[spellId].spentByCast.push(cost);\r\n    if(cost > 0) {\r\n      this.spendersObj[spellId].spent += cost;\r\n    }\r\n\r\n    //Re-sync current amount, to update not-tracked gains.\r\n    this.current = eventResource.amount - cost;\r\n\r\n    this.resourceUpdates.push({\r\n      timestamp: event.timestamp,\r\n      current: this.current,\r\n      waste: 0,\r\n      generated: 0,\r\n      used: eventResource.amount,\r\n    });\r\n\r\n    this.triggerSpendEvent(cost, event);\r\n  }\r\n\r\n  // TODO if your spec has an ability cost reduction that doesn't show in events, handle it manually by overriding here. Or extend SpellResourceCost and apply the discount there.\r\n  getReducedCost(event: CastEvent) {\r\n    if (event.resourceCost && event.resourceCost[this.resource.id] !== undefined) {\r\n      return event.resourceCost[this.resource.id];\r\n    }\r\n    return this.getResource(event)?.cost;\r\n  }\r\n\r\n  getResource(event: CastEvent | HealEvent | EnergizeEvent ) {\r\n    if(!event.classResources) {\r\n      return undefined;\r\n    } else {\r\n      return event.classResources.find(r => r.type === this.resource.id);\r\n    }\r\n  }  \r\n\r\n  triggerSpendEvent(spent: number, event: CastEvent) {\r\n\r\n    const fabricatedEvent: SpendResourceEvent = {\r\n      type: EventType.SpendResource,\r\n      timestamp: event.timestamp,\r\n      sourceID: event.sourceID,\r\n      targetID: event.targetID,\r\n      resourceChange: spent,\r\n      resourceChangeType: this.resource.id,\r\n      ability: event.ability,\r\n      __fabricated: true,\r\n    };\r\n\r\n    this.eventEmitter.fabricateEvent(fabricatedEvent, event);\r\n  }\r\n\r\n  shouldProcessCastEvent(event: CastEvent) {\r\n    return Boolean(this.getResource(event));\r\n  }\r\n\r\n  getGeneratedBySpell(spellId: number) {\r\n    return (this.buildersObj[spellId] && this.buildersObj[spellId].generated) || 0;\r\n  }\r\n\r\n  getWastedBySpell(spellId: number) {\r\n    return (this.buildersObj[spellId] && this.buildersObj[spellId].wasted) || 0;\r\n  }\r\n\r\n  getBuilderCastsBySpell(spellId: number) {\r\n    return (this.buildersObj[spellId] && this.buildersObj[spellId].casts) || 0;\r\n  }\r\n\r\n  get generated() {\r\n    return Object.values(this.buildersObj).reduce((acc, spell) => acc + spell.generated, 0);\r\n  }\r\n\r\n  get wasted() {\r\n    return Object.values(this.buildersObj).reduce((acc, spell) => acc + spell.wasted, 0);\r\n  }\r\n\r\n  get spent() {\r\n    return Object.values(this.spendersObj).reduce((acc, spell) => acc + spell.spent, 0);\r\n  }\r\n\r\n  get spendersCasts() {\r\n    return Object.values(this.spendersObj).reduce((acc, spell) => acc + spell.casts, 0);\r\n  }\r\n}\r\n\r\nexport default ResourceTracker;\r\n","import React from 'react';\r\n\r\nimport SpellIcon from 'common/SpellIcon';\r\nimport SpellLink from 'common/SpellLink';\r\nimport Spell from 'common/SPELLS/Spell';\r\n\r\ntype Props = {\r\n  spell: Spell;\r\n  rank: number;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nconst ConduitSpellText = ({ spell, rank, children, className }: Props) => (\r\n  <div className={`pad boring-text ${className || ''}`}>\r\n    <label>\r\n      <SpellIcon id={spell.id} /> <SpellLink id={spell.id} icon={false} /> - Rank {rank}\r\n    </label>\r\n    <div className=\"value\">\r\n      {children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default ConduitSpellText;\r\n","import React from 'react';\r\nimport RESOURCE_TYPES from 'game/RESOURCE_TYPES';\r\n\r\nimport ResourceLink from './ResourceLink';\r\nimport Icon from './Icon';\r\n\r\ninterface Props extends Omit<React.ComponentProps<typeof Icon>, 'id' | 'icon'> {\r\n  id: number;\r\n  noLink?: boolean;\r\n}\r\n\r\nconst ResourceIcon = ({ id, noLink, ...others }: Props) => {\r\n  if (process.env.NODE_ENV === 'development' && !RESOURCE_TYPES[id]) {\r\n    throw new Error(`Unknown spell: ${id}`);\r\n  }\r\n\r\n  const spell = RESOURCE_TYPES[id] || {\r\n    name: 'Spell not recognized',\r\n    icon: 'inv_misc_questionmark',\r\n  };\r\n\r\n  const icon = (\r\n    <Icon\r\n      icon={spell.icon}\r\n      alt={spell.name}\r\n      {...others}\r\n    />\r\n  );\r\n\r\n  if (noLink) {\r\n    return icon;\r\n  }\r\n\r\n  return (\r\n    <ResourceLink id={id} icon={false}>\r\n      {icon}\r\n    </ResourceLink>\r\n  );\r\n};\r\n\r\nexport default ResourceIcon;\r\n","import React, {useEffect, useState} from 'react';\r\n\r\nimport TooltipProvider from 'interface/common/TooltipProvider';\r\n\r\nimport RESOURCE_TYPES from 'game/RESOURCE_TYPES';\r\n\r\nimport ResourceIcon from './ResourceIcon';\r\n\r\ninterface Props {\r\n  id: number;\r\n  children?: React.ReactNode;\r\n  category?: string;\r\n  icon?: boolean,\r\n}\r\n\r\nconst ResourceLink = ({icon = true, ...props}: Props) => {\r\n\r\n  const [elem, setElem] = useState<HTMLAnchorElement | null>(null);\r\n\r\n  useEffect(() => {TooltipProvider.refresh(elem);})\r\n\r\n  const { id, children, category = undefined, ...other } = props;\r\n\r\n  if (process.env.NODE_ENV === 'development' && !children && !RESOURCE_TYPES[id]) {\r\n    throw new Error(`Unknown spell: ${id}`);\r\n  }\r\n\r\n  return (\r\n    <a\r\n      href={TooltipProvider.resource(id)}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className={category}\r\n      ref={elem => {setElem(elem);}}\r\n      {...other}\r\n    >\r\n      {icon && <ResourceIcon id={id} noLink />}{' '}\r\n      {children || RESOURCE_TYPES[id].name}\r\n    </a>\r\n  );\r\n}\r\n\r\nexport default ResourceLink;\r\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ANIMATION_STATE_CLASSES = {\n  animating: 'rah-animating',\n  animatingUp: 'rah-animating--up',\n  animatingDown: 'rah-animating--down',\n  animatingToHeightZero: 'rah-animating--to-height-zero',\n  animatingToHeightAuto: 'rah-animating--to-height-auto',\n  animatingToHeightSpecific: 'rah-animating--to-height-specific',\n  static: 'rah-static',\n  staticHeightZero: 'rah-static--height-zero',\n  staticHeightAuto: 'rah-static--height-auto',\n  staticHeightSpecific: 'rah-static--height-specific'\n};\n\nvar PROPS_TO_OMIT = ['animateOpacity', 'animationStateClasses', 'applyInlineTransitions', 'children', 'contentClassName', 'delay', 'duration', 'easing', 'height', 'onAnimationEnd', 'onAnimationStart'];\n\nfunction omit(obj) {\n  for (var _len = arguments.length, keys = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    keys[_key - 1] = arguments[_key];\n  }\n\n  if (!keys.length) {\n    return obj;\n  }\n\n  var res = {};\n  var objectKeys = Object.keys(obj);\n\n  for (var i = 0; i < objectKeys.length; i++) {\n    var key = objectKeys[i];\n\n    if (keys.indexOf(key) === -1) {\n      res[key] = obj[key];\n    }\n  }\n\n  return res;\n}\n\n// Start animation helper using nested requestAnimationFrames\nfunction startAnimationHelper(callback) {\n  var requestAnimationFrameIDs = [];\n\n  requestAnimationFrameIDs[0] = requestAnimationFrame(function () {\n    requestAnimationFrameIDs[1] = requestAnimationFrame(function () {\n      callback();\n    });\n  });\n\n  return requestAnimationFrameIDs;\n}\n\nfunction cancelAnimationFrames(requestAnimationFrameIDs) {\n  requestAnimationFrameIDs.forEach(function (id) {\n    return cancelAnimationFrame(id);\n  });\n}\n\nfunction isNumber(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n}\n\nfunction isPercentage(height) {\n  // Percentage height\n  return typeof height === 'string' && height.search('%') === height.length - 1 && isNumber(height.substr(0, height.length - 1));\n}\n\nfunction runCallback(callback, params) {\n  if (callback && typeof callback === 'function') {\n    callback(params);\n  }\n}\n\nvar AnimateHeight = function (_React$Component) {\n  _inherits(AnimateHeight, _React$Component);\n\n  function AnimateHeight(props) {\n    _classCallCheck(this, AnimateHeight);\n\n    var _this = _possibleConstructorReturn(this, (AnimateHeight.__proto__ || Object.getPrototypeOf(AnimateHeight)).call(this, props));\n\n    _this.animationFrameIDs = [];\n\n    var height = 'auto';\n    var overflow = 'visible';\n\n    if (isNumber(props.height)) {\n      // If value is string \"0\" make sure we convert it to number 0\n      height = props.height < 0 || props.height === '0' ? 0 : props.height;\n      overflow = 'hidden';\n    } else if (isPercentage(props.height)) {\n      // If value is string \"0%\" make sure we convert it to number 0\n      height = props.height === '0%' ? 0 : props.height;\n      overflow = 'hidden';\n    }\n\n    _this.animationStateClasses = _extends({}, ANIMATION_STATE_CLASSES, props.animationStateClasses);\n\n    var animationStateClasses = _this.getStaticStateClasses(height);\n\n    _this.state = {\n      animationStateClasses: animationStateClasses,\n      height: height,\n      overflow: overflow,\n      shouldUseTransitions: false\n    };\n    return _this;\n  }\n\n  _createClass(AnimateHeight, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var height = this.state.height;\n\n      // Hide content if height is 0 (to prevent tabbing into it)\n      // Check for contentElement is added cause this would fail in tests (react-test-renderer)\n      // Read more here: https://github.com/Stanko/react-animate-height/issues/17\n\n      if (this.contentElement && this.contentElement.style) {\n        this.hideContent(height);\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      var _props = this.props,\n          delay = _props.delay,\n          duration = _props.duration,\n          height = _props.height,\n          onAnimationEnd = _props.onAnimationEnd,\n          onAnimationStart = _props.onAnimationStart;\n\n      // Check if 'height' prop has changed\n\n      if (this.contentElement && height !== prevProps.height) {\n        var _cx;\n\n        // Remove display: none from the content div\n        // if it was hidden to prevent tabbing into it\n        this.showContent(prevState.height);\n\n        // Cache content height\n        this.contentElement.style.overflow = 'hidden';\n        var contentHeight = this.contentElement.offsetHeight;\n        this.contentElement.style.overflow = '';\n\n        // set total animation time\n        var totalDuration = duration + delay;\n\n        var newHeight = null;\n        var timeoutState = {\n          height: null, // it will be always set to either 'auto' or specific number\n          overflow: 'hidden'\n        };\n        var isCurrentHeightAuto = prevState.height === 'auto';\n\n        if (isNumber(height)) {\n          // If value is string \"0\" make sure we convert it to number 0\n          newHeight = height < 0 || height === '0' ? 0 : height;\n          timeoutState.height = newHeight;\n        } else if (isPercentage(height)) {\n          // If value is string \"0%\" make sure we convert it to number 0\n          newHeight = height === '0%' ? 0 : height;\n          timeoutState.height = newHeight;\n        } else {\n          // If not, animate to content height\n          // and then reset to auto\n          newHeight = contentHeight; // TODO solve contentHeight = 0\n          timeoutState.height = 'auto';\n          timeoutState.overflow = null;\n        }\n\n        if (isCurrentHeightAuto) {\n          // This is the height to be animated to\n          timeoutState.height = newHeight;\n\n          // If previous height was 'auto'\n          // set starting height explicitly to be able to use transition\n          newHeight = contentHeight;\n        }\n\n        // Animation classes\n        var animationStateClasses = (0, _classnames2.default)((_cx = {}, _defineProperty(_cx, this.animationStateClasses.animating, true), _defineProperty(_cx, this.animationStateClasses.animatingUp, prevProps.height === 'auto' || height < prevProps.height), _defineProperty(_cx, this.animationStateClasses.animatingDown, height === 'auto' || height > prevProps.height), _defineProperty(_cx, this.animationStateClasses.animatingToHeightZero, timeoutState.height === 0), _defineProperty(_cx, this.animationStateClasses.animatingToHeightAuto, timeoutState.height === 'auto'), _defineProperty(_cx, this.animationStateClasses.animatingToHeightSpecific, timeoutState.height > 0), _cx));\n\n        // Animation classes to be put after animation is complete\n        var timeoutAnimationStateClasses = this.getStaticStateClasses(timeoutState.height);\n\n        // Set starting height and animating classes\n        // We are safe to call set state as it will not trigger infinite loop\n        // because of the \"height !== prevProps.height\" check\n        this.setState({ // eslint-disable-line react/no-did-update-set-state\n          animationStateClasses: animationStateClasses,\n          height: newHeight,\n          overflow: 'hidden',\n          // When animating from 'auto' we first need to set fixed height\n          // that change should be animated\n          shouldUseTransitions: !isCurrentHeightAuto\n        });\n\n        // Clear timeouts\n        clearTimeout(this.timeoutID);\n        clearTimeout(this.animationClassesTimeoutID);\n\n        if (isCurrentHeightAuto) {\n          // When animating from 'auto' we use a short timeout to start animation\n          // after setting fixed height above\n          timeoutState.shouldUseTransitions = true;\n\n          cancelAnimationFrames(this.animationFrameIDs);\n          this.animationFrameIDs = startAnimationHelper(function () {\n            _this2.setState(timeoutState);\n\n            // ANIMATION STARTS, run a callback if it exists\n            runCallback(onAnimationStart, { newHeight: timeoutState.height });\n          });\n\n          // Set static classes and remove transitions when animation ends\n          this.animationClassesTimeoutID = setTimeout(function () {\n            _this2.setState({\n              animationStateClasses: timeoutAnimationStateClasses,\n              shouldUseTransitions: false\n            });\n\n            // ANIMATION ENDS\n            // Hide content if height is 0 (to prevent tabbing into it)\n            _this2.hideContent(timeoutState.height);\n            // Run a callback if it exists\n            runCallback(onAnimationEnd, { newHeight: timeoutState.height });\n          }, totalDuration);\n        } else {\n          // ANIMATION STARTS, run a callback if it exists\n          runCallback(onAnimationStart, { newHeight: newHeight });\n\n          // Set end height, classes and remove transitions when animation is complete\n          this.timeoutID = setTimeout(function () {\n            timeoutState.animationStateClasses = timeoutAnimationStateClasses;\n            timeoutState.shouldUseTransitions = false;\n\n            _this2.setState(timeoutState);\n\n            // ANIMATION ENDS\n            // If height is auto, don't hide the content\n            // (case when element is empty, therefore height is 0)\n            if (height !== 'auto') {\n              // Hide content if height is 0 (to prevent tabbing into it)\n              _this2.hideContent(newHeight); // TODO solve newHeight = 0\n            }\n            // Run a callback if it exists\n            runCallback(onAnimationEnd, { newHeight: newHeight });\n          }, totalDuration);\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      cancelAnimationFrames(this.animationFrameIDs);\n\n      clearTimeout(this.timeoutID);\n      clearTimeout(this.animationClassesTimeoutID);\n\n      this.timeoutID = null;\n      this.animationClassesTimeoutID = null;\n      this.animationStateClasses = null;\n    }\n  }, {\n    key: 'showContent',\n    value: function showContent(height) {\n      if (height === 0) {\n        this.contentElement.style.display = '';\n      }\n    }\n  }, {\n    key: 'hideContent',\n    value: function hideContent(newHeight) {\n      if (newHeight === 0) {\n        this.contentElement.style.display = 'none';\n      }\n    }\n  }, {\n    key: 'getStaticStateClasses',\n    value: function getStaticStateClasses(height) {\n      var _cx2;\n\n      return (0, _classnames2.default)((_cx2 = {}, _defineProperty(_cx2, this.animationStateClasses.static, true), _defineProperty(_cx2, this.animationStateClasses.staticHeightZero, height === 0), _defineProperty(_cx2, this.animationStateClasses.staticHeightSpecific, height > 0), _defineProperty(_cx2, this.animationStateClasses.staticHeightAuto, height === 'auto'), _cx2));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _cx3,\n          _this3 = this;\n\n      var _props2 = this.props,\n          animateOpacity = _props2.animateOpacity,\n          applyInlineTransitions = _props2.applyInlineTransitions,\n          children = _props2.children,\n          className = _props2.className,\n          contentClassName = _props2.contentClassName,\n          delay = _props2.delay,\n          duration = _props2.duration,\n          easing = _props2.easing,\n          id = _props2.id,\n          style = _props2.style;\n      var _state = this.state,\n          height = _state.height,\n          overflow = _state.overflow,\n          animationStateClasses = _state.animationStateClasses,\n          shouldUseTransitions = _state.shouldUseTransitions;\n\n\n      var componentStyle = _extends({}, style, {\n        height: height,\n        overflow: overflow || style.overflow\n      });\n\n      if (shouldUseTransitions && applyInlineTransitions) {\n        componentStyle.transition = 'height ' + duration + 'ms ' + easing + ' ' + delay + 'ms';\n\n        // Include transition passed through styles\n        if (style.transition) {\n          componentStyle.transition = style.transition + ', ' + componentStyle.transition;\n        }\n\n        // Add webkit vendor prefix still used by opera, blackberry...\n        componentStyle.WebkitTransition = componentStyle.transition;\n      }\n\n      var contentStyle = {};\n\n      if (animateOpacity) {\n        contentStyle.transition = 'opacity ' + duration + 'ms ' + easing + ' ' + delay + 'ms';\n        // Add webkit vendor prefix still used by opera, blackberry...\n        contentStyle.WebkitTransition = contentStyle.transition;\n\n        if (height === 0) {\n          contentStyle.opacity = 0;\n        }\n      }\n\n      var componentClasses = (0, _classnames2.default)((_cx3 = {}, _defineProperty(_cx3, animationStateClasses, true), _defineProperty(_cx3, className, className), _cx3));\n\n      // Check if user passed aria-hidden prop\n      var hasAriaHiddenProp = typeof this.props['aria-hidden'] !== 'undefined';\n      var ariaHidden = hasAriaHiddenProp ? this.props['aria-hidden'] : height === 0;\n\n      return _react2.default.createElement(\n        'div',\n        _extends({}, omit.apply(undefined, [this.props].concat(PROPS_TO_OMIT)), {\n          'aria-hidden': ariaHidden,\n          className: componentClasses,\n          id: id,\n          style: componentStyle\n        }),\n        _react2.default.createElement(\n          'div',\n          {\n            className: contentClassName,\n            style: contentStyle,\n            ref: function ref(el) {\n              return _this3.contentElement = el;\n            }\n          },\n          children\n        )\n      );\n    }\n  }]);\n\n  return AnimateHeight;\n}(_react2.default.Component);\n\nvar heightPropType = function heightPropType(props, propName, componentName) {\n  var value = props[propName];\n\n  if (typeof value === 'number' && value >= 0 || isPercentage(value) || value === 'auto') {\n    return null;\n  }\n\n  return new TypeError('value \"' + value + '\" of type \"' + (typeof value === 'undefined' ? 'undefined' : _typeof(value)) + '\" is invalid type for ' + propName + ' in ' + componentName + '. ' + 'It needs to be a positive number, string \"auto\" or percentage string (e.g. \"15%\").');\n};\n\nAnimateHeight.propTypes = {\n  'aria-hidden': _propTypes2.default.bool,\n  animateOpacity: _propTypes2.default.bool,\n  animationStateClasses: _propTypes2.default.object,\n  applyInlineTransitions: _propTypes2.default.bool,\n  children: _propTypes2.default.any.isRequired,\n  className: _propTypes2.default.string,\n  contentClassName: _propTypes2.default.string,\n  delay: _propTypes2.default.number,\n  duration: _propTypes2.default.number,\n  easing: _propTypes2.default.string,\n  height: heightPropType,\n  id: _propTypes2.default.string,\n  onAnimationEnd: _propTypes2.default.func,\n  onAnimationStart: _propTypes2.default.func,\n  style: _propTypes2.default.object\n};\n\nAnimateHeight.defaultProps = {\n  animateOpacity: false,\n  animationStateClasses: ANIMATION_STATE_CLASSES,\n  applyInlineTransitions: true,\n  duration: 250,\n  delay: 0,\n  easing: 'ease',\n  style: {}\n};\n\nexports.default = AnimateHeight;","import RESOURCE_TYPES from 'game/RESOURCE_TYPES';\r\nimport ResourceTracker from 'parser/shared/modules/resources/resourcetracker/ResourceTracker';\r\nimport { Options } from 'parser/core/Analyzer';\r\n\r\nclass ManaTracker extends ResourceTracker {\r\n  constructor(options: Options) {\r\n    super(options);\r\n    this.resource = RESOURCE_TYPES.MANA;\r\n    this.maxResource = 50000;\r\n  }\r\n\r\n  maxResource: number;\r\n}\r\n\r\nexport default ManaTracker;\r\n","import AbilityTracker from 'parser/shared/modules/AbilityTracker';\r\nimport HealingDone from 'parser/shared/modules/throughput/HealingDone';\r\nimport DamageDone from 'parser/shared/modules/throughput/DamageDone';\r\nimport CastEfficiency from 'parser/shared/modules/CastEfficiency';\r\nimport CoreAbilities from 'parser/core/modules/Abilities';\r\nimport Analyzer from 'parser/core/Analyzer';\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport Spell from 'common/SPELLS/Spell';\r\n\r\nimport ManaTracker from './ManaTracker';\r\nimport { SpellbookAbility } from '../modules/Ability';\r\n\r\nexport interface SpellInfoDetails {\r\n  spell: Spell;\r\n  casts: number;\r\n  healingHits: number;\r\n  healingDone: number;\r\n  overhealingDone: number;\r\n  damageHits: number;\r\n  damageDone: number;\r\n  damageAbsorbed: number;\r\n  manaSpent: number;\r\n  manaGained: ManaTracker;\r\n  percentOverhealingDone: number;\r\n  percentHealingDone: number;\r\n  percentDamageDone: number;\r\n  manaPercentSpent: number;\r\n  hpm: number;\r\n  dpm: number;\r\n  timeSpentCasting: number;\r\n  percentTimeSpentCasting: number;\r\n  hpet: number;\r\n  dpet: number;\r\n}\r\n\r\nclass HealingEfficiencyTracker extends Analyzer {\r\n  static dependencies = {\r\n    manaTracker: ManaTracker,\r\n    abilityTracker: AbilityTracker,\r\n    healingDone: HealingDone,\r\n    damageDone: DamageDone,\r\n    castEfficiency: CastEfficiency,\r\n    abilities: CoreAbilities,\r\n  };\r\n\r\n  protected manaTracker!: ManaTracker;\r\n  protected abilityTracker!: AbilityTracker;\r\n  protected healingDone!: HealingDone;\r\n  protected damageDone!: DamageDone;\r\n  protected castEfficiency!: CastEfficiency;\r\n  protected abilities!: CoreAbilities;\r\n\r\n  getSpellStats(spellId: number, healingSpellIds: number[] | null = null) {\r\n    let spellInfo: SpellInfoDetails = {\r\n      spell: SPELLS[spellId],\r\n      casts: 0,\r\n      healingHits: 0,\r\n      healingDone: 0,\r\n      overhealingDone: 0,\r\n      damageHits: 0,\r\n      damageDone: 0,\r\n      damageAbsorbed: 0,\r\n      manaSpent: 0,\r\n      manaGained: this.manaTracker,\r\n      percentOverhealingDone: 0,\r\n      percentHealingDone: 0,\r\n      percentDamageDone: 0,\r\n      manaPercentSpent: 0,\r\n      hpm: 0,\r\n      dpm: 0,\r\n      timeSpentCasting: 0,\r\n      percentTimeSpentCasting: 0,\r\n      hpet: 0,\r\n      dpet: 0,\r\n    };\r\n\r\n    const ability = this.abilityTracker.getAbility(spellId);\r\n\r\n    spellInfo.casts = ability.casts || 0;\r\n    spellInfo.healingHits = ability.healingHits || 0;\r\n    spellInfo.healingDone = (ability.healingEffective || 0) + (ability.healingAbsorbed || 0);\r\n    spellInfo.overhealingDone = ability.healingOverheal || 0;\r\n\r\n    if (healingSpellIds) {\r\n      for (const healingSpellId in healingSpellIds) {\r\n        const healingAbility = this.abilityTracker.getAbility(healingSpellIds[healingSpellId]);\r\n\r\n        spellInfo.healingHits += healingAbility.healingHits || 0;\r\n        spellInfo.healingDone += (healingAbility.healingEffective || 0) + (healingAbility.healingAbsorbed || 0);\r\n        spellInfo.overhealingDone += healingAbility.healingOverheal || 0;\r\n      }\r\n    }\r\n\r\n    spellInfo.damageHits = ability.damageHits || 0;\r\n    spellInfo.damageDone = ability.damageEffective || 0;\r\n    spellInfo.damageAbsorbed = ability.damageAbsorbed || 0;\r\n\r\n    const spenders = this.manaTracker.spendersObj as {\r\n      [spellId: number]: {\r\n        spent: number;\r\n        spentByCast: number[];\r\n        casts: number\r\n      }\r\n    };\r\n    spellInfo.manaSpent = spenders[spellId] ? spenders[spellId].spent : 0;\r\n\r\n    // All of the following information can be derived from the data in SpellInfo.\r\n    // Now we can add custom logic for spells.\r\n    spellInfo = this.getCustomSpellStats(spellInfo, spellId, healingSpellIds);\r\n\r\n    spellInfo.percentOverhealingDone = spellInfo.overhealingDone / ((spellInfo.healingDone || 0) + spellInfo.overhealingDone) || 0;\r\n    spellInfo.percentHealingDone = spellInfo.healingDone / this.healingDone.total.regular || 0;\r\n    spellInfo.percentDamageDone = spellInfo.damageDone / this.damageDone.total.regular || 0;\r\n    spellInfo.manaPercentSpent = spellInfo.manaSpent / this.manaTracker.spent;\r\n\r\n    spellInfo.hpm = (spellInfo.healingDone / spellInfo.manaSpent) | 0;\r\n    spellInfo.dpm = (spellInfo.damageDone / spellInfo.manaSpent) | 0;\r\n\r\n    spellInfo.timeSpentCasting = this.castEfficiency.getTimeSpentCasting(spellId).timeSpentCasting + this.castEfficiency.getTimeSpentCasting(spellId).gcdSpent;\r\n    spellInfo.percentTimeSpentCasting = spellInfo.timeSpentCasting / this.owner.fightDuration;\r\n\r\n    spellInfo.hpet = (spellInfo.healingDone / spellInfo.timeSpentCasting) | 0;\r\n    spellInfo.dpet = (spellInfo.damageDone / spellInfo.timeSpentCasting) | 0;\r\n\r\n    return spellInfo;\r\n  }\r\n\r\n  getCustomSpellStats(spellInfo: SpellInfoDetails, spellId: number, healingSpellIds: number[] | null) {\r\n    // Overwrite this function to add specific logic for spells.\r\n    return spellInfo;\r\n  }\r\n\r\n  getAllSpellStats(includeCooldowns = false) {\r\n    const spells: { [spellId: number]: SpellInfoDetails } = {};\r\n    let topHpm = 0;\r\n    let topDpm = 0;\r\n    let topHpet = 0;\r\n    let topDpet = 0;\r\n\r\n    for (const index in this.abilities.abilities) {\r\n      const ability = this.abilities.abilities[index] as unknown as SpellbookAbility;\r\n\r\n      if (ability.spell instanceof Array) {\r\n        continue;\r\n      }\r\n      if (ability.spell && ability.spell.manaCost && ability.spell.manaCost > 0) {\r\n        if (includeCooldowns || ability.category !== 'Cooldown') {\r\n          spells[ability.spell.id] = this.getSpellStats(ability.spell.id, ability.healSpellIds);\r\n\r\n          topHpm = Math.max(topHpm, spells[ability.spell.id].hpm);\r\n          topDpm = Math.max(topDpm, spells[ability.spell.id].dpm);\r\n          topHpet = Math.max(topHpet, spells[ability.spell.id].hpet);\r\n          topDpet = Math.max(topDpet, spells[ability.spell.id].dpet);\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      spells,\r\n      topHpm,\r\n      topDpm,\r\n      topHpet,\r\n      topDpet,\r\n    };\r\n  }\r\n}\r\n\r\nexport default HealingEfficiencyTracker;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport StatisticBox from './StatisticBox';\r\n\r\nexport { STATISTIC_ORDER } from './StatisticBox';\r\n\r\n/**\r\n * @deprecated Use `interface/statistic/Statistic` instead.\r\n */\r\nclass LazyLoadStatisticBox extends React.PureComponent {\r\n  static propTypes = {\r\n    loader: PropTypes.func.isRequired,\r\n    value: PropTypes.node.isRequired,\r\n    children: PropTypes.node,\r\n  };\r\n  static contextTypes = {\r\n    updateResults: PropTypes.func.isRequired,\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      loaded: false,\r\n      loading: false,\r\n    };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick() {\r\n    if (this.state.loaded) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      loading: true,\r\n    });\r\n    this.props.loader().then((result) => {\r\n      this.setState({\r\n        loading: false,\r\n        loaded: true,\r\n      });\r\n      this.context.updateResults();\r\n      return result;\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { value, children, ...others } = this.props;\r\n    delete others.loader;\r\n    delete others.children;\r\n\r\n    return (\r\n      <StatisticBox\r\n        onClick={this.handleClick}\r\n        value={this.state.loaded ? value : (this.state.loading ? 'Loading...' : 'Click to load')}\r\n        style={{ cursor: this.state.loaded ? undefined : 'pointer' }}\r\n        {...others}\r\n      >\r\n        {this.state.loaded ? children : null}\r\n      </StatisticBox>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LazyLoadStatisticBox;\r\n","import React from 'react';\r\n\r\nimport colorForPerformance from 'common/colorForPerformance';\r\n\r\ninterface Props {\r\n  percent: number;\r\n}\r\n\r\nconst PerformanceBar = ({ percent }: Props) => (\r\n  <div className=\"performance-bar-container\">\r\n    <div\r\n      className=\"performance-bar\"\r\n      style={{\r\n        width: `${percent * 100}%`,\r\n        transition: 'background-color 800ms',\r\n        backgroundColor: colorForPerformance(percent),\r\n      }}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default PerformanceBar;\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAAuCAYAAACCq/96AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAAPKSURBVGhD7ZtLSBRxHMcttegQPYhKKCii94PeWVD0Lo+uVFoQRJck9BAF+WAJDS8FXUItzdVMzQ5ejO5B++jhW7e3eggCL+2641p0+Pf9zf5n3V3/7u6sO40j84EPiLM7/vbD/GcWdzaFMXYMZkV4Bm6EC1NMwgmJlDU+VNfs/179UvZbZbvUb20ZfXelxuvIqdRSPko0ymEVrIaP4GNYA2vhE24dtMF62ACfwkb4DDbBZtgCn3Nb4QsVBlBi+YdsjWPuuyxUaeAO83XfYF7XJYYXppkeh6WdjyPCCpnODsEAcqzhBltkLEU5Ws8tzaN57TltfKRQiqDoBfxvJ4KNDzdViUKFStGk3tuIlid+scnSbqFlolAARcPrYWiw+gZRpEiD0ZwXxC82CWJpOvhYRAkUDa+HE8H8n+89nBToY4VES0RTHZb+BIL9grR09TDAqNNS4uu+GR7s0/2vfLNmIE5RAsE6oL5QMBqWlpsZLA6UYF7neSb1lZrBYhEMRuKELkczg01NWDDSmcskd8UXvlkzZk8wGtyZ18U3a8bsCmbP0XwwwwbTCzOYSowcTJfBphGsUCeDGCmYXv6GQcxgsTWDqdQMplLDBvsLR3QyiJGCaT5XPJjBVGIGU4kug3k7rpWZwVQgucsfeF0XzWDx4h+sqR3tyA/7FMoMFgX/UL2N/rs7+v4qYp0zg8WCPm2XBsqY1FvMvG8vm8FiodyeQNGUWxGMHiwjijIjr7MzEnVssLZVDuYuZ1K/lfk6C5jHmeviuyYSmUtLg4gGi6WMcrKOJp2jKErwM0+BgaVZxPBW4wNjLI3vPpG5tHLiVgGgaTCSoolChSrfJdRX3INgi+Ec7H7GBlsOe6DogVMpI4ozlfFEG//RVoRYm+E87D6RubQyLBihdjgZUZho+jqvC0ORf36+siIU3dx3BK6Bc/EnZkq0ScEINcPJiKLE0tdVGC0WeRbugysgLc2ZEE0YTDWeN5b8yCAee46bb54ShNgBlUCRnoZ0lNHSXAQp2uwg0WAEQuyCkbHo6KJgR+EeuBou4E8xPtMJRiCGEo1CkcrPJ+EhuAkugan8KcZmusEIxNgPKdApqESj7wkoR9kqmM4fbmySFCwV7oSH4XFIsSgaLU363Va4FBr/XJaMYARipMMtMBPSkUWxKBoddQfgWmj8b6UkKxiBIGlwHdwN6SpJ0U7Ag5BiroTGvgB4XdmZHrulNFK+WTUIQsszA26HdLRRrL2QgtEVk95mzI7zWbJAkLlwGdwAt0E6h62HdPKnK+Z8qNP5LCXlH/EZJ5PjYeR7AAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport { formatNumber, formatPercentage, formatDuration } from 'common/format';\r\nimport Toggle from 'react-toggle';\r\nimport PerformanceBar from 'interface/PerformanceBar';\r\nimport SpellLink from 'common/SpellLink';\r\nimport { TooltipElement } from 'common/Tooltip';\r\nimport HolyPriestHealingEfficiencyTracker from 'parser/priest/holy/modules/features/HolyPriestHealingEfficiencyTracker';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport HealingEfficiencyTracker, { SpellInfoDetails } from './HealingEfficiencyTracker';\r\n\r\nexport interface Props {\r\n  tracker: HealingEfficiencyTracker | HolyPriestHealingEfficiencyTracker;\r\n}\r\nexport interface State {\r\n  showHealing: boolean;\r\n  detailedView: boolean;\r\n  showCooldowns: boolean;\r\n  showEchoOfLight?: boolean;\r\n}\r\n\r\nclass HealingEfficiencyBreakdown extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showHealing: true,\r\n      detailedView: false,\r\n      showCooldowns: false,\r\n    };\r\n  }\r\n\r\n  HealingEfficiencyTable = (props: Props) => {\r\n    const { tracker } = props;\r\n    const { spells, topHpm, topDpm, topHpet, topDpet } = tracker.getAllSpellStats(this.state.showCooldowns);\r\n\r\n    const spellArray = Object.values(spells);\r\n\r\n    spellArray.sort((a, b) => {\r\n      if (this.state.showHealing) {\r\n        if (a.hpm < b.hpm) {\r\n          return 1;\r\n        } else if (a.hpm > b.hpm) {\r\n          return -1;\r\n        }\r\n      } else {\r\n        if (a.dpm < b.dpm) {\r\n          return 1;\r\n        } else if (a.dpm > b.dpm) {\r\n          return -1;\r\n        }\r\n      }\r\n\r\n      return 0;\r\n    });\r\n\r\n    const spellRows = spellArray.map((spellDetail => {\r\n      if (spellDetail.casts > 0) {\r\n        return this.HealingEfficiencySpellRow(spellDetail, topHpm, topDpm, topHpet, topDpet);\r\n      }\r\n      return null;\r\n    }));\r\n\r\n    return <>{spellRows}</>;\r\n  };\r\n\r\n  HealingEfficiencySpellRow = (spellDetail: SpellInfoDetails, topHpm: number, topDpm: number, topHpet: number, topDpet: number) => (\r\n    <tr key={spellDetail.spell.id}>\r\n      <td>\r\n        <SpellLink id={spellDetail.spell.id} />\r\n      </td>\r\n      {this.state.detailedView ? this.DetailView(spellDetail) : this.BarView(spellDetail, topHpm, topDpm, topHpet, topDpet)}\r\n    </tr>\r\n  );\r\n\r\n  BarHeader = () => (\r\n    <>\r\n      <Trans render=\"th\" id=\"shared.healingEfficiency.tableHeader.manaSpent\">Mana Spent</Trans>\r\n      {this.state.showHealing && (\r\n        <>\r\n          <th colSpan={2} className=\"text-center\"><Trans id=\"common.stat.healingPerMana\">Healing per mana spent</Trans></th>\r\n          <th colSpan={2} className=\"text-center\">\r\n            <TooltipElement content={<Trans id=\"common.stat.healingPerExecutionTime.long\">Healing per second spent casting the spell, including GCD wait time.</Trans>}>\r\n              <Trans id=\"common.stat.healingPerExecutionTime\">Healing per second spent casting</Trans>\r\n            </TooltipElement>\r\n          </th>\r\n        </>\r\n      )}\r\n      {!this.state.showHealing && (\r\n        <>\r\n          <th colSpan={2} className=\"text-center\"><Trans id=\"common.stat.damagePerMana\">Damage per mana spent</Trans></th>\r\n          <th colSpan={2} className=\"text-center\"><Trans id=\"common.stat.damagePerExecutionTime.long\">Damage per second spent casting the spell</Trans></th>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n\r\n\r\n  BarView = (spellDetail: SpellInfoDetails, topHpm: number, topDpm: number, topHpet: number, topDpet: number) => {\r\n    const hasHealing = spellDetail.healingDone;\r\n    const hasDamage = spellDetail.damageDone > 0;\r\n    const barWidth = 20;\r\n\r\n    return (\r\n      <>\r\n        <td>\r\n          {formatNumber(spellDetail.manaSpent)}\r\n          {' (' + formatPercentage(spellDetail.manaPercentSpent) + '%)'}\r\n        </td>\r\n        {this.state.showHealing && (\r\n          <>\r\n            <td className=\"text-right\">{hasHealing ? formatNumber(spellDetail.hpm) : '-'}</td>\r\n            <td width={barWidth + '%'}><PerformanceBar percent={spellDetail.hpm / topHpm} /></td>\r\n\r\n            <td className=\"text-right\">{hasHealing ? formatNumber(spellDetail.hpet * 1000) : '-'}</td>\r\n            <td width={barWidth + '%'}><PerformanceBar percent={(spellDetail.hpet / topHpet)} /></td>\r\n          </>\r\n        )}\r\n        {!this.state.showHealing && (\r\n          <>\r\n            <td className=\"text-right\">{hasDamage ? formatNumber(spellDetail.dpm) : '-'}</td>\r\n            <td width={barWidth + '%'}><PerformanceBar percent={spellDetail.dpm / topDpm} /></td>\r\n\r\n            <td className=\"text-right\">{hasDamage ? formatNumber(spellDetail.dpet * 1000) : '-'}</td>\r\n            <td width={barWidth + '%'}><PerformanceBar percent={(spellDetail.dpet / topDpet)} /></td>\r\n          </>\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  DetailHeader = () => (\r\n    <>\r\n      <th>\r\n        <TooltipElement content={<Trans id=\"shared.healingEfficiency.tableHeader.casts.tooltip\">Total Casts (Number of targets hit)</Trans>}><Trans id=\"shared.healingEfficiency.tableHeader.casts\">Casts</Trans></TooltipElement>\r\n      </th>\r\n      <Trans render=\"th\" id=\"shared.healingEfficiency.tableHeader.manaSpent\">Mana Spent</Trans>\r\n      <Trans render=\"th\" id=\"shared.healingEfficiency.tableHeader.timeSpent\">Time Spent</Trans>\r\n      {this.state.showHealing && (\r\n        <>\r\n          <Trans render=\"th\" id=\"shared.healingEfficiency.tableHeader.healingDone\">Healing Done</Trans>\r\n          <Trans render=\"th\" id=\"shared.healingEfficiency.tableHeader.overhealingDone\">Overhealing</Trans>\r\n          <th>\r\n            <TooltipElement content={<Trans id=\"common.stat.healingPerMana.long\">Healing per mana spent casting the spell</Trans>}>\r\n              <Trans id=\"common.stat.healingPerMana.short\">HPM</Trans>\r\n            </TooltipElement>\r\n          </th>\r\n          <th>\r\n            <TooltipElement content={<Trans id=\"common.stat.healingPerExecutionTime.long\">Healing per second spent casting the spell, including GCD wait time.</Trans>}>\r\n              <Trans id=\"common.stat.healingPerExecutionTime.short\">HPET</Trans>\r\n            </TooltipElement>\r\n          </th>\r\n        </>\r\n      )}\r\n      {!this.state.showHealing && (\r\n        <>\r\n          <Trans render=\"th\" id=\"shared.healingEfficiency.tableHeader.damageDone\">Damage Done</Trans>\r\n          <th>\r\n            <TooltipElement content={<Trans id=\"common.stat.damagePerMana.long\">Damage per mana spent casting the spell</Trans>}>\r\n              <Trans id=\"common.stat.damagePerMana.short\">DPM</Trans>\r\n            </TooltipElement>\r\n          </th>\r\n          <th>\r\n            <TooltipElement content={<Trans id=\"common.stat.damagePerExecutionTime.long\">Damage per second spent casting the spell</Trans>}>\r\n              <Trans id=\"common.stat.damagePerExecutionTime.short\">DPET</Trans>\r\n            </TooltipElement>\r\n          </th>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n\r\n  DetailView = (spellDetail: SpellInfoDetails) => {\r\n    const hasHealing = spellDetail.healingDone;\r\n    const hasOverhealing = spellDetail.healingDone > 0 || spellDetail.overhealingDone > 0;\r\n    const hasDamage = spellDetail.damageDone > 0;\r\n\r\n    return (\r\n      <>\r\n        <td>{spellDetail.casts} ({this.state.showHealing ? Math.floor(spellDetail.healingHits) : Math.floor(spellDetail.damageHits)})</td>\r\n        <td>\r\n          {formatNumber(spellDetail.manaSpent)}\r\n          {' (' + formatPercentage(spellDetail.manaPercentSpent) + '%)'}\r\n        </td>\r\n        <td>{spellDetail.timeSpentCasting !== 0 ? (formatDuration(spellDetail.timeSpentCasting / 1000) + ' (' + formatPercentage(spellDetail.percentTimeSpentCasting) + '%)') : '-'}</td>\r\n        {this.state.showHealing && (\r\n          <>\r\n            <td>\r\n              {hasHealing ? formatNumber(spellDetail.healingDone) : '-'}\r\n              {hasHealing ? ' (' + formatPercentage(spellDetail.percentHealingDone) + '%)' : ''}\r\n            </td>\r\n            <td>\r\n              {hasOverhealing ? formatNumber(spellDetail.overhealingDone) : '-'}\r\n              {hasOverhealing ? ' (' + formatPercentage(spellDetail.percentOverhealingDone) + '%)' : ''}\r\n            </td>\r\n            <td>{hasHealing ? formatNumber(spellDetail.hpm) : '-'}</td>\r\n            <td>{hasHealing ? formatNumber(spellDetail.hpet * 1000) : '-'}</td>\r\n          </>\r\n        )}\r\n        {!this.state.showHealing && (\r\n          <>\r\n            <td>\r\n              {hasDamage ? formatNumber(spellDetail.damageDone) : '-'}\r\n              {hasDamage ? ' (' + formatPercentage(spellDetail.percentDamageDone) + '%)' : ''}\r\n            </td>\r\n            <td>{hasDamage ? formatNumber(spellDetail.dpm) : '-'}</td>\r\n            <td>{hasDamage ? formatNumber(spellDetail.dpet * 1000) : '-'}</td>\r\n          </>\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { tracker } = this.props;\r\n\r\n    return (\r\n      <>\r\n        <div className=\"pad\">\r\n          <div className=\"pull-left\">\r\n            <div className=\"toggle-control pull-right\" style={{ marginRight: '.5em' }}>\r\n              <Toggle\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={event => this.setState({ detailedView: event.target.checked })}\r\n                id=\"detailed-toggle\"\r\n              />\r\n              <label htmlFor=\"detailed-toggle\" style={{ marginLeft: '0.5em' }}>\r\n                <Trans id=\"shared.healingEfficiency.toggle.detailed\">Detailed View</Trans>\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div className=\"pull-right\">\r\n            <div className=\"toggle-control pull-left\" style={{ marginLeft: '.5em', marginRight: '.5em' }}>\r\n              <Toggle\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={event => this.setState({ showCooldowns: event.target.checked })}\r\n                id=\"cooldown-toggle\"\r\n              />\r\n              <label htmlFor=\"cooldown-toggle\" style={{ marginLeft: '0.5em' }}>\r\n                <Trans id=\"shared.healingEfficiency.toggle.cooldowns\">Show Cooldowns</Trans>\r\n              </label>\r\n            </div>\r\n            <div className=\"toggle-control pull-left\" style={{ marginLeft: '.5em' }}>\r\n              <label htmlFor=\"healing-toggle\" style={{ marginLeft: '0.5em', marginRight: '1em' }}>\r\n                <Trans id=\"shared.healingEfficiency.toggle.damage\">Show Damage</Trans>\r\n              </label>\r\n              <Toggle\r\n                defaultChecked\r\n                icons={false}\r\n                onChange={event => this.setState({ showHealing: event.target.checked })}\r\n                id=\"healing-toggle\"\r\n              />\r\n              <label htmlFor=\"healing-toggle\" style={{ marginLeft: '0.5em' }}>\r\n                <Trans id=\"shared.healingEfficiency.toggle.healing\">Show Healing</Trans>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <Trans render=\"th\" id=\"common.ability\">Ability</Trans>\r\n              {this.state.detailedView ? <this.DetailHeader /> : <this.BarHeader />}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <this.HealingEfficiencyTable tracker={tracker} />\r\n          </tbody>\r\n        </table>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HealingEfficiencyBreakdown;\r\n","/**\r\n * @deprecated Use `interface/statistic/StatisticGroup` instead.\r\n */\r\nconst StatisticWrapper = props => props.children;\r\n\r\nexport default StatisticWrapper;\r\n","import SPELLS from 'common/SPELLS/index';\r\n\r\n/*\r\n * Fields:\r\n * int: spell scales with Intellect\r\n * crit: spell scales with (is able to or procced from) Critical Strike\r\n * hasteHpm: spell does more healing due to Haste, e.g. HoTs that gain more ticks\r\n * hasteHpct: spell can be cast more frequently due to Haste, basically any spell except for non haste scaling CDs\r\n * mastery: spell is boosted by Mastery\r\n * masteryStack: spell's HoT counts as a Mastery Stack\r\n * vers: spell scales with Versatility\r\n * multiplier: spell scales with whatever procs it, should be ignored for purpose of weights and for 'total healing' number\r\n * ignored: spell should be ignored for purpose of stat weights\r\n */\r\n\r\n// This only works with actual healing events; casts are not recognized.\r\nexport default {\r\n  [SPELLS.LEECH.id]: { // procs a percent of all your healing, so we ignore for weights and total healing\r\n    multiplier: true,\r\n  },\r\n  [SPELLS.HEALTHSTONE.id]: {\r\n    int: false,\r\n    crit: false,\r\n    hasteHpct: false,\r\n    mastery: false,\r\n    vers: true, // confirmed\r\n  },\r\n  [SPELLS.MARK_OF_THE_ANCIENT_PRIESTESS.id]: {\r\n    int: false,\r\n    crit: true,\r\n    hasteHpct: false,\r\n    mastery: false,\r\n    vers: true,\r\n  },\r\n};\r\n","import React from 'react';\r\n\r\nimport InformationIcon from 'interface/icons/Information';\r\n\r\nimport SPELLS from 'common/SPELLS/index';\r\nimport Tooltip, { TooltipElement } from 'common/Tooltip';\r\nimport { formatNumber } from 'common/format';\r\nimport { calculatePrimaryStat, calculateSecondaryStatDefault } from 'common/stats';\r\nimport Analyzer, { SELECTED_PLAYER, SELECTED_PLAYER_PET } from 'parser/core/Analyzer';\r\nimport Events, { EventType } from 'parser/core/Events';\r\nimport HIT_TYPES from 'game/HIT_TYPES';\r\nimport HealingValue from 'parser/shared/modules/HealingValue';\r\nimport DamageValue from 'parser/shared/modules/DamageValue';\r\nimport CritEffectBonus from 'parser/shared/modules/helpers/CritEffectBonus';\r\nimport StatTracker from 'parser/shared/modules/StatTracker';\r\nimport { STATISTIC_ORDER } from 'interface/others/StatisticBox';\r\nimport StatisticWrapper from 'interface/others/StatisticWrapper';\r\nimport InfoIcon from 'interface/icons/Info';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport CORE_SPELL_INFO from './SpellInfo';\r\nimport STAT, { getClassNameColor, getIcon, getName, getNameTranslated } from './STAT';\r\nimport QELiveLogo from './images/QE-Logo-New-Small.png';\r\n\r\nconst DEBUG = false;\r\n\r\n/**\r\n * This is currently completely focussed on Healer stat weights but it should be relatively easy to modify it to work for a DPS, it just requires some work. The only reason no effort was put towards this is that we currently have no DPS interested in implementing this so it would be wasted time. If you do want to implement stat weights for a DPS this should provide you with a very good basis.\r\n * @property {CritEffectBonus} critEffectBonus\r\n * @property {StatTracker} statTracker\r\n */\r\nclass BaseHealerStatValues extends Analyzer {\r\n  static dependencies = {\r\n    critEffectBonus: CritEffectBonus,\r\n    statTracker: StatTracker,\r\n  };\r\n\r\n  /**\r\n   * QE Live Link Setter\r\n   * As of right now this is only enabled for MW, Resto Druid, and Holy Pally\r\n   * Unless you talk to Voulk, the creator of QElive, Do not flip the switch for other healers\r\n   */\r\n  qeLive = false;\r\n\r\n  // region Spell info\r\n\r\n  // We assume unlisted spells scale with vers only (this will mostly be trinkets)\r\n  fallbackSpellInfo = {\r\n    int: false,\r\n    crit: true,\r\n    hasteHpm: false,\r\n    hasteHpct: false,\r\n    mastery: false,\r\n    vers: true,\r\n  };\r\n  // This will contain shared settings for things like trinkets and Leech\r\n  sharedSpellInfo = CORE_SPELL_INFO;\r\n  // This is for spec specific implementations to override. It gets priority over defaultSpellInfo.\r\n  spellInfo = {};\r\n\r\n  mentioned = [];\r\n  _getSpellInfo(event) {\r\n    const spellId = event.ability.guid;\r\n\r\n    const specSpecific = this.spellInfo[spellId];\r\n    if (specSpecific) {\r\n      return specSpecific;\r\n    }\r\n    const shared = this.sharedSpellInfo[spellId];\r\n    if (shared) {\r\n      return shared;\r\n    }\r\n\r\n    if (process.env.NODE_ENV === 'development') {\r\n      if (!this.mentioned.includes(spellId)) {\r\n        console.warn(`Missing spell definition: ${spellId}: ${event.ability.name}, using fallback:`, this.fallbackSpellInfo);\r\n        this.mentioned.push(spellId);\r\n      }\r\n    }\r\n\r\n    return this.fallbackSpellInfo;\r\n  }\r\n\r\n  // endregion\r\n\r\n  totalAdjustedHealing = 0; // total healing after excluding 'multiplier' spells like Leech / Velens\r\n\r\n  // These are the total healing that would be gained if their respective stats ratings were increased by one.\r\n  totalOneInt = 0;\r\n  totalOneCrit = 0;\r\n  totalOneHasteHpct = 0;\r\n  totalOneHasteHpm = 0;\r\n  totalOneMastery = 0;\r\n  totalOneVers = 0; // from healing increase only\r\n  totalOneVersDr = 0; // from damage reduced only\r\n  totalOneLeech = 0;\r\n\r\n  playerHealthMissing = 0;\r\n\r\n  scaleWeightsWithHealth = false;\r\n\r\n  constructor(options){\r\n    super(options);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER), this.onHeal);\r\n    this.addEventListener(Events.heal.by(SELECTED_PLAYER_PET), this.onHeal);\r\n    this.addEventListener(Events.absorbed.by(SELECTED_PLAYER), this.onAbsorb);\r\n    this.addEventListener(Events.absorbed.by(SELECTED_PLAYER_PET), this.onAbsorb);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER), this.onRemoveBuff);\r\n    this.addEventListener(Events.removebuff.by(SELECTED_PLAYER_PET), this.onRemoveBuff);\r\n    this.addEventListener(Events.heal.to(SELECTED_PLAYER), this.onHealTaken);\r\n    this.addEventListener(Events.damage.to(SELECTED_PLAYER), this.onDamageTaken);\r\n    this.addEventListener(Events.fightend, this.onFightend);\r\n  }\r\n\r\n  onHeal(event) {\r\n    const healVal = new HealingValue(event.amount, event.absorbed, event.overheal);\r\n    this._handleHealEvent(event, healVal);\r\n  }\r\n  onAbsorb(event) {\r\n    const healVal = new HealingValue(event.amount, 0, 0);\r\n    this._handleHealEvent(event, healVal);\r\n  }\r\n  onRemoveBuff(event) {\r\n    if (event.absorb) {\r\n      const healVal = new HealingValue(0, 0, event.absorb);\r\n      this._handleHealEvent(event, healVal);\r\n    }\r\n  }\r\n  _handleHealEvent(event, healVal) {\r\n    const spellInfo = this._getSpellInfo(event);\r\n    const targetHealthPercentage = (event.hitPoints - healVal.effective) / event.maxHitPoints; // hitPoints contains HP *after* the heal\r\n    this._handleHeal(spellInfo, event, healVal, targetHealthPercentage);\r\n  }\r\n  /**\r\n   * This actually does that stat weights calculations.\r\n   * @param spellInfo An object containing information about how to treat the spell, like on what stats it scales.\r\n   * @param eventForWeights The event that uses the stats to scale its healing. If we're tracking a multiplier (like Beacons), this should be the source of the multiplier.\r\n   * @param {HealingValue} healVal The actual healing done, all child weight calculators should use this instead of the event data as that might be for another event.\r\n   * @param targetHealthPercentage The percentage of health the target has remaining BEFORE the heal.\r\n   * @private\r\n   */\r\n  _handleHeal(spellInfo, eventForWeights, healVal, targetHealthPercentage) {\r\n    // Most spells are counted in healing total, but some spells scale not on their own but 'second hand' from other spells\r\n    // I adjust them out of total healing to preserve some accuracy in the \"Rating per 1%\" stat.\r\n    // Good examples of multiplier spells are Leech and Velens.\r\n    if (!spellInfo.multiplier) {\r\n      this.totalAdjustedHealing += this._adjustGain(healVal.effective, targetHealthPercentage);\r\n    }\r\n\r\n    if (spellInfo.ignored) {\r\n      return;\r\n    }\r\n\r\n    this.totalOneLeech += this._adjustGain(this._leech(eventForWeights, healVal, spellInfo), targetHealthPercentage);\r\n\r\n    if (spellInfo.multiplier) {\r\n      // Multiplier spells aren't counted for weights because they don't **directly** benefit from stat weights\r\n      return;\r\n    }\r\n\r\n    if (spellInfo.int) {\r\n      this.totalOneInt += this._adjustGain(this._intellect(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.crit) {\r\n      this.totalOneCrit += this._adjustGain(this._criticalStrike(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.hasteHpct) {\r\n      this.totalOneHasteHpct += this._adjustGain(this._hasteHpct(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.hasteHpm) {\r\n      this.totalOneHasteHpm += this._adjustGain(this._hasteHpm(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.mastery) {\r\n      this.totalOneMastery += this._adjustGain(this._mastery(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n    if (spellInfo.vers) {\r\n      this.totalOneVers += this._adjustGain(this._versatility(eventForWeights, healVal), targetHealthPercentage);\r\n    }\r\n  }\r\n  _adjustGain(gain, targetHealthPercentage) {\r\n    if (gain === 0) {\r\n      return 0;\r\n    }\r\n    // We want 0-20% health to get value gain, and then linearly decay to 100% health\r\n    const maxValueHealthPercentage = 0.3;\r\n    const mult = 1 - Math.max(0, (targetHealthPercentage - maxValueHealthPercentage) / (1 - maxValueHealthPercentage));\r\n    return this.scaleWeightsWithHealth ? gain * mult : gain;\r\n  }\r\n  _leech(event, healVal, spellInfo) {\r\n    if (event.type !== EventType.Heal) {\r\n      return 0; // leech doesn't proc from absorbs\r\n    }\r\n\r\n    // We have to calculate leech weight differently depending on if we already have any leech rating.\r\n    // Leech is marked as a 'multplier' heal, so we have to check it before we do the early return below\r\n    const hasLeech = this.statTracker.currentLeechPercentage > 0;\r\n    if (hasLeech) {\r\n      return this._leechHasLeech(event, healVal, spellInfo);\r\n    } else {\r\n      return this._leechPrediction(event, healVal, spellInfo);\r\n    }\r\n  }\r\n  _leechHasLeech(event, healVal/*, spellInfo*/) {\r\n    // When the user has Leech we can use the actual Leech healing to accuractely calculate its HPS value without having to do any kind of predicting\r\n    const spellId = event.ability.guid;\r\n    if (spellId !== SPELLS.LEECH.id) {\r\n      return 0;\r\n    }\r\n    if (!healVal.overheal) {\r\n      return healVal.effective / this.statTracker.currentLeechRating; // TODO: Make a generic method to account for base percentage\r\n    }\r\n    return 0;\r\n  }\r\n  _leechPrediction(event, healVal, spellInfo) {\r\n    // Without Leech we will have to make an estimation so we can still provide the user with a decent value\r\n    if (this.owner.toPlayer(event)) {\r\n      return 0; // Leech doesn't proc from self-healing\r\n    }\r\n    if (spellInfo.multiplier) {\r\n      return 0; // Leech doesn't proc from multipliers such as Velen's Future Sight\r\n    }\r\n    if (this.playerHealthMissing > 0) { // if the player is full HP this would have overhealed.\r\n      const healIncreaseFromOneLeech = this.statTracker.statMultiplier.leech / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentLeechRating, this.statTracker.statBaselineRatingPerPercent[STAT.LEECH], 1, false);\r\n      return healVal.raw * healIncreaseFromOneLeech;\r\n    }\r\n    return 0;\r\n  }\r\n  _intellect(event, healVal) {\r\n    if (healVal.overheal) {\r\n      // If a spell overheals, it could not have healed for more. Seeing as Int only adds HP on top of the existing heal we can skip it as increasing the power of this heal would only be more overhealing.\r\n      return 0;\r\n    }\r\n    const healIncreaseFromOneInt = this.statTracker.statMultiplier.intellect / this.statTracker.currentIntellectRating;\r\n    return healVal.effective * healIncreaseFromOneInt;\r\n  }\r\n  _getCritChance(event) {\r\n    const rating = this.statTracker.currentCritRating;\r\n    const baseCritChance = this.statTracker.baseCritPercentage;\r\n    const ratingCritChance = rating / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentCritRating, this.statTracker.statBaselineRatingPerPercent[STAT.CRITICAL_STRIKE]);\r\n\r\n    return { baseCritChance, ratingCritChance };\r\n  }\r\n  _isCrit(event) {\r\n    return event.hitType === HIT_TYPES.CRIT;\r\n  }\r\n  _criticalStrike(event, healVal) {\r\n    if (this._isCrit(event)) {\r\n      // This collects the total effective healing contributed by the last 1 point of critical strike rating.\r\n      // We don't make any predictions on normal hits based on crit chance since this would be guess work and we are a log analysis system so we prefer to only work with facts. Actual crit heals are undeniable facts, unlike speculating the chance a normal hit might have crit (and accounting for the potential overhealing of that).\r\n\r\n      const { baseCritChance, ratingCritChance } = this._getCritChance(event);\r\n\r\n      const totalCritChance = baseCritChance + ratingCritChance;\r\n      if (totalCritChance > (1 + 1 / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentCritRating, this.statTracker.statBaselineRatingPerPercent[STAT.CRITICAL_STRIKE]))) {\r\n        // If the crit chance was more than 100%+1 rating, then the last rating was over the cap and worth 0.\r\n        return 0;\r\n      }\r\n      const ratingCritChanceContribution = 1 - baseCritChance / totalCritChance;\r\n\r\n      const critMult = this.critEffectBonus.getBonus(event);\r\n      const rawBaseHealing = healVal.raw / critMult;\r\n      const effectiveCritHealing = Math.max(0, healVal.effective - rawBaseHealing);\r\n      const rating = this.statTracker.currentCritRating;\r\n      const healIncreaseFromOneCrit = this.statTracker.statMultiplier.crit * ratingCritChanceContribution / rating;\r\n\r\n      return effectiveCritHealing * healIncreaseFromOneCrit;\r\n    }\r\n    return 0;\r\n  }\r\n  _hasteHpct(event, healVal) {\r\n    const currHastePerc = this.statTracker.currentHastePercentage;\r\n    const healIncreaseFromOneHaste = this.statTracker.statMultiplier.haste / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentHasteRating, this.statTracker.statBaselineRatingPerPercent[STAT.HASTE]);\r\n    const baseHeal = healVal.effective / (1 + currHastePerc);\r\n    return baseHeal * healIncreaseFromOneHaste;\r\n  }\r\n  _hasteHpm(event, healVal) {\r\n    const healIncreaseFromOneHaste = this.statTracker.statMultiplier.haste / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentHasteRating, this.statTracker.statBaselineRatingPerPercent[STAT.HASTE]);\r\n    const noHasteHealing = healVal.effective / (1 + this.statTracker.currentHastePercentage);\r\n    return noHasteHealing * healIncreaseFromOneHaste;\r\n  }\r\n  _mastery(event, healVal) {\r\n    throw new Error('Missing custom Mastery implementation. This is different per spec.');\r\n  }\r\n  _versatility(event, healVal) {\r\n    if (healVal.overheal) {\r\n      // If a spell overheals, it could not have healed for more. Seeing as Versatility only adds HP on top of the existing heal we can skip it as increasing the power of this heal would only be more overhealing.\r\n      return 0;\r\n    }\r\n    const currVersPerc = this.statTracker.currentVersatilityPercentage;\r\n    const healIncreaseFromOneVers = this.statTracker.statMultiplier.versatility / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentVersatilityRating, this.statTracker.statBaselineRatingPerPercent[STAT.VERSATILITY], 1, false);\r\n    const baseHeal = healVal.effective / (1 + currVersPerc);\r\n    return baseHeal * healIncreaseFromOneVers;\r\n  }\r\n\r\n  onDamageTaken(event) {\r\n    this._updateMissingHealth(event);\r\n\r\n    const damageVal = new DamageValue(event.amount, event.absorbed, event.blocked, event.overkill);\r\n    // const targetHealthPercentage = event.hitPoints / event.maxHitPoints; // hitPoints contains HP *after* the damage taken, which in this case is desirable\r\n    // this.totalOneVersDr += this._adjustGain(this._versatilityDamageReduction(event, damageVal), targetHealthPercentage);\r\n    // TODO: Figure out how to make this account for target health since damage event don't appear to have hitPoints info\r\n    this.totalOneVersDr += this._versatilityDamageReduction(event, damageVal);\r\n  }\r\n  _versatilityDamageReduction(event, damageVal) {\r\n    const amount = damageVal.effective;\r\n    const currentVersDamageReductionPercentage = this.statTracker.currentVersatilityPercentage / 2;\r\n    const damageReductionIncreaseFromOneVers = this.statTracker.statMultiplier.versatility / this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentVersatilityRating, this.statTracker.statBaselineRatingPerPercent[STAT.VERSATILITY], 1, false) / 2; // the DR part is only 50% of the Versa percentage\r\n\r\n    const noVersDamage = amount / (1 - currentVersDamageReductionPercentage);\r\n    return noVersDamage * damageReductionIncreaseFromOneVers;\r\n  }\r\n\r\n  onHealTaken(event) {\r\n    this._updateMissingHealth(event);\r\n  }\r\n  _updateMissingHealth(event) {\r\n    if (event.hitPoints && event.maxHitPoints) { // fields not always populated, don't know why\r\n      // `maxHitPoints` is always the value *after* the effect applied\r\n      this.playerHealthMissing = event.maxHitPoints - event.hitPoints;\r\n    }\r\n  }\r\n\r\n  onFightend() {\r\n    if (DEBUG) {\r\n      console.log('total', formatNumber(this.totalAdjustedHealing));\r\n      console.log(`Int - ${formatNumber(this.totalOneInt)}`);\r\n      console.log(`Crit - ${formatNumber(this.totalOneCrit)}`);\r\n      console.log(`Haste HPCT - ${formatNumber(this.totalOneHasteHpct)}`);\r\n      console.log(`Haste HPM - ${formatNumber(this.totalOneHasteHpm)}`);\r\n      console.log(`Mastery - ${formatNumber(this.totalOneMastery)}`);\r\n      console.log(`Vers - ${formatNumber(this.totalOneVers)}`);\r\n      console.log(`Leech - ${formatNumber(this.totalOneLeech)}`);\r\n    }\r\n  }\r\n\r\n  get hpsPerIntellect() {\r\n    return this._getGain(STAT.INTELLECT) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerCriticalStrike() {\r\n    return this._getGain(STAT.CRITICAL_STRIKE) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerHasteHPCT() {\r\n    return this._getGain(STAT.HASTE_HPCT) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerHasteHPM() {\r\n    return this._getGain(STAT.HASTE_HPM) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerHaste() {\r\n    return this.hpsPerHasteHPCT + this.hpsPerHasteHPM;\r\n  }\r\n  get hpsPerMastery() {\r\n    return this._getGain(STAT.MASTERY) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerVersatility() {\r\n    return this._getGain(STAT.VERSATILITY) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerVersatilityDR() {\r\n    return this._getGain(STAT.VERSATILITY_DR) / this.owner.fightDuration * 1000;\r\n  }\r\n  get hpsPerLeech() {\r\n    return this._getGain(STAT.LEECH) / this.owner.fightDuration * 1000;\r\n  }\r\n\r\n  // region Item values\r\n  calculateItemStatsHps(baseStats, itemLevel) {\r\n    let hps = 0;\r\n    if (baseStats.primary) {\r\n      hps += calculatePrimaryStat(baseStats.itemLevel, baseStats.primary, itemLevel) * this.hpsPerIntellect;\r\n    }\r\n    if (baseStats.criticalStrike) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.criticalStrike, itemLevel) * this.hpsPerCriticalStrike;\r\n    }\r\n    if (baseStats.haste) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.haste, itemLevel) * this.hpsPerHaste;\r\n    }\r\n    if (baseStats.mastery) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.mastery, itemLevel) * this.hpsPerMastery;\r\n    }\r\n    if (baseStats.versatility) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.versatility, itemLevel) * this.hpsPerVersatility;\r\n    }\r\n    if (baseStats.leech) {\r\n      hps += calculateSecondaryStatDefault(baseStats.itemLevel, baseStats.leech, itemLevel) * this.hpsPerLeech;\r\n    }\r\n    return hps;\r\n  }\r\n  // endregion\r\n\r\n  // region statistic\r\n  _ratingPerOnePercent(oneRatingHealing) {\r\n    const onePercentHealing = this.totalAdjustedHealing / 100;\r\n    return onePercentHealing / oneRatingHealing;\r\n  }\r\n  _getGain(stat) {\r\n    switch (stat) {\r\n      case STAT.INTELLECT:\r\n        return this.totalOneInt;\r\n      case STAT.CRITICAL_STRIKE:\r\n        return this.totalOneCrit;\r\n      case STAT.HASTE_HPCT:\r\n        return this.totalOneHasteHpct;\r\n      case STAT.HASTE_HPM:\r\n        return this.totalOneHasteHpm;\r\n      case STAT.MASTERY:\r\n        return this.totalOneMastery;\r\n      case STAT.VERSATILITY:\r\n        return this.totalOneVers;\r\n      case STAT.VERSATILITY_DR:\r\n        return this.totalOneVers + this.totalOneVersDr;\r\n      case STAT.LEECH:\r\n        return this.totalOneLeech;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n  _getTooltip(stat) {\r\n    switch (stat) {\r\n      case STAT.HASTE_HPCT:\r\n        return <Trans id=\"shared.healerStatValues.stats.hpct\">HPCT stands for \"Healing per Cast Time\". This is the value that Haste would be worth if you would cast everything you are already casting (and that scales with Haste) faster. Mana is not accounted for in any way and you should consider the Haste stat weight 0 if you run out of mana while doing everything else right.</Trans>;\r\n      case STAT.HASTE_HPM:\r\n        return <Trans id=\"shared.healerStatValues.stats.hpm\">HPM stands for \"Healing per Mana\". In valuing Haste, it considers only the faster HoT ticking and not the reduced cast times. Effectively it models haste's bonus to mana efficiency. This is typically the better calculation to use for raid encounters where mana is an issue.</Trans>;\r\n      case STAT.VERSATILITY_DR:\r\n        return <Trans id=\"shared.healerStatValues.stats.versDR\">Weight includes both healing boost and damage reduction, counting the damage reduced as additional throughput.</Trans>;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n  moreInformationLink = null;\r\n  static position = STATISTIC_ORDER.CORE(9);\r\n  statistic() {\r\n    const results = this._prepareResults();\r\n    const qeLink = results.reduce((urlParts, stat) => {\r\n      if (stat === 'intellect' || stat === 'versatilitydr') {\r\n        return urlParts;\r\n      }\r\n\r\n      const statValue = typeof stat === 'object' ? stat.stat : stat;\r\n      const gain = this._getGain(statValue);\r\n      const weight = gain / (this.totalOneInt || 1);\r\n      const statName = getName(statValue).replace(/[()\\s+]/g, '');\r\n\r\n      urlParts.push(statName + '=' + weight.toFixed(2));\r\n      return urlParts;\r\n    }, []).join('&');\r\n    return (\r\n      <StatisticWrapper position={this.constructor.position}>\r\n        <div className=\"col-lg-6 col-md-6 col-sm-6 col-xs-12\">\r\n          <div className=\"panel items statistic\">\r\n            {this.moreInformationLink && (\r\n              <a\r\n                href={this.moreInformationLink}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                <Tooltip content=\"Click for more information.\">\r\n                  <div\r\n                    className=\"detail-corner\"\r\n                    data-place=\"top\"\r\n                  >\r\n                    <InfoIcon />\r\n                  </div>\r\n                </Tooltip>\r\n              </a>\r\n            )}\r\n            <div className=\"panel-body\" style={{ padding: '10px 0 16px' }}>\r\n              <table className=\"data-table compact\" style={{ margin: 0 }}>\r\n                <thead>\r\n                  <tr className=\"text-muted\">\r\n                    <th style={{ minWidth: 30, fontWeight: 400 }}>\r\n                      <TooltipElement\r\n                        content={(\r\n                          <Trans id=\"shared.healerStatValues.statistic.title.tooltip\">\r\n                            These stat values are calculated using the actual circumstances of this encounter. These values reveal the value of the last 1 rating of each stat, they may not necessarily be the best way to gear. The stat values are likely to differ based on fight, raid size, items used, talents chosen, etc.<br /><br />\r\n                            DPS gains are not included in any of the stat values.\r\n                          </Trans>\r\n                        )}\r\n                      >\r\n                        <Trans id=\"shared.healerStatValues.statistic.title\">Stat Values</Trans>\r\n                      </TooltipElement>\r\n                      {false && this.qeLive && this.selectedCombatant.characterProfile && ( // globally disable the QELive button until QE is updated to accept Shadowlands data\r\n                        <Tooltip content=\"Opens in a new tab. Leverage the QE Live Tool to directly compare gear, azerite traits, and trinkets based on your stat values.\">\r\n                          <a\r\n                            href={`https://www.questionablyepic.com/live?import=WoWA&spec=${this.selectedCombatant.specId}&pname=${this.selectedCombatant.name}&realm=${this.selectedCombatant.characterProfile.realm}&region=${this.selectedCombatant.characterProfile.region}&${qeLink}`}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                          >\r\n                            <Trans id=\"shared.healerStatValues.statistic.qeLink\"><img src={QELiveLogo} alt=\"Questionably Epic Live\" style={{ height: '1.2em', marginLeft: 15 }} /> Open Questionably Epic Live</Trans>\r\n                          </a>\r\n                        </Tooltip>\r\n                      )}\r\n                    </th>\r\n                    <th className=\"text-right\" style={{ minWidth: 30, fontWeight: 400 }} colSpan={2}>\r\n                      <TooltipElement content={<Trans id=\"shared.healerStatValues.statistic.title.value.tooltip\">Normalized so Intellect is always 1.00.</Trans>}>\r\n                        <Trans id=\"shared.healerStatValues.statistic.title.value\">Value</Trans>\r\n                      </TooltipElement>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {results.map(row => {\r\n                    const stat = typeof row === 'object' ? row.stat : row;\r\n                    const tooltip = typeof row === 'object' ? row.tooltip : this._getTooltip(stat);\r\n                    const gain = this._getGain(stat);\r\n                    const weight = gain / (this.totalOneInt || 1);\r\n                    const ratingForOne = this._ratingPerOnePercent(gain);\r\n\r\n                    const Icon = getIcon(stat);\r\n\r\n                    const gainPerSecond = (gain / this.owner.fightDuration * 1000).toFixed(2);\r\n                    const rating = gain !== null ? (ratingForOne === Infinity ? '∞' : formatNumber(ratingForOne)) : 'NYI';\r\n                    const informationIconTooltip = <Trans id=\"shared.healerStatValues.statistic.stats.tooltip\">{gainPerSecond} HPS per 1 rating / {rating} rating per 1% throughput</Trans>;\r\n\r\n                    return (\r\n                      <tr key={stat}>\r\n                        <td className={getClassNameColor(stat)}>\r\n                          <Icon\r\n                            style={{\r\n                              height: '1.6em',\r\n                              width: '1.6em',\r\n                              marginRight: 10,\r\n                            }}\r\n                          />{' '}\r\n                          {tooltip ? <TooltipElement content={tooltip}>{getNameTranslated(stat)}</TooltipElement> : getNameTranslated(stat)}\r\n                        </td>\r\n                        <td className=\"text-right\">\r\n                          {stat === STAT.HASTE_HPCT && '0.00 - '}{gain !== null ? weight.toFixed(2) : 'NYI'}\r\n                        </td>\r\n                        <td style={{ padding: 6 }}>\r\n                          <Tooltip content={informationIconTooltip}>\r\n                            <div>\r\n                              <InformationIcon />\r\n                            </div>\r\n                          </Tooltip>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </StatisticWrapper>\r\n    );\r\n  }\r\n  // endregion\r\n}\r\n\r\nexport default BaseHealerStatValues;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { formatThousands } from 'common/format';\r\nimport ManaIcon from 'interface/icons/Mana';\r\nimport CombatLogParser from 'parser/core/CombatLogParser';\r\n\r\ninterface Props {\r\n  amount: number;\r\n  approximate?: boolean;\r\n}\r\ninterface Context {\r\n  parser: CombatLogParser;\r\n}\r\n\r\nconst ItemManaGained = (\r\n  { amount, approximate }: Props,\r\n  { parser }: Context,\r\n) => (\r\n  <>\r\n    <ManaIcon /> {approximate && '≈'}\r\n    {formatThousands((amount / parser.fightDuration) * 1000 * 5)} MP5{' '}\r\n    <small>{formatThousands(amount)} total mana</small>\r\n  </>\r\n);\r\nItemManaGained.contextTypes = {\r\n  parser: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default ItemManaGained;\r\n"],"sourceRoot":""}