(this.webpackJsonpwowanalyzer=this.webpackJsonpwowanalyzer||[]).push([[45],{712:function(e,t,a){"use strict";a.r(t);var n=a(26),i=a(8),s=a(9),r=a(120),l=a(66),c=a(10),o=a(11),u=a(0),d=a.n(u),h=a(49),m=a(3),E=a(4),g=a(28),T=a(22);function f(e){return e>1e6?"".concat((e/1e6).toFixed(2),"m"):e>1e4?"".concat(Math.round(e/1e3),"k"):function(e){return"".concat(Math.round(e||0)).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}(e)}var b=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={expand:!1},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.cooldownThroughputTracker;return d.a.createElement("div",null,[{name:"Cloudburst Totem",feed:t.cbtFeed,spell:m.a.CLOUDBURST_TOTEM_TALENT,totals:t.cbtTotals},{name:"Ascendance",feed:t.ascFeed,spell:m.a.ASCENDANCE_TALENT_RESTORATION,totals:t.ascTotals}].map((function(t){return t.max=t.feed.reduce((function(t,a){return(e.state.expand?t.mergedHealing:t.healing)>(e.state.expand?a.mergedHealing:a.healing)?t:a}),0).healing,t})).filter((function(e){return e.totals.total>0})).map((function(t){return d.a.createElement("table",{className:"data-table",key:t.name,style:{marginTop:10,marginBottom:10}},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{style:{fontSize:"1.25em"}},d.a.createElement(E.a,{id:t.spell.id,style:{color:"#fff"}},t.name)),d.a.createElement("th",{className:"text-center",colSpan:"3"},d.a.createElement(T.a,{content:"The amount of healing done by spells that feed into ".concat(t.name," while it was up.")},"Feeding done per spell")),d.a.createElement("th",{className:"text-center"},d.a.createElement(T.a,{content:"The approximated effective healing each of the spells feeding into ".concat(t.name," did, accounting for overhealing. This should roughly at up to the total effective healing of ").concat(t.name,".")},"Approx. effective healing")),d.a.createElement("th",null))),d.a.createElement("tbody",null,Object.keys(t.feed).sort((function(e,a){var n=t.feed[e].healing,i=t.feed[a].healing;return n>i?-1:i>n?1:0})).filter((function(a){return!e.state.expand||t.feed[a].mergedHealing>0})).map((function(a){var n=t.feed[a],i=e.state.expand?n.mergedHealing:n.healing,s=e.state.expand?n.mergedEffectiveHealing:n.effectiveHealing,r=e.state.expand?t.totals.mergedTotal:t.totals.total;return d.a.createElement("tr",{key:"".concat(t.name," ").concat(n.name)},d.a.createElement("td",{style:{width:"30%"}},"\xa0\xa0\xa0\xa0\xa0 ",d.a.createElement(g.a,{icon:n.icon,alt:n.name})," ",n.name),d.a.createElement("td",{className:"text-right",style:{width:"10%"}},(i/r*100).toFixed(2),"%"),d.a.createElement("td",{style:{width:"30%"}},d.a.createElement("div",{className:"performance-bar",style:{width:"".concat(Math.min(i/t.max*100,100),"%"),backgroundColor:"#70b570"}})),d.a.createElement("td",{style:{width:"10%"}},f(i)),d.a.createElement("td",{className:"text-center",style:{width:"20%"}},f(s)))})),d.a.createElement("tr",{key:"".concat(t.name,"Summary")},d.a.createElement("td",null),d.a.createElement("td",null),d.a.createElement("td",{className:"text-right"},d.a.createElement("b",null,"Total:")),d.a.createElement("td",{className:"text-left"},d.a.createElement("b",null,f(e.state.expand?t.totals.mergedTotal:t.totals.total))),d.a.createElement("td",{className:"text-center"},d.a.createElement("b",null,f(e.state.expand?t.totals.mergedTotalEffective:t.totals.totalEffective))))))})))}}]),a}(d.a.Component),p=a(776),v=a(818),A=a(875),y=a(876),L=a(874),_=a(6),O=a(812),H=a(899),I=a(835),N=a(851),S=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).healingEfficiencyTracker=void 0,e}return Object(s.a)(a,[{key:"statistic",value:function(){return d.a.createElement(O.a,{title:d.a.createElement(_.Trans,{id:"shared.healingEfficiency.title"}),explanation:d.a.createElement(_.Trans,{id:"shaman.restoration.healingEfficiencyDetails",components:[d.a.createElement(E.a,{id:m.a.RESURGENCE.id}),d.a.createElement("br",null),d.a.createElement(E.a,{id:m.a.UNLEASH_LIFE_TALENT.id}),d.a.createElement(E.a,{id:m.a.UNLEASH_LIFE_TALENT.id}),d.a.createElement("br",null),d.a.createElement(E.a,{id:m.a.EARTH_SHIELD.id})]}),pad:!1,position:120},d.a.createElement(N.a,{tracker:this.healingEfficiencyTracker}))}}]),a}(H.a);S.dependencies={healingEfficiencyTracker:I.a};var R=S,C=a(834),k=a(767),j=a(753),w=a(888),D=a(43),P=a(15),G=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).addEventListener(P.f.damage.by(D.b).spell(m.a.SPIRIT_LINK_TOTEM_REDISTRIBUTE),n.onSLTDamage),n}return Object(s.a)(a,[{key:"onSLTDamage",value:function(e){this._subtractHealing(e,e.amount,0,0)}}]),a}(a(793).a),U=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"getAbility",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(r.a)(Object(l.a)(a.prototype),"getAbility",this).call(this,e,t)}}]),a}(a(755).a),B=a(12),F=a(750),M=a(766),x=a(53),W=a(33),V=a(746),Y=a(761),z=a(212),K=(a(990),a(757)),X=a(20),Z=a(5),q=a(207),J=a(747),Q=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).combatants=void 0,n.regenedMana=0,n.sourceID=0,n.addEventListener(P.f.summon.by(D.a).spell(m.a.MANA_TIDE_TOTEM_CAST),n.mAnATiDeTotEm),n}return Object(s.a)(a,[{key:"mAnATiDeTotEm",value:function(e){this.sourceID=e.targetID}},{key:"regenFromUptime",value:function(e){return e/1e3*400}},{key:"statistic",value:function(){var e=this;return d.a.createElement(V.a,{size:"flexible",position:J.a.UNIMPORTANT(89),dropdown:d.a.createElement("table",{className:"table table-condensed"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement(_.Trans,{render:"th",id:"common.player"}),d.a.createElement(_.Trans,{render:"th",id:"common.stat.mana"}))),d.a.createElement("tbody",null,Object.values(this.regenPerHealer).map((function(t){var a=Z.a[t.healer.specId].className.replace(" ","");return d.a.createElement("tr",{key:t.healer.id},d.a.createElement("th",{className:a},d.a.createElement(q.a,{id:t.healer.specId})," ",t.healer.name),d.a.createElement("td",null,Object(W.d)(e.regenFromUptime(t.uptime))))}))))},d.a.createElement(Y.a,{label:d.a.createElement(E.a,{id:m.a.MANA_TIDE_TOTEM_CAST.id})},d.a.createElement("div",{className:"flex mtt-value"},d.a.createElement("div",{className:"flex-sub icon"},d.a.createElement(z.a,null)),d.a.createElement("div",{className:"flex-main value"},Object(W.d)(this.regenFromUptime(this.regenOnPlayer)),d.a.createElement("br",null),d.a.createElement("small",null,d.a.createElement(_.Trans,{id:"shaman.restoration.manaTideTotem.statistic.manaRestored"})))),d.a.createElement("div",{className:"flex mtt-value"},d.a.createElement("div",{className:"flex-sub icon"},d.a.createElement(z.a,null)),d.a.createElement("div",{className:"flex-main value"},Object(W.d)(this.regenFromUptime(this.regenOnHealers)),d.a.createElement("br",null),d.a.createElement("small",null,d.a.createElement(_.Trans,{id:"shaman.restoration.manaTideTotem.statistic.healerManaRestored"}))))))}},{key:"regenOnPlayer",get:function(){return this.selectedCombatant.getBuffUptime(m.a.MANA_TIDE_TOTEM_BUFF.id,this.sourceID)}},{key:"regenOnHealers",get:function(){return Object.values(this.regenPerHealer).reduce((function(e,t){return e+t.uptime}),0)}},{key:"regenPerHealer",get:function(){var e=this;return Object.assign.apply(Object,[{}].concat(Object(n.a)(Object.values(this.combatants.players).filter((function(e){return e.spec.role===X.a.HEALER})).map((function(t){return Object(B.a)({},t.id,{healer:t,uptime:t.getBuffUptime(m.a.MANA_TIDE_TOTEM_BUFF.id,e.sourceID)})})))))}}]),a}(D.c);Q.dependencies={combatants:K.a};var $,ee=Q,te=a(164),ae=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).manaGain=0,n.prepullApplication=!1,n.addEventListener(P.f.energize.by(D.a).spell(m.a.WATER_SHIELD_ENERGIZE),n.waterShield),n.addEventListener(P.f.applybuff.by(D.a).spell(m.a.WATER_SHIELD),n.waterShieldPrepullCheck),n}return Object(s.a)(a,[{key:"waterShield",value:function(e){this.manaGain+=e.resourceChange}},{key:"waterShieldPrepullCheck",value:function(e){e.prepull&&(this.prepullApplication=!0)}},{key:"statistic",value:function(){return d.a.createElement(V.a,{size:"flexible",position:J.a.UNIMPORTANT(88)},d.a.createElement(Y.a,{label:d.a.createElement(E.a,{id:m.a.WATER_SHIELD.id})},d.a.createElement("div",{className:"flex mtt-value"},d.a.createElement("div",{className:"flex-sub icon"},d.a.createElement(z.a,null)),d.a.createElement("div",{className:"flex-main value"},Object(W.d)(this.regenOnPlayer+this.manaGain),d.a.createElement("br",null),d.a.createElement("small",null,d.a.createElement(T.a,{content:d.a.createElement(_.Trans,{id:"shaman.restoration.waterShield.statistic.tooltip",values:{0:Object(W.d)(this.regenOnPlayer),1:this.manaGain}})},d.a.createElement(_.Trans,{id:"shaman.restoration.manaTideTotem.statistic.manaRestored"})))))))}},{key:"regenOnPlayer",get:function(){var e=this.selectedCombatant.getBuffUptime(m.a.WATER_SHIELD.id)/this.owner.fightDuration;return this.owner.fightDuration/1e3*10*e}},{key:"uptime",get:function(){return this.selectedCombatant.getBuffUptime(m.a.WATER_SHIELD.id)}},{key:"uptimePercent",get:function(){return this.uptime/this.owner.fightDuration}},{key:"suggestionThresholds",get:function(){return{actual:this.uptimePercent,isLessThan:{minor:.95,average:.9,major:.85},style:te.a.PERCENTAGE}}},{key:"suggestionThresholdsPrepull",get:function(){return{actual:this.prepullApplication,isEqual:!1,style:te.a.BOOLEAN}}}]),a}(D.c),ne=($={},Object(B.a)($,m.a.HEALING_SURGE.id,.006),Object(B.a)($,m.a.HEALING_WAVE.id,.01),Object(B.a)($,m.a.CHAIN_HEAL.id,.0025),Object(B.a)($,m.a.UNLEASH_LIFE_TALENT.id,.006),Object(B.a)($,m.a.RIPTIDE.id,.006),$),ie=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).manaTracker=void 0,n.manaTideTotem=void 0,n.waterShield=void 0,n.otherManaGain=0,n.resurgence=[],n.totalResurgenceGain=0,n.addEventListener(P.f.heal.by(D.a).spell([m.a.HEALING_SURGE,m.a.HEALING_WAVE,m.a.CHAIN_HEAL,m.a.UNLEASH_LIFE_TALENT,m.a.RIPTIDE]),n.onRelevantHeal),n.addEventListener(P.f.energize.to(D.a).spell(m.a.RESURGENCE),n.onResurgenceProc),n}return Object(s.a)(a,[{key:"onRelevantHeal",value:function(e){if(!e.tick){var t=e.ability.guid;this.resurgence[t]||(this.resurgence[t]={spellId:t,resurgenceTotal:0,castAmount:0}),e.hitType===M.a.CRIT&&(this.resurgence[t].resurgenceTotal+=ne[t]*this.manaTracker.maxResource,this.resurgence[t].castAmount+=1)}}},{key:"onResurgenceProc",value:function(e){e.ability.guid===m.a.RESURGENCE.id?this.totalResurgenceGain+=e.resourceChange:this.otherManaGain+=e.resourceChange}},{key:"statistic",value:function(){var e=this;return d.a.createElement(V.a,{position:F.a.UNIMPORTANT(90),size:"flexible",dropdown:d.a.createElement(d.a.Fragment,null,d.a.createElement("div",null,d.a.createElement(_.Trans,{id:"shaman.restoration.resurgence.statistic.table.description",values:{0:Object(W.e)(this.totalResurgenceGain/this.totalMana,0),1:Object(W.d)(this.totalMana)},components:[d.a.createElement(E.a,{id:m.a.RESURGENCE.id,iconStyle:{height:"1.25em"}})]})),d.a.createElement("table",{className:"table table-condensed"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"shaman.restoration.resurgence.statistic.tableHeader.spell"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"shaman.restoration.resurgence.statistic.tableHeader.amount"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"shaman.restoration.resurgence.statistic.tableHeader.crits"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"shaman.restoration.resurgence.statistic.tableHeader.mana"})))),d.a.createElement("tbody",null,this.resurgence.map((function(t){return d.a.createElement("tr",{key:t.spellId},d.a.createElement("th",{scope:"row"},d.a.createElement(x.a,{id:t.spellId,style:{height:"2.5em"}})),d.a.createElement("td",null,Object(W.d)(t.resurgenceTotal)),d.a.createElement("td",null,Object(W.d)(t.castAmount)),d.a.createElement("td",null,Object(W.e)(t.resurgenceTotal/e.totalMana),"%"))})))))},d.a.createElement(Y.a,{label:d.a.createElement(E.a,{id:m.a.RESURGENCE.id})},d.a.createElement("div",{className:"flex mtt-value"},d.a.createElement("div",{className:"flex-sub icon"},d.a.createElement(z.a,null)),d.a.createElement("div",{className:"flex-main value"},Object(W.d)(this.totalResurgenceGain),d.a.createElement("br",null),d.a.createElement("small",null,d.a.createElement(_.Trans,{id:"shaman.restoration.resurgence.statistic.label"}))))))}},{key:"totalMana",get:function(){var e=this.owner.fightDuration/1e3*400,t=this.manaTideTotem.regenOnPlayer,a=this.waterShield.regenOnPlayer;return e+this.totalResurgenceGain+this.manaTracker.maxResource+this.otherManaGain+t+a}}]),a}(D.c);ie.dependencies={manaTracker:v.a,manaTideTotem:ee,waterShield:ae};var se=ie,re=a(7),le=a(123),ce=a(785),oe=a(820),ue=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).cbtFeed=[],e.cbtTotals={total:0,totalEffective:0},e.ascFeed=[],e.ascTotals={total:0,totalEffective:0},e.hasBeenCBTHealingEvent=!1,e.hasBeenAscHealingOrCastEvent=!1,e.lastCBT=e.addNewCooldown({spell:m.a.CLOUDBURST_TOTEM_TALENT,summary:[ce.a.HEALING,ce.a.OVERHEALING,ce.a.MANA]},e.owner.fight.start_time),e.lastAsc=e.addNewCooldown({spell:m.a.ASCENDANCE_TALENT_RESTORATION,summary:[ce.a.HEALING,ce.a.OVERHEALING,ce.a.MANA]},e.owner.fight.start_time),e}return Object(s.a)(a,[{key:"processAll",value:function(){var e=this;this.pastCooldowns.filter((function(e){return e.end&&!e.processed})).forEach((function(t){var a=null,n=null,i=0;t.spell.id===m.a.CLOUDBURST_TOTEM_TALENT.id?(a=e.cbtFeed,n=e.cbtTotals,i=.25):t.spell.id===m.a.ASCENDANCE_TALENT_RESTORATION.id&&(a=e.ascFeed,n=e.ascTotals,i=1);var s=0;t.healing+t.overheal>0&&(s=t.overheal/(t.healing+t.overheal)),Object.keys(t.feed).forEach((function(e){e=Number(e),a[e]||(a[e]=[],a[e].healing=0,a[e].effectiveHealing=0,a[e].name=t.feed[e].name,a[e].icon=t.feed[e].icon);var r=t.feed[e].healing,l=r*(1-s)*i;a[e].healing+=r,a[e].effectiveHealing+=l,n.total+=r,n.totalEffective+=l})),e.generateFeedEvents(t,i,s),t.processed=!0}))}},{key:"generateFeedEvents",value:function(e,t,a){var n=this;e.events.forEach((function(i){if(i.type===P.b.Heal&&e.feed[i.ability.guid]&&i.ability.guid!==m.a.ASCENDANCE_HEAL.id&&i.ability.guid!==m.a.CLOUDBURST_TOTEM_HEAL.id){var s=((i.amount||0)+(i.absorbed||0)+(i.overheal||0))*t*(1-a);n.eventEmitter.fabricateEvent(Object(re.a)(Object(re.a)({},i),{},{type:P.b.FeedHeal,feed:s}),e.spell)}}))}},{key:"getIndirectHealing",value:function(e){var t=0;return this.cbtFeed[e]&&(t+=this.cbtFeed[e].effectiveHealing||0),this.ascFeed[e]&&(t+=this.ascFeed[e].effectiveHealing||0),t}},{key:"addNewCooldown",value:function(e,t){var a=Object(re.a)(Object(re.a)({},e),{},{start:t,end:null,processed:!1,healing:0,overheal:0,feed:[],events:[]});return this.pastCooldowns.push(a),this.activeCooldowns.push(a),a}},{key:"popCBT",value:function(e){var t=this.activeCooldowns.findIndex((function(e){return e.spell.id===m.a.CLOUDBURST_TOTEM_TALENT.id}));-1!==t&&(this.activeCooldowns[t].end=e.timestamp,this.activeCooldowns.splice(t,1))}}]),Object(s.a)(a,[{key:"onApplyBuffToPlayer",value:function(e){var t=e.ability.guid,a=this.constructor.cooldownSpells.find((function(e){return e.spell.id===t}));if(a){t===m.a.ASCENDANCE_TALENT_RESTORATION.id&&-1!==this.activeCooldowns.findIndex((function(e){return e.spell.id===t}))&&this.removeLastCooldown(t);var n=this.addNewCooldown(a,e.timestamp);t===m.a.ASCENDANCE_TALENT_RESTORATION.id&&(this.lastAsc=n,this.hasBeenAscHealingOrCastEvent=!0)}}},{key:"onFightend",value:function(){var e=this;!this.hasBeenAscHealingOrCastEvent&&this.lastAsc&&this.removeLastCooldown(m.a.ASCENDANCE_TALENT_RESTORATION.id),!this.hasBeenCBTHealingEvent&&this.lastCBT&&this.removeLastCooldown(m.a.CLOUDBURST_TOTEM_TALENT.id),this.activeCooldowns.forEach((function(t){t.end=e.owner.fight.end_time,t.spell.id===m.a.CLOUDBURST_TOTEM_TALENT.id&&(t.processed=!0)})),this.activeCooldowns=[],this.processAll()}},{key:"onCast",value:function(e){e.ability.guid===m.a.CLOUDBURST_TOTEM_TALENT.id&&(this.hasBeenCBTHealingEvent||this.removeLastCooldown(m.a.CLOUDBURST_TOTEM_TALENT.id),this.lastCBT=this.addNewCooldown({spell:m.a.CLOUDBURST_TOTEM_TALENT,summary:[ce.a.HEALING,ce.a.OVERHEALING,ce.a.MANA]},e.timestamp)),Object(r.a)(Object(l.a)(a.prototype),"onCast",this).call(this,e)}},{key:"removeLastCooldown",value:function(e){var t=this.activeCooldowns.findIndex((function(t){return t.spell.id===e})),a=Object(n.a)(this.pastCooldowns).reverse().findIndex((function(t){return t.spell.id===e})),i=this.pastCooldowns.length-a-1;-1!==t&&-1!==i&&(this.activeCooldowns.splice(t,1),this.pastCooldowns.splice(i,1))}},{key:"onHeal",value:function(e){e.ability.guid===m.a.CLOUDBURST_TOTEM_HEAL.id&&this.lastCBT?(this.hasBeenCBTHealingEvent=!0,this.popCBT(e),this.lastCBT.healing+=(e.amount||0)+(e.absorbed||0),this.lastCBT.overheal+=e.overheal||0):e.ability.guid===m.a.ASCENDANCE_HEAL.id&&this.lastAsc&&(this.hasBeenAscHealingOrCastEvent=!0,this.lastAsc.healing+=(e.amount||0)+(e.absorbed||0),this.lastAsc.overheal+=e.overheal||0);var t=e.ability.guid,a=(e.amount||0)+(e.absorbed||0)+(e.overheal||0);this.activeCooldowns.forEach((function(n){var i=n.spell.id;(i===m.a.CLOUDBURST_TOTEM_TALENT.id&&oe.c.some((function(e){return e.id===t}))||i===m.a.ASCENDANCE_TALENT_RESTORATION.id&&!oe.d.some((function(e){return e.id===t})))&&(n.feed[t]||(n.feed[t]=[],n.feed[t].healing=0,n.feed[t].name=e.ability.name,n.feed[t].icon=e.ability.abilityIcon),n.feed[t].healing+=a),n.events.push(e)}))}},{key:"onAbsorb",value:function(e){this.activeCooldowns.forEach((function(t){t.events.push(e)}))}}]),a}(ce.b);ue.dependencies=Object(re.a)(Object(re.a)({},ce.b.dependencies),{},{eventEmitter:le.a}),ue.cooldownSpells=[].concat(Object(n.a)(ce.b.cooldownSpells),[{spell:m.a.ASCENDANCE_TALENT_RESTORATION,summary:[ce.a.HEALING,ce.a.OVERHEALING,ce.a.MANA]}]);var de=ue,he=a(801),me=a(58),Ee=a(790),ge=a(799),Te=a(769),fe=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n,s;Object(i.a)(this,a),(s=t.call(this,e)).cooldownThroughputTracker=void 0,s.healing=0,s.healingBuff=(n={},Object(B.a)(n,m.a.RIPTIDE.id,{healing:0,castAmount:0,playersActive:[]}),Object(B.a)(n,m.a.CHAIN_HEAL.id,{healing:0,castAmount:0}),Object(B.a)(n,m.a.HEALING_WAVE.id,{healing:0,castAmount:0}),Object(B.a)(n,m.a.HEALING_SURGE.id,{healing:0,castAmount:0}),n),s.unleashLifeCasts=0,s.unleashLifeRemaining=!1,s.unleashLifeHealRemaining=0,s.buffedChainHealTimestamp=Number.MIN_SAFE_INTEGER,s.lastUnleashLifeTimestamp=Number.MAX_SAFE_INTEGER,s.active=s.selectedCombatant.hasTalent(m.a.UNLEASH_LIFE_TALENT.id);var r=[m.a.UNLEASH_LIFE_TALENT,m.a.RIPTIDE,m.a.CHAIN_HEAL,m.a.HEALING_WAVE,m.a.HEALING_SURGE];return s.addEventListener(P.f.heal.by(D.a).spell(r),s._onHeal),s.addEventListener(P.f.cast.by(D.a).spell(r),s._onCast),s.addEventListener(P.f.removebuff.by(D.a).spell(m.a.RIPTIDE),s._onRiptideRemoval),s}return Object(s.a)(a,[{key:"_onHeal",value:function(e){var t=e.ability.guid;t===m.a.UNLEASH_LIFE_TALENT.id&&(this.unleashLifeHealRemaining=1,this.lastUnleashLifeTimestamp=e.timestamp,this.healing+=e.amount+(e.absorbed||0)),this.unleashLifeHealRemaining>0&&this.lastUnleashLifeTimestamp+1e4<=e.timestamp&&(this.unleashLifeHealRemaining=0),t===m.a.RIPTIDE.id&&this.healingBuff[t].playersActive.includes(e.targetID)&&(e.tick?this.healingBuff[t].healing+=Object(Te.a)(e,.35):e.tick||this.unleashLifeHealRemaining||this.healingBuff[t].playersActive.splice(this.healingBuff[t].playersActive.indexOf(e.targetID),1)),this.unleashLifeHealRemaining>0&&(t===m.a.HEALING_WAVE.id||t===m.a.HEALING_SURGE.id||t===m.a.RIPTIDE.id&&!e.tick)?(this.healingBuff[t].healing+=Object(Te.a)(e,.35),this.unleashLifeHealRemaining=0,t===m.a.RIPTIDE.id&&this.healingBuff[t].playersActive.push(e.targetID)):t===m.a.CHAIN_HEAL.id&&(this.unleashLifeHealRemaining>0||this.unleashLifeHealRemaining<0&&this.buffedChainHealTimestamp+200>e.timestamp)&&(this.healingBuff[t].healing+=Object(Te.a)(e,.35),this.unleashLifeHealRemaining=-1,this.buffedChainHealTimestamp=e.timestamp)}},{key:"_onCast",value:function(e){var t=e.ability.guid;t===m.a.UNLEASH_LIFE_TALENT.id&&(this.unleashLifeCasts+=1,this.unleashLifeRemaining=!0,this.lastUnleashLifeTimestamp=e.timestamp),this.unleashLifeRemaining&&this.lastUnleashLifeTimestamp+1e4<=e.timestamp?this.unleashLifeRemaining=!1:this.unleashLifeRemaining&&this.healingBuff[t]&&(this.healingBuff[t].castAmount+=1,this.unleashLifeRemaining=!1)}},{key:"_onRiptideRemoval",value:function(e){var t=e.ability.guid;this.healingBuff[t].playersActive.includes(e.targetID)&&this.healingBuff[t].playersActive.splice(this.healingBuff[t].playersActive.indexOf(e.targetID),1)}},{key:"statistic",value:function(){return d.a.createElement(V.a,{category:me.a.TALENTS,position:he.a.OPTIONAL(15),size:"flexible"},d.a.createElement("div",{className:"pad"},d.a.createElement("label",null,d.a.createElement(_.Trans,{id:"shaman.restoration.unleashLife.statistic.label",components:[d.a.createElement(E.a,{id:m.a.UNLEASH_LIFE_TALENT.id})]})),this.unleashLifeCastRatioChart))}},{key:"subStatistic",value:function(){var e=this.cooldownThroughputTracker.getIndirectHealing(m.a.UNLEASH_LIFE_TALENT.id);return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.UNLEASH_LIFE_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing+this.totalBuffedHealing+e))," %"),valueTooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.unleashLife.statistic.tooltip",values:{0:Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing+e)),1:Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.totalBuffedHealing))}})})}},{key:"totalBuffedHealing",get:function(){return Object.values(this.healingBuff).reduce((function(e,t){return e+t.healing}),0)}},{key:"totalUses",get:function(){return Object.values(this.healingBuff).reduce((function(e,t){return e+t.castAmount}),0)}},{key:"unleashLifeCastRatioChart",get:function(){var e=this.unleashLifeCasts-this.totalUses,t=[{color:oe.k.CHAIN_HEAL,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.chainHeal"}),spellId:m.a.CHAIN_HEAL.id,value:this.healingBuff[m.a.CHAIN_HEAL.id].castAmount},{color:oe.k.HEALING_WAVE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.healingWave"}),spellId:m.a.HEALING_WAVE.id,value:this.healingBuff[m.a.HEALING_WAVE.id].castAmount},{color:oe.k.HEALING_SURGE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.healingSurge"}),spellId:m.a.HEALING_SURGE.id,value:this.healingBuff[m.a.HEALING_SURGE.id].castAmount},{color:oe.k.RIPTIDE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.riptide"}),spellId:m.a.RIPTIDE.id,value:this.healingBuff[m.a.RIPTIDE.id].castAmount},{color:oe.k.UNUSED,label:d.a.createElement(_.Trans,{id:"shaman.restoration.unleashLife.chart.unused.label"}),tooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.unleashLife.chart.unused.label.tooltip",values:{0:this.unleashLifeCasts,1:this.totalUses}}),value:e}];return d.a.createElement(ge.a,{items:t})}}]),a}(D.c);fe.dependencies={cooldownThroughputTracker:de};var be=fe,pe=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).manaTracker=void 0,e.abilityTracker=void 0,e.healingDone=void 0,e.damageDone=void 0,e.castEfficiency=void 0,e.abilities=void 0,e.resurgence=void 0,e.cooldownThroughputTracker=void 0,e.unleashLife=void 0,e.earthShield=void 0,e}return Object(s.a)(a,[{key:"getCustomSpellStats",value:function(e,t){return this.resurgence.resurgence[t]&&this.getResurgenceDetails(e,t),t===m.a.UNLEASH_LIFE_TALENT.id?this.getUnleashLifeDetails(e):this.unleashLife.healingBuff[t]?this.getUnleashLifeBuffDetails(e,t):t===m.a.EARTH_SHIELD.id?this.getEarthShieldBuffDetails(e):t===m.a.LAVA_BURST.id&&this.getLavaBurstDamageDetails(e),e}},{key:"getResurgenceDetails",value:function(e,t){e.manaSpent-=this.resurgence.resurgence[t].resurgenceTotal}},{key:"getUnleashLifeDetails",value:function(e){var t=this.unleashLife.totalBuffedHealing;e.healingDone+=t}},{key:"getUnleashLifeBuffDetails",value:function(e,t){var a=this.unleashLife.healingBuff[t].healing||0;e.healingDone-=a}},{key:"getEarthShieldBuffDetails",value:function(e){e.healingDone+=this.earthShield.buffHealing||0}},{key:"getLavaBurstDamageDetails",value:function(e){var t=this.abilityTracker.getAbility(m.a.LAVA_BURST_DAMAGE.id);e.damageHits=t.damageHits||0,e.damageDone=t.damageEffective||0,e.damageAbsorbed=t.damageAbsorbed||0}}]),a}(I.a);pe.dependencies={manaTracker:v.a,abilityTracker:U,healingDone:G,damageDone:C.a,castEfficiency:k.a,abilities:j.a,resurgence:se,cooldownThroughputTracker:de,unleashLife:be,earthShield:w.b};var ve=pe,Ae=a(13),ye=a(45),Le=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"spellbook",value:function(){var e=this.selectedCombatant;return[{spell:m.a.RIPTIDE,category:a.SPELL_CATEGORIES.ROTATIONAL,charges:e.hasTalent(m.a.ECHO_OF_THE_ELEMENTS_TALENT.id)?2:1,cooldown:6,timelineSortIndex:11,gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:e.hasTalent(m.a.ECHO_OF_THE_ELEMENTS_TALENT.id)?.75:.6}},{spell:m.a.HEALING_STREAM_TOTEM_CAST,category:a.SPELL_CATEGORIES.ROTATIONAL,charges:e.hasTalent(m.a.ECHO_OF_THE_ELEMENTS_TALENT.id)?2:1,timelineSortIndex:18,enabled:!e.hasTalent(m.a.CLOUDBURST_TOTEM_TALENT.id),gcd:{static:1e3},cooldown:30,castEfficiency:{suggestion:!0,majorIssueEfficiency:.5,averageIssueEfficiency:.7,recommendedEfficiency:.9},healSpellIds:[m.a.HEALING_STREAM_TOTEM_HEAL.id]},{spell:m.a.ASTRAL_SHIFT,buffSpellId:m.a.ASTRAL_SHIFT.id,category:a.SPELL_CATEGORIES.DEFENSIVE,timelineSortIndex:82,cooldown:90,castEfficiency:{suggestion:!0,recommendedEfficiency:.6,importance:ye.a.MINOR}},{spell:m.a.HEALING_RAIN_CAST,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:10,timelineSortIndex:17,gcd:{base:1500},castEfficiency:{suggestion:!0,majorIssueEfficiency:.3,averageIssueEfficiency:.5,recommendedEfficiency:.7},healSpellIds:[m.a.HEALING_RAIN_HEAL.id]},{spell:m.a.WELLSPRING_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:20,timelineSortIndex:20,gcd:{base:1500},enabled:e.lv50Talent===m.a.WELLSPRING_TALENT.id,castEfficiency:{suggestion:!0,majorIssueEfficiency:.3,averageIssueEfficiency:.5,recommendedEfficiency:.7},healSpellIds:[m.a.WELLSPRING_HEAL.id]},{spell:m.a.CLOUDBURST_TOTEM_TALENT,buffSpellId:m.a.CLOUDBURST_TOTEM_TALENT.id,category:a.SPELL_CATEGORIES.ROTATIONAL,charges:e.hasTalent(m.a.ECHO_OF_THE_ELEMENTS_TALENT.id)?2:1,cooldown:30,timelineSortIndex:16,gcd:{static:1e3},enabled:e.hasTalent(m.a.CLOUDBURST_TOTEM_TALENT.id),castEfficiency:{suggestion:!0,majorIssueEfficiency:.5,averageIssueEfficiency:.7,recommendedEfficiency:.9},healSpellIds:[m.a.CLOUDBURST_TOTEM_HEAL.id]},{spell:m.a.EARTHEN_WALL_TOTEM_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:60,timelineSortIndex:20,gcd:{static:1e3},enabled:e.hasTalent(m.a.EARTHEN_WALL_TOTEM_TALENT.id),castEfficiency:{suggestion:!0,majorIssueEfficiency:.5,averageIssueEfficiency:.7,recommendedEfficiency:.9},healSpellIds:[m.a.EARTHEN_WALL_TOTEM_ABSORB.id]},{spell:m.a.UNLEASH_LIFE_TALENT,buffSpellId:m.a.UNLEASH_LIFE_TALENT.id,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:15,timelineSortIndex:5,gcd:{base:1500},enabled:e.lv15Talent===m.a.UNLEASH_LIFE_TALENT.id,castEfficiency:{suggestion:!0,majorIssueEfficiency:.5,averageIssueEfficiency:.7,recommendedEfficiency:.9}},{spell:m.a.ASCENDANCE_TALENT_RESTORATION,buffSpellId:m.a.ASCENDANCE_TALENT_RESTORATION.id,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{base:1500},enabled:e.lv50Talent===m.a.ASCENDANCE_TALENT_RESTORATION.id,castEfficiency:{suggestion:!0,majorIssueEfficiency:.2,averageIssueEfficiency:.5,recommendedEfficiency:.8},healSpellIds:[m.a.ASCENDANCE_HEAL.id,m.a.ASCENDANCE_INITIAL_HEAL.id]},{spell:m.a.HEALING_TIDE_TOTEM_CAST,buffSpellId:m.a.HEALING_TIDE_TOTEM_CAST.id,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{static:1e3},castEfficiency:{suggestion:!0,majorIssueEfficiency:.2,averageIssueEfficiency:.5,recommendedEfficiency:.7},healSpellIds:[m.a.HEALING_TIDE_TOTEM_HEAL.id]},{spell:m.a.SPIRIT_LINK_TOTEM,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{static:1e3},castEfficiency:{suggestion:!0,majorIssueEfficiency:.2,averageIssueEfficiency:.4,recommendedEfficiency:.6}},{spell:m.a.MANA_TIDE_TOTEM_CAST,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{static:1e3},castEfficiency:{suggestion:!0,majorIssueEfficiency:.2,averageIssueEfficiency:.4,recommendedEfficiency:.6}},{spell:m.a.HEALING_WAVE,timelineSortIndex:13,gcd:{base:1500},category:a.SPELL_CATEGORIES.OTHERS,castEfficiency:{casts:function(e){return e.casts-(e.healingTwHits||0)}}},{spell:m.a.HEALING_WAVE,name:Ae.i18n._({id:"shaman.restoration.abilities.buffedByTidalWave",defaults:"Tidal Waved {0}",values:{0:m.a.HEALING_WAVE.name}}),timelineSortIndex:13,gcd:{base:1500},category:a.SPELL_CATEGORIES.OTHERS,castEfficiency:{casts:function(e){return e.healingTwHits||0}}},{spell:m.a.HEALING_SURGE,timelineSortIndex:14,gcd:{base:1500},category:a.SPELL_CATEGORIES.OTHERS,castEfficiency:{casts:function(e){return e.casts-(e.healingTwHits||0)}}},{spell:m.a.HEALING_SURGE,name:Ae.i18n._({id:"shaman.restoration.abilities.buffedByTidalWave",defaults:"Tidal Waved {0}",values:{0:m.a.HEALING_SURGE.name}}),timelineSortIndex:14,gcd:{base:1500},category:a.SPELL_CATEGORIES.OTHERS,castEfficiency:{casts:function(e){return e.healingTwHits||0}}},{spell:m.a.CHAIN_HEAL,buffSpellId:m.a.HIGH_TIDE_BUFF.id,category:a.SPELL_CATEGORIES.OTHERS,timelineSortIndex:12,gcd:{base:1500}},{spell:m.a.PURIFY_SPIRIT,category:a.SPELL_CATEGORIES.UTILITY,timelineSortIndex:80,cooldown:8,gcd:{base:1500}},{spell:m.a.FLAME_SHOCK,buffSpellId:m.a.FLAME_SHOCK.id,category:a.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,timelineSortIndex:60,cooldown:6,gcd:{base:1500}},{spell:m.a.LAVA_BURST,buffSpellId:m.a.LAVA_SURGE.id,category:a.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,charges:e.hasTalent(m.a.ECHO_OF_THE_ELEMENTS_TALENT.id)?2:1,timelineSortIndex:60,cooldown:8,gcd:{base:1500}},{spell:m.a.LIGHTNING_BOLT,category:a.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,gcd:{base:1500},timelineSortIndex:60},{spell:m.a.CHAIN_LIGHTNING,category:a.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,gcd:{base:1500},timelineSortIndex:60},{spell:m.a.GHOST_WOLF,buffSpellId:m.a.GHOST_WOLF.id,category:a.SPELL_CATEGORIES.UTILITY,timelineSortIndex:80,gcd:{base:1500}},{spell:m.a.SPIRITWALKERS_GRACE,buffSpellId:m.a.SPIRITWALKERS_GRACE.id,category:a.SPELL_CATEGORIES.UTILITY,cooldown:e.hasTalent(m.a.GRACEFUL_SPIRIT_TALENT.id)?60:120,timelineSortIndex:81},{spell:m.a.EARTHBIND_TOTEM,category:a.SPELL_CATEGORIES.UTILITY,timelineSortIndex:80,gcd:{base:1e3},cooldown:30},{spell:m.a.PURGE,category:a.SPELL_CATEGORIES.UTILITY,timelineSortIndex:80,gcd:{base:1500}},{spell:m.a.CAPACITOR_TOTEM,category:a.SPELL_CATEGORIES.UTILITY,timelineSortIndex:80,gcd:{static:1e3},cooldown:60},{spell:m.a.WIND_RUSH_TOTEM_TALENT,category:a.SPELL_CATEGORIES.UTILITY,timelineSortIndex:80,gcd:{static:1e3},enabled:e.hasTalent(m.a.WIND_RUSH_TOTEM_TALENT.id),cooldown:120},{spell:m.a.EARTHGRAB_TOTEM_TALENT,category:a.SPELL_CATEGORIES.UTILITY,timelineSortIndex:80,gcd:{static:1e3},enabled:e.hasTalent(m.a.EARTHGRAB_TOTEM_TALENT.id),cooldown:30},{spell:m.a.ANCESTRAL_PROTECTION_TOTEM_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,gcd:{static:1e3},enabled:e.hasTalent(m.a.ANCESTRAL_PROTECTION_TOTEM_TALENT.id),cooldown:300},{spell:m.a.REINCARNATION,category:a.SPELL_CATEGORIES.UTILITY,cooldown:1800},{spell:m.a.WIND_SHEAR,category:a.SPELL_CATEGORIES.UTILITY,timelineSortIndex:80,cooldown:12,gcd:null},{spell:[m.a.HEX,m.a.HEX_RAPTOR,m.a.HEX_SNAKE,m.a.HEX_SPIDER,m.a.HEX_COCKROACH],buffSpellId:[m.a.HEX.id,m.a.HEX_RAPTOR.id,m.a.HEX_SNAKE.id,m.a.HEX_SPIDER.id,m.a.HEX_COCKROACH.id],category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},timelineSortIndex:80,cooldown:30},{spell:m.a.EARTH_SHIELD,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500},timelineSortIndex:80,healSpellIds:[m.a.EARTH_SHIELD_HEAL.id]},{spell:m.a.TREMOR_TOTEM,category:a.SPELL_CATEGORIES.UTILITY,cooldown:60,gcd:{base:1e3},timelineSortIndex:80},{spell:m.a.DOWNPOUR_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:35,gcd:{base:1500},timelineSortIndex:20,enabled:e.hasTalent(m.a.DOWNPOUR_TALENT.id),castEfficiency:{suggestion:!0,majorIssueEfficiency:.2,averageIssueEfficiency:.4,recommendedEfficiency:.6}},{spell:m.a.BERSERKING,buffSpellId:m.a.BERSERKING.id,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,isUndetectable:!0,gcd:null,castEfficiency:{suggestion:!0,majorIssueEfficiency:.2,averageIssueEfficiency:.5,recommendedEfficiency:.7}},{spell:m.a.EARTH_ELEMENTAL,category:a.SPELL_CATEGORIES.UTILITY,cooldown:300,gcd:{base:1500},timelineSortIndex:80},{spell:m.a.NATURES_GUARDIAN_TALENT,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:45,enabled:e.hasTalent(m.a.NATURES_GUARDIAN_TALENT.id),healSpellIds:[m.a.NATURES_GUARDIAN_HEAL.id]},{spell:m.a.ROCKET_JUMP,category:a.SPELL_CATEGORIES.UTILITY,timelineSortIndex:80,cooldown:90,gcd:{base:1500},isUndetectable:!0},{spell:m.a.WATER_SHIELD,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:m.a.LIGHTNING_SHIELD,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},isUndetectable:!0},{spell:m.a.FROST_SHOCK,category:a.SPELL_CATEGORIES.HEALER_DAMAGING_SPELL,gcd:{base:1500}},{spell:m.a.SURGE_OF_EARTH_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:20,gcd:{base:1500},enabled:e.hasTalent(m.a.SURGE_OF_EARTH_TALENT.id),healSpellIds:[m.a.SURGE_OF_EARTH_HEAL.id],castEfficiency:{suggestion:!0,majorIssueEfficiency:.4,averageIssueEfficiency:.6,recommendedEfficiency:.8}}]}}]),a}(j.a),_e=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).combatants=void 0,n.healingRainDiameter=2100,n.healingRainEvents=[],n.newHealingRain=!1,n.lastHealingRainTick=0,n.firstHealingRainTick=0,n.active=n.selectedCombatant.hasTalent(m.a.DELUGE_TALENT.id),n.addEventListener(P.f.heal.by(D.a).spell(m.a.HEALING_RAIN_HEAL),n.healingRainHeal),n.addEventListener(P.f.begincast.by(D.a).spell(m.a.HEALING_RAIN_CAST),n.healingRainCast),n}return Object(s.a)(a,[{key:"healingRainHeal",value:function(e){this.combatants.getEntity(e)&&(this.newHealingRain&&(this.firstHealingRainTick=e.timestamp,this.healingRainEvents.length=0,this.newHealingRain=!1),this.lastHealingRainTick=e.timestamp,this.healingRainEvents.push(e))}},{key:"healingRainCast",value:function(){this.newHealingRain=!0}},{key:"processHealingRain",value:function(e,t){var a=this;if(0===this.healingRainEvents.length)return 0;var n=this.locate(this.healingRainEvents);if(!n)return 0;var i=e.filter((function(e){return e.timestamp>=a.firstHealingRainTick&&e.timestamp<=a.lastHealingRainTick}));return i?this.sumHealing(i,t,n):0}},{key:"sumHealing",value:function(e,t,a){var n=this;return e.reduce((function(e,i){var s={x:i.x,y:i.y};return n._isPlayerInsideHealingRain(s,a)?e+Object(Te.a)(i,t):e}),0)}},{key:"locate",value:function(e){var t=e.reduce((function(e,t){return e.minY=Math.min(t.y,e.minY),e.maxY=Math.max(t.y,e.maxY),e.minX=Math.min(t.x,e.minX),e.maxX=Math.max(t.x,e.maxX),e}),{minY:Number.MAX_VALUE,maxY:-Number.MAX_VALUE,minX:Number.MAX_VALUE,maxX:-Number.MAX_VALUE}),a=t.minY,n=t.maxY,i=t.minX,s=t.maxX,r=s-i,l=n-a;return l>=this.healingRainDiameter||r>=this.healingRainDiameter?(console.warn("Reported Healing Rain size is too large, something went wrong.","Allowed Size:",this.healingRainDiameter,"Reported Width:",r,"Reported Height:",l),null):{ellipseCenterPoint:{x:(s+i)/2,y:(n+a)/2},ellipseWidth:r,ellipseHeight:l}}},{key:"_isPlayerInsideHealingRain",value:function(e,t){return Math.pow(e.x-t.ellipseCenterPoint.x,2)/Math.pow(t.ellipseWidth,2)+Math.pow(e.y-t.ellipseCenterPoint.y,2)/Math.pow(t.ellipseHeight,2)<=1}}]),a}(D.c);_e.dependencies={combatants:K.a};var Oe=_e,He=a(996),Ie=a(122),Ne=a(825),Se=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).totalMasteryHealing=0,n.totalMaxPotentialMasteryHealing=0,n.masteryHealEvents=[],n.addEventListener(P.f.heal.by(D.a|D.b).spell(oe.b),n.onHeal),n}return Object(s.a)(a,[{key:"onHeal",value:function(e){var t=new Ne.a(e.amount,e.absorbed,e.overheal),a=e.hitPoints-e.amount,n=Math.max(0,1-a/e.maxHitPoints),i=this.statTracker.currentMasteryPercentage,s=t.raw/(1+i*n),r=t.raw-s,l=s*i;this.totalMasteryHealing+=Math.max(0,r-(e.overheal||0)),this.totalMaxPotentialMasteryHealing+=Math.max(0,l-(e.overheal||0)),this.masteryHealEvents.push(Object(re.a)(Object(re.a)({},e),{},{effectiveHealing:t.effective,healthBeforeHeal:a,masteryEffectiveness:n,baseHealingDone:s,masteryHealingDone:r,maxPotentialMasteryHealing:l})),e.masteryEffectiveness=n}},{key:"statistic",value:function(){var e=this.statTracker.currentMasteryPercentage,t=this.masteryEffectivenessPercent*e;return[d.a.createElement(F.b,{key:"StatisticBox",icon:d.a.createElement(x.a,{id:m.a.DEEP_HEALING.id}),value:"".concat(Object(W.e)(this.masteryEffectivenessPercent)," %"),position:F.a.CORE(30),label:d.a.createElement(T.a,{content:d.a.createElement(_.Trans,{id:"shaman.restoration.masteryEffectiveness.statistic.tooltip",values:{0:Object(W.e)(e),1:Object(W.e)(t)}})},d.a.createElement(_.Trans,{id:"shaman.restoration.masteryEffectiveness.statistic.label"}))}),d.a.createElement(O.a,{key:"Panel",title:d.a.createElement(_.Trans,{id:"shaman.restoration.masteryEffectiveness.statistic.panel"}),position:200,pad:!1},d.a.createElement(He.a,{report:this.report,spellreport:this.spellReport,players:this.owner.players}))]}},{key:"masteryEffectivenessPercent",get:function(){return this.totalMasteryHealing/this.totalMaxPotentialMasteryHealing}},{key:"report",get:function(){var e=this;return this.masteryHealEvents.reduce((function(t,a){if(!t[a.targetID]){var n=e.combatants.players[a.targetID];t[a.targetID]={combatant:n,effectiveHealing:0,healingReceived:0,healingFromMastery:0,maxPotentialHealingFromMastery:0}}var i=t[a.targetID];return i.effectiveHealing+=a.effectiveHealing,i.healingReceived+=a.amount,i.healingFromMastery+=a.masteryHealingDone,i.maxPotentialHealingFromMastery+=a.maxPotentialMasteryHealing,t}),{})}},{key:"spellReport",get:function(){return this.masteryHealEvents.reduce((function(e,t){if(!oe.e.some((function(e){return e.id===t.ability.guid})))return e;e[t.ability.guid]||(e[t.ability.guid]={spellId:t.ability.guid,effectiveHealing:0,healingReceived:0,healingFromMastery:0,maxPotentialHealingFromMastery:0});var a=e[t.ability.guid];return a.effectiveHealing+=t.effectiveHealing,a.healingReceived+=t.amount,a.healingFromMastery+=t.masteryHealingDone,a.maxPotentialHealingFromMastery+=t.maxPotentialMasteryHealing,e}),{})}}]),a}(D.c);Se.dependencies={abilityTracker:U,combatants:K.a,statTracker:Ie.a};var Re=Se,Ce=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"suggestions",value:function(e){var t=this.nonHealingTimeSuggestionThresholds,a=this.downtimeSuggestionThresholds;e(t.actual).isGreaterThan(t.isGreaterThan.minor).addSuggestion((function(e,a,n){return e("Your non healing time can be improved. Try to cast heals more regularly (".concat(Math.round(100*t.actual),"% non healing time).")).icon("petbattle_health-down").actual("".concat(Object(W.e)(t.actual),"% ").concat(Ae.i18n._({id:"shared.suggestions.alwaysBeCasting.nonHealingTime",defaults:"non healing time"}))).recommended("<".concat(Object(W.e)(t.isGreaterThan.minor),"% is recommended")).regular(t.isGreaterThan.average).major(t.isGreaterThan.major)})),e(a.actual).isGreaterThan(.2).addSuggestion((function(e,t,n){return e("Your downtime can be improved. Try to Always Be Casting (ABC); when you're not healing try to contribute some damage.").icon("spell_mage_altertime").actual("".concat(Object(W.e)(a.actual),"% ").concat(Ae.i18n._({id:"shared.suggestions.alwaysBeCasting.downtime",defaults:"downtime"}))).recommended("<".concat(Object(W.e)(a.isGreaterThan.minor),"% is recommended")).regular(a.isGreaterThan.average).major(a.isGreaterThan.major)}))}}]),a}(a(870).a);Ce.HEALING_ABILITIES_ON_GCD=[m.a.HEALING_WAVE.id,m.a.CHAIN_HEAL.id,m.a.HEALING_SURGE.id,m.a.RIPTIDE.id,m.a.HEALING_RAIN_CAST.id,m.a.HEALING_STREAM_TOTEM_CAST.id,m.a.HEALING_TIDE_TOTEM_CAST.id,m.a.SPIRIT_LINK_TOTEM.id,m.a.WELLSPRING_TALENT.id,m.a.CLOUDBURST_TOTEM_TALENT.id,m.a.EARTHEN_WALL_TOTEM_TALENT.id,m.a.UNLEASH_LIFE_TALENT.id,m.a.EARTH_SHIELD.id,m.a.DOWNPOUR_TALENT.id,m.a.MANA_TIDE_TOTEM_CAST.id,m.a.SURGE_OF_EARTH_TALENT.id,m.a.PRIMORDIAL_WAVE_CAST.id];var ke=Ce,je=a(203),we=a(819),De=a(777),Pe=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).abilityTracker=void 0,n.combatants=void 0,n.buffer=[],n.chainHealHistory=[],n.castIndex=0,n.chainHealTimestamp=0,n.maxTargets=4,n.suggestedTargets=0,n.suggestedTargets=.97*n.maxTargets,n.addEventListener(P.f.heal.by(D.a).spell(m.a.CHAIN_HEAL),n.chainHeal),n.addEventListener(P.f.cast.by(D.a).spell(m.a.CHAIN_HEAL),n.chainHeal),n}return Object(s.a)(a,[{key:"chainHeal",value:function(e){(!this.chainHealTimestamp||e.timestamp-this.chainHealTimestamp>250)&&(this.processBuffer(),this.chainHealTimestamp=e.timestamp),this.buffer.push(Object(re.a)({},e))}},{key:"processBuffer",value:function(){if(0!==this.buffer.length){this.castIndex+=1;var e=this.buffer.find((function(e){return e.type===P.b.Cast}));if(e){var t=this.combatants.getEntity(e);t&&(this.chainHealHistory[this.castIndex]={target:{id:e.targetID,name:t.name,spec:Z.a[t.specId],specClassName:Z.a[t.specId].className.replace(" ","")},timestamp:e.timestamp,castNo:this.castIndex,hits:this.buffer.filter((function(e){return e.type===P.b.Heal})).length},this.buffer=[])}}}},{key:"suggestions",value:function(e){var t=this,a=this.suggestionThreshold;isNaN(a.actual)||e(a.actual).isLessThan(a.isLessThan.minor).addSuggestion((function(e,n,i){return e(d.a.createElement(_.Trans,{id:"shaman.restoration.suggestions.aoeTargets.label",values:{0:t.maxTargets},components:[d.a.createElement(E.a,{id:m.a.CHAIN_HEAL.id})]})).icon(m.a.CHAIN_HEAL.icon).actual("".concat(a.actual.toFixed(2)," ").concat(Ae.i18n._({id:"shaman.restoration.suggestions.aoeTargets.averageTargets",defaults:"average targets healed"}))).recommended("".concat(a.isLessThan.minor," ").concat(Ae.i18n._({id:"shaman.restoration.suggestions.aoeTargets.averageTargets",defaults:"average targets healed"}))).regular(a.isLessThan.average).major(a.isLessThan.major)}))}},{key:"statistic",value:function(){var e=this;if(0===this.casts)return!1;var t=this.chainHealHistory.filter((function(e){return 1===e.hits}));return d.a.createElement(F.b,{icon:d.a.createElement(x.a,{id:m.a.CHAIN_HEAL.id}),value:this.avgHits.toFixed(2),position:F.a.OPTIONAL(70),label:d.a.createElement(T.a,{content:d.a.createElement(_.Trans,{id:"shaman.restoration.chainHeal.averageTargets.tooltip",values:{0:this.casts,1:this.avgHits.toFixed(2),2:this.maxTargets}})},d.a.createElement(_.Trans,{id:"shaman.restoration.chainHeal.averageTargets"}))},t.length>0&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",null,d.a.createElement(_.Trans,{id:"shaman.restoration.chainHeal.averageTargets.title"})),d.a.createElement("table",{className:"table table-condensed"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.cast"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.time"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.target"})))),d.a.createElement("tbody",null,this.chainHealHistory.filter((function(e){return 1===e.hits})).map((function(t){return d.a.createElement("tr",{key:t.timestamp},d.a.createElement("th",{scope:"row"},Object(W.c)(t.castNo)),d.a.createElement("td",null,Object(W.a)((t.timestamp-e.owner.fight.start_time)/1e3,0)),d.a.createElement("td",{className:t.target.specClassName}," ",d.a.createElement(q.a,{id:t.target.spec.id})," ",t.target.name))}))))))}},{key:"avgHits",get:function(){var e=this.abilityTracker.getAbility(m.a.CHAIN_HEAL.id),t=e.casts;return e.healingHits/t||0}},{key:"casts",get:function(){return this.abilityTracker.getAbility(m.a.CHAIN_HEAL.id).casts}},{key:"suggestionThreshold",get:function(){return{actual:this.avgHits,isLessThan:{minor:this.suggestedTargets,average:this.suggestedTargets-1,major:this.suggestedTargets-2},style:"number"}}}]),a}(D.c);Pe.dependencies={abilityTracker:U,combatants:K.a};var Ge=Pe,Ue=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).combatants=void 0,n.healingRainTicks=[],n.addEventListener(P.f.heal.by(D.a).spell(m.a.HEALING_RAIN_HEAL),n.onHealingRainHeal),n}return Object(s.a)(a,[{key:"suggestions",value:function(e){var t=this.suggestionThreshold;e(t.actual).isLessThan(t.isLessThan.minor).addSuggestion((function(e,a,n){return e(d.a.createElement("span",null,"Try to always cast ",d.a.createElement(E.a,{id:m.a.HEALING_RAIN_CAST.id})," in areas where players stack. This allows the spell to consitantly hit all 6 possible targets.")).icon(m.a.HEALING_RAIN_CAST.icon).actual(Ae.i18n._({id:"shaman.restoration.suggestions.healingRain.averageTargets",defaults:"{0} average targets healed",values:{0:t.actual.toFixed(2)}})).recommended("".concat(t.isLessThan.minor," average targets healed")).regular(t.isLessThan.average).major(t.isLessThan.average)}))}},{key:"onHealingRainHeal",value:function(e){if(this.combatants.getEntity(e)||!e.overheal||0!==e.amount){var t=this.healingRainTicks.find((function(t){return e.timestamp-85<=t.timestamp}));t?t.hits=t.hits+1>6?t.hits=6:t.hits+1:this.healingRainTicks.push({timestamp:e.timestamp,hits:1})}}},{key:"statistic",value:function(){return!isNaN(this.averageHitsPerTick)&&d.a.createElement(F.b,{icon:d.a.createElement(x.a,{id:m.a.HEALING_RAIN_HEAL.id}),value:"".concat(this.averageHitsPerTick.toFixed(2)),position:F.a.OPTIONAL(),label:d.a.createElement(T.a,{content:d.a.createElement(_.Trans,{id:"shaman.restoration.healingRain.averageTargets.label.tooltip"})},d.a.createElement(_.Trans,{id:"shaman.restoration.healingRain.averageTargets.label"}))})}},{key:"averageHitsPerTick",get:function(){return this.healingRainTicks.reduce((function(e,t){return e+t.hits}),0)/this.healingRainTicks.length}},{key:"suggestionThreshold",get:function(){return{actual:this.averageHitsPerTick,isLessThan:{minor:5,average:3,major:2},style:"number"}}}]),a}(D.c);Ue.dependencies={combatants:K.a};var Be=Ue,Fe=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).cooldownThroughputTracker=void 0,n.prepullApplication=!1,n.addEventListener(P.f.applybuff.by(D.a).spell(m.a.EARTH_SHIELD),n.earthShieldPrepullCheck),n}return Object(s.a)(a,[{key:"earthShieldPrepullCheck",value:function(e){e.prepull&&(this.prepullApplication=!0)}},{key:"getFeeding",value:function(){return this.cooldownThroughputTracker.getIndirectHealing(m.a.EARTH_SHIELD_HEAL.id)}},{key:"suggestionThresholds",get:function(){return{actual:this.uptimePercent,isLessThan:{minor:.9,average:.85,major:.8},style:te.a.PERCENTAGE}}},{key:"suggestionThresholdsPrepull",get:function(){return{actual:this.prepullApplication,isEqual:!1,style:te.a.BOOLEAN}}}]),a}(w.b);Fe.dependencies=Object(re.a)(Object(re.a)({},w.b.dependencies),{},{cooldownThroughputTracker:de});var Me=Fe,xe=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).combatants=void 0,n.cooldownThroughputTracker=void 0,n.healing=0,n.wellspringCasts=[],n.wellspringTimestamps=[],n.castNumber=0,n.castEvent=void 0,n.active=n.selectedCombatant.hasTalent(m.a.WELLSPRING_TALENT.id),n.addEventListener(P.f.begincast.by(D.a).spell(m.a.WELLSPRING_TALENT),n._onBegincast),n.addEventListener(P.f.cast.by(D.a).spell(m.a.WELLSPRING_TALENT),n._onCast),n.addEventListener(P.f.heal.by(D.a).spell(m.a.WELLSPRING_HEAL),n._onHeal),n.addEventListener(P.f.fightend,n._onFightend),n}return Object(s.a)(a,[{key:"_onBegincast",value:function(e){e.ability.guid!==m.a.WELLSPRING_TALENT.id||e.isCancelled||(this.wellspringCasts[this.castNumber]&&this.wellspringCasts[this.castNumber]<6&&this.registerInefficientCast(),this.castNumber+=1,this.wellspringTimestamps[this.castNumber]=e.timestamp)}},{key:"_onCast",value:function(e){this.castEvent=e}},{key:"_onHeal",value:function(e){this.wellspringCasts[this.castNumber]||(this.wellspringCasts[this.castNumber]=0),this.healing+=e.amount+(e.absorbed||0),this.combatants.getEntity(e)&&(e.overheal&&0===e.amount||(this.wellspringCasts[this.castNumber]+=1))}},{key:"_onFightend",value:function(){this.wellspringCasts[this.castNumber]&&this.wellspringCasts[this.castNumber]<6&&this.castEvent&&!this.castEvent.meta&&this.registerInefficientCast()}},{key:"registerInefficientCast",value:function(){this.castEvent&&(this.castEvent.meta=this.castEvent.meta||{},this.castEvent.meta.isInefficientCast=!0,this.castEvent.meta.inefficientCastReason=d.a.createElement(_.Trans,{id:"shaman.restoration.wellspring.inefficientCast.reason"}))}},{key:"suggestions",value:function(e){var t=this.suggestionThreshold;e(t.actual).isLessThan(t.isLessThan.minor).addSuggestion((function(e,a,n){return e(d.a.createElement(_.Trans,{id:"shaman.restoration.suggestions.wellSpring.label",components:[d.a.createElement(E.a,{id:m.a.WELLSPRING_TALENT.id})]})).icon(m.a.WELLSPRING_TALENT.icon).actual("".concat(Object(W.e)(t.actual),"% ").concat(Ae.i18n._({id:"shared.suggestions.efficiency",defaults:"efficiency"}))).recommended(">".concat(Object(W.e)(t.isLessThan.minor),"% efficiency is recommended")).regular(t.isLessThan.average).major(t.isLessThan.average)}))}},{key:"statistic",value:function(){var e=this;return!isNaN(this.averageHitsPerCast)&&d.a.createElement(F.b,{icon:d.a.createElement(x.a,{id:m.a.WELLSPRING_TALENT.id}),label:d.a.createElement(_.Trans,{id:"shaman.restoration.wellspring.statistic.label"}),value:"".concat(Object(W.e)(this.wellspringEfficiency)," %"),tooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.wellspring.statistic.tooltip"}),category:me.a.TALENTS,position:F.a.OPTIONAL(100)},d.a.createElement("table",{className:"table table-condensed"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.cast"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.time"})),d.a.createElement("th",null))),d.a.createElement("tbody",null,this.wellspringCasts.map((function(t,a){return d.a.createElement("tr",{key:a},d.a.createElement("th",{scope:"row"},Object(W.c)(a)),d.a.createElement("td",null,Object(W.a)((e.wellspringTimestamps[a]-e.owner.fight.start_time)/1e3)||0),d.a.createElement("td",{style:t<6?{color:"red",fontWeight:"bold"}:{}},t," hits"))})))))}},{key:"subStatistic",value:function(){var e=this.cooldownThroughputTracker.getIndirectHealing(m.a.WELLSPRING_HEAL.id);return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.WELLSPRING_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing+e))," %")})}},{key:"averageHitsPerCast",get:function(){return this.wellspringCasts.reduce((function(e,t){return e+t}),0)/this.numberOfCasts}},{key:"wellspringEfficiency",get:function(){return 1-this.inefficientCasts/this.numberOfCasts}},{key:"numberOfCasts",get:function(){return this.wellspringCasts.length-(this.wellspringCasts[0]?0:1)}},{key:"inefficientCasts",get:function(){return this.wellspringCasts.reduce((function(e,t){return t<6?e+1:e}),0)}},{key:"suggestionThreshold",get:function(){return{actual:this.wellspringEfficiency,isLessThan:{minor:.8,average:.6,major:.5},style:"percentage"}}}]),a}(D.c);xe.dependencies={combatants:K.a,cooldownThroughputTracker:de};var We=xe,Ve=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).earthenWallTotems=[],n.castNumber=0,n.prePullCast=!0,n.isMaghar=!1,n.combatants=void 0,n.active=n.selectedCombatant.hasTalent(m.a.EARTHEN_WALL_TOTEM_TALENT.id),n.isMaghar=n.selectedCombatant.race&&"Mag'har Orc"===n.selectedCombatant.race.name,n.addEventListener(P.f.cast.by(D.a).spell(m.a.EARTHEN_WALL_TOTEM_TALENT),n._onCast),n.addEventListener(P.f.damage.to(D.b).spell(m.a.EARTHEN_WALL_TOTEM_SELF_DAMAGE),n._updateTotemHealth),n.addEventListener(P.f.absorbed.by(D.b).spell(m.a.EARTHEN_WALL_TOTEM_ABSORB),n._onAbsorbed),n}return Object(s.a)(a,[{key:"_onCast",value:function(e){this.prePullCast&&(this.prePullCast=!1),this.castNumber+=1,this.earthenWallTotems[this.castNumber]={potentialHealing:this.isMaghar?Math.floor(e.maxHitPoints||0):e.maxHitPoints||0,effectiveHealing:0,timestamp:e.timestamp}}},{key:"_updateTotemHealth",value:function(e){this.prePullCast&&(this.earthenWallTotems[this.castNumber]={potentialHealing:e.maxHitPoints||0,effectiveHealing:this.earthenWallTotems[this.castNumber]&&this.earthenWallTotems[this.castNumber].effectiveHealing||0,timestamp:this.owner.fight.start_time},this.prePullCast=!1),e.maxHitPoints&&this.earthenWallTotems[this.castNumber].potentialHealing!==e.maxHitPoints&&(this.isMaghar=!0,this.earthenWallTotems[this.castNumber].potentialHealing=e.maxHitPoints)}},{key:"_onAbsorbed",value:function(e){this.combatants.getEntity(e)&&(this.earthenWallTotems[this.castNumber]||(this.earthenWallTotems[this.castNumber]={effectiveHealing:0,potentialHealing:0,timestamp:e.timestamp}),this.earthenWallTotems[this.castNumber].effectiveHealing+=e.amount)}},{key:"suggestions",value:function(e){var t=this;e(this.earthenWallEfficiency).isLessThan(.8).addSuggestion((function(e,a,n){return e(d.a.createElement(_.Trans,{id:"shaman.restoration.ewt.suggestion.label",components:[d.a.createElement(E.a,{id:m.a.EARTHEN_WALL_TOTEM_TALENT.id})]})).icon(m.a.EARTHEN_WALL_TOTEM_TALENT.icon).actual("".concat(t.earthenWallEfficiency.toFixed(2),"%")).recommended("".concat(n,"%")).regular(n-.15).major(n-.3)}))}},{key:"statistic",value:function(){var e=this,t=this.earthenWallTotems.filter((function(e){return e.timestamp>0})).length;return d.a.createElement(F.b,{icon:d.a.createElement(x.a,{id:m.a.EARTHEN_WALL_TOTEM_TALENT.id}),value:"".concat(Object(W.e)(this.earthenWallEfficiency)," %"),category:me.a.TALENTS,position:F.a.OPTIONAL(60),label:d.a.createElement(_.Trans,{id:"shaman.restoration.ewt.statistic.label"}),tooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.ewt.statistic.tooltip",values:{0:Object(W.d)(this.totalPotentialHealing),1:Object(W.d)(this.totalEffectiveHealing),casts:t},components:[d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("strong",null)]})},d.a.createElement("table",{className:"table table-condensed"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.cast"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.time"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.efficiency"})))),d.a.createElement("tbody",null,this.earthenWallTotems.filter((function(e){return e.timestamp>0})).map((function(t,a){var n=t.effectiveHealing/t.potentialHealing;return d.a.createElement("tr",{key:a},d.a.createElement("th",{scope:"row"},Object(W.c)(a+1)),d.a.createElement("td",null,Object(W.a)((t.timestamp-e.owner.fight.start_time)/1e3)||0),d.a.createElement("td",{style:n<.8?{color:"red",fontWeight:"bold"}:{}},Object(W.e)(n)," %"))})))))}},{key:"subStatistic",value:function(){return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.EARTHEN_WALL_TOTEM_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.totalEffectiveHealing))," %"),valueTooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.ewt.statisticlist.tooltip"})})}},{key:"totalEffectiveHealing",get:function(){return Object.values(this.earthenWallTotems).reduce((function(e,t){return e+t.effectiveHealing}),0)}},{key:"totalPotentialHealing",get:function(){return Object.values(this.earthenWallTotems).reduce((function(e,t){return e+t.potentialHealing}),0)}},{key:"earthenWallEfficiency",get:function(){return this.totalEffectiveHealing/this.totalPotentialHealing}},{key:"suggestionThreshold",get:function(){return{actual:this.earthenWallEfficiency,isLessThan:{minor:.75,average:.6,major:.45},style:"percentage"}}}]),a}(D.c);Ve.dependencies={combatants:K.a};var Ye=Ve,ze=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).healing=0,n.cooldownThroughputTracker=void 0,n.abilityTracker=void 0,n.maxTargets=3,n.active=n.selectedCombatant.hasTalent(m.a.SURGE_OF_EARTH_TALENT.id),n.addEventListener(P.f.heal.by(D.a).spell(m.a.SURGE_OF_EARTH_HEAL),n._onHeal),n}return Object(s.a)(a,[{key:"_onHeal",value:function(e){this.healing+=e.amount+(e.absorbed||0)}},{key:"subStatistic",value:function(){return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.SURGE_OF_EARTH_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing+this.feeding))," %")})}},{key:"suggestions",value:function(e){var t=this,a=this.suggestionThreshold;e(a.actual).isLessThan(a.isLessThan.minor).addSuggestion((function(e,n,i){return e(d.a.createElement(_.Trans,{id:"shaman.restoration.suggestions.aoeTargets.label",values:{0:t.maxTargets},components:[d.a.createElement(E.a,{id:m.a.SURGE_OF_EARTH_TALENT.id})]})).icon(m.a.SURGE_OF_EARTH_TALENT.icon).actual("".concat(a.actual.toFixed(2)," ").concat(Ae.i18n._({id:"shaman.restoration.suggestions.aoeTargets.averageTargets",defaults:"average targets healed"}))).recommended(">".concat(a.isLessThan.minor.toFixed(2)," ").concat(Ae.i18n._({id:"shaman.restoration.suggestions.aoeTargets.averageTargets",defaults:"average targets healed"}))).regular(a.isLessThan.average).major(a.isLessThan.average)}))}},{key:"feeding",get:function(){return this.cooldownThroughputTracker.getIndirectHealing(m.a.SURGE_OF_EARTH_HEAL.id)}},{key:"averageHitsPerCast",get:function(){var e=this.abilityTracker.getAbility(m.a.SURGE_OF_EARTH_TALENT.id),t=this.abilityTracker.getAbility(m.a.SURGE_OF_EARTH_HEAL.id),a=e.casts;return t.healingHits/a||0}},{key:"numberOfCasts",get:function(){return this.abilityTracker.getAbility(m.a.SURGE_OF_EARTH_TALENT.id).casts}},{key:"suggestionThreshold",get:function(){return{actual:this.averageHitsPerCast,isLessThan:{minor:2.6,average:2.2,major:1.9},style:te.a.DECIMAL}}}]),a}(D.c);ze.dependencies={cooldownThroughputTracker:de,abilityTracker:U};var Ke=ze,Xe=a(796),Ze=a(88),qe=a(770),Je=a(762),Qe=a(763),$e=a(771),et=a(772),tt=function(e){var t=e.combatant,a=e.castEfficiency,n=e.thresholds,i=function(e){return d.a.createElement(et.a,Object.assign({castEfficiency:a.getCastEfficiencyForSpellId(e.spell)},e))};return d.a.createElement(qe.a,null,d.a.createElement(Je.c,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.efficientSpells"}),description:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.efficientSpells.description",components:[d.a.createElement(E.a,{id:m.a.RIPTIDE.id}),d.a.createElement(E.a,{id:m.a.HEALING_RAIN_CAST.id}),d.a.createElement(E.a,{id:m.a.HEALING_STREAM_TOTEM_CAST.id}),d.a.createElement(T.a,{content:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.efficientSpells.description.tooltip"})}),d.a.createElement("a",{href:"http://www.wowhead.com/restoration-shaman-rotation-guide#raid-healing-priority-list",target:"_blank",rel:"noopener noreferrer"})]})},d.a.createElement(i,{spell:m.a.RIPTIDE.id}),d.a.createElement(i,{spell:m.a.HEALING_RAIN_CAST.id}),!t.hasTalent(m.a.CLOUDBURST_TOTEM_TALENT.id)&&d.a.createElement(i,{spell:m.a.HEALING_STREAM_TOTEM_CAST.id}),t.hasTalent(m.a.CLOUDBURST_TOTEM_TALENT.id)&&d.a.createElement(i,{spell:m.a.CLOUDBURST_TOTEM_TALENT.id}),t.hasTalent(m.a.UNLEASH_LIFE_TALENT.id)&&d.a.createElement(i,{spell:m.a.UNLEASH_LIFE_TALENT.id}),t.hasTalent(m.a.EARTHEN_WALL_TOTEM_TALENT.id)&&d.a.createElement(i,{spell:m.a.EARTHEN_WALL_TOTEM_TALENT.id}),t.hasTalent(m.a.WELLSPRING_TALENT.id)&&d.a.createElement(i,{spell:m.a.WELLSPRING_TALENT.id}),t.hasTalent(m.a.DOWNPOUR_TALENT.id)&&d.a.createElement(i,{spell:m.a.DOWNPOUR_TALENT.id})),d.a.createElement(Je.c,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.cooldownUsage"}),description:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.cooldownUsage.description",components:[d.a.createElement("a",{href:"http://www.wowhead.com/restoration-shaman-rotation-guide#throughput-cooldowns",target:"_blank",rel:"noopener noreferrer"})]})},d.a.createElement(i,{spell:m.a.HEALING_TIDE_TOTEM_CAST.id}),d.a.createElement(i,{spell:m.a.SPIRIT_LINK_TOTEM.id}),d.a.createElement(i,{spell:m.a.MANA_TIDE_TOTEM_CAST.id}),t.hasTalent(m.a.ASCENDANCE_TALENT_RESTORATION.id)&&d.a.createElement(i,{spell:m.a.ASCENDANCE_TALENT_RESTORATION.id}),a.getCastEfficiencyForSpellId(m.a.BERSERKING.id)&&d.a.createElement(i,{spell:m.a.BERSERKING.id})),d.a.createElement(Je.c,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.aoeSpell"}),description:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.aoeSpell.description"})},n.chainHealTargetThresholds.actual>0&&d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.aoeSpell.targets",components:[d.a.createElement(E.a,{id:m.a.CHAIN_HEAL.id})]}),thresholds:n.chainHealTargetThresholds}),n.healingRainTargetThreshold.actual>0&&d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.aoeSpell.targets",components:[d.a.createElement(E.a,{id:m.a.HEALING_RAIN_HEAL.id})]}),thresholds:n.healingRainTargetThreshold}),t.hasTalent(m.a.WELLSPRING_TALENT.id)&&d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.aoeSpell.efficiency",components:[d.a.createElement(E.a,{id:m.a.WELLSPRING_TALENT.id})]}),thresholds:n.wellspringTargetThreshold}),t.hasTalent(m.a.EARTHEN_WALL_TOTEM_TALENT.id)&&d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.aoeSpell.efficiency",components:[d.a.createElement(E.a,{id:m.a.EARTHEN_WALL_TOTEM_TALENT.id})]}),thresholds:n.ewtTargetThreshold}),t.hasTalent(m.a.SURGE_OF_EARTH_TALENT.id)&&d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.aoeSpell.targets",components:[d.a.createElement(E.a,{id:m.a.SURGE_OF_EARTH_TALENT.id})]}),thresholds:n.soeTargetThreshold})),d.a.createElement(Je.c,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.buffUptime"}),description:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.buffUptime.description"})},d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.appliedPrepull",components:[d.a.createElement(E.a,{id:m.a.WATER_SHIELD.id})]}),thresholds:n.waterShieldPrepull}),d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.uptime",components:[d.a.createElement(E.a,{id:m.a.WATER_SHIELD.id})]}),thresholds:n.waterShieldUptime}),d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.appliedPrepull",components:[d.a.createElement(E.a,{id:m.a.EARTH_SHIELD.id})]}),thresholds:n.earthShieldPrepull}),d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.uptime",components:[d.a.createElement(E.a,{id:m.a.EARTH_SHIELD.id})]}),thresholds:n.earthShieldUptime})),d.a.createElement(Je.c,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.inactivity"}),description:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.inactivity.description",components:[d.a.createElement(T.a,{wrapperStyles:{display:"inline"},content:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.inactivity.description.tooltip"})})]})},d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.inactivity.nonHealTime"}),thresholds:n.nonHealingTimeSuggestionThresholds}),d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.inactivity.downtime"}),thresholds:n.downtimeSuggestionThresholds})),d.a.createElement(Je.c,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.manaUsage",components:[d.a.createElement(Xe.a,{id:Ze.a.MANA.id})]}),description:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.manaUsage.description"})},d.a.createElement(Qe.a,{name:d.a.createElement(_.Trans,{id:"shaman.restoration.checklist.manaUsage.manaLeft"}),thresholds:n.manaLeft})),d.a.createElement($e.a,{thresholds:n}))},at=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).combatants=void 0,e.castEfficiency=void 0,e.alwaysBeCasting=void 0,e.manaValues=void 0,e.preparationRuleAnalyzer=void 0,e.chainHeal=void 0,e.healingRain=void 0,e.waterShield=void 0,e.earthShield=void 0,e.wellspring=void 0,e.earthenWallTotem=void 0,e.surgeOfEarth=void 0,e}return Object(s.a)(a,[{key:"render",value:function(){return d.a.createElement(tt,{combatant:this.combatants.selected,castEfficiency:this.castEfficiency,thresholds:Object(re.a)(Object(re.a)({},this.preparationRuleAnalyzer.thresholds),{},{nonHealingTimeSuggestionThresholds:this.alwaysBeCasting.nonHealingTimeSuggestionThresholds,downtimeSuggestionThresholds:this.alwaysBeCasting.downtimeSuggestionThresholds,chainHealTargetThresholds:this.chainHeal.suggestionThreshold,healingRainTargetThreshold:this.healingRain.suggestionThreshold,wellspringTargetThreshold:this.wellspring.suggestionThreshold,ewtTargetThreshold:this.earthenWallTotem.suggestionThreshold,soeTargetThreshold:this.surgeOfEarth.suggestionThreshold,manaLeft:this.manaValues.suggestionThresholds,waterShieldPrepull:this.waterShield.suggestionThresholdsPrepull,waterShieldUptime:this.waterShield.suggestionThresholds,earthShieldPrepull:this.earthShield.suggestionThresholdsPrepull,earthShieldUptime:this.earthShield.suggestionThresholds})})}}]),a}(je.a);at.dependencies={combatants:K.a,castEfficiency:k.a,alwaysBeCasting:ke,manaValues:we.a,preparationRuleAnalyzer:De.a,chainHeal:Ge,healingRain:Be,waterShield:ae,earthShield:Me,wellspring:We,earthenWallTotem:Ye,surgeOfEarth:Ke};var nt,it=at,st=a(754),rt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).addEventListener(P.f.dispel.by(D.a).spell(m.a.PURIFY_SPIRIT),n.onDispel),n}return Object(s.a)(a,[{key:"onDispel",value:function(e){Object(r.a)(Object(l.a)(a.prototype),"beginCooldown",this).call(this,e.ability.guid,e)}},{key:"beginCooldown",value:function(e,t){e!==m.a.PURIFY_SPIRIT.id&&Object(r.a)(Object(l.a)(a.prototype),"beginCooldown",this).call(this,e,t)}}]),a}(st.b),lt=a(854),ct=a(19),ot=a(829),ut=(nt={},Object(B.a)(nt,m.a.HEALING_SURGE.id,{int:!0,crit:!0,hasteHpct:!0,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.HEALING_WAVE.id,{int:!0,crit:!0,hasteHpct:!0,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.RIPTIDE.id,{int:!0,crit:!0,hasteHpm:!0,hasteHpct:!1,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.HEALING_STREAM_TOTEM_HEAL.id,{int:!0,crit:!0,hasteHpm:!0,hasteHpct:!1,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.CHAIN_HEAL.id,{int:!0,crit:!0,hasteHpct:!0,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.HEALING_RAIN_HEAL.id,{int:!0,crit:!0,hasteHpm:!0,hasteHpct:!1,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.HEALING_TIDE_TOTEM_HEAL.id,{int:!0,crit:!0,hasteHpm:!0,hasteHpct:!1,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.ASCENDANCE_HEAL.id,{ignored:!0}),Object(B.a)(nt,m.a.ASCENDANCE_INITIAL_HEAL.id,{int:!0,crit:!0,hasteHpct:!1,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.CLOUDBURST_TOTEM_HEAL.id,{ignored:!0}),Object(B.a)(nt,m.a.EARTHEN_WALL_TOTEM_ABSORB.id,{ignored:!0}),Object(B.a)(nt,m.a.SPIRIT_LINK_TOTEM_REDISTRIBUTE.id,{ignored:!0}),Object(B.a)(nt,m.a.SPIRIT_LINK_TOTEM.id,{ignored:!0}),Object(B.a)(nt,m.a.UNLEASH_LIFE_TALENT.id,{int:!0,crit:!0,hasteHpct:!1,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.WELLSPRING_HEAL.id,{int:!0,crit:!0,hasteHpct:!1,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.EARTH_SHIELD_HEAL.id,{int:!0,crit:!0,hasteHpct:!1,mastery:!0,vers:!0}),Object(B.a)(nt,m.a.NATURES_GUARDIAN_HEAL.id,{ignored:!0}),Object(B.a)(nt,m.a.DOWNPOUR_TALENT.id,{int:!0,crit:!0,hasteHpct:!1,mastery:!0,vers:!0}),nt),dt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).spellInfo=ut,n.qeLive=!0,n.addEventListener(P.f.feedheal,n.onFeedHeal),n}return Object(s.a)(a,[{key:"onFeedHeal",value:function(e){var t=this._getSpellInfo(e),a=new Ne.a(e.feed,0,0),n=(e.hitPoints-e.amount)/e.maxHitPoints;this._handleHeal(t,e,a,n)}},{key:"_getCritChance",value:function(e){var t=e.ability.guid,n=Object(r.a)(Object(l.a)(a.prototype),"_getCritChance",this).call(this,e),i=this.selectedCombatant.hasBuff(m.a.TIDAL_WAVES_BUFF.id,e.timestamp,0,100);return t===m.a.HEALING_SURGE.id&&i&&(n.baseCritChance+=.4),n}},{key:"_hasteHpm",value:function(e,t){return t.overheal?0:e.ability.guid!==m.a.RIPTIDE.id||e.tick?Object(r.a)(Object(l.a)(a.prototype),"_hasteHpm",this).call(this,e,t):0}},{key:"_mastery",value:function(e,t){if(t.overheal)return 0;if(void 0===e.masteryEffectiveness)return console.error("This spell does not have a known masteryEffectiveness:",e.ability.guid,e.ability.name),0;var a=e.masteryEffectiveness,n=this.statTracker.statMultiplier.mastery/this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentMasteryRating,this.statTracker.statBaselineRatingPerPercent[ct.a.MASTERY],this.selectedCombatant.spec.masteryCoefficient)*a;return t.effective/(1+this.statTracker.currentMasteryPercentage*a)*n}},{key:"_prepareResults",value:function(){return[ct.a.INTELLECT,{stat:ct.a.CRITICAL_STRIKE,tooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.statValues.crit"})},{stat:ct.a.HASTE_HPCT,tooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.statValues.hpct",components:[d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("br",null)]})},ct.a.HASTE_HPM,ct.a.MASTERY,ct.a.VERSATILITY,ct.a.VERSATILITY_DR,ct.a.LEECH]}}]),a}(lt.a);dt.dependencies={statTracker:Ie.a,critEffectBonus:ot.a,masteryEffectiveness:Re};var ht=dt,mt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).abilityTracker=void 0,n.addEventListener(P.f.cast.by(D.a).spell(m.a.HEALING_SURGE),n._onHealingSurge),n.addEventListener(P.f.begincast.by(D.a).spell(m.a.HEALING_WAVE),n._onHealingWave),n}return Object(s.a)(a,[{key:"_onHealingSurge",value:function(e){if(this.selectedCombatant.hasBuff(m.a.TIDAL_WAVES_BUFF.id,e.timestamp,0,100)){var t=this.abilityTracker.getAbility(e.ability.guid,e.ability);t.healingTwHits=(t.healingTwHits||0)+1}}},{key:"_onHealingWave",value:function(e){if(!e.isCancelled&&this.selectedCombatant.hasBuff(m.a.TIDAL_WAVES_BUFF.id,e.timestamp,0,100)){var t=this.abilityTracker.getAbility(e.ability.guid,e.ability);t.healingTwHits=(t.healingTwHits||0)+1}}},{key:"suggestions",value:function(e){var t=this.suggestionThresholds;e(t.actual).isGreaterThan(t.isGreaterThan.minor).addSuggestion((function(e){return e(d.a.createElement(_.Trans,{id:"shaman.restoration.suggestions.tidalWaves.label",values:{0:Object(W.e)(t.actual)},components:[d.a.createElement(E.a,{id:m.a.TIDAL_WAVES_BUFF.id}),d.a.createElement(E.a,{id:m.a.HEALING_WAVE.id})]})).icon(m.a.TIDAL_WAVES_BUFF.icon).actual(d.a.createElement(_.Trans,{id:"shaman.restoration.suggestions.tidalWaves.actual",values:{0:Object(W.e)(t.actual)}})).recommended(d.a.createElement(_.Trans,{id:"shaman.restoration.suggestions.tidalWaves.recommended",values:{0:Object(W.e)(t.isGreaterThan.minor,0)}})).regular(t.isGreaterThan.average).major(t.isGreaterThan.major)}))}},{key:"suggestionThresholds",get:function(){var e=this.abilityTracker.getAbility(m.a.RIPTIDE.id),t=this.abilityTracker.getAbility(m.a.HEALING_WAVE.id),a=this.abilityTracker.getAbility(m.a.HEALING_SURGE.id),n=this.abilityTracker.getAbility(m.a.CHAIN_HEAL.id).casts||0,i=(e.casts||0)+n;return{actual:1-((t.healingTwHits||0)+(a.healingTwHits||0))/i,isGreaterThan:{minor:.5,average:.8,major:.9},style:te.a.PERCENTAGE}}}]),a}(D.c);mt.dependencies={abilityTracker:U};var Et=mt,gt=a(963),Tt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).abilityTracker=void 0,e}return Object(s.a)(a,[{key:"statistic",value:function(){return d.a.createElement(gt.a,{category:me.a.GENERAL,large:!1,wide:!1,style:{}},d.a.createElement(V.a,{ultrawide:!0},d.a.createElement("div",{className:"pad"},d.a.createElement("label",null,d.a.createElement(_.Trans,{id:"shaman.restoration.castBehaviour.statistic.tidalWaves",components:[d.a.createElement(E.a,{id:m.a.TIDAL_WAVES_BUFF.id})]})),this.twUsageRatioChart)),d.a.createElement(V.a,{ultrawide:!0},d.a.createElement("div",{className:"pad"},d.a.createElement("label",null,d.a.createElement(_.Trans,{id:"shaman.restoration.castBehaviour.statistic.fillers"})),this.fillerCastRatioChart)))}},{key:"twUsageRatioChart",get:function(){var e=this.abilityTracker.getAbility(m.a.RIPTIDE.id),t=this.abilityTracker.getAbility(m.a.HEALING_WAVE.id),a=this.abilityTracker.getAbility(m.a.HEALING_SURGE.id),n=this.abilityTracker.getAbility(m.a.CHAIN_HEAL.id).casts||0,i=e.casts||0,s=i+n,r=t.healingTwHits||0,l=a.healingTwHits||0,c=r+l,o=s-c,u=[{color:oe.k.HEALING_WAVE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.healingWave"}),spellId:m.a.HEALING_WAVE.id,value:r},{color:oe.k.HEALING_SURGE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.healingSurge"}),spellId:m.a.HEALING_SURGE.id,value:l},{color:oe.k.UNUSED,label:d.a.createElement(_.Trans,{id:"shaman.restoration.castBehaviour.unusedTW"}),tooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.castBehaviour.unusedTW.tooltip",values:{riptideCasts:i,chainHealCasts:n,totalTwGenerated:s,totalTwUsed:c}}),value:o}];return d.a.createElement(ge.a,{items:u})}},{key:"fillerCastRatioChart",get:function(){var e=this.abilityTracker.getAbility(m.a.HEALING_WAVE.id),t=this.abilityTracker.getAbility(m.a.HEALING_SURGE.id),a=e.healingTwHits||0,n=t.healingTwHits||0,i=(e.casts||0)-a,s=(t.casts||0)-n,r=[{color:oe.k.HEALING_WAVE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.healingWave"}),spellId:m.a.HEALING_WAVE.id,value:i},{color:oe.k.HEALING_SURGE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.healingSurge"}),spellId:m.a.HEALING_SURGE.id,value:s}];return d.a.createElement(ge.a,{items:r})}}]),a}(D.c);Tt.dependencies={abilityTracker:U};var ft=Tt,bt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).healing=0,n.active=n.selectedCombatant.hasTalent(m.a.TORRENT_TALENT.id),n.addEventListener(P.f.heal.by(D.a).spell(m.a.RIPTIDE),n._onHeal),n}return Object(s.a)(a,[{key:"_onHeal",value:function(e){e.tick||(this.healing+=Object(Te.a)(e,.2))}},{key:"subStatistic",value:function(){return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.TORRENT_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing))," %")})}}]),a}(D.c),pt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).healing=0,n.active=n.selectedCombatant.hasTalent(m.a.UNDULATION_TALENT.id),n.addEventListener(P.f.heal.by(D.a).spell([m.a.HEALING_WAVE,m.a.HEALING_SURGE]),n._onHeal),n}return Object(s.a)(a,[{key:"_onHeal",value:function(e){this.selectedCombatant.hasBuff(m.a.UNDULATION_BUFF.id,e.timestamp,300,300)&&(this.healing+=Object(Te.a)(e,.5))}},{key:"subStatistic",value:function(){return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.UNDULATION_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing))," %")})}}]),a}(D.c),vt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).combatants=void 0,n.healingRainLocation=void 0,n.healing=0,n.eventsDuringRain=[],n.active=n.selectedCombatant.hasTalent(m.a.DELUGE_TALENT.id),n.addEventListener(P.f.heal.by(D.a).spell([m.a.CHAIN_HEAL,m.a.HEALING_WAVE,m.a.HEALING_SURGE]),n._onHeal),n.addEventListener(P.f.begincast.by(D.a).spell(m.a.HEALING_RAIN_CAST),n._onHealingRainBegincast),n.addEventListener(P.f.fightend,n._onFightend),n}return Object(s.a)(a,[{key:"_onHeal",value:function(e){var t=this.combatants.getEntity(e);t?t.hasBuff(m.a.RIPTIDE.id,e.timestamp,void 0,void 0,this.owner.playerId)?this.healing+=Object(Te.a)(e,.2):this.eventsDuringRain.push(e):this.eventsDuringRain.push(e)}},{key:"_onHealingRainBegincast",value:function(e){e.isCancelled||(this.recordHealing(),this.eventsDuringRain.length=0)}},{key:"_onFightend",value:function(){this.recordHealing()}},{key:"recordHealing",value:function(){0!==this.eventsDuringRain.length&&(this.healing+=this.healingRainLocation.processHealingRain(this.eventsDuringRain,.2))}},{key:"subStatistic",value:function(){return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.DELUGE_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing))," %")})}}]),a}(D.c);vt.dependencies={combatants:K.a,healingRainLocation:Oe};var At=vt,yt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).eventEmitter=void 0,n.cooldownThroughputTracker=void 0,n.healing=0,n.active=n.selectedCombatant.hasTalent(m.a.NATURES_GUARDIAN_TALENT.id),n.addEventListener(P.f.heal.by(D.a).spell(m.a.NATURES_GUARDIAN_HEAL),n._onHeal),n}return Object(s.a)(a,[{key:"_onHeal",value:function(e){var t={ability:Object(re.a)(Object(re.a)({},e.ability),{},{guid:m.a.NATURES_GUARDIAN_TALENT.id}),sourceID:e.sourceID,sourceIsFriendly:e.sourceIsFriendly,targetIsFriendly:e.targetIsFriendly,timestamp:e.timestamp,type:P.b.Cast};this.eventEmitter.fabricateEvent(t,e),this.healing+=e.amount+(e.absorbed||0)}},{key:"subStatistic",value:function(){return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.NATURES_GUARDIAN_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing+this.feeding))," %")})}},{key:"feeding",get:function(){return this.cooldownThroughputTracker.getIndirectHealing(m.a.NATURES_GUARDIAN_HEAL.id)}}]),a}(D.c);yt.dependencies={eventEmitter:le.a,cooldownThroughputTracker:de};var Lt=yt,_t=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).cooldownThroughputTracker=void 0,n.spellUsable=void 0,n.abilityTracker=void 0,n.healing=0,n.downpourHits=0,n.downpourHitsSum=0,n.downpourTimestamp=0,n.active=n.selectedCombatant.hasTalent(m.a.DOWNPOUR_TALENT.id),n.addEventListener(P.f.heal.by(D.a),n._onHeal),n}return Object(s.a)(a,[{key:"_onHeal",value:function(e){if(this.downpourTimestamp&&e.timestamp>this.downpourTimestamp+100){var t=5e3*(6-this.downpourHits);this.spellUsable.reduceCooldown(m.a.DOWNPOUR_TALENT.id,t),this.downpourTimestamp=0,this.downpourHits=0}e.ability.guid===m.a.DOWNPOUR_TALENT.id&&(e.amount&&(this.downpourHits+=1,this.downpourHitsSum+=1),this.downpourTimestamp=e.timestamp,this.healing+=e.amount+(e.absorbed||0))}},{key:"statistic",value:function(){var e=this.abilityTracker.getAbility(m.a.DOWNPOUR_TALENT.id),t=e.casts;if(!t)return null;var a=e.healingHits,n=this.downpourHitsSum/t,i=(a-this.downpourHitsSum)/t,s=5+this.downpourHitsSum/t*5;return d.a.createElement(F.b,{icon:d.a.createElement(x.a,{id:m.a.DOWNPOUR_TALENT.id}),value:d.a.createElement(_.Trans,{id:"shaman.restoration.downpour.statistic.value",values:{0:s.toFixed(1)}}),category:me.a.TALENTS,position:F.a.OPTIONAL(90),label:d.a.createElement(T.a,{content:d.a.createElement(_.Trans,{id:"shaman.restoration.downpour.statistic.label.tooltip",values:{0:(n+i).toFixed(1),1:n.toFixed(1),downpourCasts:t},components:[d.a.createElement("br",null)]})},d.a.createElement(_.Trans,{id:"shaman.restoration.downpour.statistic.label"}))})}},{key:"subStatistic",value:function(){var e=this.cooldownThroughputTracker.getIndirectHealing(m.a.DOWNPOUR_TALENT.id);return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.DOWNPOUR_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing+e))," %")})}}]),a}(D.c);_t.dependencies={cooldownThroughputTracker:de,spellUsable:st.b,abilityTracker:U};var Ot=_t,Ht=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).eventEmitter=void 0,n.cooldownThroughputTracker=void 0,n.healing=0,n.cbtActive=!1,n.active=n.selectedCombatant.hasTalent(m.a.CLOUDBURST_TOTEM_TALENT.id),n.addEventListener(P.f.heal.by(D.a).spell(m.a.CLOUDBURST_TOTEM_HEAL),n._onHeal),n.addEventListener(P.f.cast.by(D.a).spell(m.a.CLOUDBURST_TOTEM_TALENT),n._onCast),n}return Object(s.a)(a,[{key:"_onHeal",value:function(e){this.cbtActive&&(this._createFabricatedEvent(e,P.b.RemoveBuff,e.timestamp),this.cbtActive=!1),this.healing+=e.amount+(e.absorbed||0)}},{key:"_onCast",value:function(e){var t=e.timestamp+200;this._createFabricatedEvent(e,P.b.ApplyBuff,t),this.cbtActive=!0}},{key:"_createFabricatedEvent",value:function(e,t,a){var n={ability:Object(re.a)(Object(re.a)({},e.ability),{},{guid:m.a.CLOUDBURST_TOTEM_TALENT.id}),sourceID:e.sourceID,targetID:e.sourceID,sourceIsFriendly:e.sourceIsFriendly,targetIsFriendly:e.targetIsFriendly,timestamp:a,type:t};this.eventEmitter.fabricateEvent(n,e)}},{key:"subStatistic",value:function(){var e=this.cooldownThroughputTracker.getIndirectHealing(m.a.CLOUDBURST_TOTEM_HEAL.id);return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.CLOUDBURST_TOTEM_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing+e))," %")})}}]),a}(D.c);Ht.dependencies={eventEmitter:le.a,cooldownThroughputTracker:de};var It=Ht,Nt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).healing=0,n.cooldownThroughputTracker=void 0,n.active=n.selectedCombatant.hasTalent(m.a.ASCENDANCE_TALENT_RESTORATION.id),n.addEventListener(P.f.heal.by(D.a).spell([m.a.ASCENDANCE_HEAL,m.a.ASCENDANCE_INITIAL_HEAL]),n._onHeal),n}return Object(s.a)(a,[{key:"_onHeal",value:function(e){this.healing+=e.amount+(e.absorbed||0)}},{key:"subStatistic",value:function(){return d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.ASCENDANCE_TALENT_RESTORATION.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing+this.feeding))," %")})}},{key:"feeding",get:function(){return this.cooldownThroughputTracker.getIndirectHealing(m.a.ASCENDANCE_HEAL.id)+this.cooldownThroughputTracker.getIndirectHealing(m.a.ASCENDANCE_INITIAL_HEAL.id)}}]),a}(D.c);Nt.dependencies={cooldownThroughputTracker:de};var St=Nt,Rt=a(31),Ct=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).statTracker=void 0,n.critEffectBonus=void 0,n.healing=0,n.chainHealTimestamp=0,n.buffer=[],n.usedHighTides=0,n.unusedHighTides=0,n.currentHighTideBuff=0,n.active=n.selectedCombatant.hasTalent(m.a.HIGH_TIDE_TALENT.id),n.addEventListener(P.f.heal.by(D.a).spell(m.a.CHAIN_HEAL),n.chainHeal),n.addEventListener(P.f.fightend,n.onFightEnd),n.addEventListener(P.f.cast.by(D.a).spell(m.a.CHAIN_HEAL),n.onChainHealCast),n.addEventListener(P.f.applybuff.by(D.a).spell(m.a.HIGH_TIDE_BUFF),n.onHighTideBuff),n.addEventListener(P.f.applybuffstack.by(D.a).spell(m.a.HIGH_TIDE_BUFF),n.onHighTideBuff),n.addEventListener(P.f.removebuff.by(D.a).spell(m.a.HIGH_TIDE_BUFF),n.onHighTideRemoveBuff),n}return Object(s.a)(a,[{key:"onHighTideBuff",value:function(e){this.unusedHighTides+=this.currentHighTideBuff,this.currentHighTideBuff=2}},{key:"onHighTideRemoveBuff",value:function(e){this.unusedHighTides+=this.currentHighTideBuff,this.currentHighTideBuff=0}},{key:"onChainHealCast",value:function(e){this.currentHighTideBuff>0&&(this.usedHighTides+=1,this.currentHighTideBuff-=1)}},{key:"chainHeal",value:function(e){if(this.selectedCombatant.hasBuff(m.a.HIGH_TIDE_BUFF.id,null,50,20)){(!this.chainHealTimestamp||e.timestamp-this.chainHealTimestamp>150)&&(this.processBuffer(),this.chainHealTimestamp=e.timestamp);var t=e.amount+(e.absorbed||0)+(e.overheal||0);if(e.hitType===M.a.CRIT)t/=this.critEffectBonus.getBonus(e);var a=t/(1+this.statTracker.currentMasteryPercentage*Math.max(0,1-(e.hitPoints-e.amount)/e.maxHitPoints));this.buffer.push(Object(re.a)({baseHealingDone:a},e))}}},{key:"onFightEnd",value:function(){this.processBuffer()}},{key:"processBuffer",value:function(){this.buffer.sort((function(e,t){return t.baseHealingDone-e.baseHealingDone}));for(var e=0,t=Object.entries(this.buffer);e<t.length;e++){var a=Object(Rt.a)(t[e],2),n=a[0],i=a[1],s=parseInt(n),r=oe.i/(oe.f*Math.pow(.7,s))-1;this.healing+=Object(Te.a)(i,r)}this.buffer=[]}},{key:"subStatistic",value:function(){var e=d.a.createElement(_.Trans,{id:"shaman.restoration.highTide.statistic.tooltip",values:{0:this.usedHighTides,1:this.usedHighTides+this.unusedHighTides+this.currentHighTideBuff}});return d.a.createElement("div",null,d.a.createElement(Ee.a,{title:d.a.createElement(E.a,{id:m.a.HIGH_TIDE_TALENT.id}),value:"".concat(Object(W.e)(this.owner.getPercentageOfTotalHealingDone(this.healing))," %"),valueTooltip:e}))}}]),a}(D.c);Ct.dependencies={statTracker:Ie.a,critEffectBonus:ot.a};var kt=Ct,jt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).torrent=void 0,e.unleashLife=void 0,e.undulation=void 0,e.deluge=void 0,e.earthenWallTotem=void 0,e.surgeOfEarth=void 0,e.naturesGuardian=void 0,e.downpour=void 0,e.cloudburstTotem=void 0,e.ascendance=void 0,e.wellspring=void 0,e.highTide=void 0,e}return Object(s.a)(a,[{key:"statistic",value:function(){return d.a.createElement(he.b,{title:d.a.createElement(_.Trans,{id:"shaman.restoration.talentBox.title"}),tooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.talentBox.tooltip",components:[d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("strong",null),d.a.createElement("br",null)]}),position:he.a.CORE(1),category:me.a.TALENTS,bodyStyle:{}},d.a.createElement("div",{style:{borderBottom:0,marginBottom:0,paddingBottom:0}}),this.selectedCombatant.hasTalent(m.a.TORRENT_TALENT.id)?this.torrent.subStatistic():"",this.selectedCombatant.hasTalent(m.a.UNLEASH_LIFE_TALENT.id)?this.unleashLife.subStatistic():"",this.selectedCombatant.hasTalent(m.a.UNDULATION_TALENT.id)?this.undulation.subStatistic():"",this.selectedCombatant.hasTalent(m.a.DELUGE_TALENT.id)?this.deluge.subStatistic():"",this.selectedCombatant.hasTalent(m.a.EARTHEN_WALL_TOTEM_TALENT.id)?this.earthenWallTotem.subStatistic():"",this.selectedCombatant.hasTalent(m.a.SURGE_OF_EARTH_TALENT.id)?this.surgeOfEarth.subStatistic():"",this.selectedCombatant.hasTalent(m.a.NATURES_GUARDIAN_TALENT.id)?this.naturesGuardian.subStatistic():"",this.selectedCombatant.hasTalent(m.a.DOWNPOUR_TALENT.id)?this.downpour.subStatistic():"",this.selectedCombatant.hasTalent(m.a.CLOUDBURST_TOTEM_TALENT.id)?this.cloudburstTotem.subStatistic():"",this.selectedCombatant.hasTalent(m.a.HIGH_TIDE_TALENT.id)?this.highTide.subStatistic():"",this.selectedCombatant.hasTalent(m.a.WELLSPRING_TALENT.id)?this.wellspring.subStatistic():"",this.selectedCombatant.hasTalent(m.a.ASCENDANCE_TALENT_RESTORATION.id)?this.ascendance.subStatistic():"")}}]),a}(D.c);jt.dependencies={torrent:bt,unleashLife:be,undulation:pt,deluge:At,earthenWallTotem:Ye,surgeOfEarth:Ke,naturesGuardian:Lt,downpour:Ot,cloudburstTotem:It,ascendance:St,wellspring:We,highTide:kt};var wt=jt,Dt=a(811),Pt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n,s;Object(i.a)(this,a),(s=t.call(this,e)).globalCooldown=void 0,s.beginCastTimestamp=0,s.beginCastGlobalCooldown=0,s.spellsConsumingFlashFlood=(n={},Object(B.a)(n,m.a.HEALING_WAVE.id,{timesBuffed:0,timeSaved:0,timeWasted:0}),Object(B.a)(n,m.a.CHAIN_HEAL.id,{timesBuffed:0,timeSaved:0,timeWasted:0}),Object(B.a)(n,m.a.HEALING_SURGE.id,{timesBuffed:0,timeSaved:0,timeWasted:0}),Object(B.a)(n,m.a.HEALING_RAIN_CAST.id,{timesBuffed:0,timeSaved:0,timeWasted:0}),n),s.active=s.selectedCombatant.hasTalent(m.a.FLASH_FLOOD_TALENT.id),s.selectedCombatant.hasTalent(m.a.WELLSPRING_TALENT.id)&&(s.spellsConsumingFlashFlood[m.a.WELLSPRING_TALENT.id]={timesBuffed:0,timeSaved:0,timeWasted:0});var r=[m.a.HEALING_WAVE,m.a.CHAIN_HEAL,m.a.HEALING_SURGE,m.a.HEALING_RAIN_CAST,m.a.WELLSPRING_TALENT];return s.addEventListener(P.f.begincast.by(D.a).spell(r),s._onBeginCast),s.addEventListener(P.f.cast.by(D.a).spell(r),s._onCast),s}return Object(s.a)(a,[{key:"_onBeginCast",value:function(e){if(!e.isCancelled){var t=e.ability.guid;this.beginCastTimestamp=e.timestamp,this.beginCastGlobalCooldown=this.globalCooldown.getGlobalCooldownDuration(t)}}},{key:"_onCast",value:function(e){if(this.beginCastTimestamp&&this.selectedCombatant.hasBuff(m.a.FLASH_FLOOD_BUFF.id,this.beginCastTimestamp+50)){var t=e.ability.guid;this.spellsConsumingFlashFlood[t].timesBuffed+=1;var a=e.timestamp-this.beginCastTimestamp;if(this.beginCastTimestamp=0,a<=this.beginCastGlobalCooldown)return this.spellsConsumingFlashFlood[t].timeWasted+=this.beginCastGlobalCooldown-a,void(this.spellsConsumingFlashFlood[t].timeSaved+=Math.max(a/.8-this.beginCastGlobalCooldown,0));this.spellsConsumingFlashFlood[t].timeSaved+=a/.8*.2}}},{key:"statistic",value:function(){return d.a.createElement(V.a,{category:me.a.TALENTS,position:he.a.OPTIONAL(90),size:"flexible"},d.a.createElement("div",{className:"pad"},d.a.createElement("label",null,d.a.createElement(_.Trans,{id:"shaman.restoration.flashFlood.statistic.label",components:[d.a.createElement(E.a,{id:m.a.FLASH_FLOOD_TALENT.id})]})),d.a.createElement("div",{className:"flex"},d.a.createElement("div",{className:"flex-main"},d.a.createElement(_.Trans,{id:"shaman.restoration.flashFlood.statistic.title"})),d.a.createElement("div",{className:"flex-sub text-right"},d.a.createElement(T.a,{content:d.a.createElement(_.Trans,{id:"shaman.restoration.flashFlood.statistic.description.tooltip",values:{0:(this.totalTimeWasted/1e3).toFixed(2)},components:[d.a.createElement("br",null)]})},d.a.createElement(_.Trans,{id:"shaman.restoration.flashFlood.statistic.description",values:{0:(this.totalTimeSaved/1e3).toFixed(2)}})))),this.flashFloodUsageRatioChart))}},{key:"totalTimeSaved",get:function(){return Object.values(this.spellsConsumingFlashFlood).reduce((function(e,t){return e+t.timeSaved}),0)}},{key:"totalTimeWasted",get:function(){return Object.values(this.spellsConsumingFlashFlood).reduce((function(e,t){return e+t.timeWasted}),0)}},{key:"flashFloodUsageRatioChart",get:function(){var e=function(e){return d.a.createElement(d.a.Fragment,null,d.a.createElement("strong",null,(e.timeSaved/1e3).toFixed(2)," seconds saved")," ",d.a.createElement("br",null),(e.timeWasted/1e3).toFixed(2)," seconds reduced below GCD ",d.a.createElement("br",null),"You buffed this spell ",d.a.createElement("strong",null,e.timesBuffed)," times.")},t=[{color:oe.k.CHAIN_HEAL,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.chainHeal"}),spellId:m.a.CHAIN_HEAL.id,value:this.spellsConsumingFlashFlood[m.a.CHAIN_HEAL.id].timeSaved,valueTooltip:e(this.spellsConsumingFlashFlood[m.a.CHAIN_HEAL.id])},{color:oe.k.HEALING_WAVE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.healingWave"}),spellId:m.a.HEALING_WAVE.id,value:this.spellsConsumingFlashFlood[m.a.HEALING_WAVE.id].timeSaved,valueTooltip:e(this.spellsConsumingFlashFlood[m.a.HEALING_WAVE.id])},{color:oe.k.HEALING_SURGE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.healingSurge"}),spellId:m.a.HEALING_SURGE.id,value:this.spellsConsumingFlashFlood[m.a.HEALING_SURGE.id].timeSaved,valueTooltip:e(this.spellsConsumingFlashFlood[m.a.HEALING_SURGE.id])},{color:oe.k.RIPTIDE,label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.healingRain"}),spellId:m.a.HEALING_RAIN_CAST.id,value:this.spellsConsumingFlashFlood[m.a.HEALING_RAIN_CAST.id].timeSaved,valueTooltip:e(this.spellsConsumingFlashFlood[m.a.HEALING_RAIN_CAST.id])}];if(this.spellsConsumingFlashFlood[m.a.WELLSPRING_TALENT.id]){var a={color:"#FEFEFE",label:d.a.createElement(_.Trans,{id:"shaman.restoration.spell.wellspring"}),spellId:m.a.WELLSPRING_TALENT.id,value:this.spellsConsumingFlashFlood[m.a.WELLSPRING_TALENT.id].timeSaved,valueTooltip:e(this.spellsConsumingFlashFlood[m.a.WELLSPRING_TALENT.id])};t.splice(4,0,a)}return d.a.createElement(ge.a,{items:t})}}]),a}(D.c);Pt.dependencies={globalCooldown:Dt.a};var Gt=Pt,Ut=a(16),Bt=a.n(Ut),Ft=a(25),Mt=a(41),xt=a(841),Wt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).combatants=void 0,n.loaded=!1,n.lifeSavingEvents=[],n.disableStatistics=!1,n.active=Boolean(n.selectedCombatant.hasTalent(m.a.ANCESTRAL_VIGOR_TALENT.id)),n}return Object(s.a)(a,[{key:"fetchAll",value:function(e,t){var a=this,i=function(){var s=Object(Ft.a)(Bt.a.mark((function s(r){var l,c,o;return Bt.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Mt.i)(e,r);case 2:if(c=s.sent,o=c.events,(l=a.lifeSavingEvents).push.apply(l,Object(n.a)(o)),!c.nextPageTimestamp){s.next=7;break}return s.abrupt("return",i(Object.assign(t,{start:c.nextPageTimestamp})));case 7:return a.loaded=!0,s.abrupt("return",null);case 9:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return i(t)}},{key:"load",value:function(){this.lifeSavingEvents=[];var e={start:this.owner.fight.start_time,end:this.owner.fight.end_time,filter:"(\n        IN RANGE\n        WHEN type='".concat(P.b.Damage,"'\n          AND target.disposition='friendly'\n          AND resources.hitPoints>0\n          AND 100*resources.hpPercent<=").concat(Math.ceil(1e4*(1-1/1.1)),"\n          AND 10000*(resources.hitPoints+effectiveDamage)/resources.maxHitPoints>=").concat(Math.floor(1e4*(1-1/1.1)),"\n        FROM type='").concat(P.b.ApplyBuff,"'\n          AND ability.id=").concat(m.a.ANCESTRAL_VIGOR.id,"\n          AND source.name='").concat(this.selectedCombatant.name,"'\n        TO type='").concat(P.b.RemoveBuff,"'\n          AND ability.id=").concat(m.a.ANCESTRAL_VIGOR.id,"\n          AND source.name='").concat(this.selectedCombatant.name,"'\n        END\n      )"),timeout:2e3};return this.fetchAll("report/events/".concat(this.owner.report.code),e)}},{key:"statistic",value:function(){var e=this,t=this.combatants.getEntities(),a=Object.values(t).filter((function(t){return t.specId===Z.a.RESTORATION_SHAMAN.id&&t!==e.selectedCombatant}));a&&a.some((function(e){return e.hasTalent(m.a.ANCESTRAL_VIGOR_TALENT.id)}))&&(this.disableStatistics=!0);var n=this.loaded?d.a.createElement(_.Trans,{id:"shaman.restoration.av.statistic.tooltip.active"}):d.a.createElement(_.Trans,{id:"shaman.restoration.av.statistic.tooltip.inactive"});return this.disableStatistics?d.a.createElement(F.b,{icon:d.a.createElement(x.a,{id:m.a.ANCESTRAL_VIGOR.id}),label:d.a.createElement(_.Trans,{id:"shaman.restoration.av.statistic.label"}),value:d.a.createElement(_.Trans,{id:"shaman.restoration.av.statistic.disabled"}),tooltip:d.a.createElement(_.Trans,{id:"shaman.restoration.av.statistic.disabled.reason"}),category:me.a.TALENTS,position:xt.a.OPTIONAL(60)}):d.a.createElement(xt.b,{loader:this.load.bind(this),icon:d.a.createElement(x.a,{id:m.a.ANCESTRAL_VIGOR.id}),value:"\u2248".concat(this.lifeSavingEvents.length),label:d.a.createElement(_.Trans,{id:"shaman.restoration.av.statistic.label"}),tooltip:n,category:me.a.TALENTS,position:xt.a.OPTIONAL(60)},d.a.createElement("table",{className:"table table-condensed"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.time"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.player"})),d.a.createElement("th",{style:{textAlign:"center"}},d.a.createElement(_.Trans,{id:"common.ability"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.health"})))),d.a.createElement("tbody",null,this.lifeSavingEvents.map((function(t,a){var n=e.combatants.getEntity(t);if(!n)return null;var i=Z.a[n.specId].className.replace(" ","");return d.a.createElement("tr",{key:a},d.a.createElement("th",{scope:"row"},Object(W.a)((t.timestamp-e.owner.fight.start_time)/1e3,0)),d.a.createElement("td",{className:i},n.name),d.a.createElement("td",{style:{textAlign:"center"}},d.a.createElement(E.a,{id:t.ability.guid,icon:!1},d.a.createElement(g.a,{icon:t.ability.abilityIcon}))),d.a.createElement("td",null,Object(W.e)((t.hitPoints||NaN)/(t.maxHitPoints||NaN)),"%"))})))))}}]),a}(D.c);Wt.dependencies={combatants:K.a};var Vt=Wt,Yt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).combatants=void 0,n.loaded=!1,n.aptEvents=[],n.active=Boolean(n.selectedCombatant.hasTalent(m.a.ANCESTRAL_PROTECTION_TOTEM_TALENT.id)),n}return Object(s.a)(a,[{key:"fetchAll",value:function(e,t){var a=this,i=function(){var s=Object(Ft.a)(Bt.a.mark((function s(r){var l,c,o;return Bt.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Mt.i)(e,r);case 2:if(c=s.sent,o=c.events,(l=a.aptEvents).push.apply(l,Object(n.a)(o)),!c.nextPageTimestamp){s.next=7;break}return s.abrupt("return",i(Object.assign(t,{start:c.nextPageTimestamp})));case 7:return a.loaded=!0,s.abrupt("return",null);case 9:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return i(t)}},{key:"load",value:function(){this.aptEvents=[];var e={start:this.owner.fight.start_time,end:this.owner.fight.end_time,filter:"(\n        (type='".concat(P.b.Cast,"' AND ability.id=").concat(m.a.ANCESTRAL_PROTECTION_TOTEM_TALENT.id,")\n        OR\n        (type='").concat(P.b.ApplyDebuff,"' AND ability.id=").concat(m.a.TOTEMIC_REVIVAL_DEBUFF.id,")\n        OR\n        (type='").concat(P.b.Cast,"' AND ability.id=").concat(m.a.TOTEMIC_REVIVAL_CAST.id,")\n      )"),timeout:2e3};return this.fetchAll("report/events/".concat(this.owner.report.code),e)}},{key:"spellToText",value:function(e){switch(e){case m.a.ANCESTRAL_PROTECTION_TOTEM_TALENT.id:return d.a.createElement(_.Trans,{id:"shaman.restoration.apt.status.totemPlaced"});case m.a.TOTEMIC_REVIVAL_DEBUFF.id:return d.a.createElement(_.Trans,{id:"shaman.restoration.apt.status.revivable"});case m.a.TOTEMIC_REVIVAL_CAST.id:return d.a.createElement(_.Trans,{id:"shaman.restoration.apt.status.res"});default:return""}}},{key:"statistic",value:function(){var e=this,t=this.loaded?d.a.createElement(_.Trans,{id:"shaman.restoration.apt.statistic.tooltip.active"}):d.a.createElement(_.Trans,{id:"shaman.restoration.apt.statistic.tooltip.inactive"}),a=this.aptEvents.length>0?d.a.createElement(_.Trans,{id:"shaman.restoration.apt.statistic.label.success",values:{0:this.aptEvents.length}}):d.a.createElement(_.Trans,{id:"shaman.restoration.apt.statistic.label.failure"});return d.a.createElement(xt.b,{loader:this.load.bind(this),icon:d.a.createElement(x.a,{id:m.a.ANCESTRAL_PROTECTION_TOTEM_TALENT.id}),label:d.a.createElement(_.Trans,{id:"shaman.restoration.apt.statistic.label"}),value:a,tooltip:t,category:me.a.TALENTS,position:xt.a.OPTIONAL(60)},this.aptEvents.length>0&&d.a.createElement("table",{className:"table table-condensed"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.time"})),d.a.createElement("th",null,d.a.createElement(_.Trans,{id:"common.player"})),d.a.createElement("th",{style:{textAlign:"center"}},d.a.createElement(_.Trans,{id:"common.ability"})))),d.a.createElement("tbody",null,this.aptEvents.map((function(t,a){if(!Object(P.d)(t))return null;var n=e.combatants.players[t.sourceID];if(!n)return null;var i=Z.a[n.specId].className.replace(" ","");return d.a.createElement("tr",{key:a},d.a.createElement("th",{scope:"row"},Object(W.a)((t.timestamp-e.owner.fight.start_time)/1e3,0)),d.a.createElement("td",{className:i},n.name),d.a.createElement("td",{style:{textAlign:"center"}},d.a.createElement(E.a,{id:t.ability.guid,icon:!1},d.a.createElement(g.a,{icon:t.ability.abilityIcon})," ",e.spellToText(t.ability.guid))))})))))}}]),a}(D.c);Yt.dependencies={combatants:K.a};var zt=Yt,Kt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).abilityTracker=void 0,e}return Object(s.a)(a,[{key:"suggestions",value:function(e){var t=this.suggestedThreshold;e(t.actual).isGreaterThan(t.isGreaterThan.minor).addSuggestion((function(e){return e(d.a.createElement("span",null,"Casting ",d.a.createElement(E.a,{id:m.a.HEALING_SURGE.id})," without ",d.a.createElement(E.a,{id:m.a.TIDAL_WAVES_BUFF.id})," is very inefficient, try not to cast more than is necessary.")).icon(m.a.HEALING_SURGE.icon).actual(Ae.i18n._({id:"shaman.restoration.suggestions.healingSurge.unbuffed",defaults:"{0}% of unbuffed Healing Surges",values:{0:Object(W.e)(t.actual)}})).recommended("".concat(Object(W.e)(t.isGreaterThan.minor),"% of unbuffed Healing Surges")).regular(t.isGreaterThan.average).major(t.isGreaterThan.major)}))}},{key:"suggestedThreshold",get:function(){var e=this.abilityTracker.getAbility(m.a.HEALING_SURGE.id),t=e.healingTwHits||0,a=e.casts||0;return{actual:(a-t)/a,isGreaterThan:{minor:.2,average:.4,major:.6},style:"percentage"}}}]),a}(D.c);Kt.dependencies={abilityTracker:U};var Xt=Kt,Zt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).abilityTracker=void 0,n.spellUsable=void 0,n._isCurrentCastInefficient=!1,n.addEventListener(P.f.begincast.by(D.a).spell(m.a.HEALING_WAVE),n.onHealingWaveBegincast),n.addEventListener(P.f.cast.by(D.a).spell(m.a.HEALING_WAVE),n.onHealingWaveCast),n}return Object(s.a)(a,[{key:"onHealingWaveBegincast",value:function(e){this._isInefficientCastEvent(e)?this._isCurrentCastInefficient=!0:this._isCurrentCastInefficient=!1}},{key:"_isInefficientCastEvent",value:function(e){var t=this.selectedCombatant.hasBuff(m.a.TIDAL_WAVES_BUFF.id,e.timestamp,-1),a=this.selectedCombatant.hasBuff(m.a.FLASH_FLOOD_BUFF.id,e.timestamp,-1);return!t&&!a&&!!this.spellUsable.isAvailable(m.a.RIPTIDE.id)}},{key:"onHealingWaveCast",value:function(e){this._isCurrentCastInefficient&&(e.meta=e.meta||{},e.meta.isInefficientCast=!0,e.meta.inefficientCastReason=d.a.createElement(_.Trans,{id:"shaman.restoration.healingWave.inefficientCast.reason"}))}},{key:"suggestions",value:function(e){var t=this.suggestedThreshold;e(t.actual).isGreaterThan(t.isGreaterThan.minor).addSuggestion((function(e){return e(d.a.createElement("span",null,"Casting ",d.a.createElement(E.a,{id:m.a.HEALING_WAVE.id})," without ",d.a.createElement(E.a,{id:m.a.TIDAL_WAVES_BUFF.id,icon:!0})," is slow and generally inefficient. Consider casting a riptide first to generate ",d.a.createElement(E.a,{id:m.a.TIDAL_WAVES_BUFF.id,icon:!0}))).icon(m.a.HEALING_WAVE.icon).actual(Ae.i18n._({id:"shaman.restoration.suggestions.healingWave.unbuffed",defaults:"{0}% of unbuffed Healing Waves",values:{0:Object(W.e)(t.actual)}})).recommended("".concat(Object(W.e)(t.isGreaterThan.minor),"% of unbuffed Healing Waves")).regular(t.isGreaterThan.average).major(t.isGreaterThan.major)}))}},{key:"suggestedThreshold",get:function(){var e=this.abilityTracker.getAbility(m.a.HEALING_WAVE.id),t=e.healingTwHits||0,a=e.casts||0;return{actual:(a-t)/a,isGreaterThan:{minor:.2,average:.4,major:.6},style:"percentage"}}}]),a}(D.c);Zt.dependencies={abilityTracker:U,spellUsable:st.b};var qt=Zt,Jt=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).spellUsable=void 0,n.abilities=void 0,n.addEventListener(P.f.applybuff.by(D.a).spell(m.a.LAVA_SURGE),n.onLavaSurgeProc),n}return Object(s.a)(a,[{key:"onLavaSurgeProc",value:function(){if(this.spellUsable.isOnCooldown(m.a.LAVA_BURST.id)){var e=this.abilities.getExpectedCooldownDuration(m.a.LAVA_BURST.id,this.spellUsable.cooldownTriggerEvent(m.a.LAVA_BURST.id));e&&this.spellUsable.reduceCooldown(m.a.LAVA_BURST.id,e)}}}]),a}(D.c);Jt.dependencies={spellUsable:st.b,abilities:Le};var Qt=Jt,$t=a(210),ea=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).damageReduced=0,e}return Object(s.a)(a,[{key:"load",value:function(){var e=this;return Object(Mt.i)("report/tables/damage-taken/".concat(this.owner.report.code),{start:this.owner.fight.start_time,end:this.owner.fight.end_time,filter:this.filter}).then((function(t){var a=(t=t).entries.reduce((function(e,t){return e+t.total}),0);e.damageReduced=a/.9*.1}))}},{key:"statistic",value:function(){var e=d.a.createElement(_.Trans,{id:"shaman.restoration.slt.statistic.tooltip",values:{0:Object(W.f)(this.damageReduced),1:Object(W.d)(this.drps)},components:[d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("i",null)]});return d.a.createElement(xt.b,{position:xt.a.OPTIONAL(60),loader:this.load.bind(this),icon:d.a.createElement(x.a,{id:m.a.SPIRIT_LINK_TOTEM.id}),value:d.a.createElement(_.Trans,{id:"shaman.restoration.slt.statistic.value",values:{0:Object(W.d)(this.drps)}}),label:d.a.createElement(_.Trans,{id:"shaman.restoration.slt.statistic.label"}),tooltip:e,drilldown:Object($t.a)(this.owner.report.code,{fight:this.owner.fightId,type:"damage-taken",pins:"2$Off$#244F4B$expression$".concat(this.filter),view:"events"})})}},{key:"drps",get:function(){return this.damageReduced/this.owner.fightDuration*1e3}},{key:"filter",get:function(){var e=this.owner.player.name;return"\n      IN RANGE\n        FROM type='".concat(P.b.ApplyBuff,"'\n          AND ability.id=").concat(m.a.SPIRIT_LINK_TOTEM_BUFF.id,"\n          AND source.owner.name='").concat(e,"'\n        TO type='").concat(P.b.RemoveBuff,"'\n          AND ability.id=").concat(m.a.SPIRIT_LINK_TOTEM_BUFF.id,"\n          AND source.owner.name='").concat(e,"'\n        GROUP BY target\n      END\n    ")}}]),a}(D.c);ea.dependencies={combatants:K.a};var ta=ea,aa=a(119),na=a(765),ia=a(778),sa=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).combatants=void 0,n.conduitRank=0,n.boost=0,n.healing=0,n.conduitRank=n.selectedCombatant.conduitRankBySpellID(m.a.EMBRACE_OF_EARTH.id),n.conduitRank?(n.boost=oe.g[n.conduitRank]/100,n.addEventListener(P.f.heal.by(D.a),n.normalizeBoost),n):(n.active=!1,Object(aa.a)(n))}return Object(s.a)(a,[{key:"normalizeBoost",value:function(e){var t=this.combatants.getEntity(e);if(t&&t.hasBuff(m.a.EARTH_SHIELD.id,e.timestamp,0,0)){var a=((e.amount||0)+(e.absorbed||0)+(e.overheal||0))/(1+w.a+this.boost)*this.boost,n=Math.max(0,a-(e.overheal||0));this.healing+=n}}},{key:"statistic",value:function(){return d.a.createElement(V.a,{position:J.a.OPTIONAL(13),size:"flexible",category:me.a.COVENANTS},d.a.createElement(ia.a,{spell:m.a.EMBRACE_OF_EARTH,rank:this.conduitRank},d.a.createElement(na.a,{amount:this.healing}),d.a.createElement("br",null)))}}]),a}(D.c);sa.dependencies={combatants:K.a};var ra=sa,la=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).conduitRank=0,n.healingBoost=0,n.healing=0,n.conduitRank=n.selectedCombatant.conduitRankBySpellID(m.a.HEAVY_RAINFALL.id),n.conduitRank?(n.healingBoost=oe.h[n.conduitRank]/100,n.addEventListener(P.f.heal.by(D.a).spell(m.a.HEALING_RAIN_HEAL),n.normalizeBoost),n):(n.active=!1,Object(aa.a)(n))}return Object(s.a)(a,[{key:"normalizeBoost",value:function(e){this.selectedCombatant.hasBuff(m.a.HEAVY_RAINFALL_BUFF.id)&&(this.healing+=Object(Te.a)(e,this.healingBoost))}},{key:"statistic",value:function(){return d.a.createElement(V.a,{position:J.a.OPTIONAL(13),size:"flexible",category:me.a.COVENANTS},d.a.createElement(ia.a,{spell:m.a.HEAVY_RAINFALL,rank:this.conduitRank},d.a.createElement(na.a,{amount:this.healing}),d.a.createElement("br",null)))}}]),a}(D.c),ca=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).conduitRank=0,n.healingBoost=0,n.healing=0,n.targetsWithBoostedRiptides=[],n.conduitRank=n.selectedCombatant.conduitRankBySpellID(m.a.SWIRLING_CURRENTS.id),n.conduitRank?(n.healingBoost=oe.l[n.conduitRank]/100,n.addEventListener(P.f.heal.by(D.a).spell(m.a.RIPTIDE),n.riptideHeal),n.addEventListener(P.f.heal.by(D.a).spell([m.a.HEALING_SURGE,m.a.HEALING_WAVE]),n.notRiptideHeal),n.addEventListener(P.f.cast.by(D.a).spell(m.a.RIPTIDE),n.trackRiptide),n.addEventListener(P.f.applybuff.by(D.a).spell(m.a.RIPTIDE),n.trackRiptide),n.addEventListener(P.f.removebuff.by(D.a).spell(m.a.RIPTIDE),n.removeRiptide),n.addEventListener(P.f.refreshbuff.by(D.a).spell(m.a.RIPTIDE),n.pandemicRiptide),n):(n.active=!1,Object(aa.a)(n))}return Object(s.a)(a,[{key:"riptideHeal",value:function(e){this.targetsWithBoostedRiptides[e.targetID]&&(this.healing+=Object(Te.a)(e,this.healingBoost))}},{key:"notRiptideHeal",value:function(e){this.selectedCombatant.hasBuff(m.a.SWIRLING_CURRENTS_BUFF.id)&&(this.healing+=Object(Te.a)(e,this.healingBoost))}},{key:"trackRiptide",value:function(e){Object(P.e)(e)&&(this.selectedCombatant.hasBuff(m.a.SWIRLING_CURRENTS_BUFF.id)?this.targetsWithBoostedRiptides[e.targetID]=!0:delete this.targetsWithBoostedRiptides[e.targetID])}},{key:"removeRiptide",value:function(e){delete this.targetsWithBoostedRiptides[e.targetID]}},{key:"pandemicRiptide",value:function(e){this.selectedCombatant.hasBuff(m.a.SWIRLING_CURRENTS_BUFF.id)||delete this.targetsWithBoostedRiptides[e.targetID]}},{key:"statistic",value:function(){return d.a.createElement(V.a,{position:J.a.OPTIONAL(13),size:"flexible",category:me.a.COVENANTS},d.a.createElement(ia.a,{spell:m.a.SWIRLING_CURRENTS,rank:this.conduitRank},d.a.createElement(na.a,{amount:this.healing}),d.a.createElement("br",null)))}}]),a}(D.c),oa=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).conduitRank=0,n.healingBoost=0,n.healing=0,n.chainHealEvent=null,n.conduitRank=n.selectedCombatant.conduitRankBySpellID(m.a.NATURES_FOCUS.id),n.conduitRank?(n.healingBoost=oe.j[n.conduitRank]/100,n.addEventListener(P.f.cast.by(D.a).spell(m.a.CHAIN_HEAL),n._onChainHealCast),n.addEventListener(P.f.heal.by(D.a).spell(m.a.CHAIN_HEAL),n._onChainHealHeal),n):(n.active=!1,Object(aa.a)(n))}return Object(s.a)(a,[{key:"_onChainHealCast",value:function(e){this.chainHealEvent&&e.timestamp-this.chainHealEvent.timestamp>=100&&(this.chainHealEvent=null),this.chainHealEvent&&this.chainHealEvent.targetID===e.targetID?(this.healing+=Object(Te.a)(this.chainHealEvent,this.healingBoost),this.chainHealEvent=null):this.chainHealEvent=e}},{key:"_onChainHealHeal",value:function(e){this.chainHealEvent&&this.chainHealEvent.targetID===e.targetID?(this.healing+=Object(Te.a)(e,this.healingBoost),this.chainHealEvent=null):this.chainHealEvent||(this.chainHealEvent=e)}},{key:"statistic",value:function(){return d.a.createElement(V.a,{position:J.a.OPTIONAL(13),size:"flexible",category:me.a.COVENANTS},d.a.createElement(ia.a,{spell:m.a.NATURES_FOCUS,rank:this.conduitRank},d.a.createElement(na.a,{amount:this.healing}),d.a.createElement("br",null)))}}]),a}(D.c),ua=a(748),da=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).healing=0,n.overhealing=0,n.targetsWithBoostedRiptides=[],n.castEvent=null,n.gainedRiptideCasts=0,n.active=n.selectedCombatant.hasLegendaryByBonusID(m.a.PRIMAL_TIDE_CORE.bonusID),n.addEventListener(P.f.cast.by(D.a).spell([m.a.RIPTIDE,m.a.PRIMORDIAL_WAVE_CAST]),n.castedRiptide),n.addEventListener(P.f.applybuff.by(D.a).spell(m.a.RIPTIDE),n.trackRiptide),n.addEventListener(P.f.heal.by(D.a).spell(m.a.RIPTIDE),n.riptideHeal),n.addEventListener(P.f.removebuff.by(D.a).spell(m.a.RIPTIDE),n.removeRiptide),n}return Object(s.a)(a,[{key:"castedRiptide",value:function(e){this.castEvent=e}},{key:"trackRiptide",value:function(e){Object(P.e)(e)&&(this.castEvent&&this.castEvent.targetID!==e.targetID?(this.gainedRiptideCasts-=-1,this.targetsWithBoostedRiptides[e.targetID]=!0,this.castEvent=null):delete this.targetsWithBoostedRiptides[e.targetID])}},{key:"riptideHeal",value:function(e){this.targetsWithBoostedRiptides[e.targetID]&&(this.healing+=e.amount+(e.absorbed||0),this.overhealing+=e.overheal||0)}},{key:"removeRiptide",value:function(e){delete this.targetsWithBoostedRiptides[e.targetID]}},{key:"statistic",value:function(){return d.a.createElement(V.a,{size:"flexible",category:me.a.ITEMS,tooltip:d.a.createElement(d.a.Fragment,null,d.a.createElement(_.Trans,{id:"shaman.restoration.legendaries.primalTideCore.statistic.tooltip",values:{0:this.gainedRiptideCasts}}),d.a.createElement("br",null),d.a.createElement(_.Trans,{id:"shaman.restoration.legendaries.primalTideCore.statistic.tooltip2",values:{0:Object(W.e)(this.overhealing/(this.healing+this.overhealing))}}))},d.a.createElement(ua.a,{spell:m.a.PRIMAL_TIDE_CORE},d.a.createElement(na.a,{amount:this.healing})))}}]),a}(D.c),ha=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).healing=0,n.active=n.selectedCombatant.hasLegendaryByBonusID(m.a.JONATS_NATURAL_FOCUS.bonusID),n.addEventListener(P.f.heal.by(D.a).spell(m.a.CHAIN_HEAL),n.chainHeal),n}return Object(s.a)(a,[{key:"chainHeal",value:function(e){var t=this.selectedCombatant.getBuff(m.a.JONATS_NATURAL_FOCUS_BUFF.id,e.timestamp,200);t&&(this.healing+=Object(Te.a)(e,.1*t.stacks))}},{key:"statistic",value:function(){return d.a.createElement(V.a,{size:"flexible",category:me.a.ITEMS},d.a.createElement(ua.a,{spell:m.a.JONATS_NATURAL_FOCUS},d.a.createElement(na.a,{amount:this.healing})))}}]),a}(D.c),ma=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).healing=0,n.active=n.selectedCombatant.hasLegendaryByBonusID(m.a.EARTHEN_HARMONY.bonusID),n.addEventListener(P.f.heal.by(D.a).spell(m.a.EARTH_SHIELD_HEAL),n.earthShield),n}return Object(s.a)(a,[{key:"earthShield",value:function(e){var t=e.hitPoints-e.amount;Math.min(1,t/e.maxHitPoints)>.75||(this.healing+=Object(Te.a)(e,1.5))}},{key:"statistic",value:function(){return d.a.createElement(V.a,{size:"flexible",category:me.a.ITEMS},d.a.createElement(ua.a,{spell:m.a.EARTHEN_HARMONY},d.a.createElement(na.a,{amount:this.healing})))}}]),a}(D.c),Ea=a(939),ga=a(940),Ta=a(941),fa=a(768),ba=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).fabricatedEvent=null,e}return Object(s.a)(a,[{key:"normalize",value:function(e){var t=this,a=[];return e.forEach((function(n,i){if(t.fabricatedEvent&&n.timestamp>=t.fabricatedEvent.timestamp&&(a.push(t.fabricatedEvent),t.fabricatedEvent=null),a.push(n),n.type===P.b.Cast&&n.ability.guid===m.a.CLOUDBURST_TOTEM_TALENT.id)for(var s=n.timestamp,r=null,l=i+1;l<e.length-1;l+=1){var c=e[l];if(c.timestamp-s>17500){var o=r&&(r-n.timestamp>15e3?n.timestamp+15e3:r)||n.timestamp+15e3;t.fabricatedEvent={timestamp:o,type:P.b.Heal,sourceID:n.sourceID,targetID:n.sourceID,sourceIsFriendly:!0,targetIsFriendly:!0,ability:{abilityIcon:m.a.CLOUDBURST_TOTEM_HEAL.icon,guid:m.a.CLOUDBURST_TOTEM_HEAL.id,name:m.a.CLOUDBURST_TOTEM_HEAL.name,type:8},amount:0,overheal:1,hitType:1,hitPoints:n.maxHitPoints,maxHitPoints:n.maxHitPoints,__fabricated:!0};break}if(c.type!==P.b.Cast||c.ability.guid!==m.a.CLOUDBURST_TOTEM_RECALL.id&&c.ability.guid!==m.a.CLOUDBURST_TOTEM_TALENT.id){if(c.type===P.b.Heal&&c.ability.guid===m.a.CLOUDBURST_TOTEM_HEAL.id)break}else r=c.timestamp}})),a}}]),a}(fa.a),pa=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"normalize",value:function(e){var t=[],a=null;return e.forEach((function(e,n){if(e.type!==P.b.Heal||e.ability.guid!==m.a.RIPTIDE.id||e.tick)return null!==a?e.type===P.b.ApplyBuff&&e.ability.guid===m.a.RIPTIDE.id&&e.targetID===a.targetID?(a.__modified=!0,a.timestamp=e.timestamp,t.push(e),t.push(a),void(a=null)):(t.push(a),t.push(e),void(a=null)):void t.push(e);a=e})),t}}]),a}(fa.a),va=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"generateResults",value:function(e){var t=this,i=Object(r.a)(Object(l.a)(a.prototype),"generateResults",this).call(this,e);return i.tabs=[].concat(Object(n.a)(i.tabs),[{title:"Feeding",url:"feeding",render:function(){return d.a.createElement(h.a,{style:{padding:0}},d.a.createElement(b,{cooldownThroughputTracker:t.getModule(de)}))}}]),i}}]),a}(p.a);va.abilitiesAffectedByHealingIncreases=oe.a,va.specModules={lowHealthHealing:A.a,healingDone:G,abilities:Le,healingRainLocation:Oe,restorationAbilityTracker:U,manaTracker:v.a,hpmDetails:R,hpmTracker:ve,manaLevelChart:y.a,manaUsageChart:L.a,alwaysBeCasting:ke,masteryEffectiveness:Re,cooldownThroughputTracker:de,tidalWaves:Et,castBehavior:ft,checklist:it,spellUsable:rt,statValues:ht,torrent:bt,unleashLife:be,undulation:pt,deluge:At,surgeOfEarth:Ke,flashFlood:Gt,ancestralVigor:Vt,earthenWallTotem:Ye,downpour:Ot,cloudburstTotem:It,ascendance:St,wellspring:We,highTide:kt,naturesGuardian:Lt,ancestralProtectionTotem:zt,talentStatisticBox:wt,chainHeal:Ge,healingSurge:Xt,healingRain:Be,healingWave:qt,lavaSurge:Qt,resurgence:se,manaTideTotem:ee,waterShield:ae,spiritLinkDamageReduction:ta,spiritWolf:Ea.a,staticCharge:ga.a,astralShift:Ta.a,earthShield:Me,cloudburstNormalizer:ba,riptideNormalizer:pa,embraceOfEarth:ra,heavyRainfall:la,swirlingCurrents:ca,naturesFocus:oa,primalTideCore:da,jonatsNaturalFocus:ha,earthenHarmony:ma};t.default=va},748:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(53),r=a(4);t.a=function(e){var t=e.spell,a=e.children,n=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(n||"")},i.a.createElement("label",null,i.a.createElement(s.a,{id:t.id})," ",i.a.createElement(r.a,{id:t.id,icon:!1})),i.a.createElement("div",{className:"value"},a))}},760:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=function(e){var t=Object.assign({},e);return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"10 10 80 80",className:"icon"},t),i.a.createElement("path",{d:"M50,86.4865c17.4361,0,31.6216-14.1855,31.6216-31.6216c0-16.6168-12.8865-30.2714-29.1892-31.5189v-4.9677h7.2973v-4.8649  H40.2703v4.8649h7.2973v4.9677c-16.3027,1.2475-29.1892,14.902-29.1892,31.5189C18.3784,72.3009,32.5639,86.4865,50,86.4865z M52.4324,28.2236c3.1101,0.2817,6.0664,1.0982,8.7798,2.356l-8.7798,15.2073V28.2236z M47.5676,28.2236v26.6412 c0,1.1008,0.7393,2.0647,1.8029,2.3497c0.209,0.0561,0.4205,0.0827,0.6295,0.0827c0.8533,0,1.6642-0.4504,2.1065-1.2162 l13.3146-23.0616c6.8507,4.8503,11.3357,12.8315,11.3357,21.8454c0,14.7537-12.0031,26.7567-26.7568,26.7567 s-26.7568-12.003-26.7568-26.7567C23.2432,40.9315,33.9501,29.4573,47.5676,28.2236z"}))}},761:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=function(e){var t=e.label,a=e.children,n=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(n||"")},i.a.createElement("label",null,t),i.a.createElement("div",{className:"value"},a))}},769:function(e,t,a){"use strict";function n(e,t){var a=e.amount,n=e.absorbed||0,i=e.overheal||0,s=a+n+i,r=s-s/(1+t)-i;return Math.max(0,r)}a.d(t,"a",(function(){return n}))},773:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(43),c=a(123),o=a(15),u=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).eventEmitter=void 0,i.current=0,i.resourceUpdates=[],i.buildersObj={},i.spendersObj={},i.resource=void 0,i.maxResource=void 0,i.addEventListener(o.f.energize.to(l.a),i.onEnergize),i.addEventListener(o.f.cast.by(l.a),i.onCast),i}return Object(i.a)(a,[{key:"initBuilderAbility",value:function(e){this.buildersObj[e]={generated:0,wasted:0,casts:0}}},{key:"initSpenderAbility",value:function(e){this.spendersObj[e]={spent:0,spentByCast:[],casts:0}}},{key:"onEnergize",value:function(e){var t=e.ability.guid;if(e.resourceChangeType===this.resource.id){var a=e.waste,n=e.resourceChange-a;this._applyBuilder(t,n,a,this.getResource(e),e.timestamp)}}},{key:"processInvisibleEnergize",value:function(e,t){var a=void 0!==this.maxResource?this.maxResource-this.current:t,n=Math.min(t,a),i=Math.max(t-a,0);this._applyBuilder(e,n,i)}},{key:"_applyBuilder",value:function(e,t,a,n,i){this.buildersObj[e]||this.initBuilderAbility(e),this.buildersObj[e].wasted+=a,this.buildersObj[e].generated+=t,this.buildersObj[e].casts+=1,null!==n&&void 0!==n&&void 0!==n.amount?(this.current=n.amount,void 0!==n.max&&(this.maxResource=n.max)):this.current+=t,this.resourceUpdates.push({timestamp:i,current:this.current,waste:a,generated:t,used:0})}},{key:"onCast",value:function(e){var t=e.ability.guid;if(this.shouldProcessCastEvent(e)){var a=this.getResource(e);if(a){a.max&&(this.maxResource=a.max);var n=this.getReducedCost(e);this.spendersObj[t]||this.initSpenderAbility(t),n&&0!==n&&(this.spendersObj[t].casts+=1,this.spendersObj[t].spentByCast.push(n),n>0&&(this.spendersObj[t].spent+=n),this.current=a.amount-n,this.resourceUpdates.push({timestamp:e.timestamp,current:this.current,waste:0,generated:0,used:a.amount}),this.triggerSpendEvent(n,e))}}}},{key:"getReducedCost",value:function(e){var t;return e.resourceCost&&void 0!==e.resourceCost[this.resource.id]?e.resourceCost[this.resource.id]:null===(t=this.getResource(e))||void 0===t?void 0:t.cost}},{key:"getResource",value:function(e){var t=this;return e.classResources?e.classResources.find((function(e){return e.type===t.resource.id})):void 0}},{key:"triggerSpendEvent",value:function(e,t){var a={type:o.b.SpendResource,timestamp:t.timestamp,sourceID:t.sourceID,targetID:t.targetID,resourceChange:e,resourceChangeType:this.resource.id,ability:t.ability,__fabricated:!0};this.eventEmitter.fabricateEvent(a,t)}},{key:"shouldProcessCastEvent",value:function(e){return Boolean(this.getResource(e))}},{key:"getGeneratedBySpell",value:function(e){return this.buildersObj[e]&&this.buildersObj[e].generated||0}},{key:"getWastedBySpell",value:function(e){return this.buildersObj[e]&&this.buildersObj[e].wasted||0}},{key:"getBuilderCastsBySpell",value:function(e){return this.buildersObj[e]&&this.buildersObj[e].casts||0}},{key:"generated",get:function(){return Object.values(this.buildersObj).reduce((function(e,t){return e+t.generated}),0)}},{key:"wasted",get:function(){return Object.values(this.buildersObj).reduce((function(e,t){return e+t.wasted}),0)}},{key:"spent",get:function(){return Object.values(this.spendersObj).reduce((function(e,t){return e+t.spent}),0)}},{key:"spendersCasts",get:function(){return Object.values(this.spendersObj).reduce((function(e,t){return e+t.casts}),0)}}]),a}(l.c);u.dependencies={eventEmitter:c.a},t.a=u},778:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(53),r=a(4);t.a=function(e){var t=e.spell,a=e.rank,n=e.children,l=e.className;return i.a.createElement("div",{className:"pad boring-text ".concat(l||"")},i.a.createElement("label",null,i.a.createElement(s.a,{id:t.id})," ",i.a.createElement(r.a,{id:t.id,icon:!1})," - Rank ",a),i.a.createElement("div",{className:"value"},n))}},786:function(e,t,a){"use strict";var n=a(27),i=a(0),s=a.n(i),r=a(88),l=a(796),c=a(28);t.a=function(e){var t=e.id,a=e.noLink,i=Object(n.a)(e,["id","noLink"]);var o=r.a[t]||{name:"Spell not recognized",icon:"inv_misc_questionmark"},u=s.a.createElement(c.a,Object.assign({icon:o.icon,alt:o.name},i));return a?u:s.a.createElement(l.a,{id:t,icon:!1},u)}},790:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(22);t.a=function(e){var t=e.title,a=e.value,n=e.titleTooltip,r=e.valueTooltip;return i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:"flex-main"},n?i.a.createElement(s.a,{content:n},t):t),i.a.createElement("div",{className:"flex-sub text-right"},r?i.a.createElement(s.a,{content:r},a):a))}},796:function(e,t,a){"use strict";var n=a(31),i=a(27),s=a(0),r=a.n(s),l=a(81),c=a(88),o=a(786);t.a=function(e){var t=e.icon,a=void 0===t||t,u=Object(i.a)(e,["icon"]),d=Object(s.useState)(null),h=Object(n.a)(d,2),m=h[0],E=h[1];Object(s.useEffect)((function(){l.a.refresh(m)}));var g=u.id,T=u.children,f=u.category,b=void 0===f?void 0:f,p=Object(i.a)(u,["id","children","category"]);return r.a.createElement("a",Object.assign({href:l.a.resource(g),target:"_blank",rel:"noopener noreferrer",className:b,ref:function(e){E(e)}},p),a&&r.a.createElement(o.a,{id:g,noLink:!0})," ",T||c.a[g].name)}},798:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=o(a(0)),l=o(a(37)),c=o(a(395));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"},h=["animateOpacity","animationStateClasses","applyInlineTransitions","children","contentClassName","delay","duration","easing","height","onAnimationEnd","onAnimationStart"];function m(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];if(!a.length)return e;for(var i={},s=Object.keys(e),r=0;r<s.length;r++){var l=s[r];-1===a.indexOf(l)&&(i[l]=e[l])}return i}function E(e){e.forEach((function(e){return cancelAnimationFrame(e)}))}function g(e){return!isNaN(parseFloat(e))&&isFinite(e)}function T(e){return"string"===typeof e&&e.search("%")===e.length-1&&g(e.substr(0,e.length-1))}function f(e,t){e&&"function"===typeof e&&e(t)}var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.animationFrameIDs=[];var n="auto",s="visible";g(e.height)?(n=e.height<0||"0"===e.height?0:e.height,s="hidden"):T(e.height)&&(n="0%"===e.height?0:e.height,s="hidden"),a.animationStateClasses=i({},d,e.animationStateClasses);var r=a.getStaticStateClasses(n);return a.state={animationStateClasses:r,height:n,overflow:s,shouldUseTransitions:!1},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.state.height;this.contentElement&&this.contentElement.style&&this.hideContent(e)}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props,i=n.delay,s=n.duration,r=n.height,l=n.onAnimationEnd,o=n.onAnimationStart;if(this.contentElement&&r!==e.height){var d;this.showContent(t.height),this.contentElement.style.overflow="hidden";var h=this.contentElement.offsetHeight;this.contentElement.style.overflow="";var m=s+i,b=null,p={height:null,overflow:"hidden"},v="auto"===t.height;g(r)?(b=r<0||"0"===r?0:r,p.height=b):T(r)?(b="0%"===r?0:r,p.height=b):(b=h,p.height="auto",p.overflow=null),v&&(p.height=b,b=h);var A=(0,c.default)((u(d={},this.animationStateClasses.animating,!0),u(d,this.animationStateClasses.animatingUp,"auto"===e.height||r<e.height),u(d,this.animationStateClasses.animatingDown,"auto"===r||r>e.height),u(d,this.animationStateClasses.animatingToHeightZero,0===p.height),u(d,this.animationStateClasses.animatingToHeightAuto,"auto"===p.height),u(d,this.animationStateClasses.animatingToHeightSpecific,p.height>0),d)),y=this.getStaticStateClasses(p.height);this.setState({animationStateClasses:A,height:b,overflow:"hidden",shouldUseTransitions:!v}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),v?(p.shouldUseTransitions=!0,E(this.animationFrameIDs),this.animationFrameIDs=function(e){var t=[];return t[0]=requestAnimationFrame((function(){t[1]=requestAnimationFrame((function(){e()}))})),t}((function(){a.setState(p),f(o,{newHeight:p.height})})),this.animationClassesTimeoutID=setTimeout((function(){a.setState({animationStateClasses:y,shouldUseTransitions:!1}),a.hideContent(p.height),f(l,{newHeight:p.height})}),m)):(f(o,{newHeight:b}),this.timeoutID=setTimeout((function(){p.animationStateClasses=y,p.shouldUseTransitions=!1,a.setState(p),"auto"!==r&&a.hideContent(b),f(l,{newHeight:b})}),m))}}},{key:"componentWillUnmount",value:function(){E(this.animationFrameIDs),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),this.timeoutID=null,this.animationClassesTimeoutID=null,this.animationStateClasses=null}},{key:"showContent",value:function(e){0===e&&(this.contentElement.style.display="")}},{key:"hideContent",value:function(e){0===e&&(this.contentElement.style.display="none")}},{key:"getStaticStateClasses",value:function(e){var t;return(0,c.default)((u(t={},this.animationStateClasses.static,!0),u(t,this.animationStateClasses.staticHeightZero,0===e),u(t,this.animationStateClasses.staticHeightSpecific,e>0),u(t,this.animationStateClasses.staticHeightAuto,"auto"===e),t))}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.animateOpacity,s=a.applyInlineTransitions,l=a.children,o=a.className,d=a.contentClassName,E=a.delay,g=a.duration,T=a.easing,f=a.id,b=a.style,p=this.state,v=p.height,A=p.overflow,y=p.animationStateClasses,L=p.shouldUseTransitions,_=i({},b,{height:v,overflow:A||b.overflow});L&&s&&(_.transition="height "+g+"ms "+T+" "+E+"ms",b.transition&&(_.transition=b.transition+", "+_.transition),_.WebkitTransition=_.transition);var O={};n&&(O.transition="opacity "+g+"ms "+T+" "+E+"ms",O.WebkitTransition=O.transition,0===v&&(O.opacity=0));var H=(0,c.default)((u(e={},y,!0),u(e,o,o),e)),I="undefined"!==typeof this.props["aria-hidden"]?this.props["aria-hidden"]:0===v;return r.default.createElement("div",i({},m.apply(void 0,[this.props].concat(h)),{"aria-hidden":I,className:H,id:f,style:_}),r.default.createElement("div",{className:d,style:O,ref:function(e){return t.contentElement=e}},l))}}]),t}(r.default.Component);b.propTypes={"aria-hidden":l.default.bool,animateOpacity:l.default.bool,animationStateClasses:l.default.object,applyInlineTransitions:l.default.bool,children:l.default.any.isRequired,className:l.default.string,contentClassName:l.default.string,delay:l.default.number,duration:l.default.number,easing:l.default.string,height:function(e,t,a){var i=e[t];return"number"===typeof i&&i>=0||T(i)||"auto"===i?null:new TypeError('value "'+i+'" of type "'+("undefined"===typeof i?"undefined":n(i))+'" is invalid type for '+t+" in "+a+'. It needs to be a positive number, string "auto" or percentage string (e.g. "15%").')},id:l.default.string,onAnimationEnd:l.default.func,onAnimationStart:l.default.func,style:l.default.object},b.defaultProps={animateOpacity:!1,animationStateClasses:d,applyInlineTransitions:!0,duration:250,delay:0,easing:"ease",style:{}},t.default=b},799:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(0),c=a.n(l),o=a(779),u=a(33),d=a(4),h=a(22),m=(a(817),function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"renderLegend",value:function(e){var t=e.reduce((function(e,t){return e+t.value}),0);return c.a.createElement("div",{className:"legend"},e.map((function(e,a){var n=e.color,i=e.label,s=e.tooltip,r=e.value,l=e.spellId,o=e.valueTooltip;return i=s?c.a.createElement(h.a,{content:s},i):i,i=l?c.a.createElement(d.a,{id:l},i):i,c.a.createElement("div",{key:a,className:"flex"},c.a.createElement("div",{className:"flex-sub"},c.a.createElement("div",{className:"circle",style:{background:n}})),c.a.createElement("div",{className:"flex-main"},i),c.a.createElement("div",{className:"flex-sub"},c.a.createElement(h.a,{content:o||r},Object(u.e)(r/t,0),"%")))})))}},{key:"renderChart",value:function(e,t,a){var n={items:e},i={data:{name:"items"},mark:{type:"arc",innerRadius:t*a},encoding:{theta:{field:"value",type:"quantitative"},color:{field:"label",type:"nominal",legend:null,scale:{domain:e.map((function(e){return e.label})),range:e.map((function(e){return e.color}))}}},view:{stroke:null}};return c.a.createElement("div",{className:"chart"},c.a.createElement(o.a,{width:t,height:t,spec:i,data:n}))}},{key:"render",value:function(){var e=this.props,t=e.items,a=e.chartSize,n=e.innerRadiusFactor;return c.a.createElement("div",{className:"donut-chart"},this.renderLegend(t),this.renderChart(t,a,n))}}]),a}(c.a.PureComponent));m.defaultProps={chartSize:90,innerRadiusFactor:.28},t.a=m},801:function(e,t,a){"use strict";var n=a(27),i=a(0),s=a.n(i),r=a(22),l=(a(858),a(58)),c=a(747);a.d(t,"a",(function(){return c.a}));var o=function(e){var t=e.title,a=e.tooltip,i=e.children,l=e.bodyStyle,c=Object(n.a)(e,["title","tooltip","children","bodyStyle"]);return delete c.category,delete c.position,s.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-12"},s.a.createElement("div",Object.assign({className:"panel statistic statistic-box statistic-box-list"},c),t&&s.a.createElement("div",{className:"panel-heading"},s.a.createElement("h2",null,a?s.a.createElement(r.a,{content:a},t):t)),s.a.createElement("div",{className:"panel-body items",style:l},i)))};o.defaultProps={category:l.a.GENERAL},t.b=o},817:function(e,t,a){},818:function(e,t,a){"use strict";var n=a(8),i=a(10),s=a(11),r=a(88),l=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).maxResource=void 0,i.resource=r.a.MANA,i.maxResource=5e4,i}return a}(a(773).a);t.a=l},820:function(e,t,a){"use strict";a.d(t,"k",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"i",(function(){return c})),a.d(t,"l",(function(){return o})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"j",(function(){return h})),a.d(t,"a",(function(){return m})),a.d(t,"e",(function(){return E})),a.d(t,"b",(function(){return g})),a.d(t,"c",(function(){return T})),a.d(t,"d",(function(){return f}));var n=a(26),i=a(3),s=[i.a.HEALING_WAVE,i.a.CHAIN_HEAL,i.a.HEALING_SURGE,i.a.HEALING_STREAM_TOTEM_HEAL,i.a.HEALING_TIDE_TOTEM_HEAL,i.a.RIPTIDE,i.a.HEALING_RAIN_HEAL,i.a.WELLSPRING_HEAL,i.a.UNLEASH_LIFE_TALENT,i.a.EARTH_SHIELD_HEAL,i.a.DOWNPOUR_TALENT,i.a.ASCENDANCE_INITIAL_HEAL],r={CHAIN_HEAL:"#203755",HEALING_WAVE:"#146585",HEALING_SURGE:"#40b3bf",RIPTIDE:"#a3dbce",UNUSED:"#CC3D20"},l=1.4,c=1.68,o=[20,21,23,24,26,28,29,30,31,33,34,36,37,39,40],u=[75,80,85,90,95,100,105,110,115,120,125,130,135,140,145],d=[5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12],h=[10,10.66,11.33,12,12.66,13.33,14,15,16,16.66,17.33,18,18.66,19.33,20],m=[].concat(s,[i.a.CLOUDBURST_TOTEM_HEAL,i.a.ASCENDANCE_HEAL,i.a.LEECH]),E=[].concat(s),g=[].concat(Object(n.a)(E),[i.a.CLOUDBURST_TOTEM_HEAL,i.a.ASCENDANCE_HEAL,i.a.LEECH]),T=[].concat(s,[i.a.ASCENDANCE_HEAL,i.a.NATURES_GUARDIAN_HEAL]),f=[i.a.HEALING_TIDE_TOTEM_HEAL,i.a.HEALING_STREAM_TOTEM_HEAL,i.a.SPIRIT_LINK_TOTEM_REDISTRIBUTE,i.a.LEECH,i.a.ASCENDANCE_HEAL,i.a.CLOUDBURST_TOTEM_HEAL,i.a.ASCENDANCE_INITIAL_HEAL]},835:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(755),c=a(793),o=a(834),u=a(767),d=a(753),h=a(43),m=a(3),E=a(818),g=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).manaTracker=void 0,e.abilityTracker=void 0,e.healingDone=void 0,e.damageDone=void 0,e.castEfficiency=void 0,e.abilities=void 0,e}return Object(i.a)(a,[{key:"getSpellStats",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={spell:m.a[e],casts:0,healingHits:0,healingDone:0,overhealingDone:0,damageHits:0,damageDone:0,damageAbsorbed:0,manaSpent:0,manaGained:this.manaTracker,percentOverhealingDone:0,percentHealingDone:0,percentDamageDone:0,manaPercentSpent:0,hpm:0,dpm:0,timeSpentCasting:0,percentTimeSpentCasting:0,hpet:0,dpet:0},n=this.abilityTracker.getAbility(e);if(a.casts=n.casts||0,a.healingHits=n.healingHits||0,a.healingDone=(n.healingEffective||0)+(n.healingAbsorbed||0),a.overhealingDone=n.healingOverheal||0,t)for(var i in t){var s=this.abilityTracker.getAbility(t[i]);a.healingHits+=s.healingHits||0,a.healingDone+=(s.healingEffective||0)+(s.healingAbsorbed||0),a.overhealingDone+=s.healingOverheal||0}a.damageHits=n.damageHits||0,a.damageDone=n.damageEffective||0,a.damageAbsorbed=n.damageAbsorbed||0;var r=this.manaTracker.spendersObj;return a.manaSpent=r[e]?r[e].spent:0,(a=this.getCustomSpellStats(a,e,t)).percentOverhealingDone=a.overhealingDone/((a.healingDone||0)+a.overhealingDone)||0,a.percentHealingDone=a.healingDone/this.healingDone.total.regular||0,a.percentDamageDone=a.damageDone/this.damageDone.total.regular||0,a.manaPercentSpent=a.manaSpent/this.manaTracker.spent,a.hpm=a.healingDone/a.manaSpent|0,a.dpm=a.damageDone/a.manaSpent|0,a.timeSpentCasting=this.castEfficiency.getTimeSpentCasting(e).timeSpentCasting+this.castEfficiency.getTimeSpentCasting(e).gcdSpent,a.percentTimeSpentCasting=a.timeSpentCasting/this.owner.fightDuration,a.hpet=a.healingDone/a.timeSpentCasting|0,a.dpet=a.damageDone/a.timeSpentCasting|0,a}},{key:"getCustomSpellStats",value:function(e,t,a){return e}},{key:"getAllSpellStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={},a=0,n=0,i=0,s=0;for(var r in this.abilities.abilities){var l=this.abilities.abilities[r];l.spell instanceof Array||l.spell&&l.spell.manaCost&&l.spell.manaCost>0&&(e||"Cooldown"!==l.category)&&(t[l.spell.id]=this.getSpellStats(l.spell.id,l.healSpellIds),a=Math.max(a,t[l.spell.id].hpm),n=Math.max(n,t[l.spell.id].dpm),i=Math.max(i,t[l.spell.id].hpet),s=Math.max(s,t[l.spell.id].dpet))}return{spells:t,topHpm:a,topDpm:n,topHpet:i,topDpet:s}}}]),a}(h.c);g.dependencies={manaTracker:E.a,abilityTracker:l.a,healingDone:c.a,damageDone:o.a,castEfficiency:u.a,abilities:d.a},t.a=g},841:function(e,t,a){"use strict";var n=a(27),i=a(8),s=a(9),r=a(23),l=a(10),c=a(11),o=a(0),u=a.n(o),d=a(37),h=a.n(d),m=a(750);a.d(t,"a",(function(){return m.a}));var E=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={loaded:!1,loading:!1},e.handleClick=e.handleClick.bind(Object(r.a)(e)),e}return Object(s.a)(a,[{key:"handleClick",value:function(){var e=this;this.state.loaded||(this.setState({loading:!0}),this.props.loader().then((function(t){return e.setState({loading:!1,loaded:!0}),e.context.updateResults(),t})))}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.children,i=Object(n.a)(e,["value","children"]);return delete i.loader,delete i.children,u.a.createElement(m.b,Object.assign({onClick:this.handleClick,value:this.state.loaded?t:this.state.loading?"Loading...":"Click to load",style:{cursor:this.state.loaded?void 0:"pointer"}},i),this.state.loaded?a:null)}}]),a}(u.a.PureComponent);E.contextTypes={updateResults:h.a.func.isRequired},t.b=E},845:function(e,t,a){"use strict";var n=a(0),i=a.n(n),s=a(795);t.a=function(e){var t=e.percent;return i.a.createElement("div",{className:"performance-bar-container"},i.a.createElement("div",{className:"performance-bar",style:{width:"".concat(100*t,"%"),transition:"background-color 800ms",backgroundColor:Object(s.a)(t)}}))}},850:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAAuCAYAAACCq/96AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAAPKSURBVGhD7ZtLSBRxHMcttegQPYhKKCii94PeWVD0Lo+uVFoQRJck9BAF+WAJDS8FXUItzdVMzQ5ejO5B++jhW7e3eggCL+2641p0+Pf9zf5n3V3/7u6sO40j84EPiLM7/vbD/GcWdzaFMXYMZkV4Bm6EC1NMwgmJlDU+VNfs/179UvZbZbvUb20ZfXelxuvIqdRSPko0ymEVrIaP4GNYA2vhE24dtMF62ACfwkb4DDbBZtgCn3Nb4QsVBlBi+YdsjWPuuyxUaeAO83XfYF7XJYYXppkeh6WdjyPCCpnODsEAcqzhBltkLEU5Ws8tzaN57TltfKRQiqDoBfxvJ4KNDzdViUKFStGk3tuIlid+scnSbqFlolAARcPrYWiw+gZRpEiD0ZwXxC82CWJpOvhYRAkUDa+HE8H8n+89nBToY4VES0RTHZb+BIL9grR09TDAqNNS4uu+GR7s0/2vfLNmIE5RAsE6oL5QMBqWlpsZLA6UYF7neSb1lZrBYhEMRuKELkczg01NWDDSmcskd8UXvlkzZk8wGtyZ18U3a8bsCmbP0XwwwwbTCzOYSowcTJfBphGsUCeDGCmYXv6GQcxgsTWDqdQMplLDBvsLR3QyiJGCaT5XPJjBVGIGU4kug3k7rpWZwVQgucsfeF0XzWDx4h+sqR3tyA/7FMoMFgX/UL2N/rs7+v4qYp0zg8WCPm2XBsqY1FvMvG8vm8FiodyeQNGUWxGMHiwjijIjr7MzEnVssLZVDuYuZ1K/lfk6C5jHmeviuyYSmUtLg4gGi6WMcrKOJp2jKErwM0+BgaVZxPBW4wNjLI3vPpG5tHLiVgGgaTCSoolChSrfJdRX3INgi+Ec7H7GBlsOe6DogVMpI4ozlfFEG//RVoRYm+E87D6RubQyLBihdjgZUZho+jqvC0ORf36+siIU3dx3BK6Bc/EnZkq0ScEINcPJiKLE0tdVGC0WeRbugysgLc2ZEE0YTDWeN5b8yCAee46bb54ShNgBlUCRnoZ0lNHSXAQp2uwg0WAEQuyCkbHo6KJgR+EeuBou4E8xPtMJRiCGEo1CkcrPJ+EhuAkugan8KcZmusEIxNgPKdApqESj7wkoR9kqmM4fbmySFCwV7oSH4XFIsSgaLU363Va4FBr/XJaMYARipMMtMBPSkUWxKBoddQfgWmj8b6UkKxiBIGlwHdwN6SpJ0U7Ag5BiroTGvgB4XdmZHrulNFK+WTUIQsszA26HdLRRrL2QgtEVk95mzI7zWbJAkLlwGdwAt0E6h62HdPKnK+Z8qNP5LCXlH/EZJ5PjYeR7AAAAAElFTkSuQmCC"},851:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(6),c=a(0),o=a.n(c),u=a(33),d=a(69),h=a.n(d),m=a(845),E=a(4),g=a(22),T=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).HealingEfficiencyTable=function(e){var t=e.tracker.getAllSpellStats(i.state.showCooldowns),a=t.spells,n=t.topHpm,s=t.topDpm,r=t.topHpet,l=t.topDpet,c=Object.values(a);c.sort((function(e,t){if(i.state.showHealing){if(e.hpm<t.hpm)return 1;if(e.hpm>t.hpm)return-1}else{if(e.dpm<t.dpm)return 1;if(e.dpm>t.dpm)return-1}return 0}));var u=c.map((function(e){return e.casts>0?i.HealingEfficiencySpellRow(e,n,s,r,l):null}));return o.a.createElement(o.a.Fragment,null,u)},i.HealingEfficiencySpellRow=function(e,t,a,n,s){return o.a.createElement("tr",{key:e.spell.id},o.a.createElement("td",null,o.a.createElement(E.a,{id:e.spell.id})),i.state.detailedView?i.DetailView(e):i.BarView(e,t,a,n,s))},i.BarHeader=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.Trans,{render:"th",id:"shared.healingEfficiency.tableHeader.manaSpent"}),i.state.showHealing&&o.a.createElement(o.a.Fragment,null,o.a.createElement("th",{colSpan:2,className:"text-center"},o.a.createElement(l.Trans,{id:"common.stat.healingPerMana"})),o.a.createElement("th",{colSpan:2,className:"text-center"},o.a.createElement(g.a,{content:o.a.createElement(l.Trans,{id:"common.stat.healingPerExecutionTime.long"})},o.a.createElement(l.Trans,{id:"common.stat.healingPerExecutionTime"})))),!i.state.showHealing&&o.a.createElement(o.a.Fragment,null,o.a.createElement("th",{colSpan:2,className:"text-center"},o.a.createElement(l.Trans,{id:"common.stat.damagePerMana"})),o.a.createElement("th",{colSpan:2,className:"text-center"},o.a.createElement(l.Trans,{id:"common.stat.damagePerExecutionTime.long"}))))},i.BarView=function(e,t,a,n,s){var r=e.healingDone,l=e.damageDone>0;return o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,Object(u.d)(e.manaSpent)," ("+Object(u.e)(e.manaPercentSpent)+"%)"),i.state.showHealing&&o.a.createElement(o.a.Fragment,null,o.a.createElement("td",{className:"text-right"},r?Object(u.d)(e.hpm):"-"),o.a.createElement("td",{width:"20%"},o.a.createElement(m.a,{percent:e.hpm/t})),o.a.createElement("td",{className:"text-right"},r?Object(u.d)(1e3*e.hpet):"-"),o.a.createElement("td",{width:"20%"},o.a.createElement(m.a,{percent:e.hpet/n}))),!i.state.showHealing&&o.a.createElement(o.a.Fragment,null,o.a.createElement("td",{className:"text-right"},l?Object(u.d)(e.dpm):"-"),o.a.createElement("td",{width:"20%"},o.a.createElement(m.a,{percent:e.dpm/a})),o.a.createElement("td",{className:"text-right"},l?Object(u.d)(1e3*e.dpet):"-"),o.a.createElement("td",{width:"20%"},o.a.createElement(m.a,{percent:e.dpet/s}))))},i.DetailHeader=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("th",null,o.a.createElement(g.a,{content:o.a.createElement(l.Trans,{id:"shared.healingEfficiency.tableHeader.casts.tooltip"})},o.a.createElement(l.Trans,{id:"shared.healingEfficiency.tableHeader.casts"}))),o.a.createElement(l.Trans,{render:"th",id:"shared.healingEfficiency.tableHeader.manaSpent"}),o.a.createElement(l.Trans,{render:"th",id:"shared.healingEfficiency.tableHeader.timeSpent"}),i.state.showHealing&&o.a.createElement(o.a.Fragment,null,o.a.createElement(l.Trans,{render:"th",id:"shared.healingEfficiency.tableHeader.healingDone"}),o.a.createElement(l.Trans,{render:"th",id:"shared.healingEfficiency.tableHeader.overhealingDone"}),o.a.createElement("th",null,o.a.createElement(g.a,{content:o.a.createElement(l.Trans,{id:"common.stat.healingPerMana.long"})},o.a.createElement(l.Trans,{id:"common.stat.healingPerMana.short"}))),o.a.createElement("th",null,o.a.createElement(g.a,{content:o.a.createElement(l.Trans,{id:"common.stat.healingPerExecutionTime.long"})},o.a.createElement(l.Trans,{id:"common.stat.healingPerExecutionTime.short"})))),!i.state.showHealing&&o.a.createElement(o.a.Fragment,null,o.a.createElement(l.Trans,{render:"th",id:"shared.healingEfficiency.tableHeader.damageDone"}),o.a.createElement("th",null,o.a.createElement(g.a,{content:o.a.createElement(l.Trans,{id:"common.stat.damagePerMana.long"})},o.a.createElement(l.Trans,{id:"common.stat.damagePerMana.short"}))),o.a.createElement("th",null,o.a.createElement(g.a,{content:o.a.createElement(l.Trans,{id:"common.stat.damagePerExecutionTime.long"})},o.a.createElement(l.Trans,{id:"common.stat.damagePerExecutionTime.short"})))))},i.DetailView=function(e){var t=e.healingDone,a=e.healingDone>0||e.overhealingDone>0,n=e.damageDone>0;return o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,e.casts," (",i.state.showHealing?Math.floor(e.healingHits):Math.floor(e.damageHits),")"),o.a.createElement("td",null,Object(u.d)(e.manaSpent)," ("+Object(u.e)(e.manaPercentSpent)+"%)"),o.a.createElement("td",null,0!==e.timeSpentCasting?Object(u.a)(e.timeSpentCasting/1e3)+" ("+Object(u.e)(e.percentTimeSpentCasting)+"%)":"-"),i.state.showHealing&&o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,t?Object(u.d)(e.healingDone):"-",t?" ("+Object(u.e)(e.percentHealingDone)+"%)":""),o.a.createElement("td",null,a?Object(u.d)(e.overhealingDone):"-",a?" ("+Object(u.e)(e.percentOverhealingDone)+"%)":""),o.a.createElement("td",null,t?Object(u.d)(e.hpm):"-"),o.a.createElement("td",null,t?Object(u.d)(1e3*e.hpet):"-")),!i.state.showHealing&&o.a.createElement(o.a.Fragment,null,o.a.createElement("td",null,n?Object(u.d)(e.damageDone):"-",n?" ("+Object(u.e)(e.percentDamageDone)+"%)":""),o.a.createElement("td",null,n?Object(u.d)(e.dpm):"-"),o.a.createElement("td",null,n?Object(u.d)(1e3*e.dpet):"-")))},i.state={showHealing:!0,detailedView:!1,showCooldowns:!1},i}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.tracker;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"pad"},o.a.createElement("div",{className:"pull-left"},o.a.createElement("div",{className:"toggle-control pull-right",style:{marginRight:".5em"}},o.a.createElement(h.a,{defaultChecked:!1,icons:!1,onChange:function(t){return e.setState({detailedView:t.target.checked})},id:"detailed-toggle"}),o.a.createElement("label",{htmlFor:"detailed-toggle",style:{marginLeft:"0.5em"}},o.a.createElement(l.Trans,{id:"shared.healingEfficiency.toggle.detailed"})))),o.a.createElement("div",{className:"pull-right"},o.a.createElement("div",{className:"toggle-control pull-left",style:{marginLeft:".5em",marginRight:".5em"}},o.a.createElement(h.a,{defaultChecked:!1,icons:!1,onChange:function(t){return e.setState({showCooldowns:t.target.checked})},id:"cooldown-toggle"}),o.a.createElement("label",{htmlFor:"cooldown-toggle",style:{marginLeft:"0.5em"}},o.a.createElement(l.Trans,{id:"shared.healingEfficiency.toggle.cooldowns"}))),o.a.createElement("div",{className:"toggle-control pull-left",style:{marginLeft:".5em"}},o.a.createElement("label",{htmlFor:"healing-toggle",style:{marginLeft:"0.5em",marginRight:"1em"}},o.a.createElement(l.Trans,{id:"shared.healingEfficiency.toggle.damage"})),o.a.createElement(h.a,{defaultChecked:!0,icons:!1,onChange:function(t){return e.setState({showHealing:t.target.checked})},id:"healing-toggle"}),o.a.createElement("label",{htmlFor:"healing-toggle",style:{marginLeft:"0.5em"}},o.a.createElement(l.Trans,{id:"shared.healingEfficiency.toggle.healing"}))))),o.a.createElement("table",{className:"data-table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement(l.Trans,{render:"th",id:"common.ability"}),this.state.detailedView?o.a.createElement(this.DetailHeader,null):o.a.createElement(this.BarHeader,null))),o.a.createElement("tbody",null,o.a.createElement(this.HealingEfficiencyTable,{tracker:t}))))}}]),a}(o.a.Component);t.a=T},854:function(e,t,a){"use strict";var n,i=a(8),s=a(9),r=a(10),l=a(11),c=a(6),o=a(0),u=a.n(o),d=a(124),h=a(3),m=a(22),E=a(33),g=a(108),T=a(43),f=a(15),b=a(766),p=a(825),v=a(866),A=a(829),y=a(122),L=a(750),_=function(e){return e.children},O=a(880),H=a(12),I=(n={},Object(H.a)(n,h.a.LEECH.id,{multiplier:!0}),Object(H.a)(n,h.a.HEALTHSTONE.id,{int:!1,crit:!1,hasteHpct:!1,mastery:!1,vers:!0}),Object(H.a)(n,h.a.MARK_OF_THE_ANCIENT_PRIESTESS.id,{int:!1,crit:!0,hasteHpct:!1,mastery:!1,vers:!0}),n),N=a(19),S=(a(850),function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).qeLive=!1,n.fallbackSpellInfo={int:!1,crit:!0,hasteHpm:!1,hasteHpct:!1,mastery:!1,vers:!0},n.sharedSpellInfo=I,n.spellInfo={},n.mentioned=[],n.totalAdjustedHealing=0,n.totalOneInt=0,n.totalOneCrit=0,n.totalOneHasteHpct=0,n.totalOneHasteHpm=0,n.totalOneMastery=0,n.totalOneVers=0,n.totalOneVersDr=0,n.totalOneLeech=0,n.playerHealthMissing=0,n.scaleWeightsWithHealth=!1,n.moreInformationLink=null,n.addEventListener(f.f.heal.by(T.a),n.onHeal),n.addEventListener(f.f.heal.by(T.b),n.onHeal),n.addEventListener(f.f.absorbed.by(T.a),n.onAbsorb),n.addEventListener(f.f.absorbed.by(T.b),n.onAbsorb),n.addEventListener(f.f.removebuff.by(T.a),n.onRemoveBuff),n.addEventListener(f.f.removebuff.by(T.b),n.onRemoveBuff),n.addEventListener(f.f.heal.to(T.a),n.onHealTaken),n.addEventListener(f.f.damage.to(T.a),n.onDamageTaken),n.addEventListener(f.f.fightend,n.onFightend),n}return Object(s.a)(a,[{key:"_getSpellInfo",value:function(e){var t=e.ability.guid,a=this.spellInfo[t];if(a)return a;var n=this.sharedSpellInfo[t];return n||this.fallbackSpellInfo}}]),Object(s.a)(a,[{key:"onHeal",value:function(e){var t=new p.a(e.amount,e.absorbed,e.overheal);this._handleHealEvent(e,t)}},{key:"onAbsorb",value:function(e){var t=new p.a(e.amount,0,0);this._handleHealEvent(e,t)}},{key:"onRemoveBuff",value:function(e){if(e.absorb){var t=new p.a(0,0,e.absorb);this._handleHealEvent(e,t)}}},{key:"_handleHealEvent",value:function(e,t){var a=this._getSpellInfo(e),n=(e.hitPoints-t.effective)/e.maxHitPoints;this._handleHeal(a,e,t,n)}},{key:"_handleHeal",value:function(e,t,a,n){e.multiplier||(this.totalAdjustedHealing+=this._adjustGain(a.effective,n)),e.ignored||(this.totalOneLeech+=this._adjustGain(this._leech(t,a,e),n),e.multiplier||(e.int&&(this.totalOneInt+=this._adjustGain(this._intellect(t,a),n)),e.crit&&(this.totalOneCrit+=this._adjustGain(this._criticalStrike(t,a),n)),e.hasteHpct&&(this.totalOneHasteHpct+=this._adjustGain(this._hasteHpct(t,a),n)),e.hasteHpm&&(this.totalOneHasteHpm+=this._adjustGain(this._hasteHpm(t,a),n)),e.mastery&&(this.totalOneMastery+=this._adjustGain(this._mastery(t,a),n)),e.vers&&(this.totalOneVers+=this._adjustGain(this._versatility(t,a),n))))}},{key:"_adjustGain",value:function(e,t){if(0===e)return 0;var a=1-Math.max(0,(t-.3)/.7);return this.scaleWeightsWithHealth?e*a:e}},{key:"_leech",value:function(e,t,a){return e.type!==f.b.Heal?0:this.statTracker.currentLeechPercentage>0?this._leechHasLeech(e,t,a):this._leechPrediction(e,t,a)}},{key:"_leechHasLeech",value:function(e,t){return e.ability.guid!==h.a.LEECH.id||t.overheal?0:t.effective/this.statTracker.currentLeechRating}},{key:"_leechPrediction",value:function(e,t,a){if(this.owner.toPlayer(e))return 0;if(a.multiplier)return 0;if(this.playerHealthMissing>0){var n=this.statTracker.statMultiplier.leech/this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentLeechRating,this.statTracker.statBaselineRatingPerPercent[N.a.LEECH],1,!1);return t.raw*n}return 0}},{key:"_intellect",value:function(e,t){if(t.overheal)return 0;var a=this.statTracker.statMultiplier.intellect/this.statTracker.currentIntellectRating;return t.effective*a}},{key:"_getCritChance",value:function(e){var t=this.statTracker.currentCritRating;return{baseCritChance:this.statTracker.baseCritPercentage,ratingCritChance:t/this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentCritRating,this.statTracker.statBaselineRatingPerPercent[N.a.CRITICAL_STRIKE])}}},{key:"_isCrit",value:function(e){return e.hitType===b.a.CRIT}},{key:"_criticalStrike",value:function(e,t){if(this._isCrit(e)){var a=this._getCritChance(e),n=a.baseCritChance,i=n+a.ratingCritChance;if(i>1+1/this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentCritRating,this.statTracker.statBaselineRatingPerPercent[N.a.CRITICAL_STRIKE]))return 0;var s=1-n/i,r=this.critEffectBonus.getBonus(e),l=t.raw/r,c=Math.max(0,t.effective-l),o=this.statTracker.currentCritRating;return c*(this.statTracker.statMultiplier.crit*s/o)}return 0}},{key:"_hasteHpct",value:function(e,t){var a=this.statTracker.currentHastePercentage,n=this.statTracker.statMultiplier.haste/this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentHasteRating,this.statTracker.statBaselineRatingPerPercent[N.a.HASTE]);return t.effective/(1+a)*n}},{key:"_hasteHpm",value:function(e,t){var a=this.statTracker.statMultiplier.haste/this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentHasteRating,this.statTracker.statBaselineRatingPerPercent[N.a.HASTE]);return t.effective/(1+this.statTracker.currentHastePercentage)*a}},{key:"_mastery",value:function(e,t){throw new Error("Missing custom Mastery implementation. This is different per spec.")}},{key:"_versatility",value:function(e,t){if(t.overheal)return 0;var a=this.statTracker.currentVersatilityPercentage,n=this.statTracker.statMultiplier.versatility/this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentVersatilityRating,this.statTracker.statBaselineRatingPerPercent[N.a.VERSATILITY],1,!1);return t.effective/(1+a)*n}},{key:"onDamageTaken",value:function(e){this._updateMissingHealth(e);var t=new v.a(e.amount,e.absorbed,e.blocked,e.overkill);this.totalOneVersDr+=this._versatilityDamageReduction(e,t)}},{key:"_versatilityDamageReduction",value:function(e,t){return t.effective/(1-this.statTracker.currentVersatilityPercentage/2)*(this.statTracker.statMultiplier.versatility/this.statTracker.ratingNeededForNextPercentage(this.statTracker.currentVersatilityRating,this.statTracker.statBaselineRatingPerPercent[N.a.VERSATILITY],1,!1)/2)}},{key:"onHealTaken",value:function(e){this._updateMissingHealth(e)}},{key:"_updateMissingHealth",value:function(e){e.hitPoints&&e.maxHitPoints&&(this.playerHealthMissing=e.maxHitPoints-e.hitPoints)}},{key:"onFightend",value:function(){0}},{key:"calculateItemStatsHps",value:function(e,t){var a=0;return e.primary&&(a+=Object(g.a)(e.itemLevel,e.primary,t)*this.hpsPerIntellect),e.criticalStrike&&(a+=Object(g.b)(e.itemLevel,e.criticalStrike,t)*this.hpsPerCriticalStrike),e.haste&&(a+=Object(g.b)(e.itemLevel,e.haste,t)*this.hpsPerHaste),e.mastery&&(a+=Object(g.b)(e.itemLevel,e.mastery,t)*this.hpsPerMastery),e.versatility&&(a+=Object(g.b)(e.itemLevel,e.versatility,t)*this.hpsPerVersatility),e.leech&&(a+=Object(g.b)(e.itemLevel,e.leech,t)*this.hpsPerLeech),a}},{key:"_ratingPerOnePercent",value:function(e){return this.totalAdjustedHealing/100/e}},{key:"_getGain",value:function(e){switch(e){case N.a.INTELLECT:return this.totalOneInt;case N.a.CRITICAL_STRIKE:return this.totalOneCrit;case N.a.HASTE_HPCT:return this.totalOneHasteHpct;case N.a.HASTE_HPM:return this.totalOneHasteHpm;case N.a.MASTERY:return this.totalOneMastery;case N.a.VERSATILITY:return this.totalOneVers;case N.a.VERSATILITY_DR:return this.totalOneVers+this.totalOneVersDr;case N.a.LEECH:return this.totalOneLeech;default:return 0}}},{key:"_getTooltip",value:function(e){switch(e){case N.a.HASTE_HPCT:return u.a.createElement(c.Trans,{id:"shared.healerStatValues.stats.hpct"});case N.a.HASTE_HPM:return u.a.createElement(c.Trans,{id:"shared.healerStatValues.stats.hpm"});case N.a.VERSATILITY_DR:return u.a.createElement(c.Trans,{id:"shared.healerStatValues.stats.versDR"});default:return null}}},{key:"statistic",value:function(){var e=this,t=this._prepareResults();t.reduce((function(t,a){if("intellect"===a||"versatilitydr"===a)return t;var n="object"===typeof a?a.stat:a,i=e._getGain(n)/(e.totalOneInt||1),s=Object(N.d)(n).replace(/[()\s+]/g,"");return t.push(s+"="+i.toFixed(2)),t}),[]).join("&");return u.a.createElement(_,{position:this.constructor.position},u.a.createElement("div",{className:"col-lg-6 col-md-6 col-sm-6 col-xs-12"},u.a.createElement("div",{className:"panel items statistic"},this.moreInformationLink&&u.a.createElement("a",{href:this.moreInformationLink,target:"_blank",rel:"noopener noreferrer"},u.a.createElement(m.b,{content:"Click for more information."},u.a.createElement("div",{className:"detail-corner","data-place":"top"},u.a.createElement(O.a,null)))),u.a.createElement("div",{className:"panel-body",style:{padding:"10px 0 16px"}},u.a.createElement("table",{className:"data-table compact",style:{margin:0}},u.a.createElement("thead",null,u.a.createElement("tr",{className:"text-muted"},u.a.createElement("th",{style:{minWidth:30,fontWeight:400}},u.a.createElement(m.a,{content:u.a.createElement(c.Trans,{id:"shared.healerStatValues.statistic.title.tooltip",components:[u.a.createElement("br",null),u.a.createElement("br",null)]})},u.a.createElement(c.Trans,{id:"shared.healerStatValues.statistic.title"})),!1),u.a.createElement("th",{className:"text-right",style:{minWidth:30,fontWeight:400},colSpan:2},u.a.createElement(m.a,{content:u.a.createElement(c.Trans,{id:"shared.healerStatValues.statistic.title.value.tooltip"})},u.a.createElement(c.Trans,{id:"shared.healerStatValues.statistic.title.value"}))))),u.a.createElement("tbody",null,t.map((function(t){var a="object"===typeof t?t.stat:t,n="object"===typeof t?t.tooltip:e._getTooltip(a),i=e._getGain(a),s=i/(e.totalOneInt||1),r=e._ratingPerOnePercent(i),l=Object(N.c)(a),o=(i/e.owner.fightDuration*1e3).toFixed(2),h=null!==i?r===1/0?"\u221e":Object(E.d)(r):"NYI",g=u.a.createElement(c.Trans,{id:"shared.healerStatValues.statistic.stats.tooltip",values:{gainPerSecond:o,rating:h}});return u.a.createElement("tr",{key:a},u.a.createElement("td",{className:Object(N.b)(a)},u.a.createElement(l,{style:{height:"1.6em",width:"1.6em",marginRight:10}})," ",n?u.a.createElement(m.a,{content:n},Object(N.e)(a)):Object(N.e)(a)),u.a.createElement("td",{className:"text-right"},a===N.a.HASTE_HPCT&&"0.00 - ",null!==i?s.toFixed(2):"NYI"),u.a.createElement("td",{style:{padding:6}},u.a.createElement(m.b,{content:g},u.a.createElement("div",null,u.a.createElement(d.a,null)))))}))))))))}},{key:"hpsPerIntellect",get:function(){return this._getGain(N.a.INTELLECT)/this.owner.fightDuration*1e3}},{key:"hpsPerCriticalStrike",get:function(){return this._getGain(N.a.CRITICAL_STRIKE)/this.owner.fightDuration*1e3}},{key:"hpsPerHasteHPCT",get:function(){return this._getGain(N.a.HASTE_HPCT)/this.owner.fightDuration*1e3}},{key:"hpsPerHasteHPM",get:function(){return this._getGain(N.a.HASTE_HPM)/this.owner.fightDuration*1e3}},{key:"hpsPerHaste",get:function(){return this.hpsPerHasteHPCT+this.hpsPerHasteHPM}},{key:"hpsPerMastery",get:function(){return this._getGain(N.a.MASTERY)/this.owner.fightDuration*1e3}},{key:"hpsPerVersatility",get:function(){return this._getGain(N.a.VERSATILITY)/this.owner.fightDuration*1e3}},{key:"hpsPerVersatilityDR",get:function(){return this._getGain(N.a.VERSATILITY_DR)/this.owner.fightDuration*1e3}},{key:"hpsPerLeech",get:function(){return this._getGain(N.a.LEECH)/this.owner.fightDuration*1e3}}]),a}(T.c));S.dependencies={critEffectBonus:A.a,statTracker:y.a},S.position=L.a.CORE(9);t.a=S},888:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n=a(8),i=a(9),s=a(10),r=a(11),l=a(6),c=a(0),o=a.n(c),u=a(3),d=a(33),h=a(4),m=a(750),E=a(58),g=a(765),T=a(760),f=a(5),b=a(43),p=a(15),v=a(164),A=a(769),y=a(757),L=a(938),_=a(820),O=.2,H=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;Object(n.a)(this,a),(i=t.call(this,e)).combatants=void 0,i.healing=0,i.buffHealing=0,i.earthShieldHealingIncrease=O,i.category=E.a.TALENTS;var s=i.selectedCombatant.specId===f.a.RESTORATION_SHAMAN.id;i.active=s||i.selectedCombatant.hasTalent(u.a.EARTH_SHIELD.id),s&&(i.category=E.a.GENERAL);var r=i.selectedCombatant.conduitRankBySpellID(u.a.EMBRACE_OF_EARTH.id);r&&(i.earthShieldHealingIncrease+=_.g[r]/100),i.addEventListener(p.f.heal.by(b.a).spell(u.a.EARTH_SHIELD_HEAL),i.onEarthShieldHeal);var l=L.b.filter((function(e){return e!==u.a.EARTH_SHIELD_HEAL}));return i.addEventListener(p.f.heal.by(b.a).spell(l),i.onEarthShieldAmpSpellHeal),i}return Object(i.a)(a,[{key:"onEarthShieldHeal",value:function(e){this.healing+=e.amount+(e.absorbed||0)}},{key:"onEarthShieldAmpSpellHeal",value:function(e){var t=this.combatants.getEntity(e);t&&t.hasBuff(u.a.EARTH_SHIELD.id,e.timestamp)&&(this.buffHealing+=Object(A.a)(e,this.earthShieldHealingIncrease))}},{key:"getFeeding",value:function(){return 0}},{key:"statistic",value:function(){return o.a.createElement(m.b,{label:o.a.createElement(h.a,{id:u.a.EARTH_SHIELD.id}),category:this.category,position:m.a.OPTIONAL(45),tooltip:o.a.createElement(l.Trans,{id:"shaman.shared.earthShield.statistic.tooltip",values:{0:Object(d.e)(this.owner.getPercentageOfTotalHealingDone(this.healing)),1:Object(d.e)(this.owner.getPercentageOfTotalHealingDone(this.buffHealing))}}),value:o.a.createElement("div",null,o.a.createElement(T.a,null)," ",Object(d.e)(this.uptimePercent),"% ",o.a.createElement("small",null,"uptime"),o.a.createElement("br",null),o.a.createElement(g.a,{amount:this.healing+this.buffHealing+this.getFeeding()}))})}},{key:"uptime",get:function(){var e=this;return Object.values(this.combatants.players).reduce((function(t,a){return t+a.getBuffUptime(u.a.EARTH_SHIELD.id,e.owner.playerId)}),0)}},{key:"uptimePercent",get:function(){return this.uptime/this.owner.fightDuration}},{key:"suggestionThresholds",get:function(){return{actual:this.uptimePercent,isLessThan:{minor:.95,average:.9,major:.8},style:v.a.PERCENTAGE}}}]),a}(b.c);H.dependencies={combatants:y.a},t.b=H},899:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(6),c=a(0),o=a.n(c),u=a(812),d=a(43),h=a(835),m=a(851),E=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).healingEfficiencyTracker=void 0,e}return Object(i.a)(a,[{key:"statistic",value:function(){return o.a.createElement(u.a,{title:o.a.createElement(l.Trans,{id:"shared.healingEfficiency.title"}),position:120},o.a.createElement(m.a,{tracker:this.healingEfficiencyTracker}))}}]),a}(d.c);E.dependencies={healingEfficiencyTracker:h.a},t.a=E},938:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l}));var n=a(26),i=a(3),s=a(820),r=Object(n.a)(s.a),l=[i.a.ELEMENTAL_BLAST_CRIT,i.a.ELEMENTAL_BLAST_MASTERY,i.a.ELEMENTAL_BLAST_HASTE]},939:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(6),c=a(0),o=a.n(c),u=a(3),d=a(53),h=a(33),m=a(750),E=a(58),g=a(43),T=a(15),f=a(4),b=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).damageReduced=0,i.active=i.selectedCombatant.hasTalent(u.a.SPIRIT_WOLF_TALENT.id),i.addEventListener(T.f.damage.to(g.a),i.damageTaken),i}return Object(i.a)(a,[{key:"damageTaken",value:function(e){var t;if(this.selectedCombatant.hasBuff(u.a.SPIRIT_WOLF_BUFF.id)){var a=null===(t=this.selectedCombatant.getBuff(u.a.SPIRIT_WOLF_BUFF.id))||void 0===t?void 0:t.stacks;if(a){var n=e.amount+(e.absorbed||0);this.damageReduced+=n/(1-.05*a)*(.05*a)}}}},{key:"statistic",value:function(){return o.a.createElement(m.b,{position:m.a.OPTIONAL(45),category:E.a.TALENTS,icon:o.a.createElement(d.a,{id:u.a.SPIRIT_WOLF_TALENT.id}),value:"\u2248".concat(Object(h.d)(this.totalDrps)," DRPS"),label:o.a.createElement(l.Trans,{id:"shaman.shared.damageReduced.label"}),tooltip:o.a.createElement(l.Trans,{id:"shaman.shared.damageReduced.tooltip",values:{0:Object(h.f)(this.damageReduced)},components:[o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(f.a,{id:u.a.SPIRIT_WOLF_TALENT.id})]})})}},{key:"totalDrps",get:function(){return this.damageReduced/this.owner.fightDuration*1e3}}]),a}(g.c);t.a=b},940:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(3),c=a(43),o=a(15),u=a(754),d=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).spellUsable=void 0,i.active=i.selectedCombatant.hasTalent(l.a.STATIC_CHARGE_TALENT.id),i.addEventListener(o.f.applydebuff.by(c.b).spell(l.a.STATIC_CHARGE_DEBUFF),i.stunApplication),i}return Object(i.a)(a,[{key:"stunApplication",value:function(){this.spellUsable.cooldownRemaining(l.a.CAPACITOR_TOTEM.id)<=4e4||this.spellUsable.reduceCooldown(l.a.CAPACITOR_TOTEM.id,5e3)}}]),a}(c.c);d.dependencies={spellUsable:u.b},t.a=d},941:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),l=a(6),c=a(0),o=a.n(c),u=a(3),d=a(53),h=a(33),m=a(750),E=a(43),g=a(15),T=a(4),f=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).damageReduced=0,i.addEventListener(g.f.damage.to(E.a),i.damageTaken),i}return Object(i.a)(a,[{key:"damageTaken",value:function(e){if(this.selectedCombatant.hasBuff(u.a.ASTRAL_SHIFT.id)){var t=e.amount+(e.absorbed||0);this.damageReduced+=t/.6*.4}}},{key:"statistic",value:function(){return o.a.createElement(m.b,{position:m.a.OPTIONAL(),icon:o.a.createElement(d.a,{id:u.a.ASTRAL_SHIFT.id}),value:"\u2248".concat(Object(h.d)(this.totalDrps)," DRPS"),label:o.a.createElement(l.Trans,{id:"shaman.shared.damageReduced.label"}),tooltip:o.a.createElement(l.Trans,{id:"shaman.shared.damageReduced.tooltip",values:{0:Object(h.f)(this.damageReduced)},components:[o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(T.a,{id:u.a.ASTRAL_SHIFT.id})]})})}},{key:"totalDrps",get:function(){return this.damageReduced/this.owner.fightDuration*1e3}}]),a}(E.c);t.a=f},990:function(e,t,a){},996:function(e,t,a){"use strict";var n=a(7),i=a(8),s=a(9),r=a(10),l=a(11),c=a(6),o=a(0),u=a.n(o),d=a(5),h=a(207),m=a(33),E=a(22);var g=a(69),T=a.n(g),f=a(4),b=a(845),p=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={showPlayers:!0},e}return Object(s.a)(a,[{key:"calculatePlayerBreakdown",value:function(e,t){var a=[],i=function(e,t){for(var a={},n=e.length,i=0;i<n;i+=1){var s=e[i];a[s[t]]=s}return a}(t,"id");return Object.keys(e).forEach((function(t){var s=e[t],r=i[t];r&&a.push(Object(n.a)(Object(n.a)(Object(n.a)({},r),s),{},{masteryEffectiveness:s.healingFromMastery/(s.maxPotentialHealingFromMastery||1)}))})),a}},{key:"calculateSpellBreakdown",value:function(e){var t=[];return Object.keys(e).forEach((function(a){var i=e[a];t.push(Object(n.a)(Object(n.a)({},i),{},{masteryEffectiveness:i.healingFromMastery/(i.maxPotentialHealingFromMastery||1)}))})),t}},{key:"render",value:function(){var e=this,t=this.props,a=t.report,n=t.spellreport,i=t.players,s=this.calculatePlayerBreakdown(a,i),r=Object.values(a).reduce((function(e,t){return e+t.effectiveHealing}),0),l=s.reduce((function(e,t){return Math.max(e,t.effectiveHealing)}),1),o=s.reduce((function(e,t){return Math.max(e,t.masteryEffectiveness)}),0),g=[],p=0,v=0,A=0;return n&&(g=this.calculateSpellBreakdown(n),p=Object.values(n).reduce((function(e,t){return e+t.effectiveHealing}),0),v=g.reduce((function(e,t){return Math.max(e,t.effectiveHealing)}),1),A=g.reduce((function(e,t){return Math.max(e,t.masteryEffectiveness)}),0)),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement("div",{className:"pad"},u.a.createElement("div",{className:"pull-right"},u.a.createElement("div",{className:"toggle-control pull-left",style:{marginLeft:".5em"}},u.a.createElement("label",{htmlFor:"playerbreakdown-toggle",style:{marginLeft:"0.5em",marginRight:"1em"}},u.a.createElement(c.Trans,{id:"interface.playerBreakdown.toggle.spells"})),u.a.createElement(T.a,{defaultChecked:!0,icons:!1,onChange:function(t){return e.setState({showPlayers:t.target.checked})},id:"playerbreakdown-toggle"}),u.a.createElement("label",{htmlFor:"playerbreakdown-toggle",style:{marginLeft:"0.5em"}},u.a.createElement(c.Trans,{id:"interface.playerBreakdown.toggle.players"}))))),u.a.createElement("table",{className:"data-table"},u.a.createElement("thead",null,u.a.createElement("tr",{style:{textTransform:"uppercase"}},u.a.createElement("th",null,u.a.createElement(c.Trans,{id:"interface.playerBreakdown.name"})),u.a.createElement("th",{colSpan:"2"},u.a.createElement(c.Trans,{id:"interface.playerBreakdown.masteryEffectiveness"})),u.a.createElement("th",{colSpan:"3"},u.a.createElement(E.a,{content:u.a.createElement(c.Trans,{id:"interface.playerBreakdown.masteryEffectivenessTooltip"})},u.a.createElement(c.Trans,{id:"interface.playerBreakdown.healingDone"}))))),u.a.createElement("tbody",null,!this.state.showPlayers&&g&&g.sort((function(e,t){return t.masteryEffectiveness-e.masteryEffectiveness})).map((function(e){var t=e.masteryEffectiveness/A,a=e.effectiveHealing/v,n=e.effectiveHealing/p;return u.a.createElement("tr",{key:e.spellId},u.a.createElement("td",{style:{width:"20%"}},u.a.createElement(f.a,{id:e.spellId})),u.a.createElement("td",{style:{width:50,textAlign:"right"}},(Math.round(1e4*e.masteryEffectiveness)/100).toFixed(2),"%"),u.a.createElement("td",{style:{width:"40%"}},u.a.createElement(b.a,{percent:t})),u.a.createElement("td",{style:{width:50,textAlign:"right"}},(Math.round(1e4*n)/100).toFixed(2),"%"),u.a.createElement("td",{style:{width:"40%"}},u.a.createElement(b.a,{percent:a})),u.a.createElement("td",{style:{width:50,textAlign:"right"}},Object(m.d)(e.effectiveHealing)))})),this.state.showPlayers&&s&&s.sort((function(e,t){return t.masteryEffectiveness-e.masteryEffectiveness})).map((function(e){var t=e.combatant;if(!t)return console.error("Missing combatant:",e),null;var a=d.a[t.specId],n=a.className.replace(" ",""),i=e.masteryEffectiveness/o,s=e.effectiveHealing/l,c=e.effectiveHealing/r;return u.a.createElement("tr",{key:t.id},u.a.createElement("td",{style:{width:"20%"}},u.a.createElement(h.a,{id:a.id})," ",t.name),u.a.createElement("td",{style:{width:50,textAlign:"right"}},(Math.round(1e4*e.masteryEffectiveness)/100).toFixed(2),"%"),u.a.createElement("td",{style:{width:"40%"}},u.a.createElement("div",{className:"flex performance-bar-container"},u.a.createElement("div",{className:"flex-sub performance-bar ".concat(n,"-bg"),style:{width:"".concat(100*i,"%")}}))),u.a.createElement("td",{style:{width:50,textAlign:"right"}},(Math.round(1e4*c)/100).toFixed(2),"%"),u.a.createElement("td",{style:{width:"40%"}},u.a.createElement("div",{className:"flex performance-bar-container"},u.a.createElement("div",{className:"flex-sub performance-bar ".concat(n,"-bg"),style:{width:"".concat(100*s,"%")}}))),u.a.createElement("td",{style:{width:50,textAlign:"right"}},Object(m.d)(e.effectiveHealing)))})))))}}]),a}(u.a.Component);t.a=p}}]);
//# sourceMappingURL=RestorationShaman.89f1dfe8.chunk.js.map