(this.webpackJsonpwowanalyzer=this.webpackJsonpwowanalyzer||[]).push([[1],{1005:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(37),s=a.n(r),o=function(){function e(t,a){Object(n.a)(this,e),this.owner=void 0,this.spell=void 0,this.primaryOverride=void 0,this._name=void 0,this.category=null,this._cooldown=void 0,this._channel=void 0,this.gcd=void 0,this.extraSuggestion=null,this.recommendedEfficiency=null,this.isDefensive=null,this.isUndetectable=null,this.castEfficiency={suggestion:!1,recommendedEfficiency:void 0,averageIssueEfficiency:void 0,majorIssueEfficiency:void 0,extraSuggestion:void 0,casts:void 0,maxCasts:void 0,importance:void 0},this.charges=1,this.enabled=!0,this.timelineSortIndex=null,this.buffSpellId=null,this.shownSpell=null,this.owner=t,this._setProps(a)}return Object(i.a)(e,[{key:"getCooldown",value:function(e,t){return void 0===this._cooldown?0:"function"===typeof this._cooldown?this._cooldown.call(null,e,t):this._cooldown}},{key:"primarySpell",get:function(){return this.spell instanceof Array?this.spell[this.primaryOverride||0]:this.spell}},{key:"name",get:function(){return this._name?this._name:this.primarySpell.name},set:function(e){this._name=e}},{key:"cooldown",set:function(e){this._cooldown=e},get:function(){return this.getCooldown(this.owner.haste.current)}},{key:"channel",set:function(e){this._channel=e},get:function(){return void 0===this._channel?0:"function"===typeof this._channel?this._channel.call(this.owner,this.owner.haste.current):this._channel}}]),Object(i.a)(e,[{key:"_setProps",value:function(e){var t=this;Object.keys(e).forEach((function(a){t._setProp(a,e[a])}))}},{key:"_setProp",value:function(e,t){this[e]=t}}]),e}();o.propTypes={spell:s.a.oneOfType([s.a.shape({id:s.a.number.isRequired,name:s.a.string.isRequired,icon:s.a.string.isRequired}),s.a.arrayOf(s.a.shape({id:s.a.number.isRequired,name:s.a.string.isRequired,icon:s.a.string.isRequired}))]).isRequired,name:s.a.string,category:s.a.string.isRequired,cooldown:s.a.oneOfType([s.a.func,s.a.number]),channel:s.a.oneOfType([s.a.func,s.a.number]),charges:s.a.number,gcd:s.a.oneOfType([s.a.func,s.a.shape({static:s.a.oneOfType([s.a.number,s.a.func]),base:s.a.oneOfType([s.a.number,s.a.func]),minimum:s.a.oneOfType([s.a.number,s.a.func])})]),castEfficiency:s.a.shape({suggestion:s.a.bool,recommendedEfficiency:s.a.number,averageIssueEfficiency:s.a.number,majorIssueEfficiency:s.a.number,extraSuggestion:s.a.node,casts:s.a.func,maxCasts:s.a.func,importance:s.a.string}),enabled:s.a.bool,timelineSortIndex:s.a.number,buffSpellId:s.a.oneOfType([s.a.number,s.a.arrayOf(s.a.number)]),isDefensive:s.a.bool,isUndetectable:s.a.bool,primaryCoefficient:s.a.number,healSpellIds:s.a.arrayOf(s.a.number),damageSpellIds:s.a.arrayOf(s.a.number),shownSpell:s.a.shape({id:s.a.number.isRequired,name:s.a.string.isRequired,icon:s.a.string.isRequired})},t.a=o},1006:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e,i){var r;return Object(n.a)(this,a),(r=t.call(this,e))._baseInfo=void 0,r._baseInfo=i,r}return Object(i.a)(a,[{key:"name",get:function(){return this._baseInfo.name}},{key:"type",get:function(){return this._baseInfo.type}},{key:"guid",get:function(){return this._baseInfo.guid}},{key:"id",get:function(){return this._baseInfo.id}}]),a}(a(222).a);t.a=o},1011:function(e,t,a){},1012:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(16),i=a.n(n),r=a(25),s=a(8),o=a(9),c=a(10),l=a(11),u=a(0),d=a.n(u),h=a(37),f=a.n(h),m=a(5),b=a(41),g=m.a.count,p=-1,v=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={performance:null,topThroughput:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t,a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=3;break;case 3:return e.next=5,this.loadRankings();case 5:if(t=e.sent,a=t.rankings,n=this._getRank(a,100)){e.next=11;break}return this.setState({performance:p,topThroughput:p}),e.abrupt("return");case 11:r=n.total,this.setState({performance:this.props.throughput&&this.props.throughput/r,topThroughput:r}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Failed to load encounter rankings. Not logging since this will happen as expected when WCL partitions the data.",e.t0),this.setState({performance:p,topThroughput:p});case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadRankings",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.context.parser,e.abrupt("return",Object(b.i)("rankings/encounter/".concat(t.fight.boss),{class:t.selectedCombatant.spec.ranking.class,spec:t.selectedCombatant.spec.ranking.spec,difficulty:t.fight.difficulty,metric:this.props.metric,cache:this._getCacheKey(t.selectedCombatant.spec.index)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getCacheKey",value:function(e){var t=604800*e/g,a=new Date((new Date).getTime()+1e3*t),n=new Date(a.getFullYear(),0,1),i=Math.ceil(((a.valueOf()-n.valueOf())/86400/1e3+n.getDay()+1)/7);return"".concat(i,"-").concat("9.0.1")}},{key:"_getRank",value:function(e,t){return e[t-1]}},{key:"render",value:function(){return(0,this.props.children)(this.state)}}]),a}(d.a.PureComponent);v.contextTypes={parser:f.a.object.isRequired},t.b=v},1023:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(6),c=a(61),l=a(21),u=a(5),d=a(43),h=a(45),f=a(0),m=a.n(f),b=a(3),g=[u.a.GUARDIAN_DRUID.id,u.a.FERAL_DRUID.id,u.a.BEAST_MASTERY_HUNTER.id,u.a.MARKSMANSHIP_HUNTER.id,u.a.ASSASSINATION_ROGUE.id,u.a.OUTLAW_ROGUE.id,u.a.SUBTLETY_ROGUE.id,u.a.ENHANCEMENT_SHAMAN.id,u.a.BREWMASTER_MONK.id,u.a.WINDWALKER_MONK.id,u.a.VENGEANCE_DEMON_HUNTER.id,u.a.HAVOC_DEMON_HUNTER.id,u.a.SURVIVAL_HUNTER.id],p=[u.a.PROTECTION_PALADIN.id,u.a.PROTECTION_WARRIOR.id,u.a.BLOOD_DEATH_KNIGHT.id,u.a.RETRIBUTION_PALADIN.id,u.a.ARMS_WARRIOR.id,u.a.FURY_WARRIOR.id,u.a.FROST_DEATH_KNIGHT.id,u.a.UNHOLY_DEATH_KNIGHT.id],v=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"hasEnchant",value:function(e){return Boolean(e.permanentEnchant)}},{key:"hasMaxEnchant",value:function(e){return a.MAX_ENCHANT_IDS.includes(e.permanentEnchant)}},{key:"suggestions",value:function(e){var t=this,n=this.enchantableGear,i=g.includes(this.selectedCombatant.specId)?a.AGI_ENCHANTABLE_SLOTS:p.includes(this.selectedCombatant.specId)?a.STR_ENCHANTABLE_SLOTS:a.INT_ENCHANTABLE_SLOTS;Object.keys(n).forEach((function(a){var r=n[Number(a)],s=i[Number(a)],l=t.hasEnchant(r);e(l).isFalse().addSuggestion((function(e,t,a){return e(m.a.createElement(o.Trans,{id:"shared.enchantChecker.suggestions.noEnchant.label",values:{slotName:s},components:[m.a.createElement(c.a,{id:r.id,quality:r.quality,details:r,icon:!1})]})).icon(r.icon).staticImportance(h.a.MAJOR)}));var u=l&&!t.hasMaxEnchant(r);e(u).isTrue().addSuggestion((function(e,t,a){return e(m.a.createElement(o.Trans,{id:"shared.enchantChecker.suggestions.weakEnchant.label",values:{slotName:s},components:[m.a.createElement(c.a,{id:r.id,quality:r.quality,details:r,icon:!1})]})).icon(r.icon).staticImportance(h.a.MINOR)}))}))}},{key:"enchantableGear",get:function(){var e=this,t=g.includes(this.selectedCombatant.specId)?a.AGI_ENCHANTABLE_SLOTS:p.includes(this.selectedCombatant.specId)?a.STR_ENCHANTABLE_SLOTS:a.INT_ENCHANTABLE_SLOTS;return Object.keys(t).reduce((function(t,a){var n=e.selectedCombatant._getGearItemBySlotId(Number(a));return 0===n.id||n.icon.includes("offhand")||n.icon.includes("shield")||(t[Number(a)]=e.selectedCombatant._getGearItemBySlotId(Number(a))),t}),{})}},{key:"numEnchantableGear",get:function(){return Object.keys(this.enchantableGear).length}},{key:"slotsMissingEnchant",get:function(){var e=this,t=this.enchantableGear;return Object.keys(t).filter((function(a){return!e.hasEnchant(t[Number(a)])}))}},{key:"numSlotsMissingEnchant",get:function(){return this.slotsMissingEnchant.length}},{key:"slotsMissingMaxEnchant",get:function(){var e=this,t=this.enchantableGear;return Object.keys(t).filter((function(a){return e.hasEnchant(t[Number(a)])&&!e.hasMaxEnchant(t[Number(a)])}))}},{key:"numSlotsMissingMaxEnchant",get:function(){return this.slotsMissingMaxEnchant.length}}]),a}(d.c);v.AGI_ENCHANTABLE_SLOTS={4:m.a.createElement(o.Trans,{id:"common.slots.chest"}),7:m.a.createElement(o.Trans,{id:"common.slots.boots"}),10:m.a.createElement(o.Trans,{id:"common.slots.ring"}),11:m.a.createElement(o.Trans,{id:"common.slots.ring"}),14:m.a.createElement(o.Trans,{id:"common.slots.cloak"}),15:m.a.createElement(o.Trans,{id:"common.slots.weapon"}),16:m.a.createElement(o.Trans,{id:"common.slots.offhand"})},v.STR_ENCHANTABLE_SLOTS={4:m.a.createElement(o.Trans,{id:"common.slots.chest"}),9:m.a.createElement(o.Trans,{id:"common.slots.gloves"}),10:m.a.createElement(o.Trans,{id:"common.slots.ring"}),11:m.a.createElement(o.Trans,{id:"common.slots.ring"}),14:m.a.createElement(o.Trans,{id:"common.slots.cloak"}),15:m.a.createElement(o.Trans,{id:"common.slots.weapon"}),16:m.a.createElement(o.Trans,{id:"common.slots.offhand"})},v.INT_ENCHANTABLE_SLOTS={4:m.a.createElement(o.Trans,{id:"common.slots.chest"}),8:m.a.createElement(o.Trans,{id:"common.slots.bracers"}),10:m.a.createElement(o.Trans,{id:"common.slots.ring"}),11:m.a.createElement(o.Trans,{id:"common.slots.ring"}),14:m.a.createElement(o.Trans,{id:"common.slots.cloak"}),15:m.a.createElement(o.Trans,{id:"common.slots.weapon"}),16:m.a.createElement(o.Trans,{id:"common.slots.offhand"})},v.MIN_ENCHANT_IDS=[l.a.ENCHANT_RING_BARGAIN_OF_CRITICAL_STRIKE.effectId,l.a.ENCHANT_RING_BARGAIN_OF_HASTE.effectId,l.a.ENCHANT_RING_BARGAIN_OF_MASTERY.effectId,l.a.ENCHANT_RING_BARGAIN_OF_VERSATILITY.effectId,l.a.ENCHANT_CHEST_SACRED_STATS.effectId,l.a.ENCHANT_BRACERS_ILLUMINATED_SOUL.effectId,l.a.ENCHANT_GLOVES_STRENGTH_OF_SOUL.effectId,l.a.ENCHANT_BOOTS_AGILE_SOULWALKER.effectId],v.MAX_ENCHANT_IDS=[l.a.ENCHANT_RING_TENET_OF_CRITICAL_STRIKE.effectId,l.a.ENCHANT_RING_TENET_OF_HASTE.effectId,l.a.ENCHANT_RING_TENET_OF_MASTERY.effectId,l.a.ENCHANT_RING_TENET_OF_VERSATILITY.effectId,l.a.ENCHANT_CHEST_ETERNAL_STATS.effectId,l.a.ENCHANT_CHEST_ETERNAL_BOUNDS.effectId,l.a.ENCHANT_CHEST_ETERNAL_INSIGHT.effectId,l.a.ENCHANT_CHEST_ETERNAL_BULWARK.effectId,l.a.ENCHANT_CHEST_ETERNAL_SKIRMISH.effectId,l.a.ENCHANT_BRACERS_ETERNAL_INTELLECT.effectId,l.a.ENCHANT_GLOVES_ETERNAL_STRENGTH.effectId,l.a.ENCHANT_BOOTS_ETERNAL_AGILITY.effectId,l.a.ENCHANT_CLOAK_FORTIFIED_AVOIDANCE.effectId,l.a.ENCHANT_CLOAK_FORTIFIED_LEECH.effectId,l.a.ENCHANT_CLOAK_FORTIFIED_SPEED.effectId,l.a.ENCHANT_CLOAK_SOUL_VITALITY.effectId,l.a.ENCHANT_WEAPON_SINFUL_REVELATION.effectId,l.a.ENCHANT_WEAPON_ASCENDED_VIGOR.effectId,l.a.ENCHANT_WEAPON_CELESTIAL_GUIDANCE.effectId,l.a.ENCHANT_WEAPON_LIGHTLESS_FORCE.effectId,b.a.RUNE_OF_THE_FALLEN_CRUSADER.effectId,b.a.RUNE_OF_RAZORICE.effectId,b.a.RUNE_OF_THE_STONESKIN_GARGOYLE.effectId,b.a.RUNE_OF_HYSTERIA.effectId,b.a.RUNE_OF_SANGUINATION.effectId,b.a.RUNE_OF_APOCALYPSE.effectId,b.a.RUNE_OF_UNENDING_THIRST.effectId,b.a.RUNE_OF_SPELLWARDING.effectId],t.a=v},1024:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(23),s=a(10),o=a(11),c=a(43),l=a(45),u=a(3),d=a(164),h=a(15),f=[u.a.GREATER_FLASK_OF_THE_CURRENTS.id,u.a.GREATER_FLASK_OF_ENDLESS_FATHOMS.id,u.a.GREATER_FLASK_OF_THE_UNDERTOW.id,u.a.GREATER_FLASK_OF_THE_VAST_HORIZON.id],m=[u.a.SPECTRAL_FLASK_OF_POWER.id,u.a.SPECTRAL_FLASK_OF_STAMINA.id,u.a.ETERNAL_FLASK.id],b=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).startFightWithFlaskUp=!1,i.strongFlaskUsed=!1,i.addEventListener(h.f.applybuff.to(c.a),i.onApplybuff.bind(Object(r.a)(i))),i}return Object(i.a)(a,[{key:"onApplybuff",value:function(e){var t=e.ability.guid;f.includes(t)&&e.prepull&&(this.startFightWithFlaskUp=!0),m.includes(t)&&e.prepull&&(this.startFightWithFlaskUp=!0,this.strongFlaskUsed=!0)}},{key:"suggestions",value:function(e){e(this.flaskSuggestionThresholds).addSuggestion((function(e){return e("You did not have a flask up before combat. Having a flask during combat increases your primary stat significantly.").icon(u.a.SPECTRAL_FLASK_OF_POWER.icon).staticImportance(l.a.MINOR)})),e(this.flaskStrengthSuggestion).addSuggestion((function(e){return e("You did not have the best flask active when starting the fight. Using the best flask available is an easy way to improve performance.").icon(u.a.SPECTRAL_FLASK_OF_POWER.icon).staticImportance(l.a.MINOR)}))}},{key:"flaskStrengthSuggestion",get:function(){return{actual:this.strongFlaskUsed,isEqual:!1,style:d.a.BOOLEAN}}},{key:"flaskSuggestionThresholds",get:function(){return{actual:this.startFightWithFlaskUp,isEqual:!1,style:d.a.BOOLEAN}}}]),a}(c.c);t.a=b},1025:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(23),s=a(10),o=a(11),c=a(3),l=a(43),u=a(45),d=a(164),h=a(15),f=[c.a.FAMINE_EVALUATOR_AND_SNACK_TABLE_FEAST_AGI.id,c.a.FAMINE_EVALUATOR_AND_SNACK_TABLE_FEAST_INT.id,c.a.FAMINE_EVALUATOR_AND_SNACK_TABLE_FEAST_STR.id,c.a.FAMINE_EVALUATOR_AND_SNACK_TABLE_FEAST_STA.id,c.a.FRAGRANT_KAKAVIA.id,c.a.ABYSSAL_FRIED_RISSOLE.id,c.a.BIL_TONG.id,c.a.MECH_DOWELS_BIG_MECH.id,c.a.BAKED_PORT_TATO.id],m=[c.a.SURPRISINGLY_PALATABLE_FEAST_INT.id,c.a.SURPRISINGLY_PALATABLE_FEAST_AGI.id,c.a.SURPRISINGLY_PALATABLE_FEAST_STR.id,c.a.PICKLED_MEAT_SMOOTHIE.id,c.a.BUTTERSCOTCH_MARINATED_RIBS.id,c.a.CINNAMON_BONEFISH_STEW.id,c.a.MEATY_APPLE_DUMPLINGS.id,c.a.SWEET_SILVERGILL_SAUSAGES.id],b=[c.a.FEAST_OF_GLUTTONOUS_HEDONISM_INT.id,c.a.FEAST_OF_GLUTTONOUS_HEDONISM_AGI.id,c.a.FEAST_OF_GLUTTONOUS_HEDONISM_STR.id,c.a.BANANA_BEEF_PUDDING.id,c.a.SPINEFIN_SOUFFLE_AND_FRIES.id,c.a.TENEBROUS_CROWN_ROAST_ASPIC.id,c.a.IRIDESCENT_RAVIOLI_WITH_APPLE_SAUCE.id,c.a.STEAK_A_LA_MODE.id],g=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).lowerFoodUp=!1,i.midTierFoodUp=!1,i.higherFoodUp=!1,i.addEventListener(h.f.applybuff.to(l.a),i.onApplybuff.bind(Object(r.a)(i))),i}return Object(i.a)(a,[{key:"onApplybuff",value:function(e){var t=e.ability.guid;e.prepull&&(f.includes(t)&&(this.lowerFoodUp=!0),b.includes(t)&&(this.higherFoodUp=!0),m.includes(t)&&(this.midTierFoodUp=!0))}},{key:"suggestions",value:function(e){var t=u.a.MINOR,a="You did not have any food active when starting the fight. Having the right food buff during combat is an easy way to improve performance.";this.higherFoodUp||!this.lowerFoodUp&&!this.midTierFoodUp||(a="You did not have the best food active when starting the fight. Using the best food available is an easy way to improve performance."),this.higherFoodUp||this.lowerFoodUp||this.midTierFoodUp||(t=u.a.MAJOR),e(this.higherFoodSuggestionThresholds).addSuggestion((function(e){return e(a).icon(c.a.FEAST_OF_GLUTTONOUS_HEDONISM_INT.icon).staticImportance(t)}))}},{key:"higherFoodSuggestionThresholds",get:function(){return{actual:this.higherFoodUp,isEqual:!1,style:d.a.BOOLEAN}}},{key:"isPresentFoodSuggestionThresholds",get:function(){return{actual:this.higherFoodUp||this.lowerFoodUp||this.midTierFoodUp,isEqual:!1,style:d.a.BOOLEAN}}}]),a}(l.c);t.a=g},1026:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(6),c=a(61),l=a(21),u=a(43),d=a(45),h=a(0),f=a.n(h),m=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"hasEnhancement",value:function(e){return Boolean(e.temporaryEnchant)}},{key:"hasMaxEnhancement",value:function(e){return a.MAX_ENHANCEMENT_IDS.includes(e.temporaryEnchant)}},{key:"suggestions",value:function(e){var t=this,n=this.enhanceableWeapons,i=a.WEAPON_SLOTS;Object.keys(n).forEach((function(a){var r=n[Number(a)],s=i[Number(a)],l=t.hasEnhancement(r);e(l).isFalse().addSuggestion((function(e,t,a){return e(f.a.createElement(o.Trans,{id:"shared.weaponEnhancementChecker.suggestions.noWeaponEnhancement.label",values:{slotName:s},components:[f.a.createElement(c.a,{id:r.id,quality:r.quality,details:r,icon:!1})]})).icon(r.icon).staticImportance(d.a.REGULAR)}));var u=l&&!t.hasMaxEnhancement(r);e(u).isTrue().addSuggestion((function(e,t,a){return e(f.a.createElement(o.Trans,{id:"shared.weaponEnhancementChecker.suggestions.weakWeaponEnhancement.label",values:{slotName:s},components:[f.a.createElement(c.a,{id:r.id,quality:r.quality,details:r,icon:!1})]})).icon(r.icon).staticImportance(d.a.MINOR)}))}))}},{key:"enhanceableWeapons",get:function(){var e=this;return Object.keys(a.WEAPON_SLOTS).reduce((function(t,a){var n=e.selectedCombatant._getGearItemBySlotId(Number(a));return 0===n.id||n.icon.includes("offhand")||n.icon.includes("shield")||(t[Number(a)]=e.selectedCombatant._getGearItemBySlotId(Number(a))),t}),{})}},{key:"numWeapons",get:function(){return Object.keys(this.enhanceableWeapons).length}},{key:"weaponsMissingEnhancement",get:function(){var e=this,t=this.enhanceableWeapons;return Object.keys(t).filter((function(a){return!e.hasEnhancement(t[Number(a)])}))}},{key:"numWeaponsMissingEnhancement",get:function(){return this.weaponsMissingEnhancement.length}},{key:"weaponsMissingMaxEnhancement",get:function(){var e=this,t=this.enhanceableWeapons;return Object.keys(t).filter((function(a){return e.hasEnhancement(t[Number(a)])&&!e.hasMaxEnhancement(t[Number(a)])}))}},{key:"numWeaponsMissingMaxEnhancement",get:function(){return this.weaponsMissingMaxEnhancement.length}}]),a}(u.c);m.WEAPON_SLOTS={15:f.a.createElement(o.Trans,{id:"common.slots.weapon"}),16:f.a.createElement(o.Trans,{id:"common.slots.offhand"})},m.MAX_ENHANCEMENT_IDS=[l.a.SHADOWCORE_OIL.effectId,l.a.EMBALMERS_OIL.effectId,l.a.SHADED_SHARPENING_STONE.effectId,l.a.SHADED_WEIGHTSTONE.effectId],t.a=m},1027:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var n=a(8),i=a(9),r=a(119),s=a(23),o=a(10),c=a(11),l=a(0),u=a.n(l),d=a(3),h=a(53),f=a(125),m=a(43),b=a(766),g=a(829),p=a(750),v=a(751),y=a(765),E=a(20),_=a(15),O=.02,T=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).damage=0,e.healing=0,e.active=e.selectedCombatant.race===f.a.Dwarf,e.active?(e.critEffectBonus.hook(e.getCritEffectBonus.bind(Object(s.a)(e))),e.addEventListener(_.f.heal.by(m.a),e.onHeal),e.addEventListener(_.f.damage.by(m.a),e.onDamage),e):Object(r.a)(e)}return Object(i.a)(a,[{key:"isApplicableHeal",value:function(e){var t=this.owner.constructor.abilitiesAffectedByHealingIncreases;return!(t.length>0&&!t.includes(e.ability.guid))&&e.hitType===b.a.CRIT}},{key:"isApplicableDamage",value:function(e){var t=this.owner.constructor.abilitiesAffectedByDamageIncreases;return!(t.length>0&&!t.includes(e.ability.guid))&&(e.hitType===b.a.CRIT&&!e.targetIsFriendly)}},{key:"getCritEffectBonus",value:function(e,t){return this.isApplicableHeal(t)?e+O:e}},{key:"onHeal",value:function(e){if(this.isApplicableHeal(e)){var t=e.amount,a=e.absorbed||0,n=e.overheal||0,i=(t+a+n)/this.critEffectBonus.getBonus(e)*O,r=Math.max(0,i-n);this.healing+=r}}},{key:"onDamage",value:function(e){if(this.isApplicableDamage(e)){var t=(e.amount+(e.absorbed||0))/this.critEffectBonus.getBonus(e)*O;this.damage+=t}}},{key:"statistic",value:function(){var e;switch(this.selectedCombatant.spec.role){case E.a.HEALER:e=u.a.createElement(y.a,{amount:this.healing});break;case E.a.DPS:e=u.a.createElement(v.a,{amount:this.damage});break;default:e=u.a.createElement(u.a.Fragment,null,u.a.createElement(y.a,{amount:this.healing}),u.a.createElement("br",null),u.a.createElement(v.a,{amount:this.damage}))}return u.a.createElement(p.b,{icon:u.a.createElement(h.a,{id:d.a.MIGHT_OF_THE_MOUNTAIN.id}),value:e,label:"Dwarf crit racial",tooltip:u.a.createElement(u.a.Fragment,null,"The racial contributed ",this.owner.formatItemDamageDone(this.damage)," and ",this.owner.formatItemHealingDone(this.healing),".")})}}]),a}(m.c);T.dependencies={critEffectBonus:g.a},t.b=T},1045:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e,i){var r;return Object(n.a)(this,a),(r=t.call(this,e))._baseInfo=void 0,r._baseInfo=i,r}return Object(i.a)(a,[{key:"name",get:function(){return this._baseInfo.name}},{key:"type",get:function(){return this._baseInfo.type}},{key:"guid",get:function(){return this._baseInfo.guid}}]),a}(a(222).a),c=a(15),l=a(948),u=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).pets={},e}return Object(i.a)(a,[{key:"getEntities",value:function(){return this.pets}},{key:"getSourceEntity",value:function(e){return this.getEntityFromEvent(e,!1)}},{key:"getEntity",value:function(e){return this.getEntityFromEvent(e,!0)}},{key:"getEntityFromEvent",value:function(e,t){var a;if(t){if(!Object(c.e)(e)||!e.targetIsFriendly)return null;a=e.targetID}else{if(!Object(c.d)(e)||!e.sourceIsFriendly)return null;a=e.sourceID}var n=this.pets[a];if(!n){var i=this.owner.playerPets.find((function(e){return e.id===a}));if(!i)return null;n=new o(this.owner,i),this.pets[a]=n}return n}}]),a}(l.a);t.a=u},1092:function(e,t,a){},746:function(e,t,a){"use strict";var n=a(27),i=a(8),r=a(9),s=a(23),o=a(10),c=a(11),l=a(0),u=a.n(l),d=a(17),h=a(22),f=a(880),m=function(e){var t=Object.assign({},e);return u.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",className:"icon"},t),u.a.createElement("path",{d:"m 21,1019.3619 c -9.36611,0 -17.0000001,-7.6338 -17.0000001,-16.9997 0,-9.36596 7.6338901,-16.99972 17.0000001,-16.99972 l 20,0 c 8.95969,0 16.35051,6.95967 16.96875,15.78102 a 3.0068688,3.0068157 0 1 1 -6,0.4062 C 51.56591,995.80186 46.87823,991.36237 41,991.36237 l -20,0 c -6.14589,0 -11.0000001,4.85403 -11.0000001,10.99983 0,6.1458 4.8541101,10.9998 11.0000001,10.9998 l 20,0 a 3.0003,3.0002471 0 1 1 0,5.9999 l -20,0 z m 38,0 c -8.95969,0 -16.35051,-6.9597 -16.96875,-15.781 a 3.0068688,3.0068157 0 1 1 6,-0.4062 c 0.40284,5.7478 5.09052,10.1873 10.96875,10.1873 l 20,0 c 6.14589,0 11,-4.854 11,-10.9998 0,-6.1458 -4.85411,-10.99983 -11,-10.99983 l -20,0 a 3.0003,3.0002471 0 1 1 0,-5.99989 l 20,0 c 9.36611,0 17,7.63376 17,16.99972 0,9.3659 -7.63389,16.9997 -17,16.9997 l -20,0 z",transform:"translate(0,-952.36218)"}))},b=(a(1011),function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={expanded:e.expanded},n.toggleExpansion=n.toggleExpansion.bind(Object(s.a)(n)),n}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e){e.expanded!==this.props.expanded&&this.setState({expanded:this.props.expanded})}},{key:"toggleExpansion",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"renderDrilldown",value:function(e){var t=e.includes("://");return u.a.createElement("div",{className:"drilldown"},u.a.createElement(h.b,{content:"Drill down"},t?u.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},u.a.createElement(m,null)):u.a.createElement(d.b,{to:e},u.a.createElement(m,null))))}},{key:"renderDropdown",value:function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-xs-12"},this.state.expanded&&u.a.createElement("div",{className:"statistic-expansion"},e))),u.a.createElement("div",{className:"statistic-expansion-button-holster"},u.a.createElement("button",{onClick:this.toggleExpansion,className:"btn btn-primary"},!this.state.expanded&&u.a.createElement("span",{className:"glyphicon glyphicon-chevron-down"}),this.state.expanded&&u.a.createElement("span",{className:"glyphicon glyphicon-chevron-up"}))))}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.wide,i=e.ultrawide,r=e.tooltip,s=e.size,o=e.drilldown,c=e.className,l=e.dropdown,d=Object(n.a)(e,["children","wide","ultrawide","tooltip","size","drilldown","className","dropdown"]);return u.a.createElement("div",{className:i?"col-md-12":a?"col-md-6 col-sm-12 col-xs-12":"col-lg-3 col-md-4 col-sm-6 col-xs-12"},u.a.createElement("div",Object.assign({className:"panel statistic ".concat(s," ").concat(c),style:l?{zIndex:this.state.expanded?2:1}:void 0},d),u.a.createElement("div",{className:"panel-body"},t,l&&this.renderDropdown(l)),r&&u.a.createElement(h.b,{content:r},u.a.createElement("div",{className:"detail-corner","data-place":"top"},u.a.createElement(f.a,null))),o&&this.renderDrilldown(o)))}}]),a}(u.a.PureComponent));b.defaultProps={size:"standard",wide:!1,ultrawide:!1,className:""};t.a=b},747:function(e,t,a){"use strict";t.a={CORE:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e},DEFAULT:100,OPTIONAL:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 1e3+e},UNIMPORTANT:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 1e4+e}}},750:function(e,t,a){"use strict";var n=a(7),i=a(27),r=a(8),s=a(9),o=a(23),c=a(10),l=a(11),u=a(0),d=a.n(u),h=a(746),f=a(58),m=(a(858),a(747));a.d(t,"a",(function(){return m.a}));var b=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={expanded:e.expanded},n.toggleExpansion=n.toggleExpansion.bind(Object(o.a)(n)),n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e){e.expanded!==this.props.expanded&&this.setState({expanded:this.props.expanded})}},{key:"toggleExpansion",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this.props,t=e.icon,a=e.value,r=e.label,s=e.footer,o=e.children,c=e.style,l=Object(i.a)(e,["icon","value","label","footer","children","style"]);return delete l.category,delete l.position,d.a.createElement(h.a,Object.assign({},l,{className:"statistic-box",style:Object(n.a)(Object(n.a)({},c),{},{height:"auto",zIndex:this.state.expanded?2:1})}),d.a.createElement("div",{className:"pad"},d.a.createElement("label",null,t," ",r),d.a.createElement("div",{className:"value"},a),s&&d.a.createElement("div",{style:{marginTop:"0.5em"}},s)),o&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-xs-12"},this.state.expanded&&d.a.createElement("div",{className:"statistic-expansion"},o))),d.a.createElement("div",{className:"statistic-expansion-button-holster"},d.a.createElement("button",{onClick:this.toggleExpansion,className:"btn btn-primary"},!this.state.expanded&&d.a.createElement("span",{className:"glyphicon glyphicon-chevron-down"}),this.state.expanded&&d.a.createElement("span",{className:"glyphicon glyphicon-chevron-up"})))))}}]),a}(d.a.PureComponent);b.defaultProps={category:f.a.GENERAL,style:{}},t.b=b},751:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a.n(n),r=a(37),s=a.n(r),o=a(33),c=function(e,t){var a=e.amount,n=e.approximate,r=t.parser;return i.a.createElement(i.a.Fragment,null,i.a.createElement("img",{src:"/img/sword.png",alt:"Damage",className:"icon"})," ",n&&"\u2248",Object(o.d)(a/r.fightDuration*1e3)," DPS"," ",i.a.createElement("small",null,Object(o.e)(r.getPercentageOfTotalDamageDone(a))," % of total"))};c.contextTypes={parser:s.a.object.isRequired};var l=c},753:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(92),c=a(13),l=a(800),u=a(1005),d=a(755),h=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).abilityTracker=void 0,i.haste=void 0,i.abilities=[],i.activeAbilities=[],i.loadSpellbook(i.spellbook()),i}return Object(i.a)(a,[{key:"spellbook",value:function(){return[]}}]),Object(i.a)(a,[{key:"loadSpellbook",value:function(e){var t=this;this.abilities=e.map((function(e){return new u.a(t,e)})),this.activeAbilities=this.abilities.filter((function(e){return e.enabled}))}},{key:"add",value:function(e){var t=new u.a(this,e);this.abilities.push(t),this.activeAbilities.push(t)}},{key:"getAbility",value:function(e){var t=this.activeAbilities.find((function(t){return t.spell instanceof Array?t.spell.some((function(t){return t.id===e})):t.spell.id===e}));return t&&t.spell instanceof Array&&void 0===t.primaryOverride&&(t.primaryOverride=t.spell.findIndex((function(t){return t.id===e}))),t}},{key:"getExpectedCooldownDuration",value:function(e,t){var a=this.getAbility(e);return a?Math.round(1e3*a.getCooldown(this.haste.current,t)):void 0}},{key:"getMaxCharges",value:function(e){var t=this.getAbility(e);return t?t.charges||1:void 0}},{key:"getTimelineSortIndex",value:function(e){var t=this.getAbility(e);return t?t.timelineSortIndex:void 0}}]),a}(o.a);h.dependencies={abilityTracker:d.a,haste:l.a},h.SPELL_CATEGORIES={ROTATIONAL:c.i18n._({id:"core.abilities.spellCategories.rotational",defaults:"Rotational Spell"}),ROTATIONAL_AOE:c.i18n._({id:"core.abilities.spellCategories.rotationalAoe",defaults:"Spell (AOE)"}),ITEMS:c.i18n._({id:"core.abilities.spellCategories.items",defaults:"Item"}),COOLDOWNS:c.i18n._({id:"core.abilities.spellCategories.cooldowns",defaults:"Cooldown"}),DEFENSIVE:c.i18n._({id:"core.abilities.spellCategories.defensive",defaults:"Defensive Cooldown"}),SEMI_DEFENSIVE:c.i18n._({id:"core.abilities.spellCategories.semiDefensive",defaults:"Offensive & Defensive Cooldown"}),OTHERS:c.i18n._({id:"core.abilities.spellCategories.others",defaults:"Spell"}),UTILITY:c.i18n._({id:"core.abilities.spellCategories.utility",defaults:"Utility"}),HEALER_DAMAGING_SPELL:c.i18n._({id:"core.abilities.spellCategories.healerDamagingSpell",defaults:"Damaging Spell"}),CONSUMABLE:c.i18n._({id:"core.abilities.spellCategories.consumable",defaults:"Consumable"}),HIDDEN:c.i18n._({id:"core.abilities.spellCategories.hidden",defaults:"Hidden"})},h.ABILITY_CLASS=u.a,t.a=h},754:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(7),i=a(8),r=a(9),s=a(10),o=a(11),c=a(3),l=(a(33),a(43)),u=a(123),d=a(15),h=a(753),f=150,m=!0;function b(e){return c.a[e]?c.a[e].name:"???"}var g=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).eventEmitter=void 0,n.abilities=void 0,n._currentCooldowns={},n._errors=0,n._lastTimestamp=-1,n.addEventListener(d.f.any,n.onEvent),n.addEventListener(d.f.cast.by(l.a),n.onCast),n.addEventListener(d.f.prefiltercd.by(l.a),n.onCast),n.addEventListener(d.f.ChangeHaste,n.onChangehaste),n.addEventListener(d.f.fightend,n.onFightend),n}return Object(r.a)(a,[{key:"errorsPerMinute",get:function(){var e=this.owner.fightDuration/1e3/60;return this._errors/e}},{key:"isAccurate",get:function(){return this.errorsPerMinute<1.5}}]),Object(r.a)(a,[{key:"_getCanonicalId",value:function(e){var t=this.abilities.getAbility(e);return t?t.spell instanceof Array?t.spell[0].id:t.spell.id:e}},{key:"isAvailable",value:function(e){var t=this._getCanonicalId(e);return!this.isOnCooldown(t)||(this.abilities.getMaxCharges(t)||1)>this._currentCooldowns[t].chargesOnCooldown}},{key:"chargesAvailable",value:function(e){var t=this._getCanonicalId(e),a=this.abilities.getMaxCharges(t)||1;return this.isOnCooldown(t)?a-this._currentCooldowns[t].chargesOnCooldown:a}},{key:"isOnCooldown",value:function(e){var t=this._getCanonicalId(e);return Boolean(this._currentCooldowns[t])}},{key:"cooldownRemaining",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.owner.currentTimestamp,a=this._getCanonicalId(e);if(!this.isOnCooldown(a))throw new Error("Tried to retrieve the remaining cooldown of ".concat(a,", but it's not on cooldown."));var n=this._currentCooldowns[a],i=Math.round(n.start+n.expectedDuration-n.totalReductionTime);return i-t}},{key:"cooldownTriggerEvent",value:function(e){var t=this._getCanonicalId(e);if(!this.isOnCooldown(t))throw new Error("Tried to retrieve the remaining cooldown of ".concat(t,", but it's not on cooldown."));return this._currentCooldowns[t].cooldownTriggerEvent}},{key:"beginCooldown",value:function(e,t){var a=this._getCanonicalId(e),n=this.abilities.getExpectedCooldownDuration(a,t);if(n)if(this.isOnCooldown(a))if(this.isAvailable(a))this._currentCooldowns[a].chargesOnCooldown+=1,this._triggerEvent(this._makeEvent(a,t.timestamp,d.b.AddCooldownCharge));else{var i=this.cooldownRemaining(a,t.timestamp);if(i>f){this._errors+=1;var r=this._currentCooldowns[a].totalReductionTime>0?["totalReductionTime:",this._currentCooldowns[a].totalReductionTime,"adjusted expected duration:",this._currentCooldowns[a].expectedDuration-this._currentCooldowns[a].totalReductionTime]:[];m&&this.error("A cooldown error has occured. The most likely cause is missing a Haste buff, but the cooldown might also have multiple charges, can be reset early, cooldown can be reduced, the configured CD is invalid, the combatlog records multiple casts per player cast (e.g. ticks of a channel) or this is a latency issue. There's already handling for latency, but if it's extremely high, there might still be false positives. But usually it's a Haste issue."),this.error.apply(this,[b(a),a,"was cast while already marked as on cooldown.","time passed:",t.timestamp-this._currentCooldowns[a].start,"cooldown remaining:",i,"expectedDuration:",this._currentCooldowns[a].expectedDuration].concat(r)),m=!1}this.endCooldown(a,!1,t.timestamp),this.beginCooldown(a,t)}else this._currentCooldowns[a]={start:t.timestamp,cooldownTriggerEvent:t,expectedDuration:n,totalReductionTime:0,chargesOnCooldown:1},this._triggerEvent(this._makeEvent(a,t.timestamp,d.b.BeginCooldown))}},{key:"endCooldown",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.owner.currentTimestamp,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this._getCanonicalId(e);if(!this.isOnCooldown(r))throw new Error("Tried to end the cooldown of ".concat(r,", but it's not on cooldown."));var s=this._currentCooldowns[r];return 1===s.chargesOnCooldown||t?(delete this._currentCooldowns[r],this._triggerEvent(this._makeEvent(r,a,d.b.EndCooldown,Object(n.a)(Object(n.a)({},s),{},{end:a}))),0):(s.chargesOnCooldown-=1,this._triggerEvent(this._makeEvent(r,a,d.b.RestoreCharge,s)),this.refreshCooldown(r,{timestamp:a}),0!==i?this.reduceCooldown(r,i,a):0)}},{key:"refreshCooldown",value:function(e,t){var a=this._getCanonicalId(e);if(!this.isOnCooldown(a))throw new Error("Tried to refresh the cooldown of ".concat(a,", but it's not on cooldown."));var n=this.abilities.getExpectedCooldownDuration(a);n&&(this._currentCooldowns[a].start=t.timestamp,this._currentCooldowns[a].expectedDuration=n,this._currentCooldowns[a].totalReductionTime=0,this._triggerEvent(this._makeEvent(a,t.timestamp,d.b.RefreshCooldown)))}},{key:"reduceCooldown",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.owner.currentTimestamp,n=this._getCanonicalId(e);if(!this.isOnCooldown(n))throw new Error("Tried to reduce the cooldown of ".concat(n,", but it's not on cooldown."));var i=this.cooldownRemaining(n,a);if(i<t){var r=t-i;return i+this.endCooldown(n,!1,a,r)}return this._currentCooldowns[n].totalReductionTime+=t,t}},{key:"extendCooldown",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.owner.currentTimestamp,n=this._getCanonicalId(e);if(!this.isOnCooldown(n))throw new Error("Tried to extend the cooldown of ".concat(n,", but it's not on cooldown."));this.cooldownRemaining(n,a);return this._currentCooldowns[n].totalReductionTime-=t,t}},{key:"_makeEvent",value:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=this._currentCooldowns[e],s=r?r.chargesOnCooldown:0,o=this.abilities.getAbility(e),l=this.abilities.getMaxCharges(e)||1,u=c.a[e];return Object(n.a)(Object(n.a)({type:d.b.UpdateSpellUsable,ability:{guid:e,name:u?u.name:void 0,abilityIcon:u?u.icon:void 0},name:o?o.name:void 0,trigger:a,timestamp:t,isOnCooldown:this.isOnCooldown(e),isAvailable:this.isAvailable(e),chargesAvailable:l-s,maxCharges:l,timePassed:r?t-r.start:void 0,sourceID:this.owner.playerId,targetIsFriendly:!0,targetID:this.owner.playerId,__fabricated:!0},r),i)}},{key:"_triggerEvent",value:function(e){this.eventEmitter.fabricateEvent(e)}},{key:"onCast",value:function(e){var t=e.ability.guid;this.beginCooldown(t,e)}},{key:"_checkCooldownExpiry",value:function(e){var t=this;Object.keys(this._currentCooldowns).map(Number).forEach((function(a){if(t.cooldownRemaining(a,e)<=0){var n=t._currentCooldowns[a],i=Math.round(n.start+n.expectedDuration-n.totalReductionTime);t.endCooldown(Number(a),!1,i)}}))}},{key:"onEvent",value:function(e){var t=e&&e.timestamp||this.owner.currentTimestamp;e.type===d.b.FilterCooldownInfo&&t===this._lastTimestamp||(this._lastTimestamp=t,this._checkCooldownExpiry(t))}},{key:"onChangehaste",value:function(e){var t=this;Object.keys(this._currentCooldowns).map(Number).forEach((function(a){var n=t._currentCooldowns[a],i=n.expectedDuration,r=n.cooldownTriggerEvent,s=e.timestamp-n.start,o=s/i,c=t.abilities.getExpectedCooldownDuration(Number(a),r);if(void 0===c)throw new Error("Attempting to get cooldown duration for spell with no ability info: ".concat(a));var l=Math.round(s+t._calculateNewCooldownDuration(o,c));n.expectedDuration=l}))}},{key:"onFightend",value:function(){var e=this,t=this.owner.fight.end_time;Object.keys(this._currentCooldowns).map(Number).map((function(a){return{spellId:a,remainingDuration:e.cooldownRemaining(a,t)}})).sort((function(e,t){return e.remainingDuration-t.remainingDuration})).forEach((function(t){var a=t.spellId,n=e._currentCooldowns[a],i=Math.round(n.start+n.expectedDuration-n.totalReductionTime);e.endCooldown(Number(a),!1,i)}))}},{key:"_calculateNewCooldownDuration",value:function(e,t){return t*(1-e)}}]),a}(l.c);g.dependencies={eventEmitter:u.a,abilities:h.a},t.b=g},755:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(88),c=a(43),l=a(15),u=a(766),d=a(877),h=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).spellManaCost=void 0,i.abilities=new Map,i.addEventListener(l.f.cast.by(c.a),i.onCast),i}return Object(i.a)(a,[{key:"onCast",value:function(e){var t=e.ability.guid,a=this.getAbility(t,e.ability);a.casts=a.casts+1,e.resourceCost&&void 0!==e.resourceCost[o.a.MANA.id]&&(a.manaUsed=a.manaUsed+e.resourceCost[o.a.MANA.id])}},{key:"getAbility",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.abilities.get(e);return void 0===a&&(a={ability:t,casts:0,manaUsed:0,damageHits:0,damageEffective:0,damageAbsorbed:0,damageCriticalHits:0,damageCriticalEffective:0,damageCriticalAbsorbed:0,healingHits:0,healingEffective:0,healingAbsorbed:0,healingOverheal:0,healingCriticalHits:0,healingCriticalEffective:0,healingCriticalAbsorbed:0,healingCriticalOverheal:0},this.abilities.set(e,a)),!a.ability&&t&&(a.ability=t),a}}]),a}(c.c);h.dependencies={spellManaCost:d.a};var f=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).addEventListener(l.f.damage.by(c.a),i.onDamage),i}return Object(i.a)(a,[{key:"onDamage",value:function(e){var t=e.ability.guid,a=this.getAbility(t,e.ability);a.damageHits=a.damageHits+1,a.damageEffective=a.damageEffective+(e.amount||0),a.damageAbsorbed=a.damageAbsorbed+(e.absorbed||0),e.hitType===u.a.CRIT&&(a.damageCriticalHits=a.damageCriticalHits+1,a.damageCriticalEffective=a.damageCriticalEffective+(e.amount||0),a.damageCriticalAbsorbed=a.damageCriticalAbsorbed+(e.absorbed||0))}}]),a}(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).addEventListener(l.f.heal.by(c.a),i.onHeal),i.addEventListener(l.f.absorbed.by(c.a),i.onHeal),i.addEventListener(l.f.heal.by(c.b),i.onHeal),i.addEventListener(l.f.absorbed.by(c.b),i.onHeal),i}return Object(i.a)(a,[{key:"onHeal",value:function(e){var t=e.ability.guid,a=this.getAbility(t,e.ability);a.healingHits=a.healingHits+1,a.healingEffective=a.healingEffective+(e.amount||0),e.type===l.b.Heal&&(a.healingAbsorbed=a.healingAbsorbed+(e.absorbed||0),a.healingOverheal=a.healingOverheal+(e.overheal||0),e.hitType===u.a.CRIT&&(a.healingCriticalHits=a.healingCriticalHits+1,a.healingCriticalEffective=a.healingCriticalEffective+(e.amount||0),a.healingCriticalAbsorbed=a.healingCriticalAbsorbed+(e.absorbed||0),a.healingCriticalOverheal=a.healingCriticalOverheal+(e.overheal||0)))}}]),a}(h));t.a=f},756:function(e,t,a){"use strict";var n=a(26),i=a(8),r=a(9),s=a(10),o=a(11),c=a(1006),l=a(15),u=a(948),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).enemies={},e}return Object(r.a)(a,[{key:"getEntities",value:function(){return this.enemies}},{key:"getEntity",value:function(e){if(!Object(l.e)(e))return null;if(e.targetIsFriendly)return null;var t=e.targetID,a=this.enemies[t];if(!a){var n=this.owner.report.enemies.find((function(e){return e.id===t}));if(!n)return null;this.enemies[t]=a=new c.a(this.owner,n)}return a}},{key:"getCombinedDebuffHistory",value:function(e){var t=this,a=[];e.forEach((function(e){a.push.apply(a,Object(n.a)(t.getDebuffHistory(e)))}));var i=[],r=null;return a.sort((function(e,t){return e.start-t.start})).forEach((function(e){null===r?r=e:r.end<=e.start?(i.push(r),r=e):e.start<=r.end&&r.end<e.end&&(r.end=e.end)})),i.push(r),i}},{key:"getDebuffHistory",value:function(e){var t=this,a=[],n=this.getEntities();Object.values(n).forEach((function(n){n.getBuffHistory(e,t.owner.playerId).forEach((function(e){a.push({timestamp:e.start,type:"apply",buff:e}),a.push({timestamp:null!==e.end?e.end:t.owner.currentTimestamp,type:"remove",buff:e})}))}));var i=[],r=null,s=0;return a.sort((function(e,t){return e.timestamp-t.timestamp})).forEach((function(e){"apply"===e.type&&(null===r&&(r={start:e.timestamp,end:t.owner.currentTimestamp}),s+=1),"remove"===e.type&&0===(s-=1)&&(r.end=e.timestamp,i.push(r),r=null)})),null!==r&&i.push(r),i}}]),a}(u.a);t.a=d},757:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(15),c=a(401),l=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).players={},i._selected=void 0,i.owner.combatantInfoEvents.forEach((function(e){e.error?console.error("Error retrieving combatant information for player with sourceID ".concat(e.sourceID)):i.players[e.sourceID]=new c.a(i.owner,e)})),i._selected=i.players[i.owner.playerId],i}return Object(i.a)(a,[{key:"getEntities",value:function(){return this.players}},{key:"getEntity",value:function(e){if(!Object(o.e)(e))return null;var t=this.players[e.targetID];return t||null}},{key:"playerCount",get:function(){return Object.keys(this.players).length}},{key:"selected",get:function(){return this._selected}}]),a}(a(948).a);t.a=l},759:function(e,t,a){"use strict";a.d(t,"E",(function(){return i})),a.d(t,"q",(function(){return r})),a.d(t,"p",(function(){return s})),a.d(t,"s",(function(){return o})),a.d(t,"v",(function(){return c})),a.d(t,"B",(function(){return l})),a.d(t,"n",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"g",(function(){return h})),a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return b})),a.d(t,"f",(function(){return g})),a.d(t,"r",(function(){return p})),a.d(t,"e",(function(){return v})),a.d(t,"m",(function(){return y})),a.d(t,"l",(function(){return E})),a.d(t,"z",(function(){return _})),a.d(t,"x",(function(){return O})),a.d(t,"y",(function(){return T})),a.d(t,"o",(function(){return A})),a.d(t,"u",(function(){return C})),a.d(t,"w",(function(){return I})),a.d(t,"C",(function(){return k})),a.d(t,"D",(function(){return S})),a.d(t,"k",(function(){return w})),a.d(t,"j",(function(){return N})),a.d(t,"t",(function(){return j})),a.d(t,"A",(function(){return R})),a.d(t,"h",(function(){return D})),a.d(t,"i",(function(){return L}));var n=a(3),i=function(e,t){return e/(1+t)},r=750,s=1500,o=100,c=1e3,l=.0025,u=.2,d=(n.a.MULTISHOT_BM,n.a.MULTISHOT_MM,18e4),h=.05,f=1e3,m=15e3,b=10,g=[n.a.ASPECT_OF_THE_CHEETAH.id,n.a.ASPECT_OF_THE_TURTLE.id,n.a.ASPECT_OF_THE_EAGLE.id],p=50,v=1e3/30,y=5,E=100,_=.05,O=.1,T=.15,A=[n.a.REVIVE_PET,n.a.A_MURDER_OF_CROWS_TALENT,n.a.BARRAGE_TALENT,n.a.ARCANE_SHOT],C=(n.a.ASPECT_OF_THE_CHEETAH,n.a.ASPECT_OF_THE_TURTLE,n.a.ASPECT_OF_THE_EAGLE,n.a.ASPECT_OF_THE_WILD,n.a.TRUESHOT,n.a.COORDINATED_ASSAULT,2),I=.3,k=.05,S=15e3,w=.15,N=[0,.05,.055,.06,.0675,.075,.0825,.09,.0975,.105,.1125,.12,.1275,.135,.1425,.15],j=[0,.05,.06,.07,.085,.095,.105,.115,.13,.14,.15,.16,.17,.18,.19,.2],R=[0,.1,.11,.12,.135,.145,.155,.165,.18,.19,.2,.21,.22,.23,.24,.25],D=.05,L=[0,.05,.06,.07,.085,.095,.105,.115,.13,.14,.15,.16,.17,.18,.19,.2]},764:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));var n=a(8),i=a(9),r=a(10),s=a(11),o=(a(31),a(756)),c=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e,i){var r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(n.a)(this,a),(r=t.call(this,e,i))._instanceID=void 0,r._instanceID=s,r}return Object(i.a)(a,[{key:"instanceID",get:function(){return this._instanceID}}]),a}(a(1006).a);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(e,".").concat(t)}var u=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"getEntity",value:function(e){if(e.targetIsFriendly)return null;var t=e.targetID,a=e.targetInstance,n=l(t,a),i=this.enemies[n];if(!i){var r=this.owner.report.enemies.find((function(e){return e.id===t}));if(!r)return null;this.enemies[n]=i=new c(this.owner,r,a)}return i}}]),a}(o.a);t.a=u},765:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a.n(n),r=a(37),s=a.n(r),o=a(33),c=function(e,t){var a=e.amount,n=e.approximate,r=e.greaterThan,s=e.lessThan,c=t.parser;return i.a.createElement(i.a.Fragment,null,i.a.createElement("img",{src:"/img/healing.png",alt:"Healing",className:"icon"})," ",n&&"\u2248",r&&">",s&&"<",Object(o.d)(a/c.fightDuration*1e3)," HPS"," ",i.a.createElement("small",null,Object(o.e)(c.getPercentageOfTotalHealingDone(a)),"% of total"))};c.contextTypes={parser:s.a.object.isRequired};var l=c},766:function(e,t,a){"use strict";t.a={MISS:0,NORMAL:1,CRIT:2,ABSORB:3,BLOCKED_NORMAL:4,BLOCKED_CRIT:5,DODGE:7,PARRY:8,IMMUNE:10}},767:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(6),c=a(0),l=a.n(c),u=a(4),d=a(33),h=a(812),f=a(22),m=a(753),b=function(e){var t=e.categories,a=e.abilities;return l.a.createElement("div",{style:{marginTop:-10,marginBottom:-10}},l.a.createElement("table",{className:"data-table",style:{marginTop:10,marginBottom:10}},Object.keys(t).filter((function(e){return a.some((function(a){return a.ability.category===t[e]}))})).filter((function(e){return t[e]!==m.a.SPELL_CATEGORIES.HIDDEN})).map((function(e){return l.a.createElement("tbody",{key:e},l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("b",null,t[e])),l.a.createElement("th",{className:"text-center"},l.a.createElement(f.a,{content:l.a.createElement(o.Trans,{id:"shared.castEfficiency.cpm.tooltip"})},l.a.createElement(o.Trans,{id:"shared.castEfficiency.cpm"}))),l.a.createElement("th",{className:"text-right"},l.a.createElement(f.a,{content:l.a.createElement(o.Trans,{id:"shared.castEfficiency.casts.tooltip"})},l.a.createElement(o.Trans,{id:"shared.castEfficiency.casts"}))),l.a.createElement("th",{className:"text-center"},l.a.createElement(f.a,{content:l.a.createElement(o.Trans,{id:"shared.castEfficiency.timeOnCooldown.tooltip"})},l.a.createElement(o.Trans,{id:"shared.castEfficiency.timeOnCooldown"}))),l.a.createElement("th",null)),a.filter((function(a){return a.ability.category===t[e]})).map((function(e){var t=e.ability,a=e.cpm,n=e.casts,i=e.maxCasts,r=e.efficiency,s=e.canBeImproved,c=t.castEfficiency.name||t.name;return l.a.createElement("tr",{key:c},l.a.createElement("td",{style:{width:"35%"}},l.a.createElement(u.a,{id:t.primarySpell.id,style:{color:"#fff"},icon:!0,iconStyle:{height:void 0,marginTop:void 0}},c)),l.a.createElement("td",{className:"text-center",style:{minWidth:80}},a.toFixed(2)),l.a.createElement("td",{className:"text-right",style:{minWidth:110}},n,i===1/0?"":"/".concat(Math.floor(i))," ","casts"),l.a.createElement("td",{style:{width:"20%"}},i===1/0||null===r?"":l.a.createElement("div",{className:"flex performance-bar-container"},l.a.createElement("div",{className:"flex-sub performance-bar",style:{width:"".concat(100*r,"%"),backgroundColor:s&&t.castEfficiency&&t.castEfficiency.suggestion?"#ff8000":"#70b570"}}))),l.a.createElement("td",{className:"text-left",style:{minWidth:50,paddingRight:5}},null!==r?"".concat((100*r).toFixed(2),"%"):""),l.a.createElement("td",{style:{width:"25%",color:"orange"}},s&&t.castEfficiency&&t.castEfficiency.suggestion&&l.a.createElement(o.Trans,{id:"shared.castEfficiency.canBeImproved"})))})))}))))},g=a(43),p=a(164),v=a(933),y=a(800),E=a(755),_=a(15),O=function(e){return function(e){return e/1e3}(e)/60},T=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).abilityTracker=void 0,e.haste=void 0,e.spellHistory=void 0,e.abilities=void 0,e}return Object(i.a)(a,[{key:"getCooldownInfo",value:function(e){var t=this,a=e.primarySpell.id,n=this.spellHistory.historyBySpellId[a];if(!n)return{completedRechargeTime:0,endingRechargeTime:0,recharges:0,casts:0,castTimestamps:[]};var i=void 0,r=0,s=n.filter((function(e){return e.type===_.b.UpdateSpellUsable})).reduce((function(e,t){if(t.trigger===_.b.BeginCooldown)return i=t.timestamp,e;if(t.trigger===_.b.EndCooldown)return r+=1,i=void 0,e+t.timestamp-t.start;if(t.trigger===_.b.RestoreCharge){r+=1;var a=t.timePassed;return void 0===a&&(a=0),i=t.timestamp,e+a}return e}),0),o=i?this.owner.currentTimestamp-Math.max(i,this.owner.fight.start_time):0,c=n.filter((function(e){return e.type===_.b.Cast})).length,l=n.filter((function(e){return e.type===_.b.Cast})).map((function(e){return e.timestamp-t.owner.fight.start_time}));return{completedRechargeTime:s,endingRechargeTime:o,recharges:r,casts:c,castTimestamps:l}}},{key:"_getTimeSpentCasting",value:function(e){var t,a=this,n=this.spellHistory.historyBySpellId[e];return n?n.reduce((function(e,n){if(n.type===_.b.BeginCast)return t=n.timestamp,e;if(n.type===_.b.Cast){var i=t?n.timestamp-Math.max(t,a.owner.fight.start_time):0;return t=void 0,e+i}return e}),0):0}},{key:"getGcd",value:function(e){var t=this,a=function(e){return"function"===typeof e?e(t.owner.selectedCombatant):e};if("function"===typeof e)return e(this.owner.selectedCombatant);if(e&&e.static)return a(e.static);if(e&&e.base){var n=a(e.base),i=e.minimum?a(e.minimum):n/2,r=n*this.haste.current;return Math.max(i,n-r)}}},{key:"getTimeSpentOnGcd",value:function(e){var t=this.abilities.getAbility(e);if(t&&t.gcd){var a,n=this.getCooldownInfo(t);a=t.castEfficiency.casts?t.castEfficiency.casts(this.abilityTracker.getAbility(e),this.owner):n.casts;var i=this._getTimeSpentCasting(t.primarySpell.id)/a,r=this.getGcd(t.gcd);if(r&&r>i)return r*a}return 0}},{key:"getTimeSpentCasting",value:function(e){return{timeSpentCasting:this._getTimeSpentCasting(e),gcdSpent:this.getTimeSpentOnGcd(e)}}},{key:"_getTimeWaitingOnGCD",value:function(e){var t=this.spellHistory.historyBySpellId[e];return t?t.reduce((function(e,t){return t.type===_.b.UpdateSpellUsable&&t.timeWaitingOnGCD?e+t.timeWaitingOnGCD:e}),0):0}},{key:"getCastEfficiency",value:function(){var e=this;return this.abilities.activeAbilities.map((function(t){return e.getCastEfficiencyForAbility(t)})).filter((function(e){return null!==e}))}},{key:"getCastEfficiencyForSpellId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.abilities.getAbility(e);return a?this.getCastEfficiencyForAbility(a,t):null}},{key:"getCastEfficiencyForAbility",value:function(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.primarySpell.id,r=this.owner.fightDuration,s=e.cooldown,o=s?1e3*s:null,c=this.getCooldownInfo(e),l=s&&e.charges<2?this._getTimeSpentCasting(e.primarySpell.id):0,u=s&&e.charges<2&&e.gcd?this._getTimeWaitingOnGCD(e.primarySpell.id):0,d=(t=e.castEfficiency.casts?e.castEfficiency.casts(this.abilityTracker.getAbility(i),this.owner):c.casts)/O(r),h=l/t,f=u/t;if(e.isUndetectable&&0===t)return null;var m=0===c.recharges?null:c.completedRechargeTime/c.recharges;if(e.castEfficiency.maxCasts)a=e.castEfficiency.maxCasts(s);else if(m)a=r/(m+h+f)+(e.charges||1)-1;else if(n)if(t>0){var b=this._getTimeSpentCasting(e.primarySpell.id)/t,g=this.getGcd(e.gcd);g&&b<g&&(b=g),a=r/b}else a=void 0;else a=r/o+(e.charges||1)-1;var p,v=Math.ceil(a||0);if(e.castEfficiency.maxCasts)p=Math.min(1,t/a||0);else if(s&&r){var y=c.completedRechargeTime+c.endingRechargeTime,E=c.castTimestamps[c.castTimestamps.length-1],_=E+1e3*s>r?1e3*s-(r-E):0,T=y+l+u-_;p=T/r}else p=n?t/a:null;var A=e.castEfficiency.recommendedEfficiency||.8,C=e.castEfficiency.averageIssueEfficiency||A-.05,I=e.castEfficiency.majorIssueEfficiency||A-.15,k=t===v,S=e.castEfficiency.suggestion&&null!==p&&p<A&&!k;return{ability:e,cpm:d,casts:t,maxCasts:v,efficiency:p,recommendedEfficiency:A,averageIssueEfficiency:C,majorIssueEfficiency:I,gotMaxCasts:k,canBeImproved:S}}},{key:"suggestions",value:function(e){this.getCastEfficiency().forEach((function(t){if(t&&t.ability.castEfficiency.suggestion&&null!==t.efficiency&&!t.gotMaxCasts){var a=t.ability,n=a.spell instanceof Array?a.spell[0]:a.spell,i={actual:t.efficiency,isLessThan:{minor:t.recommendedEfficiency,average:t.averageIssueEfficiency,major:t.majorIssueEfficiency},style:p.a.PERCENTAGE};e(i).addSuggestion((function(e,i,r){return e(l.a.createElement(l.a.Fragment,null,l.a.createElement(o.Trans,{id:"shared.modules.castEfficiency.suggest",components:[l.a.createElement(u.a,{id:n.id})]})," ",a.castEfficiency.extraSuggestion||"")).icon(n.icon).actual(l.a.createElement(o.Trans,{id:"shared.modules.castEfficiency.actual",values:{0:t.casts,1:t.maxCasts,2:Object(d.e)(i,0)}})).recommended(l.a.createElement(o.Trans,{id:"shared.modules.castEfficiency.recommended",values:{0:Object(d.e)(r,0)}})).staticImportance(a.castEfficiency.importance||null)}))}}))}},{key:"statistic",value:function(){return l.a.createElement(h.a,{title:l.a.createElement(o.Trans,{id:"common.abilities"}),position:500,pad:!1},l.a.createElement(b,{categories:this.abilities.constructor.SPELL_CATEGORIES,abilities:this.getCastEfficiency()}))}}]),a}(g.c);T.dependencies={abilityTracker:E.a,haste:y.a,spellHistory:v.a,abilities:m.a};t.a=T},768:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(15),c=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"getFightStartIndex",value:function(e){for(var t=0;t<e.length;t+=1){if(e[t].type!==o.b.CombatantInfo)return t}throw new Error("Fight doesn't have an event other than combatants, something must have gone wrong.")}}]),a}(a(92).a);t.a=c},776:function(e,t,a){"use strict";var n=a(31),i=a(7),r=a(8),s=a(9),o=a(0),c=a.n(o),l=a(54),u=a(33),d=a(10),h=a(11),f=a(3),m=[{spell:f.a.IRONBARK},{spell:f.a.LIFE_COCOON},{spell:f.a.BLESSING_OF_PROTECTION},{spell:f.a.BLESSING_OF_SACRIFICE},{spell:f.a.GUARDIAN_SPIRIT},{spell:f.a.PAIN_SUPPRESSION},{spell:f.a.POWER_WORD_BARRIER_BUFF},{spell:f.a.BONE_SHIELD},{spell:f.a.SHROUD_OF_PURGATORY},{spell:f.a.FRAILTY_SPIRIT_BOMB_DEBUFF},{spell:f.a.DEFENSIVE_STANCE_TALENT},{spell:f.a.RALLYING_CRY_BUFF},{spell:f.a.SPIRIT_WOLF_BUFF}],b=a(43),g=a(757),p=a(753),v=a(797),y=a(754),E=a(756),_=a(15),O=a(119),T=a(755),A=a(164),C=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).abilities=void 0,n.buffs=void 0,n.spellUsable=void 0,n.abilityTracker=void 0,n.maxCasts=1,n.lastDeathWithPotionReady=void 0,n.isAvailable?(e.abilities.add(Object(i.a)({spell:n.static.spells,category:p.a.SPELL_CATEGORIES.CONSUMABLE,cooldown:function(e,t){return t&&t.prepull?60:3600},castEfficiency:{suggestion:!1,maxCasts:function(){return n.maxCasts}}},n.static.extraAbilityInfo)),n.static.extraAbilityInfo.buffSpellId&&n.static.extraAbilityInfo.buffSpellId.forEach((function(t,a){e.buffs.add({spellId:t,triggeredBySpellId:n.static.spells.find((function(e,t){return t===a})).id})})),n.addEventListener(_.f.death.to(b.a),n.onDeath),n):(n.active=!1,Object(O.a)(n))}return Object(s.a)(a,[{key:"static",get:function(){return this.constructor}}]),Object(s.a)(a,[{key:"onDeath",value:function(e){if(!this.spellUsable.isOnCooldown(this.spellId)){if(this.lastDeathWithPotionReady)if(e.timestamp-this.lastDeathWithPotionReady<6e4)return;return this.lastDeathWithPotionReady=e.timestamp,void this.increaseMaxCasts(e)}var t=this.spellUsable.cooldownRemaining(this.spellId);t<6e4||(this.spellUsable.reduceCooldown(this.spellId,t-6e4),this.increaseMaxCasts(e))}},{key:"increaseMaxCasts",value:function(e){e.timestamp+6e4<this.owner.fight.end_time&&(this.maxCasts+=1)}},{key:"isAvailable",get:function(){return!0}},{key:"spellId",get:function(){var e=this.static.spells;return this.abilities.getAbility(e[0].id).primarySpell.id}},{key:"potionCasts",get:function(){return this.abilityTracker.getAbility(this.spellId).casts}},{key:"suggestionThresholds",get:function(){return{actual:this.potionCasts/this.maxCasts,isLessThan:{minor:this.static.recommendedEfficiency},style:A.a.PERCENTAGE}}}]),a}(b.c);C.dependencies={abilities:p.a,buffs:v.a,spellUsable:y.b,abilityTracker:T.a},C.spells=void 0,C.recommendedEfficiency=void 0,C.extraAbilityInfo=void 0;var I=C,k=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).combatants=void 0,e}return Object(s.a)(a,[{key:"isAvailable",get:function(){return Object.values(this.combatants.players).some((function(e){return e.spec.className===_.a.Warlock}))}}]),a}(I);k.dependencies=Object(i.a)(Object(i.a)({},I.dependencies),{},{combatants:g.a}),k.spells=[f.a.HEALTHSTONE],k.recommendedEfficiency=0,k.extraAbilityInfo={isDefensive:!0};var S=k,w=a(49),N=a(23),j=a(994),R=(a(950),a(53)),D=a(4),L=a(28),P=a(215),H=a(22),F=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={detailedView:0,amountThreshold:0},n.handleClick=n.handleClick.bind(Object(N.a)(n)),n.filterDeath=n.filterDeath.bind(Object(N.a)(n)),n}return Object(s.a)(a,[{key:"handleClick",value:function(e){var t=e===this.state.detailedView?-1:e;this.setState({detailedView:t})}},{key:"filterDeath",value:function(e,t){var a=this.props.report.fight.offset_time+(0!==t&&this.props.events[t-1].deathtime-this.props.report.fight.start_time),n=e.deathtime+this.props.report.fight.offset_time-this.props.report.fight.start_time;this.props.report.applyTimeFilter(a,n)}},{key:"render",value:function(){var e=this,t=0,a=0;function n(e,t){return e.timelineSortIndex-t.timelineSortIndex}var i=this.props.events;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"pad",style:{marginBottom:15}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-8"},c.a.createElement("div",null,"Filter events based on min amount (percentage of players health):"),c.a.createElement(j.a,Object.assign({},{min:0,max:.5,step:.05,marks:{0:"0%",.05:"5%",.1:"10%",.15:"15%",.2:"20%",.25:"25%",.3:"30%",.35:"35%",.4:"40%",.45:"45%",.5:"50%"},style:{margin:"0 5px"}},{defaultValue:this.state.amountThreshold,onChange:function(t){e.setState({amountThreshold:t})}}))),c.a.createElement("div",{className:"col-md-4"},c.a.createElement(H.b,{content:"Open the deaths on Warcraft Logs"},c.a.createElement("a",{href:"https://www.warcraftlogs.com/reports/".concat(this.props.report.report.code,"#fight=").concat(this.props.report.fight.id,"&type=deaths&source=").concat(this.props.report.player.id),target:"_blank",rel:"noopener noreferrer",className:"btn",style:{fontSize:24}},c.a.createElement(P.a,null)," Warcraft Logs"))))),i.map((function(i,r){return c.a.createElement(c.a.Fragment,{key:r},c.a.createElement("div",{style:{display:"block"}},c.a.createElement("h2",{onClick:function(){return e.handleClick(r)},style:{padding:"10px 20px",cursor:"pointer",display:"inline-block"}},"Death #",r+1),c.a.createElement(H.a,{content:"Filter events to the time between either the start of combat or your last death (whichever happened more recently) and this death."},c.a.createElement("a",{href:"javascript:",onClick:function(){return e.filterDeath(i,r)}},"Filter to prior events"))),c.a.createElement("table",{style:{display:e.state.detailedView===r?"block":"none"},className:"data-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Time"),c.a.createElement("th",null,"Ability"),c.a.createElement("th",null,"HP"),c.a.createElement("th",null,"Amount"),c.a.createElement("th",null,"Defensive Buffs/Debuffs"),c.a.createElement("th",null,"Personals available"))),c.a.createElement("tbody",null,i.events.filter((function(e){return e.timestamp<=i.deathtime&&e.timestamp>=i.deathtime-1e4})).filter((function(t){return(t.amount+(t.absorbed||0))/t.maxHitPoints>e.state.amountThreshold||t.type===_.b.Instakill})).map((function(i,r){i.hitPoints&&i.maxHitPoints&&(t=i.hitPoints,a=i.maxHitPoints);var s=i.amount/a,o=0,l=null,d=i.source&&"NPC"===i.source.type?i.source.name:null;return d||i.type!==_.b.Heal||(d=e.props.combatants[i.sourceID]?e.props.combatants[i.sourceID]._combatantInfo.name:null),d||i.type!==_.b.Damage||(d=e.props.enemies[i.sourceID]?e.props.enemies[i.sourceID]._baseInfo.name:null),d||i.type===_.b.Instakill||(d=i.ability.name),i.type===_.b.Heal?(o=(t-i.amount)/a,l=c.a.createElement(H.a,{content:c.a.createElement(c.a.Fragment,null,i.sourceID===i.targetID?"You healed yourself for ".concat(Object(u.d)(i.amount)):"".concat(d," healed you for ").concat(Object(u.d)(i.amount)),i.absorbed>0?", ".concat(Object(u.d)(i.absorbed)," of that healing was absorbed"):"",i.overheal>0?" and overhealed for ".concat(Object(u.d)(i.overheal)):""),style:0===i.amount&&i.absorbed>0?{color:"orange"}:{color:"green"}},"+",Object(u.d)(i.amount)," ",i.absorbed>0?"(A: ".concat(Object(u.d)(i.absorbed)," )"):""," ",i.overheal>0?"(O: ".concat(Object(u.d)(i.overheal)," )"):"")):i.type===_.b.Damage?(o=t/a,l=c.a.createElement(H.a,{content:c.a.createElement(c.a.Fragment,null,i.sourceID===i.targetID?"You damaged yourself for ".concat(Object(u.d)(i.amount)):"".concat(d," damaged you for a total of ").concat(Object(u.d)(i.amount+(i.absorbed||0))),c.a.createElement("br",null),i.absorbed>0?c.a.createElement(c.a.Fragment,null,Object(u.d)(i.absorbed)," of this damage was absorbed and you took ",Object(u.d)(i.amount)," damage",c.a.createElement("br",null)):""),style:{color:"red"}},"-",Object(u.d)(i.amount)," ",i.absorbed>0?"(A: ".concat(Object(u.d)(i.absorbed)," )"):"")):i.type===_.b.Instakill&&(o=0,l="1-Shot"),(i.overkill||0===i.hitPoints)&&(o=0),c.a.createElement("tr",{key:r},c.a.createElement("td",{style:{width:"5%"}},Object(u.a)((i.time+e.props.report.fight.offset_time)/1e3,2)),c.a.createElement("td",{style:{width:"20%"}},c.a.createElement(D.a,{id:i.ability.guid,icon:!1},c.a.createElement(L.a,{icon:i.ability.abilityIcon})," ",i.ability.name)),c.a.createElement("td",{style:{width:"20%"}},c.a.createElement("div",{className:"flex performance-bar-container"},0!==o&&c.a.createElement("div",{className:"flex-sub performance-bar",style:{color:"white",width:Object(u.e)(o)+"%"}}),c.a.createElement("div",{className:"flex-sub performance-bar",style:{backgroundColor:i.type===_.b.Heal?"green":"red",width:Object(u.e)(s)+"%",opacity:i.type===_.b.Heal?.8:.4}}))),c.a.createElement("td",{style:{width:"15%"}},l),c.a.createElement("td",{style:{width:"20%"}},i.buffsUp&&i.buffsUp.sort(n).map((function(e){return c.a.createElement(R.a,{key:e.id,style:{border:"1px solid rgba(0, 0, 0, 0)"},id:e.id})})),c.a.createElement("br",null),i.debuffsUp&&i.debuffsUp.sort(n).map((function(e){return c.a.createElement(R.a,{key:e.id,style:{border:"1px solid red"},id:e.id})}))),c.a.createElement("td",{style:{width:"20%"}},i.defensiveCooldowns.sort(n).map((function(e){return c.a.createElement(R.a,{key:e.id,style:{opacity:e.cooldownReady?1:.2},id:e.id})}))))})),c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",{colSpan:"6"},"You died")))))})))}}]),a}(c.a.PureComponent),M=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).deaths=[],e.events=[],e.healed=[],e.damaged=[],e.cooldowns=[],e.buffs=[],e.lastBuffs=[],e.addEventListener(_.f.heal.to(b.a),e.onHeal),e.addEventListener(_.f.damage.to(b.a),e.onDamage),e.addEventListener(_.f.instakill.to(b.a),e.onInstakill),e.addEventListener(_.f.death.to(b.a),e.onDeath),e.cooldowns=e.abilities.activeAbilities.filter((function(e){return e.category===p.a.SPELL_CATEGORIES.DEFENSIVE||e.category===p.a.SPELL_CATEGORIES.SEMI_DEFENSIVE||e.isDefensive})),m.forEach((function(t){e.buffs.push({id:t.spell.id})})),e.buffsModule.activeBuffs.forEach((function(t){t.spellId instanceof Array?t.spellId.forEach((function(t){e.buffs.push({id:t})})):e.buffs.push({id:t.spellId})})),e}return Object(s.a)(a,[{key:"addEvent",value:function(e){var t=this,a=Object(i.a)({},e);a.time=e.timestamp-this.owner.fight.start_time;var n=this.cooldowns.filter((function(e){return e.cooldown}));if(a.defensiveCooldowns=n.map((function(e){return{id:e.primarySpell.id,cooldownReady:t.spellUsable.isAvailable(e.primarySpell.id)}})),e.hitPoints>0&&(this.lastBuffs=this.buffs.filter((function(e){var a=t.selectedCombatant.getBuff(e.id);return!(void 0===a)&&(e.id!==f.a.BLESSING_OF_SACRIFICE.id||a.sourceID===t.selectedCombatant.id)}))),a.buffsUp=this.lastBuffs,!e.sourceIsFriendly&&this.enemies.enemies[e.sourceID]){a.debuffsUp=this.enemies.enemies[e.sourceID].buffs.filter((function(a){return(!a.end||e.timestamp<=a.end)&&e.timestamp>=a.start&&a.isDebuff&&t.buffs.some((function(e){return e.id===a.ability.guid}))})).map((function(e){return{id:e.ability.guid}}))}this.events.push(a)}},{key:"onHeal",value:function(e){this.addEvent(e)}},{key:"onDamage",value:function(e){this.addEvent(e)}},{key:"onInstakill",value:function(e){this.addEvent(e)}},{key:"onDeath",value:function(e){e.timestamp<=this.owner.fight.start_time||(this.addEvent(e),this.deaths.push(e.timestamp))}},{key:"tab",value:function(){var e=this;return 0===this.deaths.length?null:{title:"Death Recap",url:"death-recap",render:function(){return c.a.createElement(w.a,{title:"Death recap",pad:!1},c.a.createElement(F,{report:e.owner,events:e.secondsBeforeDeath,combatants:e.combatants.players,enemies:e.enemies.enemies}))}}}},{key:"secondsBeforeDeath",get:function(){var e=this;return this.deaths.map((function(t){return{deathtime:t,events:e.events,open:!1}}))}}]),a}(b.c);M.dependencies={combatants:g.a,abilities:p.a,buffsModule:v.a,spellUsable:y.b,enemies:E.a,healthstone:S};var B=M,x=a(67),U=a(800),G=a(768),W=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e))._combatantInfoEvents=[],n._buffsAppliedByPlayerId={},n._combatantInfoEvents=n.owner.combatantInfoEvents,n}return Object(s.a)(a,[{key:"normalize",value:function(e){for(var t=this,a=this.getFightStartIndex(e),n=this.owner.fight.start_time,i=(this.owner.players.reduce((function(e,t){return e[t.id]=t,e}),{}),this.owner.playerId),r=function(r){var s=e[r];if(!Object(_.c)(s)||!Object(_.e)(s))return"continue";var o=s.targetID,c=Object(_.d)(s)?s.sourceID:void 0;if(![o,c].includes(i))return"continue";if(t._buffsAppliedByPlayerId[o]=t._buffsAppliedByPlayerId[o]||[],s.type===_.b.ApplyBuff){var l=s.ability.guid;t._buffsAppliedByPlayerId[o].push(l)}if(s.type===_.b.RemoveBuff||s.type===_.b.ApplyBuffStack||s.type===_.b.RemoveBuffStack||s.type===_.b.RefreshBuff||s.type===_.b.FilterBuffInfo){var u=s.ability.guid;if(t._buffsAppliedByPlayerId[o].includes(u))return"continue";var d=t._combatantInfoEvents&&t._combatantInfoEvents.find((function(e){return e.sourceID===o})),h={timestamp:s.type===_.b.FilterBuffInfo?n-t.owner.fight.offset_time:n,type:_.b.ApplyBuff,ability:s.ability,sourceID:c,sourceIsFriendly:s.sourceIsFriendly,targetID:o,targetIsFriendly:s.targetIsFriendly,prepull:!0,__fabricated:!0,__fromCombatantinfo:d&&d.auras&&d.auras.some((function(e){return e.ability===u}))};e.splice(a,0,h),t._buffsAppliedByPlayerId[o].push(u)}},s=0;s<e.length;s+=1)r(s);return this._combatantInfoEvents?(this._combatantInfoEvents.forEach((function(r){var s=r.sourceID;r.auras&&r.auras.forEach((function(r){var o=r.ability,c=r.source;if([s,c].includes(i)&&(t._buffsAppliedByPlayerId[s]=t._buffsAppliedByPlayerId[s]||[],!t._buffsAppliedByPlayerId[s].includes(o))){var l={timestamp:n,type:_.b.ApplyBuff,ability:{guid:o,name:f.a[o]?f.a[o].name:"Unknown",abilityIcon:r.icon,type:0},sourceID:c,sourceIsFriendly:!0,targetID:s,targetIsFriendly:!0,prepull:!0,__fabricated:!0,__fromCombatantinfo:!0};e.splice(a,0,l),t._buffsAppliedByPlayerId[s].push(o)}}))})),this._combatantInfoEvents=void 0,e):e}}]),a}(G.a),Y=a(833),K=a(895),V=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).lastBeginCast=null,e}return Object(s.a)(a,[{key:"markLastBeginCastCancelled",value:function(){null!==this.lastBeginCast&&(this.lastBeginCast.isCancelled=!0,this.lastBeginCast.castEvent=null,this.lastBeginCast=null)}},{key:"handleBeginCast",value:function(e){null!==this.lastBeginCast&&e.timestamp-this.lastBeginCast.timestamp>100&&this.markLastBeginCastCancelled(),this.lastBeginCast=e}},{key:"handleCast",value:function(e){null!==this.lastBeginCast&&(Y.a.includes(e.ability.guid)||K.a.includes(e.ability.guid)||(this.lastBeginCast.ability.guid!==e.ability.guid?this.markLastBeginCastCancelled():(this.lastBeginCast.isCancelled=!1,this.lastBeginCast.castEvent=e,this.lastBeginCast=null)))}},{key:"normalize",value:function(e){var t=this;return e.forEach((function(e){t.owner.byPlayer(e)&&(e.type===_.b.BeginCast?t.handleBeginCast(e):e.type===_.b.Cast&&t.handleCast(e))})),e}}]),a}(G.a),z=a(40),q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"getApplicableSpells",value:function(){var e=[],t=[],a=function(t,a){t.triggeredBySpellId&&e.push({castId:t.triggeredBySpellId,buffId:a})};return this.buffs.activeBuffs.forEach((function(e){e.spellId instanceof Array?e.spellId.forEach((function(t){a(e,t)})):a(e,e.spellId)})),this.abilities.activeAbilities.forEach((function(e){e.damageSpellIds&&t.push({castId:e.spell.id,damageIds:e.damageSpellIds})})),{buffSpells:e,damageSpells:t}}},{key:"normalize",value:function(e){for(var t=this,a=this.getApplicableSpells(),n=a.buffSpells,i=a.damageSpells,r=[],s=null,o=this.owner.fight.start_time,c=this.getFightStartIndex(e),l=e[c].timestamp,u=this.owner.playerId,d=function(a){var o=e[a],c=o.sourceID;if(o.type===_.b.ApplyBuff){if(!o.prepull)return"continue";for(var l=0;l<n.length;l+=1)if(n[l].buffId===o.ability.guid){n[l].castId instanceof Array&&n[l].castId.includes(o.ability.guid)?r.push(t.constructor._fabricateCastEvent(o)):r.push(t.constructor._fabricateCastEvent(o,n[l].castId)),n.splice(l,1);break}return"continue"}if(c!==u)return"continue";if(o.type===_.b.Cast){null===s&&o.classResources&&(s=o.classResources);for(var d=0;d<i.length;d+=1)if(i[d].castId===o.ability.guid){i.splice(d,1);break}return"continue"}if(o.type===_.b.Damage)for(var h=0;h<i.length;h+=1)if(i[h].damageIds.some((function(e){return e===o.ability.guid}))){r.push(t.constructor._fabricateCastEvent(o,i[h].castId)),i.splice(h,1);break}},h=0;h<e.length;h+=1)d(h);for(var f=0,m=r.length-1;m>=0;m-=1){var b=r[m],g=this._resolveAbilityGcd(b.ability.guid);0===g?b.timestamp=o-this.owner.fight.offset_time-100:(f+=g,b.timestamp=l-this.owner.fight.offset_time-f),b.classResources=s}return e.unshift.apply(e,r),e}},{key:"_resolveAbilityGcd",value:function(e){var t=this.abilities.getAbility(e);if(!t)return Object(z.a)(new Error("No ability available for spell: ".concat(e))),0;var a=t.gcd;return a?"number"===typeof a.static?a.static:"number"===typeof a.base?a.base:1500:0}}],[{key:"_fabricateCastEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=e.ability;if(t){t instanceof Array&&(t=t[0]);var n=f.a[t];a=Object(i.a)(Object(i.a)({},a),{},{guid:t,abilityIcon:n?n.icon:a.abilityIcon,name:n?n.name:e.ability.name})}return{type:_.b.Cast,ability:a,sourceID:e.sourceID,sourceIsFriendly:e.sourceIsFriendly,targetID:e.targetID,targetIsFriendly:e.targetIsFriendly,prepull:!0,__fabricated:!0}}}]),a}(G.a);q.dependencies={abilities:p.a,buffs:v.a,applyBuff:W};var X=q,J=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"normalize",value:function(e){var t={timestamp:this.owner.fight.end_time,type:_.b.FightEnd,__fabricated:!0};return e.push(t),e}}]),a}(G.a),Z=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"normalize",value:function(e){var t=e.filter((function(e){return e.type===_.b.PhaseStart||e.type===_.b.PhaseEnd})),a=e.filter((function(e){return e.type!==_.b.PhaseStart&&e.type!==_.b.PhaseEnd}));return t.forEach((function(e){var t=a.findIndex((function(t){return t.timestamp>e.timestamp}));a.splice(t,0,e)})),a}}]),a}(G.a),Q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"normalize",value:function(e){var t=this.constructor;return e.filter((function(e){return e.type===_.b.ApplyBuff&&t.missingCastBuffs.includes(e.ability.guid)})).map((function(e){return t._fabricateCastEvent(e)})).forEach((function(t){var a=e.findIndex((function(e){return e.timestamp>=t.timestamp}));e.splice(a,0,t)})),e}}],[{key:"_fabricateCastEvent",value:function(e){if(void 0===e.sourceID)throw new Error("applybuff event defined in MissingCasts does not contain a sourceID for the fabricated event");return{type:_.b.Cast,ability:e.ability,sourceID:e.sourceID,sourceIsFriendly:e.sourceIsFriendly,targetID:e.targetID,targetIsFriendly:e.targetIsFriendly,timestamp:e.timestamp,__fabricated:!0}}}]),a}(G.a);Q.missingCastBuffs=[];var $=Q,ee=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).spellUsable=void 0,n.lastGlobalCooldown=void 0,n.addEventListener(_.f.UpdateSpellUsable,n.handleUpdateSpellUsable),n.addEventListener(_.f.GlobalCooldown,n.handleGlobalCooldown),n}return Object(s.a)(a,[{key:"handleUpdateSpellUsable",value:function(e){if(this.lastGlobalCooldown){var t=.5*this.lastGlobalCooldown.duration,a=e.start+e.expectedDuration-e.timestamp;e.trigger===_.b.EndCooldown&&t<a&&e.timestamp<this.lastGlobalCooldown.timestamp+150&&(e.timeWaitingOnGCD=Math.min(a,this.lastGlobalCooldown.duration))}}},{key:"handleGlobalCooldown",value:function(e){this.lastGlobalCooldown=e}}]),a}(b.c);ee.dependencies={spellUsable:y.b};var te=ee,ae=a(793),ne=a(834),ie=a(867),re=a(963),se=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).damageDone=void 0,e.healingDone=void 0,e.damageTaken=void 0,e}return Object(s.a)(a,[{key:"statistic",value:function(){return c.a.createElement(re.a,{position:0,wide:!0,large:!1,style:{marginBottom:30}},this.damageDone.subStatistic(),this.healingDone.subStatistic(),this.damageTaken.subStatistic())}}]),a}(b.c);se.dependencies={damageDone:ne.a,healingDone:ae.a,damageTaken:ie.a};var oe=se,ce=a(857),le=a(122),ue=a(780),de=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"filterEvents",value:function(e,t,a){return e.filter((function(e){return e.timestamp>=t&&e.timestamp<=a&&(e.type===_.b.GlobalCooldown||e.type===_.b.EndChannel)}))}},{key:"getActiveTime",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.owner.eventHistory,n=0,i={duration:0,timestamp:0},r=this.filterEvents(a,e-3e3,t+3e3);return r.forEach((function(a){if(a.type===_.b.GlobalCooldown){if(i={duration:a.duration,timestamp:a.timestamp},a.trigger.type===_.b.BeginChannel&&a.timestamp+a.duration<t||a.timestamp<e-a.duration||a.timestamp>t)return;e-a.timestamp>0?n+=a.timestamp+a.duration-e:a.timestamp+a.duration>=t?n+=t-a.timestamp:n+=a.duration}if(a.type===_.b.EndChannel){if(a.start<e-a.duration||a.start>t||a.timestamp===i.timestamp&&a.timestamp+i.duration>t)return;a.start<e?n+=Math.max(a.timestamp-e,a.timestamp+i.duration-e):a.timestamp>t?n+=Math.max(t-a.start,t-i.timestamp):n+=Math.max(a.duration,i.duration)}})),n}},{key:"getDowntime",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.owner.eventHistory,n=this.getActiveTime(e,t,a),i=t-e;return i-n}}]),a}(b.c),he=a(242),fe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).addEventListener(_.f.cast.by(he.a),n.handleCast),n}return Object(s.a)(a,[{key:"handleCast",value:function(e){e.ability&&(this.abilities.getAbility(e.ability.guid)||Y.a.includes(e.ability.guid)||console.warn("Ability missing from spellbook:",e.ability))}}]),a}(he.b);fe.dependencies={abilities:p.a};var me=fe,be=a(767),ge=a(828),pe=a(933),ve=a(811),ye=a(764),Ee=a(1045),_e=a(819),Oe=a(877),Te=a(814),Ae=a(964),Ce=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"totalBaseDowntime",get:function(){return this.deathDowntime.totalDowntime}},{key:"totalDpsDowntime",get:function(){return this.totalBaseDowntime}},{key:"totalHealingDowntime",get:function(){return this.totalBaseDowntime}},{key:"totalTankingDowntime",get:function(){return this.totalBaseDowntime}}]),a}(b.c);Ce.dependencies={deathDowntime:Ae.a};var Ie=Ce,ke=a(965),Se=a(6),we=a(746),Ne=a(747),je=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).dispelEvents=new Map,n.dispelCount=0,n.blackList=[f.a.WINDWALKING.id],n.addEventListener(_.f.dispel.by(b.a),n.onDispel),n}return Object(s.a)(a,[{key:"onDispel",value:function(e){var t=e.extraAbility,a=t.guid;if(!this.blackList.includes(a)){var n=this.dispelEvents.get(a)||0;this.dispelEvents.set(a,n+1),f.a[a]||(f.a[a]={id:a,name:t.name,icon:t.abilityIcon.replace(".jpg","")}),this.dispelCount+=1}}},{key:"statistic",value:function(){return this.dispelCount<1?null:c.a.createElement(we.a,{position:Ne.a.OPTIONAL(1),size:"flexible"},c.a.createElement("div",{className:"pad"},c.a.createElement(Se.Trans,{id:"shared.dispelTracker.label",render:"label"}),Array.from(this.dispelEvents).map((function(e){var t=Object(n.a)(e,2),a=t[0],i=t[1];return c.a.createElement("div",{className:"flex",key:a},c.a.createElement("div",{className:"flex-sub",style:{flex:3}},c.a.createElement(D.a,{id:Number(a)})),c.a.createElement("div",{className:"flex-sub",style:{flex:1,textAlign:"right"}},i))})),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"flex-sub value",style:{flex:3}},c.a.createElement(Se.Trans,{id:"common.total"})),c.a.createElement("div",{className:"flex-sub value",style:{flex:1,textAlign:"right"}},this.dispelCount))))}}]),a}(b.c),Re=a(20),De=a(41),Le=a(26),Pe=a(788),He=a(779),Fe=a(13),Me=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={players:[]},n.state={players:n.props.players.map((function(e){return Object(i.a)({disabled:!1},e)}))},n.togglePlayer=n.togglePlayer.bind(Object(N.a)(n)),n}return Object(s.a)(a,[{key:"togglePlayer",value:function(e){this.setState((function(t){var a=t.players;return a[e].disabled=!a[e].disabled,{players:a}}))}},{key:"render",value:function(){for(var e,t=this.props,a=t.players,n=t.deaths,r=t.startTime,s=t.endTime,o=[],l=[],u=0;u<(s-r)/1e3;u+=30)o.push(u);for(var d=0;d<=a.length;d+=2)l.push(100*d);var h={field:"x",type:"quantitative",title:"Time",axis:{labelExpr:Object(He.c)("datum.value * 1000")}},f={data:{name:"deaths"},mark:{type:"rule",color:"rgba(255, 0, 0, 0.8)"},encoding:{x:h}},m={data:{name:"hp"},mark:"area",selection:{player:{type:"multi",fields:["title"],bind:"legend"}},encoding:{x:h,y:{field:"y",type:"quantitative",stack:!0,title:Fe.i18n._({id:"shared.modules.raidHealthTab.chart.title.y",defaults:"Total Raid Health"})},color:{field:"title",type:"nominal",title:Fe.i18n._({id:"common.player",defaults:"Player"})},opacity:{condition:{selection:"player",value:1},value:.3}}},b={hp:(e=[]).concat.apply(e,Object(Le.a)(a.map((function(e){return e.data.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{title:e.title})}))})))),deaths:n},g={layer:[m,f]};return c.a.createElement(Pe.a,{disableHeight:!0},(function(e){var t=e.width;return c.a.createElement(He.a,{height:400,width:t,spec:g,data:b})}))}}]),a}(c.a.Component),Be={DeathKnight:"rgba(196, 31, 59, 0.6)",Druid:"rgba(255, 125, 10, 0.6)",Hunter:"rgba(171, 212, 115, 0.6)",Mage:"rgba(105, 204, 240, 0.6)",Monk:"rgba(45, 155, 120, 0.6)",Paladin:"rgba(245, 140, 186, 0.6)",Priest:"rgba(255, 255, 255, 0.6)",Rogue:"rgba(255, 245, 105, 0.6)",Shaman:"rgba(36, 89, 255, 0.6)",Warlock:"rgba(148, 130, 201, 0.6)",Warrior:"rgba(199, 156, 110, 0.6)",DemonHunter:"rgba(163, 48, 201, 0.6)"},xe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={data:null},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(e){e.reportCode===this.props.reportCode&&e.start===this.props.start&&e.end===this.props.end||this.load()}},{key:"load",value:function(){var e=this,t=this.props,a=t.reportCode,n=t.start,i=t.end;Object(De.i)("report/tables/resources/".concat(a),{start:n,end:i,abilityid:1e3}).then((function(t){console.log("Received player health",t),e.setState({data:t})}))}},{key:"render",value:function(){var e=this.state.data;if(!e)return c.a.createElement("div",null,"Loading...");var t=this.props,a=t.start,r=t.end,s=t.offset,o=e.series.filter((function(e){return Boolean(Be[e.type])})),l=[];o.forEach((function(e){var t=Object(i.a)(Object(i.a)({},e),{},{lastValue:100,data:{}});e.data.forEach((function(e){var n=Math.floor((e[0]-a)/1e3),i=e[1];t.data[n]=Math.min(100,i)})),l.push(t)}));var u={};this.state.data.deaths&&this.state.data.deaths.forEach((function(e){var t=Math.floor((e.timestamp-a)/1e3);e.targetIsFriendly&&(u[t]=!0)}));for(var d=Math.ceil((r-a)/1e3),h=function(e){l.forEach((function(t){t.data[e]=void 0!==t.data[e]?t.data[e]:t.lastValue,t.lastValue=t.data[e]})),u[e]=void 0!==u[e]?u[e]:void 0},f=0;f<=d;f+=1)h(f);var m=l.map((function(e){var t=Object.entries(e.data).map((function(e){var t=Object(n.a)(e,2),a=t[0],i=t[1];return{x:Number(a),y:i}}));return{title:e.name,backgroundColor:Be[e.type],borderColor:Be[e.type],data:t}})),b=Object.entries(u).filter((function(e){var t=Object(n.a)(e,2),a=(t[0],t[1]);return Boolean(a)})).map((function(e){var t=Object(n.a)(e,1)[0];return{x:Number(t)}}));return c.a.createElement("div",{className:"graph-container"},c.a.createElement(Me,{players:m,deaths:b,startTime:a,endTime:r,offsetTime:s}))}}]),a}(c.a.PureComponent),Ue=function(e){var t=e.parser;return c.a.createElement(w.a,{title:c.a.createElement(Se.Trans,{id:"shared.raidHealth.tab.title"}),explanation:c.a.createElement(Se.Trans,{id:"shared.raidHealth.tab.explanation"})},c.a.createElement(xe,{reportCode:t.report.code,actorId:t.playerId,start:t.fight.start_time,end:t.fight.end_time,offset:t.fight.offset_time}))},Ge=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).active=e.selectedCombatant.spec.role===Re.a.HEALER,e}return Object(s.a)(a,[{key:"tab",value:function(){var e=this;return{title:"Raid health",url:"raid-health",render:function(){return c.a.createElement(Ue,{parser:e.owner})}}}}]),a}(b.c),We=a(829),Ye=a(106),Ke=a(1023),Ve=a(1024),ze=a(1025),qe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return a}(I);qe.spells=[f.a.SPIRITUAL_HEALING_POTION],qe.recommendedEfficiency=0,qe.extraAbilityInfo={isDefensive:!0};var Xe=qe,Je=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return a}(I);Je.spells=[f.a.POTION_OF_SPECTRAL_INTELLECT,f.a.POTION_OF_SPECTRAL_STRENGTH,f.a.POTION_OF_SPECTRAL_AGILITY,f.a.POTION_OF_SPECTRAL_STAMINA,f.a.POTION_OF_DEATHLY_FIXATION,f.a.POTION_OF_EMPOWERED_EXORCISMS,f.a.POTION_OF_PHANTOM_FIRE,f.a.POTION_OF_DIVINE_AWAKENING,f.a.POTION_OF_SACRIFICIAL_ANIMA,f.a.POTION_OF_HARDENED_SHADOWS,f.a.SPIRITUAL_MANA_POTION,f.a.SPIRITUAL_REJUVENATION_POTION,f.a.POTION_OF_SPIRITUAL_CLARITY],Je.recommendedEfficiency=0,Je.extraAbilityInfo={name:"Combat Potion",buffSpellId:[f.a.POTION_OF_SPECTRAL_INTELLECT.id,f.a.POTION_OF_SPECTRAL_STRENGTH.id,f.a.POTION_OF_SPECTRAL_AGILITY.id,f.a.POTION_OF_SPECTRAL_STAMINA.id,f.a.POTION_OF_DEATHLY_FIXATION.id,f.a.POTION_OF_EMPOWERED_EXORCISMS.id,f.a.POTION_OF_PHANTOM_FIRE.id,f.a.POTION_OF_DIVINE_AWAKENING.id,f.a.POTION_OF_SACRIFICIAL_ANIMA.id,f.a.POTION_OF_HARDENED_SHADOWS.id,f.a.SPIRITUAL_MANA_POTION.id,f.a.SPIRITUAL_REJUVENATION_POTION.id,f.a.POTION_OF_SPIRITUAL_CLARITY.id]};var Ze=Je,Qe=a(1026),$e=a(777),et=a(815),tt=a(125),at=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).active=n.selectedCombatant.race===tt.a.Draenei,n.active?(e.abilities.add({spell:[f.a.GIFT_OF_THE_NAARU_DK,f.a.GIFT_OF_THE_NAARU_HUNTER,f.a.GIFT_OF_THE_NAARU_MONK,f.a.GIFT_OF_THE_NAARU_MAGE,f.a.GIFT_OF_THE_NAARU_PRIEST,f.a.GIFT_OF_THE_NAARU_PALADIN,f.a.GIFT_OF_THE_NAARU_SHAMAN,f.a.GIFT_OF_THE_NAARU_WARRIOR],category:p.a.SPELL_CATEGORIES.DEFENSIVE,cooldown:180,gcd:null}),n):Object(O.a)(n)}return a}(b.c);at.dependencies={abilities:p.a};var nt=at,it=a(1027),rt=a(826),st=a(750),ot=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).damageReduced=0,e.physicalDamageTaken=0,e.active=e.selectedCombatant.race===tt.a.Dwarf,e.addEventListener(_.f.damage.to(b.a),e.onDamageTaken),e}return Object(s.a)(a,[{key:"onDamageTaken",value:function(e){var t=e.ability.guid;if(e.ability.type===rt.a.ids.PHYSICAL&&3!==t){var a=e.amount+(e.absorbed||0);this.selectedCombatant.hasBuff(f.a.STONEFORM_BUFF.id,e.timestamp,this.owner.playerId)&&(this.physicalDamageTaken+=a,this.damageReduced+=a/.9*.1)}}},{key:"statistic",value:function(){return c.a.createElement(st.b,{icon:c.a.createElement(R.a,{id:f.a.STONEFORM_BUFF.id}),value:"\u2248".concat(Object(u.d)(this.drps)," DRPS"),label:"Stoneform damage reduced",tooltip:c.a.createElement(c.a.Fragment,null,"You took a total of ",Object(u.d)(this.physicalDamageTaken)," physical damage while Stoneform was active. ",c.a.createElement("br",null),"Stoneform reduced a total of ",Object(u.d)(this.damageReduced)," physical damage taken.")})}},{key:"drps",get:function(){return this.damageReduced/this.owner.fightDuration*1e3}}]),a}(b.c);ot.dependencies={combatants:g.a};var ct=ot,lt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).castEfficiency=.8,n.extraSuggestion=null,n.active=n.selectedCombatant.race===tt.a.Troll,n.active?(n.gcd=void 0===e.gcd?n.gcd:e.gcd,n.castEfficiency=void 0===e.castEfficiency?n.castEfficiency:e.castEfficiency,n.abilities.add({spell:f.a.BERSERKING,category:p.a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:null,timelineSortIndex:35,castEfficiency:{suggestion:null!==n.castEfficiency,recommendedEfficiency:n.castEfficiency,extraSuggestion:n.extraSuggestion}}),n):Object(O.a)(n)}return a}(b.c);lt.dependencies={abilities:p.a};var ut=lt,dt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).castEfficiency=.8,n.extraSuggestion=null,n.active=n.selectedCombatant.race===tt.a.Orc,n.active?(n.castEfficiency=void 0===e.castEfficiency?n.castEfficiency:e.castEfficiency,e.abilities.add({spell:[f.a.BLOOD_FURY_PHYSICAL,f.a.BLOOD_FURY_SPELL_AND_PHYSICAL,f.a.BLOOD_FURY_SPELL],category:p.a.SPELL_CATEGORIES.COOLDOWNS,cooldown:120,gcd:null,timelineSortIndex:35,castEfficiency:{suggestion:null!==n.castEfficiency,recommendedEfficiency:n.castEfficiency,extraSuggestion:n.extraSuggestion}}),n):Object(O.a)(n)}return a}(b.c);dt.dependencies={abilities:p.a};var ht=dt,ft=a(135),mt=a(61),bt=function(e){var t=e.item,a=e.children,n=e.className;return c.a.createElement("div",{className:"pad boring-text ".concat(n||"")},c.a.createElement("label",null,c.a.createElement(ft.a,{id:t.id})," ",c.a.createElement(mt.a,{id:t.id,icon:!1})),c.a.createElement("div",{className:"value"},a))},gt=a(21),pt=[gt.a.VANTUS_RUNE_CASTLE_NATHRIA],vt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];(e=t.call.apply(t,[this].concat(i))).activeRune=null;var o=e.owner.boss,c=o?o.fight.vantusRuneBuffId:null;if(c){var l=e.selectedCombatant.getBuff(c);void 0!==l&&(e.activeRune=l)}return e.active=null!==e.activeRune,e.active&&(pt.forEach((function(t){e.activeRune.ability.abilityIcon===t.icon&&(e.masterRune=t)})),e.statTracker.forceChangeStats({versatility:40},c,!0)),null===e.masterRune&&(e.masterRune=pt[pt.length-1]),e}return Object(s.a)(a,[{key:"statistic",value:function(){var e=this.owner.fightDuration,t=this.damageDone.total.effective-this.damageDone.total.effective/1.01,a=this.healingDone.total.effective-this.healingDone.total.effective/1.01,n=this.damageTaken.total.effective/.995-this.damageTaken.total.effective;return c.a.createElement(we.a,{position:st.a.UNIMPORTANT(),size:"flexible"},c.a.createElement(bt,{item:this.masterRune},c.a.createElement("img",{src:"/img/sword.png",alt:"Damage",className:"icon"})," ".concat(Object(u.d)(t/e*1e3)," DPS"),c.a.createElement("br",null),c.a.createElement("img",{src:"/img/healing.png",alt:"Healing",className:"icon"})," ".concat(Object(u.d)(a/e*1e3)," HPS"),c.a.createElement("br",null),c.a.createElement("img",{src:"/img/shield.png",alt:"Damage Taken",className:"icon"})," ".concat(Object(u.d)(n/e*1e3)," DRPS")))}}]),a}(b.c);vt.dependencies={healingDone:ae.a,damageDone:ne.a,damageTaken:ie.a,statTracker:le.a};var yt=vt,Et=a(123),_t=function(){function e(t,a,n,s,o,c,u){var d=this;Object(r.a)(this,e),this.applyTimeFilter=function(e,t){return null},this.applyPhaseFilter=function(e,t){return null},this.report=void 0,this.characterProfile=void 0,this.player=void 0,this.playerPets=void 0,this.fight=void 0,this.build=void 0,this.builds=void 0,this.boss=void 0,this.combatantInfoEvents=void 0,this.disabledModules=void 0,this.adjustForDowntime=!0,this._modules={},this._timestamp=void 0,this.finished=!1,this._moduleCache=new Map,this.eventCount=0,this.eventHistory=[],this.report=t,this.player=a,this.playerPets=t.friendlyPets.filter((function(e){return e.petOwner===a.id})),this.fight=n,this.build=c,this.builds=u,this.combatantInfoEvents=s,s.forEach((function(e){return d.eventHistory.push(e)})),this.characterProfile=o,this._timestamp=n.start_time,this.boss=Object(l.a)(n.boss),this.disabledModules={},Object.values(x.a).forEach((function(e){d.disabledModules[e]=[]}));var h=this.constructor;this.initializeModules(Object(i.a)(Object(i.a)(Object(i.a)({},h.internalModules),h.defaultModules),h.specModules))}return Object(s.a)(e,[{key:"hasDowntime",get:function(){return this.getModule(Ie).totalBaseDowntime>0}},{key:"activeModules",get:function(){return Object.values(this._modules).filter((function(e){return e.active}))}},{key:"playerId",get:function(){return this.player.id}},{key:"fightId",get:function(){return this.fight.id}},{key:"currentTimestamp",get:function(){return this.finished?this.fight.end_time:this._timestamp}},{key:"fightDuration",get:function(){return this.currentTimestamp-this.fight.start_time-(this.adjustForDowntime?this.getModule(Ie).totalBaseDowntime:0)}},{key:"players",get:function(){return this.report.friendlies}},{key:"selectedCombatant",get:function(){return this.getModule(g.a).selected}}]),Object(s.a)(e,[{key:"finish",value:function(){this.finished=!0;var e=this.getModule(Et.a);console.log("Events triggered:",e.numTriggeredEvents,"Event listeners added:",e.numEventListeners,"Listeners called:",e.numListenersCalled,"Listeners called (after filters):",e.numActualExecutions,"Listeners filtered away:",e.numListenersCalled-e.numActualExecutions)}},{key:"_getModuleClass",value:function(e){var t,a;return e instanceof Array?(t=e[0],a=e[1]):(t=e,a={}),[t,a]}},{key:"_resolveDependencies",value:function(e){var t=this,a={},n=[];return e&&Object.keys(e).forEach((function(i){var r=e[i],s=t.getOptionalModule(r);s?a[i]=s:n.push(r)})),[a,n]}},{key:"loadModule",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"module".concat(Object.keys(this._modules).length),n=new e(Object(i.a)(Object(i.a)({},t),{},{owner:this}));return t&&Object.keys(t).forEach((function(e){n[e]=t[e]})),n.key=a,this._modules[a]=n,n}},{key:"initializeModules",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[];if(Object.keys(e).forEach((function(a){var s=e[a];if(s){var o=t._getModuleClass(s),c=Object(n.a)(o,2),l=c[0],u=c[1],d=t._resolveDependencies(l.dependencies),h=Object(n.a)(d,2),f=h[0],m=h[1];if(0===m.length){0;var b=Object.keys(t._modules).length;try{t.loadModule(l,Object(i.a)(Object(i.a)(Object(i.a)({},u),f),{},{priority:b}),a)}catch(g){0,t.disabledModules[x.a.INITIALIZATION].push({key:a,module:l,error:g})}}else{0!==m.map((function(e){return e.name})).filter((function(e){return t.disabledModules[x.a.INITIALIZATION].map((function(e){return e.module.name})).includes(e)})).length?t.disabledModules[x.a.DEPENDENCY].push({key:a,module:l}):r.push(a)}}})),0!==r.length){var s={};if(r.forEach((function(t){s[t]=e[t]})),a>100)throw new Error("Failed to load modules: ".concat(Object.keys(s).join(", ")));this.initializeModules(s,a+1)}else this.allModulesInitialized()}},{key:"allModulesInitialized",value:function(){}},{key:"getOptionalModule",value:function(e){var t=this._moduleCache.get(e);if(void 0!==t)return t;var a=Object.values(this._modules).find((function(t){return t instanceof e}));return this._moduleCache.set(e,a),a}},{key:"getModule",value:function(e){var t=this.getOptionalModule(e);if(void 0===t)throw new Error("Module not found: ".concat(e.name));return t}},{key:"normalize",value:function(e){return this.activeModules.filter((function(e){return e instanceof G.a})).map((function(e){return e})).sort((function(e,t){return e.priority-t.priority})).forEach((function(t){t.normalize&&(e=t.normalize(e))})),e}},{key:"addEventListener",value:function(e,t,a){this.getModule(Et.a).addEventListener(e,t,a)}},{key:"deepDisable",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;e.active&&(console.error("Disabling",e.key),this.disabledModules[t].push(Object(i.a)({key:e.key,module:e.constructor},n&&{error:n})),e.active=!1,this.activeModules.forEach((function(t){var n=t.constructor.dependencies;n&&Object.values(n).find((function(t){return e instanceof t}))&&a.deepDisable(t,x.a.DEPENDENCY)})))}},{key:"byPlayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.player.id;return Object(_.d)(e)&&e.sourceID===t}},{key:"toPlayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.player.id;return Object(_.e)(e)&&e.targetID===t}},{key:"byPlayerPet",value:function(e){return Object(_.d)(e)&&this.playerPets.some((function(t){return t.id===e.sourceID}))}},{key:"toPlayerPet",value:function(e){return Object(_.e)(e)&&this.playerPets.some((function(t){return t.id===e.targetID}))}},{key:"getPercentageOfTotalHealingDone",value:function(e){return e/this.getModule(ae.a).total.effective}},{key:"formatItemHealingDone",value:function(e){return"".concat(Object(u.e)(this.getPercentageOfTotalHealingDone(e))," % / ").concat(Object(u.d)(e/this.fightDuration*1e3)," HPS")}},{key:"formatItemAbsorbDone",value:function(e){return"".concat(Object(u.d)(e))}},{key:"getPercentageOfTotalDamageDone",value:function(e){return e/this.getModule(ne.a).total.effective}},{key:"formatItemDamageDone",value:function(e){return"".concat(Object(u.e)(this.getPercentageOfTotalDamageDone(e))," % / ").concat(Object(u.d)(e/this.fightDuration*1e3)," DPS")}},{key:"getPercentageOfTotalDamageTaken",value:function(e){return e/this.getModule(ie.a).total.effective}},{key:"formatTimestamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(u.a)((e-this.fight.start_time)/1e3,t)}},{key:"generateResults",value:function(e){var t=this;this.adjustForDowntime=e;for(var a=new A.b,n=function(e,t,n){if(e){var i=void 0!==e.props.position?e.props.position:t;a.statistics.push(c.a.cloneElement(e,{key:n,position:i}))}},i=!1;!i;)(a=new A.b).tabs=[],i=Object.keys(t._modules).filter((function(e){return t._modules[e].active})).sort((function(e,a){return t._modules[a].priority-t._modules[e].priority})).every((function(e,i){var r=t._modules[e];try{if(r instanceof b.c){var s=r;if(s.statistic){var o=i;void 0!==s.statisticOrder&&(o=s.statisticOrder,console.warn("DEPRECATED","Setting the position of a statistic via a module's `statisticOrder` prop is deprecated. Set the `position` prop on the `StatisticBox` instead. Example commit: https://github.com/WoWAnalyzer/WoWAnalyzer/commit/ece1bbeca0d3721ede078d256a30576faacb803d",r));var c=s.statistic();c&&(Array.isArray(c)?c.forEach((function(t,a){n(t,o,"".concat(e,"-statistic-").concat(a))})):n(c,o,"".concat(e,"-statistic")))}if(s.tab){var l=s.tab();l&&a.tabs.push(l)}s.suggestions&&s.suggestions(a.suggestions.when)}}catch(u){return t.deepDisable(r,x.a.RESULTS,u),!1}return!0}));return a}}]),e}();_t.abilitiesAffectedByHealingIncreases=[],_t.abilitiesAffectedByDamageIncreases=[],_t.internalModules={fightEndNormalizer:J,eventEmitter:Et.a,combatants:g.a,deathDowntime:Ae.a,totalDowntime:Ie},_t.defaultModules={applyBuffNormalizer:W,cancelledCastsNormalizer:V,prepullNormalizer:X,phaseChangesNormalizer:Z,missingCastsNormalize:$,spellTimeWaitingOnGlobalCooldown:te,healingDone:ae.a,damageDone:ne.a,damageTaken:ie.a,throughputStatisticGroup:oe,deathTracker:ce.a,enemies:E.a,enemyInstances:ye.a,pets:Ee.a,spellManaCost:Oe.a,channeling:Te.a,eventHistory:ge.a,abilityTracker:T.a,haste:U.a,statTracker:le.a,alwaysBeCasting:ue.a,filteredActiveTime:de,abilities:p.a,buffs:v.a,abilitiesMissing:me,CastEfficiency:be.a,spellUsable:y.b,spellHistory:pe.a,globalCooldown:ve.a,manaValues:_e.a,vantusRune:yt,distanceMoved:ke.a,deathRecapTracker:B,dispels:je,critEffectBonus:We.a,raidHealthTab:Ge,potionChecker:Ye.b,enchantChecker:Ke.a,flaskChecker:Ve.a,foodChecker:ze.a,healthstone:S,healthPotion:Xe,combatPotion:Ze,weaponEnhancementChecker:Qe.a,preparationRuleAnalyzer:$e.a,arcaneTorrent:et.a,giftOfTheNaaru:nt,mightOfTheMountain:it.b,stoneform:ct,berserking:ut,bloodFury:ht},_t.specModules={};t.a=_t},777:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(43),c=a(106),l=a(1023),u=a(1026),d=a(1024),h=a(1025),f=a(164),m=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"thresholds",get:function(){return{potionsUsed:{actual:this.potionChecker.potionsUsed,max:this.potionChecker.maxPotions,isLessThan:this.potionChecker.maxPotions,style:f.a.NUMBER},bestPotionUsed:{actual:this.potionChecker.strongPotionsUsed,max:this.potionChecker.maxPotions,isLessThan:this.potionChecker.maxPotions,style:f.a.NUMBER},itemsEnchanted:{actual:this.enchantChecker.numEnchantableGear-this.enchantChecker.numSlotsMissingEnchant,max:this.enchantChecker.numEnchantableGear,isLessThan:this.enchantChecker.numEnchantableGear,style:f.a.NUMBER},itemsBestEnchanted:{actual:this.enchantChecker.numEnchantableGear-this.enchantChecker.numSlotsMissingEnchant-this.enchantChecker.numSlotsMissingMaxEnchant,max:this.enchantChecker.numEnchantableGear,isLessThan:this.enchantChecker.numEnchantableGear,style:f.a.NUMBER},weaponsEnhanced:{actual:this.weaponEnhancementChecker.numWeapons-this.weaponEnhancementChecker.numWeaponsMissingEnhancement,max:this.weaponEnhancementChecker.numWeapons,isLessThan:this.weaponEnhancementChecker.numWeapons,style:f.a.NUMBER},bestWeaponEnhancements:{actual:this.weaponEnhancementChecker.numWeapons-this.weaponEnhancementChecker.numWeaponsMissingEnhancement-this.weaponEnhancementChecker.numWeaponsMissingMaxEnhancement,max:this.weaponEnhancementChecker.numWeapons,isLessThan:this.weaponEnhancementChecker.numWeapons,style:f.a.NUMBER},higherFlaskPresent:this.flaskChecker.flaskStrengthSuggestion,flaskPresent:this.flaskChecker.flaskSuggestionThresholds,higherFoodPresent:this.foodChecker.higherFoodSuggestionThresholds,foodPresent:this.foodChecker.isPresentFoodSuggestionThresholds}}}]),a}(o.c);m.dependencies={potionChecker:c.b,enchantChecker:l.a,weaponEnhancementChecker:u.a,flaskChecker:d.a,foodChecker:h.a},t.a=m},779:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return l}));var n=a(7),i=a(0),r=a.n(i),s=a(1311),o={autosize:{type:"fit",contains:"padding"},background:"#0000",padding:0,view:{stroke:null},axis:{domainColor:"gray",labelColor:"#e9e8e7",tickColor:"gray"}};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"datum.timestamp";return"if(".concat(e," / 1000 >= 60, toString(floor(").concat(e," / 60000)) + 'm ', '') + toString(floor(").concat(e," / 1000) % 60) + 's'")}function l(e){var t=Object(n.a)(Object(n.a)({config:o,renderer:"canvas"},e),{},{spec:Object(n.a)(Object(n.a)({},e.spec),{},{datasets:e.data}),data:void 0});return r.a.createElement(s.a,Object.assign({theme:"dark",tooltip:{theme:"dark"},actions:!1},t))}},780:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(6),c=a(0),l=a.n(c),u=a(28),d=a(33),h=a(43),f=a(15),m=a(164),b=a(750),g=a(22),p=a(13),v=a(800),y=a(753),E=a(811),_=a(814),O=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).haste=void 0,i.abilities=void 0,i.globalCooldown=void 0,i.channeling=void 0,i.activeTime=0,i._lastGlobalCooldownDuration=0,i.showStatistic=!0,i.position=b.a.CORE(10),i.addEventListener(f.f.GlobalCooldown,i.onGCD),i.addEventListener(f.f.EndChannel,i.onEndChannel),i}return Object(i.a)(a,[{key:"totalTimeWasted",get:function(){return this.owner.fightDuration-this.activeTime}},{key:"downtimePercentage",get:function(){return 1-this.activeTimePercentage}},{key:"activeTimePercentage",get:function(){return this.activeTime/this.owner.fightDuration}}]),Object(i.a)(a,[{key:"onGCD",value:function(e){return this._lastGlobalCooldownDuration=e.duration,!e.trigger.prepull&&(e.trigger.type!==f.b.BeginChannel&&(this.activeTime+=e.duration,!0))}},{key:"onEndChannel",value:function(e){var t=e.duration;return this.globalCooldown.isOnGlobalCooldown(e.ability.guid)&&(t=Math.max(t,this._lastGlobalCooldownDuration)),this.activeTime+=t,!0}},{key:"statistic",value:function(){var e=this.owner.boss;if(!this.showStatistic||e&&e.fight.disableDowntimeStatistic)return null;if(!this.globalCooldown.isAccurate)return null;var t=this.constructor;return l.a.createElement(b.b,{position:this.position,icon:l.a.createElement(u.a,{icon:"spell_mage_altertime",alt:"Downtime"}),value:"".concat(Object(d.e)(this.downtimePercentage)," %"),label:l.a.createElement(o.Trans,{id:"shared.alwaysBeCasting.statistic.label"}),tooltip:l.a.createElement(o.Trans,{id:"shared.alwaysBeCasting.statistic.tooltip",values:{0:Object(d.e)(this.activeTimePercentage),1:Object(d.e)(this.downtimePercentage)},components:[l.a.createElement("br",null),l.a.createElement("ul",null),l.a.createElement("li",null),l.a.createElement("strong",null),l.a.createElement("li",null),l.a.createElement("strong",null)]}),footer:l.a.createElement("div",{className:"statistic-box-bar"},l.a.createElement(g.b,{content:l.a.createElement(o.Trans,{id:"shared.alwaysBeCasting.statistic.footer.activetime.tooltip",values:{0:Object(d.e)(this.activeTimePercentage)},components:[l.a.createElement("strong",null)]})},l.a.createElement("div",{className:"stat-health-bg",style:{width:"".concat(100*this.activeTimePercentage,"%")}},l.a.createElement("img",{src:t.icons.activeTime,alt:"Active time"}))),l.a.createElement(g.b,{content:l.a.createElement(o.Trans,{id:"shared.alwaysBeCasting.statistic.footer.downtime.tooltip",values:{0:Object(d.e)(this.downtimePercentage)},components:[l.a.createElement("strong",null)]})},l.a.createElement("div",{className:"remainder DeathKnight-bg"},l.a.createElement("img",{src:t.icons.downtime,alt:"Downtime"}))))})}},{key:"suggestions",value:function(e){var t=this;e(this.downtimeSuggestionThresholds.actual).isGreaterThan(this.downtimeSuggestionThresholds.isGreaterThan.minor).addSuggestion((function(e,a,n){return e("".concat(l.a.createElement(o.Trans,{id:"shared.suggestions.alwaysBeCasting.suggestion"}))).icon("spell_mage_altertime").actual("".concat(Object(d.e)(a),"% ").concat(p.i18n._({id:"shared.suggestions.alwaysBeCasting.downtime",defaults:"downtime"}))).recommended("<".concat(Object(d.e)(n),"% is recommended")).regular(t.downtimeSuggestionThresholds.isGreaterThan.average).major(t.downtimeSuggestionThresholds.isGreaterThan.major)}))}},{key:"downtimeSuggestionThresholds",get:function(){return{actual:this.downtimePercentage,isGreaterThan:{minor:.02,average:.04,major:.06},style:m.a.PERCENTAGE}}}]),a}(h.c);O.dependencies={haste:v.a,abilities:y.a,globalCooldown:E.a,channeling:_.a},O.icons={activeTime:"/img/sword.png",downtime:"/img/afk.png"},t.a=O},792:function(e,t,a){"use strict";a.d(t,"w",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"K",(function(){return o})),a.d(t,"N",(function(){return c})),a.d(t,"J",(function(){return l})),a.d(t,"L",(function(){return u})),a.d(t,"M",(function(){return d})),a.d(t,"s",(function(){return h})),a.d(t,"r",(function(){return f})),a.d(t,"q",(function(){return m})),a.d(t,"B",(function(){return b})),a.d(t,"p",(function(){return g})),a.d(t,"u",(function(){return p})),a.d(t,"v",(function(){return v})),a.d(t,"c",(function(){return y})),a.d(t,"I",(function(){return E})),a.d(t,"D",(function(){return _})),a.d(t,"F",(function(){return O})),a.d(t,"E",(function(){return T})),a.d(t,"C",(function(){return A})),a.d(t,"i",(function(){return C})),a.d(t,"g",(function(){return I})),a.d(t,"e",(function(){return k})),a.d(t,"f",(function(){return S})),a.d(t,"o",(function(){return w})),a.d(t,"n",(function(){return N})),a.d(t,"k",(function(){return j})),a.d(t,"l",(function(){return R})),a.d(t,"y",(function(){return D})),a.d(t,"z",(function(){return L})),a.d(t,"m",(function(){return P})),a.d(t,"d",(function(){return H})),a.d(t,"h",(function(){return F})),a.d(t,"t",(function(){return M})),a.d(t,"A",(function(){return B})),a.d(t,"G",(function(){return x})),a.d(t,"H",(function(){return U})),a.d(t,"j",(function(){return G})),a.d(t,"x",(function(){return W}));var n=a(3),i=1,r=2500,s=35,o=2.25,c=2.4,l=.5,u=15e3,d=.5,h=.1,f=2e3,m=.01,b=0,g=[n.a.AUTO_SHOT,n.a.MULTISHOT_MM,n.a.AIMED_SHOT,n.a.STEADY_SHOT,n.a.BARRAGE_TALENT,n.a.A_MURDER_OF_CROWS_DEBUFF,n.a.CHIMAERA_SHOT_MM_FROST_DAMAGE,n.a.CHIMAERA_SHOT_MM_NATURE_DAMAGE,n.a.ARCANE_SHOT,n.a.BURSTING_SHOT,n.a.EXPLOSIVE_SHOT_DAMAGE,n.a.SERPENT_STING_TALENT,n.a.VOLLEY_DAMAGE,n.a.RAPID_FIRE,n.a.KILL_SHOT_MM_BM],p=2,v=.75,y=500,E=.5,_=10,O=.15,T=.3,A=.07,C=2,I=2500,k=.7,S=.5,w=.08,N=0,j=.3,R=5e3,D=18e3,L=.3,P=[n.a.AIMED_SHOT,n.a.SERPENT_STING_TALENT,n.a.MULTISHOT_MM,n.a.BURSTING_SHOT,n.a.EXPLOSIVE_SHOT_TALENT],H=[0,.01,1.25,.015,.02,.0225,.025,.0275,.0325,.035,.0375,.04,.0425,.045,.0475,.05],F=[0,.1,.11,.12,.13,.14,.15,.16,.18,.19,.2,.21,.22,.23,.24,.25],M=[0,.05,.06,.07,.08,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2],B=[0,.2,.22,.24,.27,.29,.31,.33,.36,.38,.4,.42,.44,.46,.48,.5],x=.25,U=.15,G=.5,W=.5},793:function(e,t,a){"use strict";var n=a(31),i=a(8),r=a(9),s=a(10),o=a(11),c=a(0),l=a.n(c),u=a(788),d=a(33),h=a(892),f=a(210),m=a(22),b=a(847),g=a(1012),p=a(747),v=a(43),y=a(865),E=a(15),_=a(825),O=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._total=new _.a,n._healingByAbsorbs=new _.a,n.bySecond={},n._byAbility={},n.showStatistic=!0,n.addEventListener(E.f.heal.by(v.a|v.b),n.onHeal),n.addEventListener(E.f.absorbed.by(v.a|v.b),n.onAbsorbed),n.addEventListener(E.f.removebuff.by(v.a|v.b),n.onRemovebuff),n}return Object(r.a)(a,[{key:"byAbility",value:function(e){return this._byAbility[e]?this._byAbility[e]:new _.a}},{key:"onHeal",value:function(e){this._addHealing(e,e.amount,e.absorbed,e.overheal)}},{key:"onAbsorbed",value:function(e){this._addHealingByAbsorb(e,e.amount,0,0)}},{key:"onRemovebuff",value:function(e){e.absorb&&this._addHealingByAbsorb(e,0,0,e.absorb)}},{key:"_addHealing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._total=this._total.add(t,a,n);var i=e.ability.guid;this._byAbility[i]=(this._byAbility[i]||new _.a).add(t,a,n);var r=Math.floor((e.timestamp-this.owner.fight.start_time)/1e3);this.bySecond[r]=(this.bySecond[r]||new _.a).add(t,a,n)}},{key:"_addHealingByAbsorb",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._addHealing(e,t,a,n),this._healingByAbsorbs=this._healingByAbsorbs.add(t,a,n)}},{key:"_subtractHealing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this._addHealing(e,-t,-a,-n)}},{key:"_subtractHealingByAbsorb",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this._addHealingByAbsorb(e,-t,-a,-n)}},{key:"subStatistic",value:function(){var e=this;if(!this.showStatistic)return null;var t=Object.entries(this.bySecond).map((function(e){var t=Object(n.a)(e,2);return{time:t[0],val:t[1].effective}})),a=this.total.effective/this.owner.fightDuration*1e3,i=Object(f.a)(this.owner.report.code,{fight:this.owner.fightId,source:this.owner.playerId,type:"healing"});return l.a.createElement(b.a,{position:p.a.CORE(2),ultrawide:!0,large:!1,wide:!1,style:{marginBottom:19,overflow:"hidden"}},l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"flex-sub icon"},l.a.createElement("img",{src:"/img/healing.png",alt:"Healing"})),l.a.createElement(m.b,{content:l.a.createElement(l.a.Fragment,null,"Total healing done: ",l.a.createElement("strong",null,Object(d.f)(this.total.effective)))},l.a.createElement("div",{className:"flex-sub value",style:{width:190}},Object(d.f)(a)," HPS")),l.a.createElement("div",{className:"flex-sub",style:{width:110,textAlign:"center",padding:"10px 5px"}},l.a.createElement(g.b,{throughput:a,metric:"hps"},(function(t){var a=t.performance,n=t.topThroughput;return a&&a!==g.a&&l.a.createElement(m.b,{content:l.a.createElement(l.a.Fragment,null,"Your HPS compared to the HPS of a top 100 player. To become a top 100 ",l.a.createElement("span",{className:e.selectedCombatant.spec.className.replace(" ","")},e.selectedCombatant.spec.specName," ",e.selectedCombatant.spec.className)," on this fight you need to do at least ",l.a.createElement("strong",null,Object(d.f)(n||0)," HPS"),".")},l.a.createElement("div",{className:Object(h.a)(a),style:{cursor:"help"}},a>=1?"TOP 100":"".concat(Object(d.e)(a,0),"%")))}))),l.a.createElement("div",{className:"flex-main chart",style:{padding:0}},l.a.createElement("a",{href:i},a>0&&l.a.createElement(u.a,{disableWidth:!0},(function(a){var n=a.height;return l.a.createElement(y.a,{data:t,duration:e.owner.fightDuration/1e3,height:n})}))))))}},{key:"total",get:function(){return this._total}},{key:"healingByAbsorbs",get:function(){return this._healingByAbsorbs}}]),a}(v.c);t.a=O},797:function(e,t,a){"use strict";var n=a(26),i=a(8),r=a(9),s=a(10),o=a(11),c=a(810),l=a(3),u=a(92),d=a(800),h=a(37),f=a.n(h),m=function(){function e(t){Object(i.a)(this,e),this.spellId=null,this.enabled=!0,this.triggeredBySpellId=null,this.timelineHighlight=!1,this._setProps(t)}return Object(r.a)(e,[{key:"_setProps",value:function(e){var t=this;Object.keys(e).forEach((function(a){t._setProp(a,e[a])}))}},{key:"_setProp",value:function(e,t){this[e]=t}}]),e}();m.propTypes={spellId:f.a.oneOfType([f.a.number,f.a.arrayOf(f.a.number)]).isRequired,enabled:f.a.bool,triggeredBySpellId:f.a.oneOfType([f.a.number,f.a.arrayOf(f.a.number)]),timelineHighlight:f.a.bool};var b=m,g=a(753),p=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).activeBuffs=[],n.loadBuffs(n.buffs()),n}return Object(r.a)(a,[{key:"buffs",value:function(){return[].concat(Object(n.a)(this.abilities.activeAbilities.filter((function(e){return Boolean(e.buffSpellId)})).map((function(e){return{spellId:e.buffSpellId,triggeredBySpellId:e.spell.id!==e.buffSpellId?e.primarySpell.id:void 0,timelineHighlight:!0}}))),[{spellId:Object.keys(c.a).map((function(e){return Number(e)})),timelineHighlight:!0},{spellId:l.a.POWER_INFUSION.id,timelineHighlight:!0}])}}]),Object(r.a)(a,[{key:"loadBuffs",value:function(e){var t=this;this.activeBuffs=e.map((function(e){return new t.constructor.BUFF_CLASS(e)})).filter((function(e){return e.enabled}))}},{key:"add",value:function(e){var t=new this.constructor.BUFF_CLASS(e);this.activeBuffs.push(t)}},{key:"getBuff",value:function(e){return this.activeBuffs.find((function(t){return t.spellId instanceof Array?t.spellId.includes(e):t.spellId===e}))}}]),a}(u.a);p.dependencies={haste:d.a,abilities:g.a},p.BUFF_CLASS=b;t.a=p},800:function(e,t,a){"use strict";var n,i=a(12),r=a(7),s=a(8),o=a(9),c=a(10),l=a(11),u=a(3),d=(a(33),a(43)),h=a(123),f=a(122),m=a(810),b=a(18),g=a(15),p=a(792),v=a(759),y=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).current=null,e.current=e.statTracker.currentHastePercentage,e._triggerChangeHaste(null,null,e.current),e.addEventListener(g.f.applybuff.to(b.a),e.onApplyBuff),e.addEventListener(g.f.changebuffstack.to(b.a),e.onChangeBuffStack),e.addEventListener(g.f.removebuff.to(b.a),e.onRemoveBuff),e.addEventListener(g.f.applydebuff.to(b.a),e.onApplyDebuff),e.addEventListener(g.f.changedebuffstack.to(b.a),e.onChangeDebuffStack),e.addEventListener(g.f.removedebuff.to(b.a),e.onRemoveDebuff),e.addEventListener(g.f.ChangeStats.to(b.a),e.onChangeStats),e}return Object(o.a)(a,[{key:"changehaste",get:function(){return new b.c(g.b.ChangeHaste)}}]),Object(o.a)(a,[{key:"onApplyBuff",value:function(e){this._applyActiveBuff(e)}},{key:"onChangeBuffStack",value:function(e){this._changeBuffStack(e)}},{key:"onRemoveBuff",value:function(e){this._removeActiveBuff(e)}},{key:"onApplyDebuff",value:function(e){this._applyActiveBuff(e)}},{key:"onChangeDebuffStack",value:function(e){this._changeBuffStack(e)}},{key:"onRemoveDebuff",value:function(e){this._removeActiveBuff(e)}},{key:"onChangeStats",value:function(e){if(e.delta.haste){var t=this.constructor.removeHaste(this.current,this.statTracker.hastePercentage(e.before.haste,!0)),a=this.constructor.addHaste(this.statTracker.hastePercentage(e.after.haste,!0),t);this._setHaste(e,a)}}},{key:"_applyActiveBuff",value:function(e){var t=e.ability.guid,a=this._getBaseHasteGain(t);a&&this._applyHasteGain(e,a)}},{key:"_removeActiveBuff",value:function(e){var t=e.ability.guid,a=this._getBaseHasteGain(t);a&&this._applyHasteLoss(e,a)}},{key:"_getBaseHasteGain",value:function(e){var t=this.constructor.HASTE_BUFFS[e]||void 0;return"number"===typeof t?t:"object"===typeof t&&t.haste?this._getHasteValue(t.haste,t):null}},{key:"_changeBuffStack",value:function(e){var t=e.ability.guid,a=this._getHastePerStackGain(t);if(a){var n=this.constructor.removeHaste(this.current,e.oldStacks*a),i=this.constructor.addHaste(n,e.newStacks*a);this._setHaste(e,i)}}},{key:"_getHastePerStackGain",value:function(e){var t=this.constructor.HASTE_BUFFS[e]||void 0;if("number"===typeof t);else if("object"===typeof t&&t.hastePerStack)return this._getHasteValue(t.hastePerStack,t);return null}},{key:"_getHasteValue",value:function(e,t){var a=t.itemId;if("function"===typeof e){var n,i=this.selectedCombatant;return a&&((n=i.getItem(a))||console.error("Failed to retrieve item information for item with ID:",a)),e(i,n)}return e}},{key:"_applyHasteGain",value:function(e,t){this._setHaste(e,this.constructor.addHaste(this.current,t))}},{key:"_applyHasteLoss",value:function(e,t){this._setHaste(e,this.constructor.removeHaste(this.current,t))}},{key:"_setHaste",value:function(e,t){if(isNaN(t))throw new Error("Attempted to set an invalid Haste value. Something broke.");var a=this.current;this.current=t,this._triggerChangeHaste(e,a,this.current)}},{key:"_triggerChangeHaste",value:function(e,t,a){var n={type:g.b.ChangeHaste,sourceID:e?e.sourceID:this.owner.playerId,targetID:this.owner.playerId,oldHaste:t,newHaste:a};this.eventEmitter.fabricateEvent(n,e)}}],[{key:"addHaste",value:function(e,t){return e*(1+t)+t}},{key:"removeHaste",value:function(e,t){return(e-t)/(1+t)}}]),a}(d.c);y.dependencies={eventEmitter:h.a,statTracker:f.a},y.HASTE_BUFFS=Object(r.a)(Object(r.a)({},m.a),{},(n={},Object(i.a)(n,u.a.HOLY_AVENGER_TALENT.id,.3),Object(i.a)(n,u.a.BERSERKING.id,.1),Object(i.a)(n,u.a.ICY_VEINS.id,.3),Object(i.a)(n,u.a.IN_FOR_THE_KILL_TALENT_BUFF.id,.1),Object(i.a)(n,u.a.BONE_SHIELD.id,.1),Object(i.a)(n,u.a.METAMORPHOSIS_HAVOC_BUFF.id,.25),Object(i.a)(n,u.a.DARK_SOUL_MISERY_TALENT.id,.3),Object(i.a)(n,u.a.REVERSE_ENTROPY_BUFF.id,.15),Object(i.a)(n,u.a.ENRAGE.id,.25),Object(i.a)(n,u.a.FROTHING_BERSERKER.id,.05),Object(i.a)(n,u.a.EMPOWER_RUNE_WEAPON.id,.15),Object(i.a)(n,u.a.DIRE_BEAST_BUFF.id,v.g),Object(i.a)(n,u.a.STEADY_FOCUS_BUFF.id,p.C),Object(i.a)(n,u.a.CRUSADE_TALENT.id,{hastePerStack:.03}),Object(i.a)(n,u.a.OPULENCE_AMETHYST_OF_THE_SHADOW_KING.id,.5),n)),t.a=y},810:function(e,t,a){"use strict";var n,i=a(12),r=a(3),s=(n={},Object(i.a)(n,r.a.BLOODLUST.id,.3),Object(i.a)(n,r.a.HEROISM.id,.3),Object(i.a)(n,r.a.TIME_WARP.id,.3),Object(i.a)(n,r.a.PRIMAL_RAGE_1.id,.3),Object(i.a)(n,r.a.PRIMAL_RAGE_2.id,.3),Object(i.a)(n,r.a.DRUMS_OF_FURY.id,.25),Object(i.a)(n,r.a.DRUMS_OF_THE_MOUNTAIN.id,.25),Object(i.a)(n,r.a.DRUMS_OF_RAGE.id,.25),n);t.a=s},811:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(33),c=a(43),l=a(15),u=a(123),d=a(833),h=a(800),f=a(753),m=a(814),b=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._errors=0,i._currentChannel=null,i.lastGlobalCooldown=null,i.addEventListener(l.f.cast.by(c.a),i.onCast),i.addEventListener(l.f.BeginChannel.by(c.a),i.onBeginChannel),i.addEventListener(l.f.GlobalCooldown.to(c.a),i.onGlobalcooldown),i}return Object(i.a)(a,[{key:"isOnGlobalCooldown",value:function(e){return Boolean(this.getGlobalCooldownDuration(e))}},{key:"onBeginChannel",value:function(e){this._currentChannel=e;var t=e.ability.guid,a=this.isOnGlobalCooldown(t),n=e.trigger.isCancelled;a&&!n&&(e.globalCooldown=this.triggerGlobalCooldown(e))}},{key:"onCast",value:function(e){var t=e.ability.guid;if(this.isOnGlobalCooldown(t)&&!d.a.includes(t)){var a=Boolean(this._currentChannel)&&this._currentChannel.ability.guid===e.ability.guid;this._currentChannel=null,a||(e.globalCooldown=this.triggerGlobalCooldown(e))}}},{key:"triggerGlobalCooldown",value:function(e){return this.eventEmitter.fabricateEvent({type:l.b.GlobalCooldown,ability:e.ability,sourceID:e.sourceID,targetID:e.sourceID,timestamp:e.timestamp,duration:this.getGlobalCooldownDuration(e.ability.guid)},e)}},{key:"getGlobalCooldownDuration",value:function(e){var t=this.abilities.getAbility(e);if(!t)return 0;var a=this._resolveAbilityGcdField(t.gcd);if(!a)return 0;if(void 0!==a.static)return this._resolveAbilityGcdField(a.static);if(a.base){var n=this._resolveAbilityGcdField(a.base),i=this._resolveAbilityGcdField(a.minimum)||750;return this.constructor.calculateGlobalCooldown(this.haste.current,n,i)}throw new Error("Ability ".concat(t.name," (spellId: ").concat(e,") defines a GCD property but provides neither a base nor static value."))}},{key:"_resolveAbilityGcdField",value:function(e){return"function"===typeof e?e.call(this.owner,this.selectedCombatant):e}},{key:"onGlobalcooldown",value:function(e){this._verifyAccuracy(e)}},{key:"_verifyAccuracy",value:function(e){if(this.lastGlobalCooldown){var t=e.timestamp-this.lastGlobalCooldown.timestamp,a=this.lastGlobalCooldown.duration-t;a>150&&(this._errors+=1,console.error(Object(o.b)(this.owner.fightDuration),"GlobalCooldown",e.trigger.ability.name,e.trigger.ability.guid,"was cast while the Global Cooldown from",this.lastGlobalCooldown.ability.name,this.lastGlobalCooldown.ability.guid,"was already running. There's probably a Haste buff missing from StatTracker or the Haste module, this spell has a GCD different from the default, or the base GCD for this spec is different from default.","time passed:",t,"cooldown remaining:",a,"expectedDuration:",this.lastGlobalCooldown.duration,"errors:",this._errors))}this.lastGlobalCooldown=e}},{key:"errorsPerMinute",get:function(){var e=this.owner.fightDuration/1e3/60;return this._errors/e}},{key:"isAccurate",get:function(){return this.errorsPerMinute<2}}],[{key:"calculateGlobalCooldown",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:750,n=t/(1+e);return Math.max(a,n)}}]),a}(c.c);b.dependencies={eventEmitter:u.a,abilities:f.a,haste:h.a,channeling:m.a},t.a=b},812:function(e,t,a){"use strict";var n=a(27),i=a(0),r=a.n(i),s=a(49),o=a(58),c=a(77),l=function(e){var t=e.category,a=(void 0===t&&o.a.PANELS,e.position,Object(n.a)(e,["category","position"]));return r.a.createElement(c.a,null,r.a.createElement(s.a,a))};l.defaultProps={category:o.a.PANELS},t.a=l},814:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(43),c=a(123),l=a(833),u=a(15),d=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._currentChannel=null,i.addEventListener(u.f.begincast.by(o.a),i.onBegincast),i.addEventListener(u.f.cast.by(o.a),i.onCast),i}return Object(i.a)(a,[{key:"beginChannel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.ability;this.isChanneling()&&this.cancelChannel(e,this._currentChannel.ability);var a={type:u.b.BeginChannel,timestamp:e.timestamp,ability:t,sourceID:e.sourceID,isCancelled:e.isCancelled};e.channel=a,this._currentChannel=a,this.eventEmitter.fabricateEvent(a,e)}},{key:"endChannel",value:function(e){var t=this._currentChannel,a=t?t.timestamp:this.owner.fight.start_time;this.isChanneling()||this.warn(e.ability.name,"`endChannel` was called while we weren't channeling, assuming it was a pre-combat channel.");var n=e.timestamp-a;this._currentChannel=null;var i=t?t.ability:e.ability;return this.eventEmitter.fabricateEvent({type:u.b.EndChannel,timestamp:e.timestamp,ability:i,sourceID:e.sourceID,duration:n,start:a,beginChannel:t},e)}},{key:"cancelChannel",value:function(e,t){this.eventEmitter.fabricateEvent({type:u.b.CancelChannel,ability:t,sourceID:e.sourceID,timestamp:null},e)}},{key:"onBegincast",value:function(e){this.beginChannel(e)}},{key:"onCast",value:function(e){l.a.includes(e.ability.guid)||Boolean(this._currentChannel)&&(this.isChannelingSpell(e.ability.guid)?e.channel=this.endChannel(e):this.cancelChannel(e,this._currentChannel.ability))}},{key:"isChanneling",value:function(){return Boolean(this._currentChannel)}},{key:"isChannelingSpell",value:function(e){return this._currentChannel&&this._currentChannel.ability.guid===e}}]),a}(o.c);d.dependencies={eventEmitter:c.a},t.a=d},815:function(e,t,a){"use strict";var n=a(8),i=a(119),r=a(10),s=a(11),o=a(3),c=a(125),l=a(43),u=a(753),d=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).gcd=1500,r.castEfficiency=.8,r.extraSuggestion=null,r.active=r.selectedCombatant.race===c.a.BloodElf,r.active?(r.gcd=void 0===e.gcd?r.gcd:e.gcd,r.castEfficiency=void 0===e.castEfficiency?r.castEfficiency:e.castEfficiency,e.abilities.add({spell:[o.a.ARCANE_TORRENT_MANA1,o.a.ARCANE_TORRENT_MANA2,o.a.ARCANE_TORRENT_MANA3,o.a.ARCANE_TORRENT_RAGE,o.a.ARCANE_TORRENT_ENERGY,o.a.ARCANE_TORRENT_RUNIC_POWER,o.a.ARCANE_TORRENT_MONK,o.a.ARCANE_TORRENT_FOCUS,o.a.ARCANE_TORRENT_FURY],category:u.a.SPELL_CATEGORIES.COOLDOWNS,cooldown:120,gcd:{base:r.gcd},timelineSortIndex:35,castEfficiency:{suggestion:null!==r.castEfficiency,recommendedEfficiency:r.castEfficiency,extraSuggestion:r.extraSuggestion}}),r):Object(i.a)(r)}return a}(l.c);d.dependencies={abilities:u.a},t.a=d},819:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(6),c=a(43),l=a(88),u=a(33),d=a(20),h=a(37),f=a.n(h),m=a(13),b=a(15),g=a(0),p=a.n(g),v=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).lowestMana=null,e.endingMana=0,e.maxMana=5e4,e.manaUpdates=[],e.addEventListener(b.f.cast.by(c.a),e.onCast),e.active=e.selectedCombatant.spec.role===d.a.HEALER,e}return Object(i.a)(a,[{key:"onCast",value:function(e){var t=this;e.prepull||e.classResources&&e.classResources.filter((function(e){return e.type===l.a.MANA.id})).forEach((function(a){var n=a.amount,i=a.cost,r=a.max,s=i||0,o=n-s;t.endingMana=o,(null===t.lowestMana||o<t.lowestMana)&&(t.lowestMana=o),t.manaUpdates.push({timestamp:e.timestamp,current:o,max:r,used:s}),t.maxMana=r}))}},{key:"suggestions",value:function(e){var t=this;!this.owner.fight.kill||e(this.suggestionThresholds.actual).isGreaterThan(this.suggestionThresholds.isGreaterThan.minor).addSuggestion((function(e,a,n){return e(p.a.createElement(o.Trans,{id:"shared.manaValues.suggestions.label"})).icon("inv_elemental_mote_mana").actual("".concat(Object(u.e)(a),"% (").concat(Object(u.d)(t.endingMana),") ").concat(m.i18n._({id:"shared.suggestions.mana.efficiency",defaults:"mana left"}))).recommended("<".concat(Object(u.e)(n),"% is recommended")).regular(t.suggestionThresholds.isGreaterThan.average).major(t.suggestionThresholds.isGreaterThan.major)}))}},{key:"manaLeftPercentage",get:function(){return this.endingMana/this.maxMana}},{key:"suggestionThresholds",get:function(){return{actual:this.manaLeftPercentage,isGreaterThan:{minor:.1,average:.2,major:.3},style:"percentage"}}}]),a}(c.c);v.propTypes={owner:f.a.object.isRequired},t.a=v},825:function(e,t,a){"use strict";var n=a(8),i=a(9),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(n.a)(this,e),this._regular=0,this._absorbed=0,this._overheal=0,this._regular=t,this._absorbed=a,this._overheal=i}return Object(i.a)(e,[{key:"regular",get:function(){return this._regular}},{key:"absorbed",get:function(){return this._absorbed}},{key:"effective",get:function(){return this.regular+this.absorbed}},{key:"overheal",get:function(){return this._overheal}},{key:"raw",get:function(){return this.effective+this.overheal}}]),Object(i.a)(e,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new this.constructor(this.regular+e,this.absorbed+t,this.overheal+a)}}]),e}();t.a=r},826:function(e,t,a){"use strict";t.a={names:{1:"Physical",2:"Holy",4:"Fire",8:"Nature",16:"Frost",28:"Elemental",32:"Shadow",33:"Shadowstrike",34:"Twilight",36:"Shadowflame",40:"Plague",48:"Shadowfrost",64:"Arcane",96:"Spellshadow",100:"Special",124:"Chaos"},ids:{PHYSICAL:1,HOLY:2,FIRE:4,NATURE:8,FROST:16,SHADOW:32,ARCANE:64}}},828:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(92),c=a(123),l=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"last",value:function(e,t,a){var n=function(e){return!0};if(t){var i=this.owner.currentTimestamp-t,r=n;n=function(e){return!(!e.timestamp||e.timestamp<i)&&r(e)}}if(a){var s=this.owner.getModule(c.a),o=n;n=function(e){return e.type===a.eventType&&o(e)};var l=a.getTo();if(l){var u=n,d=s.createToCheck(l);d&&(n=function(e){return!!d(e)&&u(e)})}var h=a.getBy();if(h){var f=n,m=s.createByCheck(h);m&&(n=function(e){return!!m(e)&&f(e)})}var b=a.getSpell();if(b){var g=n,p=s.createSpellCheck(b);n=function(e){return!!p(e)&&g(e)}}}var v=this.owner.eventHistory.filter((function(e){return n(e)}));return e&&e<v.length&&(v=v.slice(-e)),v}}]),a}(o.a);t.a=l},829:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._hooks=[],e}return Object(i.a)(a,[{key:"hook",value:function(e){this._hooks.push(e)}},{key:"getBonus",value:function(e){return this._hooks.reduce((function(t,a){return a(t,e)}),this.constructor.BASE_CRIT_EFFECT_MOD)}}]),a}(a(43).c);o.BASE_CRIT_EFFECT_MOD=2,t.a=o},832:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(88),c=a(43),l=a(15),u=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];if(!(e=t.call.apply(t,[this].concat(r))).constructor.resourceType||!o.a[e.constructor.resourceType.id])throw new Error("Attempting to use SpellResourceCost without providing a valid resourceType.");return e.addEventListener(l.f.cast.by(c.a),e.onCast),e}return Object(i.a)(a,[{key:"onCast",value:function(e){e.resourceCost||(e.resourceCost={}),e.resourceCost[this.constructor.resourceType.id]=this.getResourceCost(e),e.rawResourceCost||(e.rawResourceCost={}),e.rawResourceCost[this.constructor.resourceType.id]=this.getRawResourceCost(e)}},{key:"getCostFromEventObject",value:function(e){var t=this;return e.classResources?e.classResources.filter((function(e){return e.type===t.constructor.resourceType.id})).reduce((function(e,t){return e+(t.cost||0)}),0):0}},{key:"getRawResourceCost",value:function(e){return this.getCostFromEventObject(e)}},{key:"getResourceCost",value:function(e){return this.getRawResourceCost(e)}}]),a}(c.c);u.resourceType=null,t.a=u},833:function(e,t,a){"use strict";var n=a(3),i=[n.a.MELEE.id,n.a.CHI_BURST_HEAL.id,n.a.REFRESHING_JADE_WIND_HEAL.id,n.a.SHADOWY_APPARITION.id,n.a.SHADOWY_APPARITION_CAST.id,n.a.PRIMAL_FURY.id,n.a.BLOW_DARKMOON_WHISTLE.id,n.a.DARKMOON_FIREWORK.id,n.a.BIG_RED_RAYS.id,n.a.FRACTURE_MAIN_HAND.id,n.a.FRACTURE_OFF_HAND.id,n.a.SOUL_FRAGMENT_KILLING_BLOW.id,n.a.MUTILATE_OFFHAND.id,n.a.DIVINE_HYMN_HEAL.id,n.a.CHARGE_2.id,n.a.CLOUDBURST_TOTEM_RECALL.id,n.a.SPIRITWALKERS_GRACE.id,n.a.CELESTIAL_GUIDANCE_CAST.id,n.a.SHADOWCORE_OIL_BLAST.id,n.a.SINFUL_REVELATION_PROC.id,n.a.BREATH_OF_SINDRAGOSA_TALENT_DAMAGE_TICK.id,n.a.RUNE_1.id,n.a.RUNE_2.id,n.a.RUNE_3.id,n.a.BARBED_SHOT_PET_BUFF.id,n.a.DIRE_BEAST_SUMMON.id,n.a.WILD_MARK.id,n.a.RESONATING_ARROW_DEBUFF.id,n.a.RESONATING_ARROW_DAMAGE.id,n.a.RUNE_OF_POWER_BUFF.id,n.a.COMBAT_MEDITATION_TRIGGER.id,n.a.COMBAT_MEDITATION_PICK_UP.id];t.a=i},834:function(e,t,a){"use strict";var n=a(31),i=a(8),r=a(9),s=a(10),o=a(11),c=a(0),l=a.n(c),u=a(788),d=a(33),h=a(892),f=a(210),m=a(847),b=a(1012),g=a(747),p=a(43),v=a(22),y=a(865),E=a(15),_=a(866),O=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._total=new _.a,n._byPet={},n.bySecond={},n.showStatistic=!0,n.addEventListener(E.f.damage.by(p.a),n.onByPlayerDamage),n.addEventListener(E.f.damage.by(p.b),n.onByPlayerPetDamage),n}return Object(r.a)(a,[{key:"byPet",value:function(e){return this._byPet[e]?this._byPet[e]:new _.a}},{key:"onByPlayerDamage",value:function(e){if(!e.targetIsFriendly){this._total=this._total.add(e.amount,e.absorbed,e.blocked,e.overkill);var t=Math.floor((e.timestamp-this.owner.fight.start_time)/1e3);this.bySecond[t]=(this.bySecond[t]||new _.a).add(e.amount,e.absorbed,e.blocked,e.overkill)}}},{key:"onByPlayerPetDamage",value:function(e){if(!e.targetIsFriendly){this._total=this._total.add(e.amount,e.absorbed,e.blocked,e.overkill);var t=e.sourceID;t&&(this._byPet[t]=this.byPet(t).add(e.amount,e.absorbed,e.blocked,e.overkill))}}},{key:"subStatistic",value:function(){var e=this;if(!this.showStatistic)return null;var t=Object.entries(this.bySecond).map((function(e){var t=Object(n.a)(e,2);return{time:t[0],val:t[1].effective}})),a=this.total.effective/this.owner.fightDuration*1e3,i=Object(f.a)(this.owner.report.code,{fight:this.owner.fightId,source:this.owner.playerId,type:"damage-done"});return l.a.createElement(m.a,{position:g.a.CORE(1),ultrawide:!0,large:!1,wide:!1,style:{marginBottom:20,overflow:"hidden"}},l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"flex-sub icon"},l.a.createElement("img",{src:"/img/sword.png",alt:"Damage"})),l.a.createElement(v.b,{content:l.a.createElement(l.a.Fragment,null,"Total damage done: ",l.a.createElement("strong",null,Object(d.f)(this.total.effective)))},l.a.createElement("div",{className:"flex-sub value",style:{width:190}},Object(d.f)(a)," DPS")),l.a.createElement("div",{className:"flex-sub",style:{width:110,textAlign:"center",padding:"10px 5px"}},l.a.createElement(b.b,{throughput:a,metric:"dps"},(function(t){var a=t.performance,n=t.topThroughput;return a&&a!==b.a&&l.a.createElement(v.b,{content:l.a.createElement(l.a.Fragment,null,"Your DPS compared to the DPS of a top 100 player. To become a top 100 ",l.a.createElement("span",{className:e.selectedCombatant.spec.className.replace(" ","")},e.selectedCombatant.spec.specName," ",e.selectedCombatant.spec.className)," on this fight you need to do at least ",l.a.createElement("strong",null,Object(d.f)(n||0)," DPS"),".")},l.a.createElement("div",{className:Object(h.a)(a),style:{cursor:"help"}},a>=1?"TOP 100":"".concat(Object(d.e)(a,0),"%")))}))),l.a.createElement("div",{className:"flex-main chart"},l.a.createElement("a",{href:i},a>0&&l.a.createElement(u.a,{disableWidth:!0},(function(a){var n=a.height;return l.a.createElement(y.a,{data:t,duration:e.owner.fightDuration/1e3,height:n})}))))))}},{key:"total",get:function(){return this._total}},{key:"totalByPets",get:function(){var e=this;return Object.keys(this._byPet).map((function(t){return e._byPet[parseInt(t)]})).reduce((function(e,t){return e.add(t.regular,t.absorbed,t.blocked,t.overkill)}),new _.a)}}]),a}(p.c);t.a=O},847:function(e,t,a){"use strict";var n=a(27),i=a(0),r=a.n(i);a(58),a(1011),a(1092);t.a=function(e){var t=e.children,a=(e.large,e.wide),i=e.ultrawide,s=Object(n.a)(e,["children","large","wide","ultrawide"]);return r.a.createElement("div",{className:i?"col-md-12":a?"col-md-6 col-sm-12 col-xs-12":"col-lg-3 col-md-4 col-sm-6 col-xs-12"},r.a.createElement("div",Object.assign({className:"panel statistic bar"},s),r.a.createElement("div",{className:"panel-body"},t)))}},857:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(0),c=a.n(o),l=a(17),u=a(33),d=a(43),h=a(164),f=a(30),m=a(13),b=a(15),g=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).deaths=[],i.resurrections=[],i.lastDeathTimestamp=0,i.lastResurrectionTimestamp=0,i._timeDead=0,i._didCast=!1,i.isAlive=!0,i.addEventListener(b.f.death.to(d.a),i.onDeath),i.addEventListener(b.f.resurrect.to(d.a),i.onResurrect),i.addEventListener(b.f.cast.by(d.a),i.onCast),i.addEventListener(b.f.begincast.by(d.a),i.onBeginCast),i.addEventListener(b.f.heal.to(d.a),i.onHealTaken),i.addEventListener(b.f.damage.to(d.a),i.onDamageTaken),i}return Object(i.a)(a,[{key:"die",value:function(e){this.lastDeathTimestamp=this.owner.currentTimestamp,this.isAlive=!1,this.deaths.push(e)}},{key:"resurrect",value:function(e){this.lastResurrectionTimestamp=this.owner.currentTimestamp,this._timeDead+=this.lastResurrectionTimestamp-this.lastDeathTimestamp,this.isAlive=!0,this.resurrections.push(e)}}]),Object(i.a)(a,[{key:"onDeath",value:function(e){this.die(e)}},{key:"onResurrect",value:function(e){this.resurrect(e)}},{key:"onCast",value:function(e){this._didCast=!0,this.isAlive||this.resurrect(e)}},{key:"onBeginCast",value:function(e){this.isAlive||this.resurrect(e)}},{key:"onHealTaken",value:function(e){this.isAlive||this.resurrect(e)}},{key:"onDamageTaken",value:function(e){this.isAlive||this.resurrect(e)}},{key:"suggestions",value:function(e){var t=this,a=this.owner.boss,n=this.owner.fight,i=this.owner.player,r=this.owner.report,s=a&&a.fight.disableDeathSuggestion,o=!n.kill&&this.totalTimeDead<15e3;s||o||e(this.timeDeadPercent).isGreaterThan(0).addSuggestion((function(e,a){return e(c.a.createElement(c.a.Fragment,null,"You died during this fight and were dead for ",Object(u.e)(a),"% of the fight duration (",Object(u.d)(t.totalTimeDead/1e3)," seconds). Dying has a significant performance cost. View the ",c.a.createElement(l.b,{to:Object(f.a)(r,n.id,i.id,"death-recap")},"Death Recap")," to see the damage taken and what defensives and potions were still available.")).icon("ability_fiegndead").actual(m.i18n._({id:"shared.suggestions.deathTracker.deathTime",defaults:"You were dead for {0}% of the fight",values:{0:Object(u.e)(a)}})).recommended("0% is recommended").major(t.deathSuggestionThresholds.isGreaterThan.major)})),e(this._didCast).isFalse().addSuggestion((function(e){return e("You did not cast a single spell this fight. You were either dead for the entire fight, or were AFK.").icon("ability_fiegndead").major(t.deathSuggestionThresholds.isGreaterThan.major)}))}},{key:"totalTimeDead",get:function(){return this._timeDead+(this.isAlive?0:this.owner.currentTimestamp-this.lastDeathTimestamp)}},{key:"timeDeadPercent",get:function(){return this.totalTimeDead/this.owner.fightDuration}},{key:"deathSuggestionThresholds",get:function(){return{actual:this.timeDeadPercent,isGreaterThan:{major:0},style:h.a.PERCENTAGE}}}]),a}(d.c);t.a=g},858:function(e,t,a){},865:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),i=a.n(n),r=a(953);function s(e){if(0===e.data.length)return null;var t=e.x||"time",a=e.y||"val",n={mark:{type:"area",line:{color:"#fab700",strokeWidth:1},color:"rgba(250, 183, 0, 0.15)"},transform:[{calculate:"max(datum.".concat(a,", 0)"),as:a},{impute:a,key:t,keyvals:{start:0,stop:e.duration?Math.ceil(e.duration):Math.max.apply(null,e.data.map((function(e){return e[t]})))},method:"value",value:0},{window:[{op:"mean",field:a,as:"sum_val"}],sort:[{field:t,order:"ascending"}],frame:[-3,3]}],encoding:{x:{field:t,type:"quantitative",axis:null,scale:{nice:!1}},y:{field:"sum_val",type:"quantitative",axis:null}},config:{padding:{left:0,top:0,right:-5,bottom:-2}}};return i.a.createElement(r.a,{spec:n,data:e.data,config:e.config,height:e.height})}},866:function(e,t,a){"use strict";var n=a(8),i=a(9),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(n.a)(this,e),this._largestHit=0,this._regular=0,this._absorbed=0,this._blocked=0,this._overkill=0,this._regular=t,this._absorbed=a,this._blocked=i,this._overkill=r,this._largestHit=null===s?t+a+r:s}return Object(i.a)(e,[{key:"regular",get:function(){return this._regular}},{key:"absorbed",get:function(){return this._absorbed}},{key:"blocked",get:function(){return this._blocked}},{key:"effective",get:function(){return this.regular+this.absorbed}},{key:"overkill",get:function(){return this._overkill}},{key:"raw",get:function(){return this.effective+this.overkill}},{key:"largestHit",get:function(){return this._largestHit}}]),Object(i.a)(e,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new this.constructor(this.regular+e,this.absorbed+t,this.blocked+a,this.overkill+n,Math.max(this.largestHit,e+t+a+n))}},{key:"subtract",value:function(e,t,a,n){return new this.constructor(this.regular-e,this.absorbed-t,this.blocked-a,this.overkill-n,this.largestHit)}}]),e}();t.a=r},867:function(e,t,a){"use strict";var n=a(31),i=a(8),r=a(9),s=a(10),o=a(11),c=a(0),l=a.n(c),u=a(788),d=a(33),h=a(3),f=a(210),m=a(826),b=a(892),g=a(847),p=a(747),v=a(43),y=a(22),E=a(865),_=a(15),O=a(866),T=[h.a.SPIRIT_LINK_TOTEM_REDISTRIBUTE.id],A=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._total=new O.a,n.bySecond={},n._byAbility={},n._byMagicSchool={},n.showStatistic=!0,n.addEventListener(_.f.damage.to(v.a),n.onToPlayerDamage),n}return Object(r.a)(a,[{key:"byAbility",value:function(e){return this._byAbility[e]?this._byAbility[e]:new O.a}},{key:"byMagicSchool",value:function(e){return this._byMagicSchool[e]?this._byMagicSchool[e]:new O.a}},{key:"onToPlayerDamage",value:function(e){this._addDamage(e,e.amount,e.absorbed,e.blocked,e.overkill)}},{key:"_addDamage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.ability,s=r.guid;if(!T.includes(s)){this._total=this._total.add(t,a,n,i),this._byAbility[s]?this._byAbility[s]=this._byAbility[s].add(t,a,n,i):this._byAbility[s]=new O.a(t,a,n,i);var o=r.type;this._byMagicSchool[o]?this._byMagicSchool[o]=this._byMagicSchool[o].add(t,a,n,i):this._byMagicSchool[o]=new O.a(t,a,n,i);var c=Math.floor((e.timestamp-this.owner.fight.start_time)/1e3);this.bySecond[c]=(this.bySecond[c]||new O.a).add(t,a,n,i)}}},{key:"_subtractDamage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.ability;return this._addDamage(e,-t,-a,-n,-i,r)}},{key:"subStatistic",value:function(){var e=this;if(!this.showStatistic)return null;var t=Object.entries(this.bySecond).map((function(e){var t=Object(n.a)(e,2);return{time:t[0],val:t[1].effective}})),a=this.total.effective/this.owner.fightDuration*1e3,i=Object(f.a)(this.owner.report.code,{fight:this.owner.fightId,source:this.owner.playerId,type:"damage-taken"});return l.a.createElement(g.a,{position:p.a.CORE(3),ultrawide:!0,wide:!1,large:!1,style:{marginBottom:0,overflow:"hidden"}},l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"flex-sub icon"},l.a.createElement("img",{src:"/img/shield.png",alt:"Damage taken"})),l.a.createElement(y.b,{content:this.tooltip},l.a.createElement("div",{className:"flex-sub value",style:{width:190}},Object(d.f)(a)," DTPS")),l.a.createElement("div",{className:"flex-sub ".concat(Object(b.a)(0)),style:{width:110,textAlign:"center"}},"-"),l.a.createElement("div",{className:"flex-main chart"},l.a.createElement("a",{href:i},a>0&&l.a.createElement(u.a,{disableWidth:!0},(function(a){var n=a.height;return l.a.createElement(E.a,{data:t,duration:e.owner.fightDuration/1e3,height:n})}))))))}},{key:"total",get:function(){return this._total}},{key:"tooltip",get:function(){var e=this,t=this._byMagicSchool[m.a.ids.PHYSICAL]?this._byMagicSchool[m.a.ids.PHYSICAL].effective:0,a=this.total.effective-t;return l.a.createElement(l.a.Fragment,null,l.a.createElement("strong",null,"Damage taken by type:"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,"Physical"),": ",Object(d.f)(t)," (",Object(d.e)(t/this.total.effective),"%)"),l.a.createElement("li",null,l.a.createElement("strong",null,"Magic"),": ",Object(d.f)(a)," (",Object(d.e)(a/this.total.effective),"%)")),l.a.createElement("br",null),l.a.createElement("strong",null,"Damage taken by magic school:"),l.a.createElement("ul",null,Object.keys(this._byMagicSchool).map(Number).filter((function(t){return 0!==e._byMagicSchool[t].effective})).map((function(t){return l.a.createElement("li",{key:t},l.a.createElement("strong",null,m.a.names[t]||"Unknown"),": ",Object(d.f)(e._byMagicSchool[t].effective)," (",Object(d.e)(e._byMagicSchool[t].effective/e.total.effective),"%)")}))))}}]),a}(v.c);t.a=A},877:function(e,t,a){"use strict";var n=a(7),i=a(8),r=a(9),s=a(120),o=a(66),c=a(10),l=a(11),u=a(3),d=a(88),h=a(832),f=a(15),m=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).incorrectCosts={},n.addEventListener(f.f.fightend,n.onFightend),n}return Object(r.a)(a,[{key:"getHardcodedManaCost",value:function(e){var t=e.ability.guid,a=u.a[t];return a&&a.manaCost?a.manaCost:null}},{key:"getRawResourceCost",value:function(e){var t=this.getHardcodedManaCost(e),a=this.getCostFromEventObject(e);return null!==t&&a&&t!==a&&(this.incorrectCosts[e.ability.guid]=Object(n.a)(Object(n.a)({},u.a[e.ability.guid]),{},{manaCost:void 0,actualCost:a,hardcodedCost:t})),null!==t?t:a}},{key:"getResourceCost",value:function(e){var t=Object(s.a)(Object(o.a)(a.prototype),"getResourceCost",this).call(this,e);return t&&0!==t?this.selectedCombatant.hasBuff(u.a.INNERVATE.id,e.timestamp)?0:t:0}},{key:"onFightend",value:function(){var e=Object.keys(this.incorrectCosts).length;0!==e&&(console.warn("There were ".concat(e," abilities that did not match their expected cost, see below for suggested values.")),Object.values(this.incorrectCosts).forEach((function(e){return console.warn(e)})))}}]),a}(h.a);m.resourceType=d.a.MANA,t.a=m},880:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=function(e){var t=Object.assign({},e);return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",className:"icon"},t),i.a.createElement("path",{d:"M58.9,82.9h7v12.9H34.1V82.9h7.1V45.5h-0.6c-3.6,0-6.4-2.9-6.4-6.4c0-3.6,2.9-6.4,6.4-6.4h0.6h17.4h0.3V82.9z M49,25.8  c6,0,10.8-4.8,10.8-10.8C59.8,9,55,4.2,49,4.2S38.2,9,38.2,15C38.2,21,43,25.8,49,25.8z"}))}},892:function(e,t,a){"use strict";function n(e){return e<.25?"parse-grey":e<.5?"parse-green":e<.75?"parse-blue":e<.95?"parse-purple":e<1?"parse-orange":e>=1?"parse-artifact":"parse-none"}a.d(t,"a",(function(){return n}))},895:function(e,t,a){"use strict";var n=a(3),i=[n.a.FIRE_BLAST.id,n.a.SHIMMER_TALENT.id,n.a.ICE_FLOES_TALENT.id,n.a.COMBUSTION.id,n.a.SEARING_NIGHTMARE_TALENT.id];t.a=i},933:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(43),c=a(753),l=a(814),u=a(15),d=a(754),h=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).spellUsable=void 0,i.abilities=void 0,i.channeling=void 0,i.historyBySpellId={},i.addEventListener(u.f.begincast.by(o.a),i.append),i.addEventListener(u.f.cast.by(o.a),i.append),i.addEventListener(u.f.BeginChannel.by(o.a),i.append),i.addEventListener(u.f.EndChannel.by(o.a),i.append),i.addEventListener(u.f.applybuff.by(o.a),i.append),i.addEventListener(u.f.removebuff.by(o.a),i.append),i.addEventListener(u.f.UpdateSpellUsable.by(o.a),i.append),i}return Object(i.a)(a,[{key:"getAbility",value:function(e){var t=this.abilities.getAbility(e);if(!t)return null;var a=t.primarySpell.id;return this.historyBySpellId[a]||(this.historyBySpellId[a]=[]),this.historyBySpellId[a]}},{key:"append",value:function(e){var t=e.ability.guid,a=this.getAbility(t);a&&e.timestamp>this.owner.fight.start_time&&a.push(e)}}]),a}(o.c);h.dependencies={spellUsable:d.b,abilities:c.a,channeling:l.a},t.a=h},948:function(e,t,a){"use strict";var n=a(7),i=a(8),r=a(9),s=a(10),o=a(11),c=a(43),l=a(123),u=a(15),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).eventEmitter=void 0,n.addEventListener(u.f.applybuff,n.applyBuff),n.addEventListener(u.f.applydebuff,n.applyBuff),n.addEventListener(u.f.removebuff,n.removeBuff),n.addEventListener(u.f.removedebuff,n.removeBuff),n.addEventListener(u.f.applybuffstack,n.updateBuffStack),n.addEventListener(u.f.applydebuffstack,n.updateBuffStack),n.addEventListener(u.f.removebuffstack,n.updateBuffStack),n.addEventListener(u.f.removedebuffstack,n.updateBuffStack),n}return Object(r.a)(a,[{key:"applyBuff",value:function(e){if(this.owner.byPlayer(e)||this.owner.toPlayer(e)||this.owner.byPlayerPet(e)||this.owner.toPlayerPet(e)){var t=this.getEntity(e);if(t){var a=e.type===u.b.ApplyDebuff,i=Object(n.a)(Object(n.a)({},e),{},{start:e.timestamp,end:null,isDebuff:a,stacks:1});this._triggerChangeBuffStack(i,e.timestamp,0,1),e.prepull&&e.__fromCombatantinfo||t.applyBuff(i)}}}},{key:"updateBuffStack",value:function(e){if(this.owner.byPlayer(e)||this.owner.toPlayer(e)||this.owner.byPlayerPet(e)||this.owner.toPlayerPet(e)){var t=this.getEntity(e);if(t){var a=t.buffs.find((function(t){return t.ability.guid===e.ability.guid&&null===t.end&&e.sourceID===t.sourceID}));if(a){var n=a.stacks||1;a.stacks=e.stack,a.stackHistory.push({stacks:e.stack,timestamp:e.timestamp}),this._triggerChangeBuffStack(a,e.timestamp,n,a.stacks)}else console.error("Buff stack updated while active buff wasn't known. Was this buff applied pre-combat? Maybe we should register the buff with start time as fight start when this happens, but it might also be a basic case of erroneous combatlog ordering.")}}}},{key:"removeBuff",value:function(e){if(this.owner.byPlayer(e)||this.owner.toPlayer(e)||this.owner.byPlayerPet(e)||this.owner.toPlayerPet(e)){var t=this.getEntity(e);if(t){var a=t.buffs.find((function(t){return t.ability.guid===e.ability.guid&&null===t.end&&e.sourceID===t.sourceID}));if(a)a.end=e.timestamp,a.stackHistory.push({stacks:0,timestamp:e.timestamp}),this._triggerChangeBuffStack(a,e.timestamp,a.stacks,0);else{var i=e.type===u.b.RemoveDebuff,r=Object(n.a)(Object(n.a)({},e),{},{start:this.owner.fight.start_time,end:e.timestamp,stackHistory:[{stacks:1,timestamp:this.owner.fight.start_time},{stacks:0,timestamp:e.timestamp}],isDebuff:i,stacks:0});t.buffs.push(r),this._triggerChangeBuffStack(r,e.timestamp,1,0)}}}}},{key:"_triggerChangeBuffStack",value:function(e,t,a,i){this.eventEmitter.fabricateEvent(Object(n.a)(Object(n.a)({},e),{},{type:e.isDebuff?u.b.ChangeDebuffStack:u.b.ChangeBuffStack,timestamp:t,oldStacks:a,newStacks:i,stacksGained:i-a,stack:void 0}),e)}},{key:"getBuffUptime",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.owner.playerId,n=[],i=this.getEntities();Object.values(i).forEach((function(i){i.getBuffHistory(e,a).forEach((function(e){n.push({timestamp:e.start,type:"apply",buff:e}),n.push({timestamp:null!==e.end?e.end:t.owner.currentTimestamp,type:"remove",buff:e})}))}));var r,s=0;return n.sort((function(e,t){return e.timestamp-t.timestamp})).reduce((function(e,t){return"apply"===t.type&&(0===s&&(r=t.timestamp),s+=1),"remove"===t.type&&0===(s-=1)&&(e+=t.timestamp-r),e}),0)}}]),a}(c.c);d.dependencies={eventEmitter:l.a},t.a=d},953:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(7),i=a(0),r=a.n(i),s=a(788),o=a(779);function c(e){var t=Object(n.a)(Object(n.a)({},e.spec),{},{data:{name:"default_data"}}),a=e.height||75;return r.a.createElement("div",{style:{width:"100%",height:a}},r.a.createElement(s.a,{disableHeight:!0},(function(n){var i=n.width;return i>0?r.a.createElement(o.a,{width:i,height:a,data:{default_data:e.data},config:e.config||o.b,spec:t}):null})))}a.d(t,"b",(function(){return o.c}))},963:function(e,t,a){"use strict";var n=a(7),i=a(27),r=a(0),s=a.n(r);a(58);t.a=function(e){var t=e.children,a=(e.large,e.wide),r=e.style,o=Object(i.a)(e,["children","large","wide","style"]);return s.a.createElement("div",Object.assign({className:a?"col-md-6 col-sm-12 col-xs-12":"col-lg-3 col-md-4 col-sm-6 col-xs-12",style:Object(n.a)({padding:0},r)},o),t)}},964:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(43),c=a(15),l=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._lastDeathTimestamp=null,i._isAlive=!0,i._deathHistory=[],i.addEventListener(c.f.fightend,i.onFightend),i.addEventListener(c.f.death.to(o.a),i.onDeath),i.addEventListener(c.f.resurrect.to(o.a),i.onResurrect),i.addEventListener(c.f.cast.by(o.a),i.onCast),i.addEventListener(c.f.begincast.by(o.a),i.onBeginCast),i}return Object(i.a)(a,[{key:"totalDowntime",get:function(){return this._deathHistory.reduce((function(e,t){return e+t.duration}),0)}},{key:"downtimeHistory",get:function(){return this._deathHistory}}]),Object(i.a)(a,[{key:"die",value:function(e){this._isAlive?(this._lastDeathTimestamp=e.timestamp,this._isAlive=!1):console.warn("Player died while already dead.",e)}},{key:"resurrect",value:function(e){this._deathHistory.push({from:this._lastDeathTimestamp,until:e,duration:e-this._lastDeathTimestamp}),this._lastDeathTimestamp=null,this._isAlive=!0}},{key:"onFightend",value:function(){this._isAlive||this.resurrect(this.owner.currentTimestamp)}},{key:"onDeath",value:function(e){this.die(e)}},{key:"onResurrect",value:function(e){this.resurrect(e.timestamp)}},{key:"onCast",value:function(e){this._isAlive||(console.warn("Player magically resurrected",e),this.resurrect(e.timestamp))}},{key:"onBeginCast",value:function(e){this._isAlive||(console.warn("Player magically resurrected",e),this.resurrect(e.timestamp))}}]),a}(o.c);t.a=l},965:function(e,t,a){"use strict";var n=a(31),i=a(8),r=a(9),s=a(10),o=a(11),c=a(6),l=a(0),u=a.n(l),d=a(33),h=a(746),f=a(747),m=a(43),b=a(15),g=a(865),p=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).lastPosition=null,n.lastPositionChange=null,n.totalDistanceMoved=0,n.timeSpentMoving=0,n.bySecond=new Map,n.addEventListener(b.f.cast.by(m.a),n.updatePlayerPosition),n.addEventListener(b.f.damage.to(m.a),n.updatePlayerPosition),n.addEventListener(b.f.energize.to(m.a),n.updatePlayerPosition),n.addEventListener(b.f.heal.to(m.a),n.updatePlayerPosition),n}return Object(r.a)(a,[{key:"timeSinceLastMovement",value:function(){return this.lastPositionChange?this.owner.currentTimestamp-this.lastPositionChange.timestamp:null}},{key:"calculateDistance",value:function(e,t,a,n){return Math.sqrt((e-a)*(e-a)+(t-n)*(t-n))/100}},{key:"updateTotalDistance",value:function(e){if(this.lastPosition){var t=this.calculateDistance(this.lastPosition.x,this.lastPosition.y,e.x,e.y);if(0!==t){this.timeSpentMoving+=e.timestamp-this.lastPosition.timestamp,this.totalDistanceMoved+=t;var a=Math.floor((e.timestamp-this.owner.fight.start_time)/1e3);this.bySecond.set(a,(this.bySecond.get(a)||0)+t)}}}},{key:"updatePlayerPosition",value:function(e){if(e.x&&e.y){var t={x:e.x,y:e.y,timestamp:e.timestamp};this.updateTotalDistance(t),this.lastPositionChange&&this.lastPositionChange.x===t.x&&this.lastPositionChange.y===t.y||(this.lastPositionChange=t),this.lastPosition=t}}},{key:"statistic",value:function(){var e=Array.from(this.bySecond,(function(e){var t=Object(n.a)(e,2);return{time:t[0],val:t[1]}}));return u.a.createElement(h.a,{position:f.a.UNIMPORTANT(),tooltip:u.a.createElement(c.Trans,{id:"shared.distanceMoved.statistic.tooltip",values:{0:Object(d.f)(this.timeSpentMoving/1e3),1:Object(d.f)(this.totalDistanceMoved),2:Object(d.f)(this.totalDistanceMoved/(this.owner.fightDuration/1e3)*60)},components:[u.a.createElement("br",null),u.a.createElement("br",null)]})},u.a.createElement("div",{className:"pad"},u.a.createElement("label",null,u.a.createElement(c.Trans,{id:"shared.distanceMoved.statistic.label"})),u.a.createElement("div",{className:"value"},"\u2248 ",Object(d.f)(this.totalDistanceMoved)," yards",u.a.createElement("small",{style:{marginLeft:15}},"\u2248 ",Object(d.e)(this.timeSpentMoving/this.owner.fightDuration),"%")),u.a.createElement("div",{style:{position:"absolute",bottom:0,left:0,right:0,width:"100%",height:"45%"}},u.a.createElement(g.a,{data:e,duration:this.owner.fightDuration/1e3}))))}}]),a}(m.c);t.a=p}}]);
//# sourceMappingURL=1.d6ae2c1c.chunk.js.map