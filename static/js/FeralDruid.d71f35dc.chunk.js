(this.webpackJsonpwowanalyzer=this.webpackJsonpwowanalyzer||[]).push([[26],{717:function(e,t,a){"use strict";a.r(t);var n=a(8),i=a(10),r=a(11),s=a(776),o=a(9),l=a(3),c=a(768),u=a(15),d=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"normalize",value:function(e){for(var t=[],a=0;a<e.length;a+=1){var n=e[a];if(t.push(n),n.type===u.b.Cast&&n.ability.guid===l.a.RAKE.id)for(var i=a;i>=0;i-=1){var r=t[i];if(n.timestamp-r.timestamp>100)break;if((r.type===u.b.ApplyDebuff||r.type===u.b.RefreshDebuff)&&r.ability.guid===l.a.RAKE_BLEED.id&&r.targetID===n.targetID&&r.targetInstance===n.targetInstance&&r.sourceID===n.sourceID){t.splice(i,1),t.push(r),r.timestamp=n.timestamp,r.__modified=!0;break}}}return t}}]),a}(c.a),h=a(88),m=a(766),g=[l.a.THRASH_FERAL.id,l.a.SWIPE_CAT.id,l.a.BRUTAL_SLASH_TALENT.id],f=[m.a.MISS,m.a.DODGE,m.a.PARRY,m.a.IMMUNE],E=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).playerId=null,i.playerId=i.owner?i.owner.playerId:null,i}return Object(o.a)(a,[{key:"normalize",value:function(e){var t=this,a=[],n=0,i=null,r=null,s=null,o=0;return e.forEach((function(e){var l=t.getResource(e,h.a.COMBO_POINTS.id);if(e.type===u.b.Energize&&e.targetID===t.playerId&&e.resourceChangeType===h.a.COMBO_POINTS.id&&(n=Math.min(5,n+(e.resourceChange-e.waste))),e.type===u.b.Cast&&e.sourceID===t.playerId&&l&&l.cost&&(n=0),e.type===u.b.Cast&&e.sourceID===t.playerId&&g.includes(e.ability.guid)&&(i=e,r=o,s=n),e.type===u.b.Energize&&e.sourceID===t.playerId&&e.resourceChangeType===h.a.COMBO_POINTS.id&&g.includes(e.ability.guid)&&!e.__fabricated&&i&&i.ability.guid===e.ability.guid&&e.timestamp-i.timestamp<100&&(i=null),e.type===u.b.Damage&&e.sourceID===t.playerId&&i&&i.ability.guid===e.ability.guid&&e.timestamp-i.timestamp<250&&!e.tick&&!f.includes(e.hitType)){var c={__fabricated:!0,type:u.b.Energize,timestamp:i.timestamp,ability:i.ability,sourceID:t.playerId,sourceIsFriendly:!0,targetID:t.playerId,targetIsFriendly:!0,resourceChangeType:h.a.COMBO_POINTS.id,resourceChange:1,waste:5===s?1:0};n=Math.min(5,n+(c.resourceChange-c.waste)),a.splice(r+1,0,c),o+=1,i=null}a.push(e),o+=1})),a}},{key:"getResource",value:function(e,t){return e&&e.classResources?e.classResources.find((function(e){return e.type===t})):null}}]),a}(c.a),p=[{cast:l.a.RIP,debuff:l.a.RIP},{cast:l.a.RAKE,debuff:l.a.RAKE_BLEED},{cast:l.a.MOONFIRE_FERAL,debuff:l.a.MOONFIRE_BEAR},{cast:l.a.THRASH_FERAL,debuff:l.a.THRASH_FERAL,multipleDebuffs:!0},{cast:l.a.PRIMAL_WRATH_TALENT,debuff:l.a.RIP,multipleDebuffs:!0}],T=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"normalize",value:function(e){for(var t=[],a=function(a){var n=e[a];if(t.push(n),n.type!==u.b.Cast)return"continue";var i=p.find((function(e){return e.cast.id===n.ability.guid}));if(!i)return"continue";n.__modified=!0,n.debuffEvents=[];for(var r=a;r<e.length;r+=1){var s=e[r];if(s.timestamp>n.timestamp+300)break;if((s.type===u.b.ApplyDebuff||s.type===u.b.RefreshDebuff)&&(s.ability.guid===i.debuff.id&&(n.debuffEvents.push(s),!i.multipleDebuffs)))break}},n=0;n<e.length;n+=1)a(n);return t}}]),a}(c.a),y=a(753),b=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"spellbook",value:function(){var e=this.selectedCombatant;return[{spell:l.a.SHRED,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{static:1e3},timelineSortIndex:1,primaryCoefficient:.380562},{spell:l.a.RAKE,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{static:1e3},timelineSortIndex:2,primaryCoefficient:.1822},{spell:l.a.RIP,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{static:1e3},timelineSortIndex:5,primaryCoefficient:.125},{spell:l.a.FEROCIOUS_BITE,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{static:1e3},timelineSortIndex:6},{spell:l.a.SAVAGE_ROAR_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,enabled:e.hasTalent(l.a.SAVAGE_ROAR_TALENT.id),gcd:{static:1e3},timelineSortIndex:7},{spell:l.a.MOONFIRE_FERAL,category:a.SPELL_CATEGORIES.ROTATIONAL,enabled:e.hasTalent(l.a.LUNAR_INSPIRATION_TALENT.id),gcd:{base:1e3},timelineSortIndex:3,primaryCoefficient:.15},{spell:l.a.THRASH_FERAL,category:a.SPELL_CATEGORIES.ROTATIONAL_AOE,gcd:{static:1e3},timelineSortIndex:10,primaryCoefficient:.055},{spell:l.a.PRIMAL_WRATH_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL_AOE,enabled:e.hasTalent(l.a.PRIMAL_WRATH_TALENT.id),gcd:{static:1e3},timelineSortIndex:5},{spell:l.a.SWIPE_CAT,category:a.SPELL_CATEGORIES.ROTATIONAL_AOE,enabled:!e.hasTalent(l.a.BRUTAL_SLASH_TALENT.id),gcd:{static:1e3},timelineSortIndex:11,primaryCoefficient:.25},{spell:l.a.BRUTAL_SLASH_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,enabled:e.hasTalent(l.a.BRUTAL_SLASH_TALENT.id),cooldown:function(e){return 8/(1+e)},charges:3,castEfficiency:{suggestion:!0},gcd:{static:1e3},timelineSortIndex:11,primaryCoefficient:.69},{spell:l.a.SWIPE_BEAR,category:a.SPELL_CATEGORIES.ROTATIONAL_AOE,enabled:!e.hasTalent(l.a.BRUTAL_SLASH_TALENT.id),gcd:{base:1500},timelineSortIndex:11,primaryCoefficient:.3},{spell:l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,enabled:e.hasTalent(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id),castEfficiency:{suggestion:!0,recommendedEfficiency:.9},gcd:{base:1e3},timelineSortIndex:22},{spell:l.a.BERSERK,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,enabled:!e.hasTalent(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id),castEfficiency:{suggestion:!0,recommendedEfficiency:.9},gcd:{static:1e3},timelineSortIndex:22},{spell:l.a.TIGERS_FURY,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:30,castEfficiency:{suggestion:!0,recommendedEfficiency:e.hasTalent(l.a.PREDATOR_TALENT.id)?.5:.8},gcd:null,timelineSortIndex:20},{spell:l.a.FERAL_FRENZY_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,enabled:e.hasTalent(l.a.FERAL_FRENZY_TALENT.id),cooldown:45,castEfficiency:{suggestion:!0},gcd:{static:1e3},timelineSortIndex:21},{spell:l.a.REGROWTH,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:function(e){return e.hasBuff(l.a.CAT_FORM.id)?1e3:1500}},timelineSortIndex:30},{spell:l.a.ENTANGLING_ROOTS,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:function(e){return e.hasBuff(l.a.CAT_FORM.id)?1e3:1500}},timelineSortIndex:31},{spell:l.a.MAIM,category:a.SPELL_CATEGORIES.UTILITY,cooldown:20,gcd:{static:1e3},timelineSortIndex:32,primaryCoefficient:.092},{spell:l.a.DASH,category:a.SPELL_CATEGORIES.UTILITY,enabled:!e.hasTalent(l.a.TIGER_DASH_TALENT.id),cooldown:120,gcd:function(e){return e.hasBuff(l.a.CAT_FORM.id)?null:{static:1500}},isDefensive:!0,timelineSortIndex:43},{spell:l.a.TIGER_DASH_TALENT,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(l.a.TIGER_DASH_TALENT.id),cooldown:45,gcd:function(e){return e.hasBuff(l.a.CAT_FORM.id)?null:{static:1500}},isDefensive:!0,timelineSortIndex:43},{spell:[l.a.STAMPEDING_ROAR_HUMANOID,l.a.STAMPEDING_ROAR_CAT,l.a.STAMPEDING_ROAR_BEAR],category:a.SPELL_CATEGORIES.UTILITY,cooldown:120,gcd:function(e){return e.hasBuff(l.a.CAT_FORM.id)?{base:1e3}:e.hasBuff(l.a.BEAR_FORM.id)?{base:1500}:{static:1500}},isDefensive:!0,timelineSortIndex:44},{spell:[l.a.SKULL_BASH,l.a.SKULL_BASH_FERAL],category:a.SPELL_CATEGORIES.UTILITY,gcd:null,cooldown:15,timelineSortIndex:33},{spell:[l.a.PROWL,l.a.PROWL_INCARNATION],category:a.SPELL_CATEGORIES.UTILITY,gcd:null,timelineSortIndex:25},{spell:l.a.SHADOWMELD,category:a.SPELL_CATEGORIES.UTILITY,cooldown:120,isUndetectable:!0,gcd:null,timelineSortIndex:24},{spell:l.a.SURVIVAL_INSTINCTS,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:120,charges:2,gcd:null,isDefensive:!0,timelineSortIndex:40},{spell:l.a.REBIRTH,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},timelineSortIndex:60},{spell:l.a.MIGHTY_BASH_TALENT,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(l.a.MIGHTY_BASH_TALENT.id),cooldown:50,gcd:{base:1500},timelineSortIndex:34},{spell:l.a.MASS_ENTANGLEMENT_TALENT,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(l.a.MASS_ENTANGLEMENT_TALENT.id),cooldown:30,gcd:{base:1500},timelineSortIndex:34},{spell:l.a.TYPHOON,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(l.a.TYPHOON_TALENT.id),cooldown:30,gcd:{base:1500},timelineSortIndex:35},{spell:l.a.HIBERNATE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},timelineSortIndex:36},{spell:l.a.SOOTHE,category:a.SPELL_CATEGORIES.UTILITY,cooldown:10,gcd:{base:1500},timelineSortIndex:37},{spell:l.a.RENEWAL_TALENT,category:a.SPELL_CATEGORIES.DEFENSIVE,enabled:e.hasTalent(l.a.RENEWAL_TALENT.id),cooldown:90,gcd:null,isDefensive:!0,timelineSortIndex:42},{spell:[l.a.WILD_CHARGE_TALENT,l.a.WILD_CHARGE_MOONKIN,l.a.WILD_CHARGE_CAT,l.a.WILD_CHARGE_BEAR,l.a.WILD_CHARGE_TRAVEL],category:a.SPELL_CATEGORIES.UTILITY,cooldown:15,enabled:e.hasTalent(l.a.WILD_CHARGE_TALENT.id),gcd:null,timelineSortIndex:42},{spell:l.a.BEAR_FORM,category:a.SPELL_CATEGORIES.DEFENSIVE,gcd:{base:1500},isDefensive:!0,timelineSortIndex:51},{spell:l.a.CAT_FORM,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},timelineSortIndex:50},{spell:l.a.MOONKIN_FORM_AFFINITY,category:a.SPELL_CATEGORIES.UTILITY,cooldown:90,enabled:e.hasTalent(l.a.BALANCE_AFFINITY_TALENT_SHARED.id),gcd:{base:1500},timelineSortIndex:54},{spell:l.a.TRAVEL_FORM,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},timelineSortIndex:52},{spell:l.a.STAG_FORM,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},timelineSortIndex:53},{spell:l.a.GROWL,category:a.SPELL_CATEGORIES.UTILITY,gcd:null,cooldown:8},{spell:l.a.MANGLE_BEAR,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500},cooldown:function(e){return 6/(1+e)}},{spell:l.a.THRASH_BEAR,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500},cooldown:function(e){return 6/(1+e)}},{spell:l.a.MOONFIRE,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500}},{spell:l.a.REMOVE_CORRUPTION,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:l.a.REVIVE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:l.a.LUNAR_STRIKE_AFFINITY,category:a.SPELL_CATEGORIES.OTHERS,enabled:e.hasTalent(l.a.BALANCE_AFFINITY_TALENT_SHARED.id),gcd:{base:1500}},{spell:l.a.SOLAR_WRATH_AFFINITY,category:a.SPELL_CATEGORIES.OTHERS,enabled:e.hasTalent(l.a.BALANCE_AFFINITY_TALENT_SHARED.id),gcd:{base:1500}},{spell:l.a.STARSURGE_AFFINITY,category:a.SPELL_CATEGORIES.OTHERS,enabled:e.hasTalent(l.a.BALANCE_AFFINITY_TALENT_SHARED.id),gcd:{base:1500},cooldown:10},{spell:l.a.SUNFIRE_AFFINITY,category:a.SPELL_CATEGORIES.OTHERS,enabled:e.hasTalent(l.a.BALANCE_AFFINITY_TALENT_SHARED.id),gcd:{base:1500}},{spell:l.a.FLAP,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(l.a.BALANCE_AFFINITY_TALENT_SHARED.id),gcd:{static:500}},{spell:l.a.IRONFUR,category:a.SPELL_CATEGORIES.DEFENSIVE,enabled:e.hasTalent(l.a.GUARDIAN_AFFINITY_TALENT_FERAL.id),gcd:null,cooldown:.5},{spell:l.a.FRENZIED_REGENERATION,category:a.SPELL_CATEGORIES.DEFENSIVE,enabled:e.hasTalent(l.a.GUARDIAN_AFFINITY_TALENT_FERAL.id),gcd:{base:1500},cooldown:function(e){return 36/(1+e)}},{spell:l.a.REJUVENATION,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(l.a.RESTORATION_AFFINITY_TALENT.id),gcd:{base:1500}},{spell:l.a.SWIFTMEND,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(l.a.RESTORATION_AFFINITY_TALENT.id),gcd:{base:1500},cooldown:25},{spell:l.a.WILD_GROWTH,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(l.a.RESTORATION_AFFINITY_TALENT.id),gcd:{base:1500},cooldown:20},{spell:l.a.TREANT_FORM,category:a.SPELL_CATEGORIES.OTHERS,gcd:{static:1500}},{spell:l.a.CHARM_WOODLAND_CREATURE,category:a.SPELL_CATEGORIES.OTHERS,gcd:null},{spell:l.a.TELEPORT_MOONGLADE,category:a.SPELL_CATEGORIES.OTHERS,gcd:{base:1500}},{spell:l.a.TELEPORT_DREAMWALK,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500},cooldown:60}]}}]),a}(y.a),R=a(797),A=a(810),O=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"buffs",value:function(){var e=this.selectedCombatant;return[{spellId:l.a.BLOODTALONS_BUFF.id,enabled:e.hasTalent(l.a.BLOODTALONS_TALENT),triggeredBySpellId:[l.a.REGROWTH.id,l.a.ENTANGLING_ROOTS.id],timelineHighlight:!0},{spellId:l.a.PREDATORY_SWIFTNESS.id,timelineHighlight:e.hasTalent(l.a.BLOODTALONS_TALENT)},{spellId:l.a.SAVAGE_ROAR_TALENT.id,triggeredBySpellId:l.a.SAVAGE_ROAR_TALENT.id,enabled:e.hasTalent(l.a.SAVAGE_ROAR_TALENT),timelineHighlight:!0},{spellId:l.a.SURVIVAL_INSTINCTS.id,triggeredBySpellId:l.a.SURVIVAL_INSTINCTS.id,timelineHighlight:!0},{spellId:l.a.BEAR_FORM.id,triggeredBySpellId:l.a.BEAR_FORM.id,timelineHighlight:!0},{spellId:[l.a.PROWL.id,l.a.PROWL_INCARNATION.id],timelineHighlight:!0},{spellId:l.a.SHADOWMELD.id,triggeredBySpellId:l.a.SHADOWMELD.id,timelineHighlight:!0},{spellId:l.a.TIGERS_FURY.id,triggeredBySpellId:l.a.TIGERS_FURY.id,timelineHighlight:!0},{spellId:l.a.BERSERK.id,triggeredBySpellId:l.a.BERSERK.id,enabled:!e.hasTalent(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT),timelineHighlight:!0},{spellId:l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id,triggeredBySpellId:l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id,enabled:e.hasTalent(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT),timelineHighlight:!0},{spellId:Object.keys(A.a).map((function(e){return Number(e)})),timelineHighlight:!0},{spellId:l.a.CAT_FORM.id,triggeredBySpellId:l.a.CAT_FORM.id},{spellId:l.a.MOONKIN_FORM_AFFINITY.id,enabled:e.hasTalent(l.a.BALANCE_AFFINITY_TALENT_SHARED)},{spellId:l.a.TREANT_FORM.id},{spellId:l.a.TRAVEL_FORM.id,triggeredBySpellId:l.a.TRAVEL_FORM.id,timelineHighlight:!0},{spellId:l.a.STAG_FORM.id,triggeredBySpellId:l.a.STAG_FORM.id,timelineHighlight:!0},{spellId:l.a.DASH.id,triggeredBySpellId:l.a.DASH.id,enabled:!e.hasTalent(l.a.TIGER_DASH_TALENT)},{spellId:l.a.TIGER_DASH_TALENT.id,triggeredBySpellId:l.a.TIGER_DASH_TALENT.id,enabled:e.hasTalent(l.a.TIGER_DASH_TALENT)},{spellId:l.a.STAMPEDING_ROAR_CAT.id,triggeredBySpellId:l.a.STAMPEDING_ROAR_CAT.id},{spellId:l.a.STAMPEDING_ROAR_BEAR.id,triggeredBySpellId:l.a.STAMPEDING_ROAR_BEAR.id},{spellId:l.a.REGROWTH.id},{spellId:l.a.REJUVENATION.id,triggeredBySpellId:l.a.REJUVENATION.id,enabled:e.hasTalent(l.a.RESTORATION_AFFINITY_TALENT)},{spellId:l.a.WILD_GROWTH.id,triggeredBySpellId:l.a.WILD_GROWTH.id,enabled:e.hasTalent(l.a.RESTORATION_AFFINITY_TALENT)}]}}]),a}(R.a),v=a(780),S=a(750),I=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).position=S.a.CORE(1),e}return Object(o.a)(a,[{key:"suggestions",value:function(e){return null}}]),a}(v.a),w=a(26),_=a(785),L=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(_.b);L.cooldownSpells=[].concat(Object(w.a)(_.b.cooldownSpells),[{spell:l.a.TIGERS_FURY,summary:[_.a.DAMAGE]},{spell:l.a.FERAL_FRENZY_TALENT,summary:[_.a.DAMAGE]},{spell:l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT,summary:[_.a.DAMAGE]},{spell:l.a.BERSERK,summary:[_.a.DAMAGE]}]);var N,F=L,C=a(120),k=a(66),B=a(12),P=a(754),D=a(764),j=a(43),G=(N={},Object(B.a)(N,l.a.RAKE.id,15e3),Object(B.a)(N,l.a.THRASH_FERAL.id,15e3),N),x=[l.a.RAKE,l.a.THRASH_FERAL],H=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).earlyCastsOfTigersFury=0,e.activeBleedsExpire={},e.hasPredator=null,e.possibleRecentKill=null,e.hasPredator=e.selectedCombatant.hasTalent(l.a.PREDATOR_TALENT.id),e.addEventListener(u.f.applydebuff.by(j.a).spell(x),e.onApplyDebuff),e.addEventListener(u.f.refreshdebuff.by(j.a).spell(x),e.onRefreshDebuff),e.addEventListener(u.f.removedebuff.by(j.a).spell(x),e.onRemoveDebuff),e}return Object(o.a)(a,[{key:"onApplyDebuff",value:function(e){var t=e.ability.guid;if(this.hasPredator){var a=Object(D.b)(e.targetID,e.targetInstance);this.activeBleedsExpire[a]||(this.activeBleedsExpire[a]={});var n=G[t];this.activeBleedsExpire[a][t]=e.timestamp+n}}},{key:"onRefreshDebuff",value:function(e){var t=e.ability.guid;if(this.hasPredator){var a=Object(D.b)(e.targetID,e.targetInstance);this.activeBleedsExpire[a]||(this.activeBleedsExpire[a]={});var n=this.activeBleedsExpire[a][t],i=Math.max(0,n?n-e.timestamp:0),r=G[t],s=Math.min(.3*r,i);this.activeBleedsExpire[a][t]=e.timestamp+r+s}}},{key:"onRemoveDebuff",value:function(e){var t=e.ability.guid;if(this.hasPredator){var a=Object(D.b)(e.targetID,e.targetInstance);this.activeBleedsExpire[a]||(this.activeBleedsExpire[a]={});var n=this.activeBleedsExpire[a][t];(n?n-e.timestamp:0)>500&&(this.possibleRecentKill=e.timestamp)}}},{key:"beginCooldown",value:function(e,t){if(l.a.TIGERS_FURY.id===e&&this.hasPredator&&this.isOnCooldown(e)){var n=this.possibleRecentKill?this.possibleRecentKill:t.timestamp;this.earlyCastsOfTigersFury+=1,this.endCooldown(e,!1,n)}Object(C.a)(Object(k.a)(a.prototype),"beginCooldown",this).call(this,e,t)}}]),a}(P.b),U=a(832),M=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"getResourceCost",value:function(e){var t=Object(C.a)(Object(k.a)(a.prototype),"getResourceCost",this).call(this,e);return this.selectedCombatant.hasBuff(l.a.BERSERK.id)||this.selectedCombatant.hasBuff(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id)?.6*t:t}}]),a}(U.a);M.resourceType=h.a.ENERGY;var W=M,Y=a(7),K=a(0),V=a.n(K),z=a(33),J=a(747),Z=a(746),q=a(839),Q=a(808),X=a(13),$=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"currentMaxResource",value:function(){var e=100;return this.selectedCombatant.hasTalent(l.a.MOMENT_OF_CLARITY_TALENT.id)&&(e+=30),(this.combatantHasBuffActive(l.a.BERSERK.id)||this.combatantHasBuffActive(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id))&&(e+=50),Math.floor(e)}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You're allowing your energy to reach its cap. While at its maximum value you miss out on the energy that would have regenerated. Although it can be beneficial to let energy pool ready to be used at the right time, try to spend some before it reaches the cap.")).icon("spell_shadow_shadowworddominate").actual(X.i18n._({id:"druid.feral.suggestions.energy.efficiency",defaults:"{0}% regenerated energy lost per minute due to being capped.",values:{0:Object(z.e)(t)}})).recommended("<".concat(a,"% is recommended."))}))}},{key:"statistic",value:function(){return V.a.createElement(Z.a,{tooltip:V.a.createElement(V.a.Fragment,null,"Although it can be beneficial to wait and let your energy pool ready to be used at the right time, you should still avoid letting it reach the cap.",V.a.createElement("br",null),"You spent ",V.a.createElement("strong",null,Object(z.e)(this.cappedProportion),"%")," of the fight at capped energy, causing you to miss out on a total of ",V.a.createElement("strong",null,this.missedRegen.toFixed(0))," energy from regeneration."),size:"flexible",position:J.a.CORE(1)},V.a.createElement(Q.a,{resource:h.a.ENERGY,value:"".concat(Object(z.e)(this.percentCapped),"%"),label:"Wasted energy per minute from being capped"}))}},{key:"percentCapped",get:function(){return(this.naturalRegen-this.missedRegen)/this.naturalRegen}},{key:"suggestionThresholds",get:function(){return{actual:this.percentCapped,isLessThan:{minor:.8,average:.7,major:.65},style:"percentage"}}}]),a}(q.a);$.dependencies=Object(Y.a)(Object(Y.a)({},q.a.dependencies),{},{spellResourceCost:W}),$.resourceType=h.a.ENERGY,$.baseRegenRate=11,$.isRegenHasted=!0,$.cumulativeEventWindow=400,$.buffsChangeMax=[l.a.BERSERK.id,l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id],$.resourceRefundOnMiss=.8,$.exemptFromRefund=[l.a.THRASH_FERAL.id,l.a.SWIPE_CAT.id,l.a.BRUTAL_SLASH_TALENT.id];var ee=$,te=a(773),ae=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).resource=h.a.ENERGY,e.initBuilderAbility(l.a.TIGERS_FURY.id),e}return a}(te.a),ne=a(49),ie=a(781),re=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"tab",value:function(){var e=this;return{title:"Energy usage",url:"energy-usage",render:function(){return V.a.createElement(ne.a,null,V.a.createElement(ie.a,{tracker:e.energyTracker,showSpenders:!0}))}}}}]),a}(j.c);re.dependencies={energyTracker:ae};var se=re,oe=a(203),le=a(767),ce=a(757),ue=a(777),de=a(4),he=a(125),me=a(22),ge=a(770),fe=a(762),Ee=a(763),pe=a(771),Te=a(772),ye=function(e){var t=e.combatant,a=e.castEfficiency,n=e.thresholds,i=function(e){return V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,V.a.createElement(de.a,{id:e.spell})," uptime"),thresholds:e.thresholds})},r=function(e){return V.a.createElement(Te.a,Object.assign({castEfficiency:a.getCastEfficiencyForSpellId(e.spell)},e))},s=function(e){return V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,V.a.createElement(de.a,{id:e.spell})," downgraded before the pandemic window"),thresholds:e.thresholds,tooltip:"Downgrading a snapshot can be unavoidable, but you should let the upgraded version last as long as possible by avoiding early refreshes."})};return V.a.createElement(ge.a,null,V.a.createElement(fe.c,{name:"Generate combo points",description:V.a.createElement(V.a.Fragment,null,"Builders use energy and give you combo points. Keep your ",V.a.createElement(me.a,{content:"Rake and Moonfire if you have the Lunar Inspiration talent, and Thrash if you the Wild Fleshrending azerite trait."},"DoTs")," active, use ",V.a.createElement(de.a,{id:l.a.BRUTAL_SLASH_TALENT.id})," and ",V.a.createElement(de.a,{id:l.a.FERAL_FRENZY_TALENT.id})," if you have those talents, then fill with ",V.a.createElement(de.a,{id:l.a.SHRED.id}),". Don't waste combo points by continuing to use builders when at full combo points.",V.a.createElement("br",null),V.a.createElement("br",null),"You should adapt your behaviour in AoE situations (the analyzer only accounts for some of this, so use your discretion when looking at AoE-heavy fights.) If you'll hit 2 or more targets replace ",V.a.createElement(de.a,{id:l.a.SHRED.id})," with ",V.a.createElement(de.a,{id:l.a.SWIPE_CAT.id}),". When fighting ",V.a.createElement(me.a,{content:"The threshold varies slightly depending on your stats and azerite traits."},"5 targets")," or more it's no longer worth using ",V.a.createElement(de.a,{id:l.a.RAKE.id})," and ",V.a.createElement(de.a,{id:l.a.MOONFIRE_FERAL.id}),". Unlike in the Legion expansion you should never spam ",V.a.createElement(de.a,{id:l.a.THRASH_FERAL.id}),", only keep it active if you would otherwise be using ",V.a.createElement(de.a,{id:l.a.SWIPE_CAT.id})," on targets without any bleeds.")},V.a.createElement(i,{spell:l.a.RAKE.id,thresholds:n.rakeUptime}),t.hasTalent(l.a.LUNAR_INSPIRATION_TALENT.id)&&V.a.createElement(i,{spell:l.a.MOONFIRE_FERAL.id,thresholds:n.moonfireUptime}),t.hasTalent(l.a.BRUTAL_SLASH_TALENT.id)&&V.a.createElement(r,{spell:l.a.BRUTAL_SLASH_TALENT.id}),t.hasTalent(l.a.FERAL_FRENZY_TALENT.id)&&V.a.createElement(r,{spell:l.a.FERAL_FRENZY_TALENT.id}),V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,"Inappropriate ",V.a.createElement(de.a,{id:l.a.SWIPE_CAT.id})),thresholds:n.swipeHitOne,tooltip:"How many times you used Swipe but had it only hit 1 target. Against a single target you should use Shred instead."}),V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,"Combo points wasted"),thresholds:n.comboPointsWaste,tooltip:"Generating combo points after already reaching the maximum 5 wastes them."})),V.a.createElement(fe.c,{name:"Spend combo points",description:V.a.createElement(V.a.Fragment,null,"You should generally only use finishers with a full 5 combo points. The exception is the first ",V.a.createElement(de.a,{id:l.a.RIP.id})," of the fight which should be applied as early as possible. ",V.a.createElement(de.a,{id:l.a.SABERTOOTH_TALENT.id})," is a damage gain in many situations and simplifies your finisher use, allowing you to almost always use ",V.a.createElement(de.a,{id:l.a.FEROCIOUS_BITE.id})," as your single target finisher. When casting ",V.a.createElement(de.a,{id:l.a.FEROCIOUS_BITE.id})," make sure you have at least ",V.a.createElement(me.a,{content:"Ferocious Bite's tooltip says it needs just 25 energy, but you should always give it an additional 25 to double its damage."},"50 energy."),V.a.createElement("br",null),V.a.createElement("br",null),V.a.createElement(de.a,{id:l.a.PRIMAL_WRATH_TALENT.id})," can replace both ",V.a.createElement(de.a,{id:l.a.RIP.id})," and ",V.a.createElement(de.a,{id:l.a.FEROCIOUS_BITE.id})," when against approximately 3 or more enemies.")},V.a.createElement(i,{spell:l.a.RIP.id,thresholds:n.ripUptime}),t.hasTalent(l.a.SAVAGE_ROAR_TALENT.id)&&V.a.createElement(i,{spell:l.a.SAVAGE_ROAR_TALENT.id,thresholds:n.savageRoarUptime}),V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,V.a.createElement(de.a,{id:l.a.FEROCIOUS_BITE.id})," damage bonus from energy"),thresholds:n.ferociousBiteEnergy,tooltip:"Ferocious Bite consumes up to 50 energy, and should always be given that full 50 energy to significantly increase its damage."}),t.hasTalent(l.a.SABERTOOTH_TALENT.id)&&V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,V.a.createElement(de.a,{id:l.a.RIP.id})," which should have been ",V.a.createElement(de.a,{id:l.a.FEROCIOUS_BITE.id})),thresholds:n.ripShouldBeBite,tooltip:"With the Sabertooth talent you can maintain your Rip by using Ferocious Bite. If you instead cast Rip you are missing out on the Ferocious Bite damage. If the replacement Rip has a better snapshot then it may have been worth using, so those cases are not counted here."}),V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,V.a.createElement(de.a,{id:l.a.RIP.id})," casts which reduced duration"),thresholds:n.ripDurationReduction,tooltip:"Because Rip's duration is based on combo points used it is possible to reduce the duration of your existing bleed by reapplying it with low combo points. Not only is this a waste of resources but you're doing less damage than you would if you'd done nothing at all."}),V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,"Needless low combo point finishers"),thresholds:n.badLowComboFinishers,tooltip:"Your finishers are most efficient when used with full combo points. However it is still worth using a low combo point Rip if it's not yet up on a target (this exception is detected and taken into account when calculating this metric.)"})),!n.tigersFuryIgnoreEnergy&&V.a.createElement(fe.c,{name:"Manage your energy",description:V.a.createElement(V.a.Fragment,null,"Your actions are ",V.a.createElement(me.a,{content:"Notable exceptions are when you have the Predator talent with enemies regularly dying, or large AoE situations with certain builds."},"usually")," limited by available energy so managing it well is important. Don't let it reach the cap and miss out on regeneration, and avoid wasting generated energy from ",V.a.createElement(de.a,{id:l.a.TIGERS_FURY.id}),'. Allowing your energy to "pool" before using a finisher is often ',V.a.createElement(me.a,{content:"Using a finisher when at low energy leaves you with little of both your main resources which greatly limits your options. Pooling energy first means you'll have energy left over to react to whatever happens in the fight around you. Although pooling is useful never let your uptime of DoTs and Savage Roar drop because of it."},"beneficial"),".")},V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,"Wasted natural regeneration from being capped"),thresholds:n.energyCapped,tooltip:"Some waste during Berserk or Incarnation (especially with Bloodlust active) is not a concern. If the fight mechanics force you to not attack for periods of time then capping energy is inevitable. Please use your knowledge of the fight when weighing the importance of this metric."}),V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,"Wasted energy from ",V.a.createElement(de.a,{id:l.a.TIGERS_FURY.id})),thresholds:n.tigersFuryEnergy,tooltip:"There are some situations where energy is very abundant and the energy gain from Tiger's Fury becomes unimportant, but that is rare in boss fights. Generally you should aim to use Tiger's Fury both for its energy and damage increase."})),n.tigersFuryIgnoreEnergy&&t.hasTalent(l.a.PREDATOR_TALENT.id)&&V.a.createElement(fe.c,{name:"Manage your energy",description:V.a.createElement(V.a.Fragment,null,"Normally your actions are limited by available energy. In this fight you made good use of ",V.a.createElement(de.a,{id:l.a.PREDATOR_TALENT.id})," to allow extra ",V.a.createElement(de.a,{id:l.a.TIGERS_FURY.id})," which makes the usual measures of energy management much less important.")},V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,"Additional ",V.a.createElement(de.a,{id:l.a.TIGERS_FURY.id})," from ",V.a.createElement(de.a,{id:l.a.PREDATOR_TALENT.id})," per minute"),thresholds:n.predatorWrongTalent})),V.a.createElement(fe.c,{name:"Use your cooldowns",description:V.a.createElement(V.a.Fragment,null,"Aim to use your cooldowns as often as possible, try to get prepared to use the ability when you see it's nearly ready. ",V.a.createElement(de.a,{id:l.a.BERSERK.id})," (or ",V.a.createElement(de.a,{id:l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id}),") should be used when you have plenty of energy so that you get the most effect from its cost reduction. Make sure you don't cap energy when using ",V.a.createElement(de.a,{id:l.a.TIGERS_FURY.id}),", but still use it as often as possible. Slightly delaying one so it lines up with the other can be beneficial, but avoid delaying so much that you'd miss out on an extra use during the fight.")},!t.hasTalent(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id)&&V.a.createElement(r,{spell:l.a.BERSERK.id}),t.hasTalent(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id)&&V.a.createElement(r,{spell:l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id}),V.a.createElement(r,{spell:l.a.TIGERS_FURY.id}),t.race===he.a.NightElf&&V.a.createElement(Ee.a,{name:V.a.createElement(de.a,{id:l.a.SHADOWMELD.id}),thresholds:n.shadowmeld,tooltip:"This measures how many of the possible uses of Shadowmeld were used to provide the double damage bonus to Rake."})),V.a.createElement(fe.c,{name:"Make the most of snapshots",description:V.a.createElement(V.a.Fragment,null,V.a.createElement(me.a,{content:"Tiger's Fury affects all DoTs, Bloodtalons affects all except Moonfire."},"Certain buffs")," will increase the damage of your DoTs for their full duration, even after the buff wears off. Making the most of this mechanic can be the difference between good and great results.",V.a.createElement("br",null),"As a general rule it's beneficial to refresh a DoT early if you would increase the snapshot. It's better to refresh with a weaker version of the DoT during the ",V.a.createElement(me.a,{content:"The last 30% of the DoT's duration. If you refresh during this time you don't lose any duration in the process."},"pandemic window")," than to let it wear off. The exception is ",V.a.createElement(de.a,{id:l.a.RAKE.id})," empowered by ",V.a.createElement(me.a,{content:"The effect is also provided by Incarnation: King of the Jungle, and Shadowmeld for Night Elves"},"Prowl")," which is so much stronger that you should wait until the DoT wears off when replacing it with an unbuffed version.",V.a.createElement("br",null),V.a.createElement(de.a,{id:l.a.SABERTOOTH_TALENT.id})," allows you to use ",V.a.createElement(de.a,{id:l.a.FEROCIOUS_BITE.id})," to maintain the existing snapshot on ",V.a.createElement(de.a,{id:l.a.RIP.id})," and should be used to do so.")},t.hasTalent(l.a.LUNAR_INSPIRATION_TALENT.id)&&V.a.createElement(s,{spell:l.a.MOONFIRE_FERAL.id,thresholds:n.moonfireDowngrade}),V.a.createElement(s,{spell:l.a.RAKE.id,thresholds:n.rakeDowngrade}),V.a.createElement(s,{spell:l.a.RIP.id,thresholds:n.ripDowngrade}),V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,"Average seconds of Prowl-buffed ",V.a.createElement(de.a,{id:l.a.RAKE.id})," lost by refreshing early"),thresholds:n.rakeProwlDowngrade})),t.hasTalent(l.a.BLOODTALONS_TALENT.id)&&V.a.createElement(fe.c,{name:"Weave in Bloodtalons",description:V.a.createElement(V.a.Fragment,null,"Taking the ",V.a.createElement(de.a,{id:l.a.BLOODTALONS_TALENT.id})," talent adds an extra set of mechanics to weave into your rotation. You should use every ",V.a.createElement(de.a,{id:l.a.PREDATORY_SWIFTNESS.id})," proc to generate ",V.a.createElement(de.a,{id:l.a.BLOODTALONS_TALENT.id})," charges, which you then spend to buff attacks. Aim to always have the buff active on ",V.a.createElement(de.a,{id:l.a.RIP.id})," and ",V.a.createElement(de.a,{id:l.a.RAKE.id}),". Depending on your other talent choices and the number of targets you'll usually have access to more charges than needed to keep those two DoTs buffed, use the rest to buff other high damage attacks such as ",V.a.createElement(de.a,{id:l.a.BRUTAL_SLASH_TALENT.id}),". Choose the right time to cast ",V.a.createElement(de.a,{id:l.a.REGROWTH.id})," or ",V.a.createElement(de.a,{id:l.a.ENTANGLING_ROOTS.id})," and generate charges, usually the best time is when you reach 4 or 5 combo points so ",V.a.createElement(de.a,{id:l.a.BLOODTALONS_TALENT.id})," is active for your finisher.")},V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,V.a.createElement(de.a,{id:l.a.PREDATORY_SWIFTNESS.id})," wasted"),thresholds:n.predatorySwiftnessWasted}),V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,V.a.createElement(de.a,{id:l.a.BLOODTALONS_TALENT.id})," wasted"),thresholds:n.bloodtalonsWasted,tooltip:"Using Bloodtalons to buff any ability counts as it not being wasted. See the statistics results section for details on how those charges were used."})),t.hasTalent(l.a.PREDATOR_TALENT.id)&&V.a.createElement(fe.c,{name:"Pick the most suitable Talents",description:V.a.createElement(V.a.Fragment,null,"The ",V.a.createElement(de.a,{id:l.a.PREDATOR_TALENT.id})," talent is generally only effective on fights with multiple enemies and should be swapped out for single target encounters.")},t.hasTalent(l.a.PREDATOR_TALENT.id)&&V.a.createElement(Ee.a,{name:V.a.createElement(V.a.Fragment,null,"Additional ",V.a.createElement(de.a,{id:l.a.TIGERS_FURY.id})," from ",V.a.createElement(de.a,{id:l.a.PREDATOR_TALENT.id})),thresholds:n.predatorWrongTalent})),V.a.createElement(pe.a,{thresholds:n}))},be=a(756),Re=a(748),Ae=a(760),Oe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"Your ",V.a.createElement(de.a,{id:l.a.RAKE.id})," uptime can be improved. Unless the current application was buffed by Prowl you should refresh the DoT once it has reached its ",V.a.createElement(me.a,{content:"The last 30% of the DoT's duration. When you refresh during this time you don't lose any duration in the process."},"pandemic window"),", don't wait for it to wear off.")).icon(l.a.RAKE.icon).actual(X.i18n._({id:"druid.feral.suggestions.rake.uptime",defaults:"{0}% uptime",values:{0:Object(z.e)(t)}})).recommended(">".concat(Object(z.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){return V.a.createElement(Z.a,{position:J.a.CORE(3),size:"flexible"},V.a.createElement(Re.a,{spell:l.a.RAKE},V.a.createElement(V.a.Fragment,null,V.a.createElement(Ae.a,null)," ",Object(z.e)(this.uptime),"% ",V.a.createElement("small",null,"uptime"))))}},{key:"uptime",get:function(){return this.enemies.getBuffUptime(l.a.RAKE_BLEED.id)/this.owner.fightDuration}},{key:"suggestionThresholds",get:function(){return{actual:this.uptime,isLessThan:{minor:.95,average:.9,major:.8},style:"percentage"}}}]),a}(j.c);Oe.dependencies={enemies:be.a};var ve=Oe,Se=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).active=e.selectedCombatant.hasTalent(l.a.LUNAR_INSPIRATION_TALENT.id),e}return Object(o.a)(a,[{key:"uptime",get:function(){return this.enemies.getBuffUptime(l.a.MOONFIRE_FERAL.id)/this.owner.fightDuration}},{key:"suggestionThresholds",get:function(){return{actual:this.uptime,isLessThan:{minor:.95,average:.9,major:.8},style:"percentage"}}}]),Object(o.a)(a,[{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"Your ",V.a.createElement(de.a,{id:l.a.MOONFIRE_FERAL.id})," uptime can be improved. You should refresh the DoT once it has reached its ",V.a.createElement(me.a,{content:"The last 30% of the DoT's duration. When you refresh during this time you don't lose any duration in the process."},"pandemic window"),", don't wait for it to wear off. You may wish to consider switching talents to ",V.a.createElement(de.a,{id:l.a.SABERTOOTH_TALENT.id})," which is simpler to use and provides more damage in most situations.")).icon(l.a.MOONFIRE_FERAL.icon).actual(X.i18n._({id:"druid.feral.suggestions.moonfire.uptime",defaults:"{0}% uptime",values:{0:Object(z.e)(t)}})).recommended(">".concat(Object(z.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){var e=this.enemies.getBuffUptime(l.a.MOONFIRE_FERAL.id)/this.owner.fightDuration;return V.a.createElement(Z.a,{size:"flexible",position:J.a.OPTIONAL(2)},V.a.createElement(Re.a,{spell:l.a.MOONFIRE_BEAR},V.a.createElement(V.a.Fragment,null,V.a.createElement(Ae.a,null)," ",Object(z.e)(e)," % ",V.a.createElement("small",null,"uptime"))))}}]),a}(j.c);Se.dependencies={enemies:be.a};var Ie=Se,we=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).casts=0,i.totalHits=0,i.castsWithZeroHits=0,i.castsWithOneHit=0,i.lastCastEvent=null,i.lastCastHits=0,i.addEventListener(u.f.cast.by(j.a).spell(i.constructor.spell),i.onCast),i.addEventListener(u.f.damage.by(j.a).spell(i.constructor.spell),i.onDamage),i.addEventListener(u.f.fightend,i.onFightend),i}return Object(o.a)(a,[{key:"averageTargetsHit",get:function(){return 0===this.casts?0:this.totalHits/this.casts}},{key:"averageTargetsHitNotIncludingZeroCasts",get:function(){return 0===this.casts?0:this.totalHits/(this.casts-this.castsWithZeroHits)}},{key:"hitZeroPerMinute",get:function(){return this.castsWithZeroHits/this.owner.fightDuration*6e4}},{key:"hitJustOnePerMinute",get:function(){return this.castsWithOneHit/this.owner.fightDuration*6e4}}]),Object(o.a)(a,[{key:"onCast",value:function(e){this.finalizePreviousCast(),this.casts+=1,this.lastCastEvent=e,this.lastCastHits=0}},{key:"onDamage",value:function(e){e.tick||!this.lastCastEvent||e.timestamp-this.lastCastEvent.timestamp>250||(this.totalHits+=1,this.lastCastHits+=1)}},{key:"onFightend",value:function(){this.finalizePreviousCast()}},{key:"finalizePreviousCast",value:function(){this.lastCastEvent&&(0===this.lastCastHits&&(this.castsWithZeroHits+=1),1===this.lastCastHits&&(this.castsWithOneHit+=1))}},{key:"generateStatistic",value:function(e){return 0===this.casts?null:V.a.createElement(Z.a,{size:"flexible",tooltip:V.a.createElement(V.a.Fragment,null,"You used ",this.constructor.spell.name," ",V.a.createElement("strong",null,this.casts)," time",1===this.casts?"":"s",".",V.a.createElement("br",null),V.a.createElement("ul",null,V.a.createElement("li",null,V.a.createElement("strong",null,this.castsWithOneHit)," hit just 1 target."),V.a.createElement("li",null,V.a.createElement("strong",null,this.castsWithZeroHits)," hit nothing at all"))),position:e},V.a.createElement(Re.a,{spell:this.constructor.spell},V.a.createElement(V.a.Fragment,null,this.averageTargetsHit.toFixed(1)," ",V.a.createElement("small",null,"average targets hit"))))}}]),a}(j.c);we.spell=null;var _e=we,Le=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"statistic",value:function(){return this.generateStatistic(S.a.OPTIONAL(10))}},{key:"suggestions",value:function(e){e(this.hitNoneThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You are using ",V.a.createElement(de.a,{id:l.a.SWIPE_CAT.id})," out of range of any targets. Try to get familiar with the range of your area of effect abilities so you can avoid wasting energy when they'll not hit anything.")).icon(l.a.SWIPE_CAT.icon).actual(X.i18n._({id:"druid.feral.suggestions.swipe.hitcount.outOfRange",defaults:"{0} uses per minute that hit nothing.",values:{0:t.toFixed(1)}})).recommended("".concat(a," is recommended"))})),e(this.hitJustOneThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You are using ",V.a.createElement(de.a,{id:l.a.SWIPE_CAT.id})," against a single target. If there's only one target in range you'll do more damage by using ",V.a.createElement(de.a,{id:l.a.SHRED.id})," instead.")).icon(l.a.SWIPE_CAT.icon).actual(X.i18n._({id:"druid.feral.suggestions.swipe.hitcount.efficiency",defaults:"{0} uses per minute that hit just one target.",values:{0:t.toFixed(1)}})).recommended("".concat(a," is recommended"))}))}},{key:"hitNoneThresholds",get:function(){return{actual:this.hitZeroPerMinute,isGreaterThan:{minor:0,average:.2,major:.5},style:"number"}}},{key:"hitJustOneThresholds",get:function(){return{actual:this.hitJustOnePerMinute,isGreaterThan:{minor:0,average:.5,major:3},style:"number"}}}]),a}(_e);Le.spell=l.a.SWIPE_CAT;var Ne=Le,Fe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"prepareGenerated",value:function(e){return Object.keys(e).map((function(t){return{abilityId:Number(t),generated:e[t].generated,wasted:e[t].wasted}})).sort((function(e,t){return t.generated-e.generated})).filter((function(e){return e.generated>0}))}},{key:"prepareSpent",value:function(e){return Object.keys(e).map((function(t){return{abilityId:Number(t),spent:e[t].spent,casts:e[t].casts,maxCP:e[t].spentByCast.filter((function(e){return 5===e})).length}})).sort((function(e,t){return t.spent-e.spent})).filter((function(e){return e.spent>0}))}},{key:"render",value:function(){var e=this.props,t=e.tracker,a=e.showSpenders,n=t.resource.name,i=this.prepareGenerated(t.buildersObj),r=this.prepareSpent(t.spendersObj),s=t.generated,o=t.wasted,l=t.spent;return s=0===s?1:s,o=0===o?1:o,l=0===l?1:l,V.a.createElement("div",null,V.a.createElement("table",{className:"data-table"},V.a.createElement("thead",null,V.a.createElement("tr",null,V.a.createElement("th",null,"Ability"),V.a.createElement("th",{colSpan:"2"},n," generated"),V.a.createElement("th",{colSpan:"2"},V.a.createElement(me.a,{content:"This is the amount of resources that were generated while you were already at cap."},n," wasted")))),V.a.createElement("tbody",null,i&&i.map((function(e){return V.a.createElement("tr",{key:e.abilityId},V.a.createElement("td",{style:{width:"30%"}},V.a.createElement(de.a,{id:e.abilityId})),V.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"right"}},V.a.createElement(me.a,{content:"".concat(Object(z.e)(e.generated/s)," %")},e.generated)),V.a.createElement("td",{style:{width:"40%"}},V.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.generated/s*100,"%")}})),V.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"right"}},V.a.createElement(me.a,{content:"".concat(Object(z.e)(e.wasted/o)," %")},e.wasted)),V.a.createElement("td",{style:{width:"30%"}},V.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.wasted/o*100,"%")}})))})))),a&&V.a.createElement("table",{className:"data-table"},V.a.createElement("thead",null,V.a.createElement("tr",null,V.a.createElement("th",null,"Ability"),V.a.createElement("th",{colSpan:"2"},n," spent"),V.a.createElement("th",{colSpan:"2"},"Max CP Casts / Total Casts"))),V.a.createElement("tbody",null,r&&r.map((function(e){return V.a.createElement("tr",{key:e.abilityId},V.a.createElement("td",{style:{width:"30%"}},V.a.createElement(de.a,{id:e.abilityId})),V.a.createElement("td",{style:{width:50,paddingRight:5,textAlign:"right"}},V.a.createElement(me.a,{content:"".concat(Object(z.e)(e.spent/l)," %")},e.spent)),V.a.createElement("td",{style:{width:"40%"}},V.a.createElement("div",{className:"performance-bar",style:{width:"".concat(e.spent/l*100,"%")}})),V.a.createElement("td",{style:{width:50,paddingRight:5}}),V.a.createElement("td",{style:{width:"30%",textAlign:"left"}},e.maxCP," / ",e.casts))})))))}}]),a}(V.a.Component),Ce=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).unavoidableWaste=0,e.castToMaxCpTimestamp=null,e.resource=h.a.COMBO_POINTS,e.maxResource=5,e}return Object(o.a)(a,[{key:"_applyBuilder",value:function(e,t,n,i){var r=this.current===this.maxResource;Object(C.a)(Object(k.a)(a.prototype),"_applyBuilder",this).call(this,e,t,n,i);var s=this.current===this.maxResource;r||!s?e===l.a.PRIMAL_FURY.id&&this.owner.currentTimestamp-this.castToMaxCpTimestamp<50&&(this.unavoidableWaste+=1):this.castToMaxCpTimestamp=this.owner.currentTimestamp}}]),a}(te.a),ke=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"suggestions",value:function(e){e(this.wastingSuggestionThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You are wasting combo points. Avoid using generators once you reach the maximum.")).icon("creatureportrait_bubble").actual(X.i18n._({id:"druid.feral.suggestions.comboPoints.wasted",defaults:"{0} combo points wasted per minute",values:{0:t.toFixed(1)}})).recommended("zero waste is recommended")}))}},{key:"statistic",value:function(){return V.a.createElement(Z.a,{size:"small",tooltip:V.a.createElement(V.a.Fragment,null,"You wasted a total of ",V.a.createElement("strong",null,this.pointsWasted)," combo points. ",V.a.createElement("br",null),"This number does NOT include Primal Fury procs that happened on a point builder used at 4 CPs, because this waste can't be controlled."),position:J.a.CORE(6)},V.a.createElement(Q.a,{resource:h.a.COMBO_POINTS,value:"".concat(this.pointsWastedPerMinute.toFixed(2)),label:"Wasted Combo Points per minute"}))}},{key:"tab",value:function(){var e=this;return{title:"Combo Point usage",url:"combo-points",render:function(){return V.a.createElement(ne.a,null,V.a.createElement(Fe,{tracker:e.comboPointTracker,showSpenders:!0}))}}}},{key:"pointsWasted",get:function(){return this.comboPointTracker.wasted-this.comboPointTracker.unavoidableWaste}},{key:"pointsWastedPerMinute",get:function(){return this.pointsWasted/this.owner.fightDuration*1e3*60}},{key:"wastingSuggestionThresholds",get:function(){return{actual:this.pointsWastedPerMinute,isGreaterThan:{minor:0,average:5,major:10},style:"number"}}}]),a}(j.c);ke.dependencies={comboPointTracker:Ce};var Be=ke,Pe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"suggestions",value:function(e){var t=this;e(this.suggestionThresholds).addSuggestion((function(e,a,n){return e(V.a.createElement(V.a.Fragment,null,"Your ",V.a.createElement(de.a,{id:l.a.RIP.id})," uptime can be improved. You can refresh the DoT once it has reached its ",V.a.createElement(me.a,{content:"The last 30% of the DoT's duration. When you refresh during this time you don't lose any duration in the process."},"pandemic window"),", don't wait for it to wear off.",t.selectedCombatant.hasTalent(l.a.SABERTOOTH_TALENT.id)?V.a.createElement(V.a.Fragment,null):V.a.createElement(V.a.Fragment,null," Avoid spending combo points on ",V.a.createElement(de.a,{id:l.a.FEROCIOUS_BITE.id})," if ",V.a.createElement(de.a,{id:l.a.RIP.id})," will need refreshing soon."))).icon(l.a.RIP.icon).actual(X.i18n._({id:"druid.feral.suggestions.rip.uptime",defaults:"{0}% uptime",values:{0:Object(z.e)(a)}})).recommended(">".concat(Object(z.e)(n),"% is recommended"))}))}},{key:"statistic",value:function(){return V.a.createElement(Z.a,{position:J.a.CORE(4),size:"flexible"},V.a.createElement(Re.a,{spell:l.a.RIP},V.a.createElement(V.a.Fragment,null,V.a.createElement(Ae.a,null)," ",Object(z.e)(this.uptime),"% ",V.a.createElement("small",null,"uptime"))))}},{key:"uptime",get:function(){return this.enemies.getBuffUptime(l.a.RIP.id)/this.owner.fightDuration}},{key:"suggestionThresholds",get:function(){return{actual:this.uptime,isLessThan:{minor:.95,average:.9,major:.8},style:"percentage"}}}]),a}(j.c);Pe.dependencies={enemies:be.a};var De=Pe,je=[m.a.MISS,m.a.DODGE,m.a.PARRY],Ge=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).biteCount=0,e.lostDamageTotal=0,e.sumBonusEnergyFraction=0,e.lastBiteCast={timestamp:0,event:void 0,energyForFullDamage:50,energyUsedByCast:25,energyAvailable:100,isPaired:!0},e.addEventListener(u.f.cast.by(j.a).spell(l.a.FEROCIOUS_BITE),e._onBiteCast),e.addEventListener(u.f.damage.by(j.a).spell(l.a.FEROCIOUS_BITE),e._onBiteDamage),e}return Object(o.a)(a,[{key:"_dpsLostFromLowEnergyBites",get:function(){return this.lostDamageTotal/this.owner.fightDuration*1e3}},{key:"_averageBonusEnergyFraction",get:function(){return this.biteCount>0?this.sumBonusEnergyFraction/this.biteCount:1}},{key:"suggestionThresholds",get:function(){return{actual:this._averageBonusEnergyFraction,isLessThan:{minor:1,average:.95,major:.8},style:"percentage"}}}]),Object(o.a)(a,[{key:"_onBiteCast",value:function(e){this.lastBiteCast={timestamp:e.timestamp,event:e,energyForFullDamage:50*(this._hasBerserkAtTime(e.timestamp)?.6:1),energyUsedByCast:this._energyUsedByCast(e),energyAvailable:this._energyAvailable(e),isPaired:!1}}},{key:"_onBiteDamage",value:function(e){if(!(this.lastBiteCast.isPaired||e.timestamp>this.lastBiteCast.timestamp+500)&&!je.includes(e.hitType)){if(this.lastBiteCast.energyAvailable<this.lastBiteCast.energyForFullDamage){var t=e.amount+e.absorbed,a=this._calcPotentialBiteDamage(t,this.lastBiteCast)-t;this.lostDamageTotal+=a,this.sumBonusEnergyFraction+=this._bonusEnergyFraction(this.lastBiteCast);var n=this.lastBiteCast.event;n.meta=e.meta||{},n.meta.isInefficientCast=!0,n.meta.inefficientCastReason="Used with low energy only gaining ".concat((100*this._bonusEnergyFraction(this.lastBiteCast)).toFixed(1),"% of the potential bonus from extra energy, missing out on ").concat(Object(z.d)(a)," damage.")}else this.sumBonusEnergyFraction+=1;this.biteCount+=1,this.lastBiteCast.isPaired=!0}}},{key:"_hasBerserkAtTime",value:function(e){return this.selectedCombatant.hasBuff(l.a.BERSERK.id,e)||this.selectedCombatant.hasBuff(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id,e)}},{key:"_energyAvailable",value:function(e){var t=e.classResources&&e.classResources.find((function(e){return e.type===h.a.ENERGY.id}));return t&&t.amount?t.amount:100}},{key:"_energyUsedByCast",value:function(e){return e.resourceCost&&void 0!==e.resourceCost[h.a.ENERGY.id]?e.resourceCost[h.a.ENERGY.id]:0}},{key:"_bonusEnergyFraction",value:function(e){return Math.min(1,(e.energyAvailable-e.energyUsedByCast)/(e.energyForFullDamage-e.energyUsedByCast))}},{key:"_calcPotentialBiteDamage",value:function(e,t){return t.energyAvailable>=t.energyForFullDamage?e:2*(e/(1+1*this._bonusEnergyFraction(t)))}},{key:"suggestions",value:function(e){var t=this,a=this.selectedCombatant.hasTalent(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id)?l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id:l.a.BERSERK.id;e(this.suggestionThresholds).addSuggestion((function(e,n,i){return e(V.a.createElement(V.a.Fragment,null,"You didn't always give ",V.a.createElement(de.a,{id:l.a.FEROCIOUS_BITE.id})," enough energy to get the full damage bonus. You should aim to have ",50," energy before using Ferocious Bite, or ",30..toFixed(0)," during ",V.a.createElement(de.a,{id:a}),". Your Ferocious Bite damage was reduced by ",Object(z.d)(t._dpsLostFromLowEnergyBites)," DPS due to lack of energy.")).icon(l.a.FEROCIOUS_BITE.icon).actual(X.i18n._({id:"druid.feral.suggestions.ferociousBite.efficiency",defaults:"{0}% average damage bonus from energy on Ferocious Bite.",values:{0:(100*n).toFixed(1)}})).recommended("".concat((100*i).toFixed(1),"% is recommended."))}))}}]),a}(j.c);Ge.dependencies={spellEnergyCost:W};var xe=Ge,He=a(801);function Ue(e){if(!e||!e.classResources)return 0;var t=e.classResources.find((function(e){return e.type===h.a.COMBO_POINTS.id}));return t?t.amount:0}var Me=a(53),We=a(752),Ye=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];if((e=t.call.apply(t,[this].concat(r))).stateByTarget={},e.castCount=0,e.ticks=0,e.ticksWithProwl=0,e.ticksWithTigersFury=0,e.ticksWithBloodtalons=0,e.damageFromProwl=0,e.damageFromTigersFury=0,e.damageFromBloodtalons=0,!e.constructor.spell||!e.constructor.debuff)throw e.active=!1,new Error("Snapshot should be extended and provided with spellCastId and debuffId.");return e.addEventListener(u.f.cast.by(j.a).spell(e.constructor.spell),e._castSnapshotSpell),e.addEventListener(u.f.damage.by(j.a).spell(e.constructor.debuff),e._damageFromDebuff),e}return Object(o.a)(a,[{key:"_castSnapshotSpell",value:function(e){var t=this;this.castCount+=1,this.lastDoTCastEvent=e,e.debuffEvents.forEach((function(e){return t._debuffApplied(e)}))}},{key:"_damageFromDebuff",value:function(e){if(!e.targetIsFriendly&&e.tick&&(e.amount||0)+(e.absorbed||0)!==0){var t=this.stateByTarget[Object(D.b)(e.targetID,e.targetInstance)];if(t&&!(e.timestamp>t.expireTime+200)){var a=Object(We.a)(e,this.calcPowerFromSnapshot(t)-1),n=this.additivePowerSum(t);if(this.ticks+=1,t.prowl){this.ticksWithProwl+=1;var i=1/n;this.damageFromProwl+=a*i}if(t.tigersFury){this.ticksWithTigersFury+=1;var r=.15/n;this.damageFromTigersFury+=a*r}if(t.bloodtalons){this.ticksWithBloodtalons+=1;var s=.25/n;this.damageFromBloodtalons+=a*s}}}}},{key:"_debuffApplied",value:function(e){var t=Object(D.b)(e.targetID,e.targetInstance),a=this.stateByTarget[t],n=this.makeNewState(e,a);this.stateByTarget[t]=n,this.checkRefreshRule(n)}},{key:"makeNewState",value:function(e,t){var a=t?t.expireTime-e.timestamp:0,n=this.getDurationOfFresh(e),i=e.timestamp+n;a>0&&(i+=Math.min(.3*n,a));var r=this.selectedCombatant,s={expireTime:i,pandemicTime:i-.3*n,tigersFury:this.constructor.isTigersFuryAffected&&r.hasBuff(l.a.TIGERS_FURY.id),prowl:this.constructor.isProwlAffected&&(r.hasBuff(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id)||r.hasBuff(l.a.PROWL.id,null,60)||r.hasBuff(l.a.PROWL_INCARNATION.id,null,60)||r.hasBuff(l.a.SHADOWMELD.id,null,60)),bloodtalons:this.constructor.isBloodtalonsAffected&&r.hasBuff(l.a.BLOODTALONS_BUFF.id,null,60),power:1,startTime:e.timestamp,castEvent:this.lastDoTCastEvent,prev:t};return s.power=this.calcPower(s),!s.castEvent||s.startTime>s.castEvent.timestamp+300||(s.castEvent.feralSnapshotState=s),s}},{key:"calcPower",value:function(e){return this.calcPowerFromSnapshot(e)}},{key:"calcPowerFromSnapshot",value:function(e){var t=1;return e.prowl&&(t*=2),e.tigersFury&&(t*=1.15),e.bloodtalons&&(t*=1.25),t}},{key:"additivePowerSum",value:function(e){var t=0;return e.prowl&&(t+=1),e.tigersFury&&(t+=.15),e.bloodtalons&&(t+=.25),t}},{key:"checkRefreshRule",value:function(e){}},{key:"getDurationOfFresh",value:function(e){return this.constructor.durationOfFresh}},{key:"subStatistic",value:function(e,t,a,n,i){return V.a.createElement("div",{className:"flex",key:a},V.a.createElement("div",{className:"flex-main"},V.a.createElement(de.a,{id:a})),V.a.createElement("div",{className:"flex-sub text-right"},V.a.createElement(me.a,{content:"".concat(Object(z.d)(t/this.owner.fightDuration*1e3)," DPS contributed by ").concat(n," on your ").concat(i," DoT")},Object(z.e)(0===this.ticks?0:e/this.ticks),"%")))}},{key:"generateStatistic",value:function(e,t){var a=[],n=[];if(this.constructor.isProwlAffected){n.push("Prowl"),a.push(this.subStatistic(this.ticksWithProwl,this.damageFromProwl,l.a.PROWL.id,"Prowl",e))}if(this.constructor.isTigersFuryAffected){n.push("Tiger's Fury"),a.push(this.subStatistic(this.ticksWithTigersFury,this.damageFromTigersFury,l.a.TIGERS_FURY.id,"Tiger's Fury",e))}if(this.constructor.isBloodtalonsAffected&&this.selectedCombatant.hasTalent(l.a.BLOODTALONS_TALENT.id)){n.push("Bloodtalons"),a.push(this.subStatistic(this.ticksWithBloodtalons,this.damageFromBloodtalons,l.a.BLOODTALONS_TALENT.id,"Bloodtalons",e))}var i="";n.forEach((function(e,t){var a=n.length>2&&t<n.length-1,r=t===n.length-2;i="".concat(i).concat(e).concat(a?", ":"").concat(r?" and ":"")}));var r=n.length>1;return V.a.createElement(He.b,{title:V.a.createElement(V.a.Fragment,null,V.a.createElement(Me.a,{id:this.constructor.spell.id,noLink:!0})," ",e," Snapshot"),tooltip:"".concat(e," maintains the damage bonus from ").concat(i," if ").concat(r?"they were":"it was"," present when the DoT was applied. This lists how many of your ").concat(e," ticks benefited from ").concat(r?"each":"the"," buff. ").concat(r?"As a tick can benefit from multiple buffs at once these percentages can add up to more than 100%.":""),position:t},a)}}],[{key:"wasStateFreshlyApplied",value:function(e){return!!e&&(!e.prev||e.prev.expireTime<e.startTime)}},{key:"wasStatePowerUpgrade",value:function(e){return!!e&&(!a.wasStateFreshlyApplied(e)&&e.power>e.prev.power)}}]),a}(j.c);Ye.spell=null,Ye.debuff=null,Ye.isProwlAffected=!1,Ye.isTigersFuryAffected=!1,Ye.isBloodtalonsAffected=!1,Ye.durationOfFresh=null;var Ke=Ye,Ve=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).downgradeCount=0,e.shouldBeBiteCount=0,e.durationReductionCount=0,e.comboLastRip=0,e.selectedCombatant.hasTalent(l.a.SABERTOOTH_TALENT.id)&&(e.constructor.hasSabertooth=!0),e.addEventListener(u.f.cast.by(j.a).spell(l.a.RIP),e._castRip),e.addEventListener(u.f.cast.by(j.a).spell(l.a.FEROCIOUS_BITE),e._castFerociousBite),e}return Object(o.a)(a,[{key:"shouldBeBiteProportion",get:function(){return this.shouldBeBiteCount/this.castCount}},{key:"shouldBeBiteSuggestionThresholds",get:function(){return{actual:this.shouldBeBiteProportion,isGreaterThan:{minor:0,average:.1,major:.2},style:"percentage"}}},{key:"durationReductionThresholds",get:function(){return{actual:this.durationReductionCount/this.castCount,isGreaterThan:{minor:0,average:.1,major:.2},style:"percentage"}}},{key:"downgradeProportion",get:function(){return this.downgradeCount/this.castCount}},{key:"downgradeSuggestionThresholds",get:function(){return{actual:this.downgradeProportion,isGreaterThan:{minor:0,average:.15,major:.6},style:"percentage"}}}]),Object(o.a)(a,[{key:"_castRip",value:function(e){this.comboLastRip=Ue(e)}},{key:"_castFerociousBite",value:function(e){if(this.constructor.hasSabertooth){var t=Object(D.b)(e.targetID,e.targetInstance),a=this.stateByTarget[t];if(a&&!(a.expireTime<e.timestamp)){var n=Ue(e),i=a.expireTime-e.timestamp,r=Math.min(31200,i+4e3*n);a.expireTime=e.timestamp+r,a.pandemicTime=e.timestamp+.7*r}}}},{key:"checkRefreshRule",value:function(e){var t=e.prev;if(t&&!(t.expireTime<e.startTime)){var a=e.castEvent;if(a){if(this.active.constructor.hasSabertooth&&t.power>=e.power){this.shouldBeBiteCount+=1,a.meta=a.meta||{},a.meta.isInefficientCast=!0;var n=t.power>e.power?"a stronger":"the same strength";a.meta.inefficientCastReason="Used Rip when you could have extended using Ferocious Bite and kept ".concat(n," snapshot.")}if(t.expireTime>e.expireTime-500){var i=((t.expireTime-e.startTime)/1e3).toFixed(1),r=((e.expireTime-e.startTime)/1e3).toFixed(1);this.durationReductionCount+=1,a.meta=a.meta||{},a.meta.isInefficientCast=!0,a.meta.inefficientCastReason="There was already a Rip with ".concat(i," seconds remaining, but this cast replaced it with one lasting ").concat(r," seconds.")}t.pandemicTime<=e.startTime||t.power<=e.power||(this.downgradeCount+=1,a.meta&&(a.meta.isInefficientCast||a.meta.isEnhancedCast)||(a.meta=a.meta||{},a.meta.isInefficientCast=!0,a.meta.inefficientCastReason="You refreshed with a weaker version of Rip before the pandemic window."))}}}},{key:"getDurationOfFresh",value:function(e){return 8e3+4e3*this.comboLastRip}},{key:"suggestions",value:function(e){var t=this;e(this.downgradeSuggestionThresholds).addSuggestion((function(e,a,n){return e(V.a.createElement(V.a.Fragment,null,"Try not to refresh ",V.a.createElement(de.a,{id:l.a.RIP.id})," before the ",V.a.createElement(me.a,{content:"The last ".concat((.3*t.constructor.durationOfFresh/1e3).toFixed(1)," seconds of Rip's duration. When you refresh during this time you don't lose any duration in the process.")},"pandemic window")," unless you have more powerful ",V.a.createElement(me.a,{content:"Applying Rip with Tiger's Fury or Bloodtalons will boost its damage until you reapply it."},"snapshot buffs")," than were present when it was first cast.")).icon(l.a.RIP.icon).actual(X.i18n._({id:"druid.feral.suggestions.ripSnapshot.earlyRefresh",defaults:"{0} Rip refresh{1} were early downgrades.",values:{0:t.downgradeCount,1:1===t.downgradeCount?"":"es"}})).recommended("None is recommended")})),e(this.shouldBeBiteSuggestionThresholds).addSuggestion((function(e,a,n){return e(V.a.createElement(V.a.Fragment,null,"With ",V.a.createElement(de.a,{id:l.a.SABERTOOTH_TALENT.id})," you should use ",V.a.createElement(de.a,{id:l.a.FEROCIOUS_BITE.id})," to extend the duration of ",V.a.createElement(de.a,{id:l.a.RIP.id}),". Only use ",V.a.createElement(de.a,{id:l.a.RIP.id})," when the bleed is missing or when you can improve the ",V.a.createElement(me.a,{content:"Applying Rip with Tiger's Fury or Bloodtalons will boost its damage until you reapply it. This boost is maintained when Bite extends the bleed."},"snapshot."))).icon(l.a.RIP.icon).actual(X.i18n._({id:"druid.feral.suggestions.ripSnapshot.shouldBeBite",defaults:"{0} Rip cast{1} could have been replaced with Bite.",values:{0:t.shouldBeBiteCount,1:1===t.shouldBeBiteCount?"":"s"}})).recommended("None is recommended")})),e(this.durationReductionThresholds).addSuggestion((function(e,a,n){return e(V.a.createElement(V.a.Fragment,null,"You sometimes replaced your ",V.a.createElement(de.a,{id:l.a.RIP.id})," DoT with a shorter duration version. Avoid using ",V.a.createElement(de.a,{id:l.a.RIP.id})," at low combo points, and especially not when there's already a ",V.a.createElement(de.a,{id:l.a.RIP.id})," active on the target.")).icon(l.a.RIP.icon).actual(X.i18n._({id:"druid.feral.suggestions.ripSnapshot.reducedDuration",defaults:"Rip's duration reduced {0} time{1}.",values:{0:t.durationReductionCount,1:1===t.durationReductionCount?"":"s"}})).recommended("None is recommended")}))}},{key:"statistic",value:function(){return Object(C.a)(Object(k.a)(a.prototype),"generateStatistic",this).call(this,l.a.RIP.name,He.a.CORE(11))}}]),a}(Ke);Ve.dependencies={comboPointTracker:Ce},Ve.spell=l.a.RIP,Ve.debuff=l.a.RIP,Ve.durationOfFresh=null,Ve.isProwlAffected=!1,Ve.isTigersFuryAffected=!0,Ve.isBloodtalonsAffected=!0,Ve.hasSabertooth=!1;var ze=Ve,Je=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).prowlLostCastCount=0,e.prowlLostTimeSum=0,e.downgradeCastCount=0,e}return Object(o.a)(a,[{key:"checkRefreshRule",value:function(e){var t=e.prev,a=e.castEvent;if(t&&!(t.expireTime<e.startTime))if(t.prowl&&!e.prowl){var n=t.expireTime-e.startTime;this.prowlLostTimeSum+=n,n>1e3&&(this.prowlLostCastCount+=1,a.meta=a.meta||{},a.meta.isInefficientCast=!0,a.meta.inefficientCastReason="You lost ".concat((n/1e3).toFixed(1)," seconds of a Rake empowered with Prowl by refreshing early."))}else t.pandemicTime>e.startTime&&t.power>e.power&&!e.prowl&&(this.downgradeCastCount+=1,a.meta&&(a.meta.isInefficientCast||a.meta.isEnhancedCast)||(a.meta=a.meta||{},a.meta.isInefficientCast=!0,a.meta.inefficientCastReason="You refreshed with a weaker version of Rake before the pandemic window."))}},{key:"suggestions",value:function(e){var t=this;e(this.prowlLostSuggestionThresholds).addSuggestion((function(e,a,n){return e(V.a.createElement(V.a.Fragment,null,"When ",V.a.createElement(de.a,{id:l.a.RAKE.id})," is empowered by ",V.a.createElement(de.a,{id:l.a.PROWL.id})," avoid refreshing it unless the replacement would also be empowered. You ended ",t.prowlLostCastCount," empowered ",V.a.createElement(de.a,{id:l.a.RAKE.id})," bleed",1!==t.prowlLostCastCount?"s":""," more than 1 second early.")).icon(l.a.RAKE.icon).actual(X.i18n._({id:"druid.feral.suggestions.rakeSnapshot.prowlBuffed",defaults:"{0} seconds of Prowl buffed Rake was lost per minute.",values:{0:a.toFixed(1)}})).recommended("<".concat(n," is recommended"))})),e(this.downgradeSuggestionThresholds).addSuggestion((function(e,a,n){return e(V.a.createElement(V.a.Fragment,null,"Try to only refresh ",V.a.createElement(de.a,{id:l.a.RAKE.id})," before the ",V.a.createElement(me.a,{content:"The last ".concat((.3*t.constructor.durationOfFresh/1e3).toFixed(1)," seconds of Rake's duration. When you refresh during this time you don't lose any duration in the process.")},"pandemic window")," if you have more powerful ",V.a.createElement(me.a,{content:"Applying Rake with Prowl, Tiger's Fury or Bloodtalons will boost its damage until you reapply it."},"snapshot buffs")," than were present when it was first cast.")).icon(l.a.RAKE.icon).actual(X.i18n._({id:"druid.feral.suggestions.rakeSnapshot.earlyRefresh",defaults:"{0}% of Rake refreshes were early downgrades.",values:{0:Object(z.e)(a)}})).recommended("".concat(n,"% is recommended"))}))}},{key:"statistic",value:function(){return Object(C.a)(Object(k.a)(a.prototype),"generateStatistic",this).call(this,l.a.RAKE.name,He.a.CORE(10))}},{key:"prowlLostTimePerMinute",get:function(){return this.prowlLostTimeSum/this.owner.fightDuration*60}},{key:"downgradeProportion",get:function(){return this.downgradeCastCount/this.castCount}},{key:"prowlLostSuggestionThresholds",get:function(){return{actual:this.prowlLostTimePerMinute,isGreaterThan:{minor:.5,average:2,major:8},style:"decimal"}}},{key:"downgradeSuggestionThresholds",get:function(){return{actual:this.downgradeProportion,isGreaterThan:{minor:0,average:.15,major:.6},style:"percentage"}}}]),a}(Ke);Je.spell=l.a.RAKE,Je.debuff=l.a.RAKE_BLEED,Je.durationOfFresh=15e3,Je.isProwlAffected=!0,Je.isTigersFuryAffected=!0,Je.isBloodtalonsAffected=!0;var Ze=Je,qe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).downgradeCastCount=0,e.selectedCombatant.hasTalent(l.a.LUNAR_INSPIRATION_TALENT.id)||(e.active=!1),e}return Object(o.a)(a,[{key:"downgradeProportion",get:function(){return this.downgradeCastCount/this.castCount}},{key:"downgradeSuggestionThresholds",get:function(){return{actual:this.downgradeProportion,isGreaterThan:{minor:0,average:.15,major:.6},style:"percentage"}}}]),Object(o.a)(a,[{key:"checkRefreshRule",value:function(e){var t=e.prev;if(t&&!(t.expireTime<e.startTime)&&!(e.startTime>=t.pandemicTime||e.power>=t.power)){this.downgradeCastCount+=1;var a=e.castEvent;a.meta&&(a.meta.isInefficientCast||a.meta.isEnhancedCast)||(a.meta=a.meta||{},a.meta.isInefficientCast=!0,a.meta.inefficientCastReason="You refreshed with a weaker version of Moonfire before the pandemic window.")}}},{key:"suggestions",value:function(e){var t=this;e(this.downgradeSuggestionThresholds).addSuggestion((function(e,a,n){return e(V.a.createElement(V.a.Fragment,null,"Try not to refresh ",V.a.createElement(de.a,{id:l.a.MOONFIRE_FERAL.id})," before the ",V.a.createElement(me.a,{content:"The last ".concat((.3*t.constructor.durationOfFresh/1e3).toFixed(1)," seconds of Moonfire's duration. When you refresh during this time you don't lose any duration in the process.")},"pandemic window")," unless you have more powerful ",V.a.createElement(me.a,{content:"Applying Moonfire with Tiger's Fury will boost its damage until you reapply it."},"snapshot buffs")," than were present when it was first cast.")).icon(l.a.MOONFIRE_FERAL.icon).actual(X.i18n._({id:"druid.feral.suggestions.moonfireSnapshot.downgrades",defaults:"{0}% of Moonfire refreshes were early downgrades.",values:{0:Object(z.e)(a)}})).recommended("".concat(n,"% is recommended"))}))}},{key:"statistic",value:function(){return Object(C.a)(Object(k.a)(a.prototype),"generateStatistic",this).call(this,l.a.MOONFIRE_FERAL.name,He.a.OPTIONAL(10))}}]),a}(Ke);qe.spell=l.a.MOONFIRE_FERAL,qe.debuff=l.a.MOONFIRE_FERAL,qe.durationOfFresh=14e3,qe.isProwlAffected=!1,qe.isTigersFuryAffected=!0,qe.isBloodtalonsAffected=!1;var Qe=qe,Xe=[l.a.REGROWTH,l.a.ENTANGLING_ROOTS],$e=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).hasSwiftness=!1,i.generated=0,i.used=0,i.expired=0,i.remainAfterFight=0,i.overwritten=0,i.timeLastGain=null,i.addEventListener(u.f.fightend,i.onFightend),i.addEventListener(u.f.applybuff.to(j.a).spell(l.a.PREDATORY_SWIFTNESS),i.onApplyBuff),i.addEventListener(u.f.refreshbuff.to(j.a).spell(l.a.PREDATORY_SWIFTNESS),i.onRefreshBuff),i.addEventListener(u.f.removebuff.to(j.a).spell(l.a.PREDATORY_SWIFTNESS),i.onRemoveBuff),i.addEventListener(u.f.cast.by(j.a).spell(Xe),i.onCast),i}return Object(o.a)(a,[{key:"wasted",get:function(){return this.expired+this.overwritten+this.remainAfterFight}},{key:"wastedFraction",get:function(){return this.wasted/this.generated}},{key:"suggestionThresholds",get:function(){return{actual:this.wastedFraction,isGreaterThan:{minor:0,average:.1,major:.2},style:"percentage"}}}]),Object(o.a)(a,[{key:"onFightend",value:function(){this.hasSwiftness&&(this.remainAfterFight=1)}},{key:"onApplyBuff",value:function(e){this.hasSwiftness=!0,this.generated+=1,this.timeLastGain=e.timestamp,this.expireTime=e.timestamp+12e3}},{key:"onRefreshBuff",value:function(e){Math.abs(e.timestamp-this.timeLastGain)<100||(this.hasSwiftness=!0,this.generated+=1,this.overwritten+=1,this.timeLastGain=e.timestamp,this.expireTime=e.timestamp+12e3)}},{key:"onRemoveBuff",value:function(e){!this.hasSwiftness||!this.expireTime||Math.abs(this.expireTime-e.timestamp)>100||(this.expired+=1,this.hasSwiftness=!1,this.expireTime=null)}},{key:"onCast",value:function(e){this.hasSwiftness&&(this.used+=1,this.hasSwiftness=!1,this.expireTime=null)}},{key:"suggestions",value:function(e){this.selectedCombatant.hasTalent(l.a.BLOODTALONS_TALENT.id)&&e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You are not making use of all your chances to trigger ",V.a.createElement(de.a,{id:l.a.BLOODTALONS_TALENT.id})," through ",V.a.createElement(de.a,{id:l.a.PREDATORY_SWIFTNESS.id}),". Try to use it to instant-cast ",V.a.createElement(de.a,{id:l.a.REGROWTH.id})," or ",V.a.createElement(de.a,{id:l.a.ENTANGLING_ROOTS.id})," before you generate another charge of the buff, and before it wears off.")).icon(l.a.PREDATORY_SWIFTNESS.icon).actual(X.i18n._({id:"druid.feral.suggestions.predatorySwiftness.wasted",defaults:"{0}% of Predatory Swiftness buffs wasted.",values:{0:Object(z.e)(t)}})).recommended("".concat(a,"% is recommended"))}))}},{key:"statistic",value:function(){return V.a.createElement(Z.a,{tooltip:V.a.createElement(V.a.Fragment,null,"You used ",V.a.createElement("strong",null,this.used)," out of ",V.a.createElement("strong",null,this.generated)," Predatory Swiftness buffs to instant-cast Regrowth or Entangling Roots",this.selectedCombatant.hasTalent(l.a.BLOODTALONS_TALENT.id)?" and trigger the Bloodtalons buff":"",". ",V.a.createElement("br",null),V.a.createElement("ul",null,V.a.createElement("li",null,"The buff was allowed to expire ",V.a.createElement("strong",null,this.expired)," time",1!==this.expired?"s":"","."),V.a.createElement("li",null,"You used another finisher while the buff was still active and overwrote it ",V.a.createElement("strong",null,this.overwritten)," time",1!==this.overwritten?"s":"","."),V.a.createElement("li",null,"You had ",V.a.createElement("strong",null,this.remainAfterFight)," remaining unused at the end of the fight."))),size:"flexible",position:J.a.OPTIONAL(5)},V.a.createElement(Re.a,{spell:l.a.PREDATORY_SWIFTNESS},V.a.createElement(V.a.Fragment,null,Object(z.e)(1-this.wastedFraction),"% ",V.a.createElement("small",null,"buffs used"))))}}]),a}(j.c),et=a(799),tt=[l.a.RAKE,l.a.RIP,l.a.SHRED,l.a.FEROCIOUS_BITE,l.a.BRUTAL_SLASH_TALENT,l.a.SWIPE_CAT,l.a.THRASH_FERAL,l.a.MAIM],at=[m.a.MISS,m.a.DODGE,m.a.PARRY],nt=["#987284","#9dbf9e","#2e86ab","#40376e","#f39b6d","#f9cb40","#603140","#e0607e"],it=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];if((e=t.call.apply(t,[this].concat(r))).spenders=null,e.currentStack=0,e.expireTime=null,e.lastSpender=null,e.generated=0,e.used=0,e.expired=0,e.remainAfterFight=0,e.overwritten=0,tt.length>nt.length)throw new Error("Bloodtalons has ".concat(tt.length," potential spenders but only ").concat(nt.length," chart colors defined."));return e.active=e.selectedCombatant.hasTalent(l.a.BLOODTALONS_TALENT.id),e.active&&(e.spenders=tt.map((function(e,t){return{spell:e,chartColor:nt[t],count:0}}))),e.addEventListener(u.f.fightend,e.onFightend),e.addEventListener(u.f.applybuff.to(j.a).spell(l.a.BLOODTALONS_BUFF),e.onApplyBuff),e.addEventListener(u.f.refreshbuff.to(j.a).spell(l.a.BLOODTALONS_BUFF),e.onRefreshBuff),e.addEventListener(u.f.removebuff.to(j.a).spell(l.a.BLOODTALONS_BUFF),e.onRemoveBuff),e.addEventListener(u.f.damage.by(j.a).spell(tt),e.onDamage),e.addEventListener(u.f.applydebuff.by(j.a).spell(l.a.RIP),e.applyDebuff),e.addEventListener(u.f.refreshdebuff.by(j.a).spell(l.a.RIP),e.applyDebuff),e}return Object(o.a)(a,[{key:"wasted",get:function(){return this.expired+this.overwritten+this.remainAfterFight}},{key:"overwrittenPerMinute",get:function(){return this.overwritten/this.owner.fightDuration*1e3*60}},{key:"suggestionThresholds",get:function(){return{actual:this.overwrittenPerMinute,isGreaterThan:{minor:0,average:.5,major:2},style:"number"}}},{key:"combinedChart",get:function(){var e=this.spenders.filter((function(e){return 0!==e.count})).map((function(e){return{color:e.chartColor,label:e.spell.name,spellId:e.spell.id,value:e.count,valueTooltip:V.a.createElement(V.a.Fragment,null,V.a.createElement("b",null,e.count)," charge",1!==e.count?"s":""," used on ",e.spell.name,".")}}));return e.push({color:"#d53805",label:"Wasted",value:this.wasted,valueTooltip:V.a.createElement(V.a.Fragment,null,V.a.createElement("b",null,this.wasted)," Bloodtalons charge",1!==this.wasted?"s were":" was"," wasted.",V.a.createElement("br",null),V.a.createElement("ul",null,V.a.createElement("li",null,"You lost ",V.a.createElement("b",null,this.overwritten)," by casting Regrowth or Entangling Roots when you already had charges."),V.a.createElement("li",null,"You lost ",V.a.createElement("b",null,this.expired)," by allowing ",1!==this.expired?"them":"it"," to expire."),V.a.createElement("li",null,"You lost ",V.a.createElement("b",null,this.remainAfterFight)," by having ",1!==this.remainAfterFight?"them":"it"," left over at the fight's end.")))}),V.a.createElement(et.a,{items:e})}}]),Object(o.a)(a,[{key:"onFightend",value:function(){this.remainAfterFight=this.currentStack}},{key:"onApplyBuff",value:function(e){this.generated+=2,this.currentStack=2,this.expireTime=e.timestamp+3e4}},{key:"onRefreshBuff",value:function(e){this.overwritten+=this.currentStack,this.generated+=2,this.currentStack=2,this.expireTime=e.timestamp+3e4}},{key:"onRemoveBuff",value:function(e){0===this.currentStack||!this.expireTime||Math.abs(this.expireTime-e.timestamp)>100||(this.expired+=this.currentStack,this.currentStack=0,this.expireTime=null)}},{key:"onDamage",value:function(e){var t=e.ability.guid;0===this.currentStack||e.tick||at.includes(e.hitType)||this.isAlreadyAccountedForAoE(t,e.timestamp)||(this.lastSpender={spellId:t,timestamp:e.timestamp},this.currentStack-=1,this.addSpender(t))}},{key:"applyDebuff",value:function(e){0!==this.currentStack&&(this.currentStack-=1,this.addSpender(l.a.RIP.id))}},{key:"isSpender",value:function(e){return Boolean(tt.find((function(t){return t.id===e})))}},{key:"isAlreadyAccountedForAoE",value:function(e,t){return this.lastSpender&&this.lastSpender.spellId===e&&Math.abs(this.lastSpender.timestamp-t)<200}},{key:"addSpender",value:function(e){var t=this.spenders.find((function(t){return t.spell.id===e}));if(!t)throw new Error("Tried to add spender ".concat(e," which was not listed as a potential spender."));t.count+=1,this.used+=1}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You are overwriting charges of ",V.a.createElement(de.a,{id:l.a.BLOODTALONS_TALENT.id}),". Try to use both charges before you generate more from casting ",V.a.createElement(de.a,{id:l.a.REGROWTH.id})," or ",V.a.createElement(de.a,{id:l.a.ENTANGLING_ROOTS.id}),".")).icon(l.a.BLOODTALONS_TALENT.icon).actual(X.i18n._({id:"druid.feral.suggestions.bloodtalons.efficiency",defaults:"{0} wasted charges of Bloodtalons per minute.",values:{0:t.toFixed(1)}})).recommended("".concat(a," is recommended"))}))}},{key:"statistic",value:function(){return V.a.createElement(Z.a,{position:He.a.OPTIONAL(4),style:{height:"230px"}},V.a.createElement("div",{className:"pad"},V.a.createElement("label",null,V.a.createElement(de.a,{id:l.a.BLOODTALONS_TALENT.id})," usage"),this.combinedChart))}}]),a}(j.c),rt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).totalCasts=0,e.active=e.selectedCombatant.hasTalent(l.a.PREDATOR_TALENT.id),e.addEventListener(u.f.cast.by(j.a).spell(l.a.TIGERS_FURY),e.onCast),e}return Object(o.a)(a,[{key:"baseCasts",get:function(){var e=this.abilities.getAbility(l.a.TIGERS_FURY.id);return 1+Math.floor(this.owner.fightDuration/(1e3*e.cooldown))}},{key:"earlyCasts",get:function(){return this.spellUsable.earlyCastsOfTigersFury}},{key:"extraCasts",get:function(){return Math.max(0,this.totalCasts-this.baseCasts)}},{key:"extraCastsPerMinute",get:function(){return this.extraCasts/this.owner.fightDuration*1e3*60}},{key:"suggestionThresholds",get:function(){return{actual:this.extraCastsPerMinute,isLessThan:{minor:1,average:.5,major:.2},style:"number"}}}]),Object(o.a)(a,[{key:"onCast",value:function(e){this.totalCasts+=1}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You're not gaining much benefit from ",V.a.createElement(de.a,{id:l.a.PREDATOR_TALENT.id}),". If the fight has adds make sure they have bleeds on them when they die, and make use of your ",V.a.createElement(de.a,{id:l.a.TIGERS_FURY.id})," cooldown being reset. If the fight doesn't have adds it would be a good idea to switch to another talent.")).icon(l.a.PREDATOR_TALENT.icon).actual(X.i18n._({id:"druid.feral.suggestions.predator.efficiency",defaults:"{0} extra casts of Tiger's Fury per minute.",values:{0:t.toFixed(1)}})).recommended(">".concat(a.toFixed(1)," is recommended"))}))}},{key:"statistic",value:function(){var e=V.a.createElement(V.a.Fragment,null,V.a.createElement("br",null),"Thanks to Predator ",V.a.createElement("strong",null,this.earlyCasts)," of your Tiger's Fury casts ",1!==this.earlyCasts?"were":"was"," before when the cooldown would have been ready."),t=V.a.createElement(V.a.Fragment,null,"Your Predator talent allowed you to use Tiger's Fury at least ",V.a.createElement("strong",null,this.extraCasts)," extra time",1!==this.extraCasts?"s":"",". Without it you would have had time for ",V.a.createElement("strong",null,this.baseCasts)," cast",1!==this.baseCasts?"s":""," but with it you were able to use Tiger's Fury ",V.a.createElement("strong",null,this.totalCasts)," time",1!==this.totalCasts?"s":"",".",this.earlyCasts>0&&e),a=V.a.createElement(V.a.Fragment,null,"Your Predator talent didn't allow you to cast more Tiger's Fury overall than you would have been able to without it, with the fight lasting long enough for all ",V.a.createElement("strong",null,this.totalCasts)," of your cast",1!==this.totalCasts?"s":"",". Either there were no enemies dying with your bleeds on them during this fight or you didn't make use of Tiger's Fury when it came off cooldown.",this.earlyCasts>0&&e);return V.a.createElement(Z.a,{size:"flexible",tooltip:this.extraCasts>0?t:a,positon:J.a.OPTIONAL(3)},V.a.createElement(Re.a,{spell:l.a.PREDATOR_TALENT},V.a.createElement(V.a.Fragment,null,this.extraCastsPerMinute.toFixed(2)," ",V.a.createElement("small",null,"extra casts per minute"))))}}]),a}(j.c);rt.dependencies={spellUsable:H,abilities:b};var st=rt,ot=a(751);var lt=[l.a.MELEE,l.a.SHRED,l.a.RAKE,l.a.RIP,l.a.FEROCIOUS_BITE,l.a.MOONFIRE_FERAL,l.a.THRASH_FERAL,l.a.SWIPE_CAT,l.a.FERAL_FRENZY_TALENT,l.a.MAIM,l.a.MOONFIRE],ct=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).bonusDmg=0,e.active=e.selectedCombatant.hasTalent(l.a.SAVAGE_ROAR_TALENT.id),e.addEventListener(u.f.damage.by(j.a).spell(lt),e.onDamage),e}return Object(o.a)(a,[{key:"uptime",get:function(){return this.selectedCombatant.getBuffUptime(l.a.SAVAGE_ROAR_TALENT.id)/this.owner.fightDuration}},{key:"suggestionThresholds",get:function(){return{actual:this.uptime,isLessThan:{minor:.95,average:.9,major:.8},style:"percentage"}}}]),Object(o.a)(a,[{key:"onDamage",value:function(e){this.selectedCombatant.hasBuff(l.a.SAVAGE_ROAR_TALENT.id)&&this.selectedCombatant.hasBuff(l.a.CAT_FORM.id)&&(this.bonusDmg+=function(e,t){var a=(e.amount||0)+(e.absorbed||0);return a-a/(1+t)}(e,.15))}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"Your ",V.a.createElement(de.a,{id:l.a.SAVAGE_ROAR_TALENT.id})," uptime can be improved. You should refresh the buff once it has reached its ",V.a.createElement(me.a,{content:"The last 30% of the DoT's duration. When you refresh during this time you don't lose any duration in the process."},"pandemic window"),", don't wait for it to wear off. You may also consider switching to ",V.a.createElement(de.a,{id:l.a.SOUL_OF_THE_FOREST_TALENT_FERAL.id})," which is simpler to use and provides more damage in many situations.")).icon(l.a.SAVAGE_ROAR_TALENT.icon).actual(X.i18n._({id:"druid.feral.suggestions.savageRoar.uptime",defaults:"{0}% uptime",values:{0:Object(z.e)(t)}})).recommended(">".concat(Object(z.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){return V.a.createElement(Z.a,{size:"flexible",tooltip:V.a.createElement(V.a.Fragment,null,"Your Savage Roar talent contributed ",V.a.createElement("strong",null,Object(z.d)(this.bonusDmg))," total damage (",Object(z.e)(this.owner.getPercentageOfTotalDamageDone(this.bonusDmg)),"%)."),position:J.a.OPTIONAL(1)},V.a.createElement(Re.a,{spell:l.a.SAVAGE_ROAR_TALENT},V.a.createElement(V.a.Fragment,null,V.a.createElement(Ae.a,null)," ",Object(z.e)(this.uptime),"% ",V.a.createElement("small",null,"uptime")," ",V.a.createElement("br",null),V.a.createElement(ot.a,{amount:this.bonusDmg}))))}}]),a}(j.c);ct.dependencies={enemies:be.a};var ut=ct,dt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"suggestions",value:function(e){this.shouldIgnoreEnergyWaste||e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You are wasting energy generated by ",V.a.createElement(de.a,{id:l.a.TIGERS_FURY.id}),". Usually your ability use will be limited by energy so it's important to make the most of this energy source. Spend energy before using ",V.a.createElement(de.a,{id:l.a.TIGERS_FURY.id})," so that it's not wasted. The main exception is if ",V.a.createElement(de.a,{id:l.a.PREDATOR_TALENT.id})," provides you with lots of resets in which case you can use it more freely.")).icon(l.a.TIGERS_FURY.icon).actual(X.i18n._({id:"druid.feral.suggestions.tigerFuryEnergy.energyWasted",defaults:"{0}% of generated energy wasted.",values:{0:Object(z.e)(t)}})).recommended("No waste is recommended")}))}},{key:"shouldIgnoreEnergyWaste",get:function(){return this.predator.active&&this.predator.extraCastsPerMinute>1}},{key:"suggestionThresholds",get:function(){var e=this.energyTracker.getGeneratedBySpell(l.a.TIGERS_FURY.id),t=this.energyTracker.getWastedBySpell(l.a.TIGERS_FURY.id);return{actual:t/(e+t)||0,isGreaterThan:{minor:0,average:.1,major:.25},style:"percentage"}}}]),a}(j.c);dt.dependencies={energyTracker:ae,predator:st};var ht=dt,mt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).wastedDuringStealth=0,e.correctUses=0,e.totalUses=0,e.active=e.selectedCombatant.race===he.a.NightElf,e.addEventListener(u.f.cast.by(j.a).spell(l.a.RAKE),e.onRake),e.addEventListener(u.f.cast.by(j.a).spell(l.a.SHADOWMELD),e.onShadowmeld),e}return Object(o.a)(a,[{key:"possibleUses",get:function(){var e=1e3*this.abilities.getAbility(l.a.SHADOWMELD.id).cooldown;return Math.floor(this.owner.fightDuration/e)+1}},{key:"efficiencyThresholds",get:function(){return{actual:this.correctUses/this.possibleUses,isLessThan:{minor:.9,average:.8,major:.7},style:"percentage"}}},{key:"wastedDuringStealthThresholds",get:function(){return{actual:this.wastedDuringStealth/this.totalUses,isGreaterThan:{minor:0,average:.1,major:.2},style:"percentage"}}}]),Object(o.a)(a,[{key:"onRake",value:function(e){this.selectedCombatant.hasBuff(l.a.SHADOWMELD.id,null,60)&&(this.correctUses+=1)}},{key:"onShadowmeld",value:function(e){this.totalUses+=1,(this.selectedCombatant.hasBuff(l.a.INCARNATION_KING_OF_THE_JUNGLE_TALENT.id)||this.selectedCombatant.hasBuff(l.a.PROWL.id,null,60)||this.selectedCombatant.hasBuff(l.a.PROWL_INCARNATION.id,null,60))&&(this.wastedDuringStealth+=1)}},{key:"statistic",value:function(){return V.a.createElement(Z.a,{tooltip:V.a.createElement(V.a.Fragment,null,"You used Shadowmeld ",V.a.createElement("strong",null,this.correctUses)," times to increase Rake's damage.",V.a.createElement("br",null),V.a.createElement("ul",null,V.a.createElement("li",null,"You could have used it ",V.a.createElement("strong",null,this.possibleUses)," times."),V.a.createElement("li",null,"You used it ",V.a.createElement("strong",null,this.totalUses)," times (",V.a.createElement("strong",null,this.totalUses-this.correctUses)," didn't buff Rake.)"),V.a.createElement("li",null,"You used Shadowmeld while already benefiting from a stealth effect ",V.a.createElement("strong",null,this.wastedDuringStealth)," times."))),position:J.a.OPTIONAL(),size:"flexible"},V.a.createElement(Re.a,{spell:l.a.SHADOWMELD},V.a.createElement(V.a.Fragment,null,Object(z.e)(this.correctUses/this.possibleUses),"% ",V.a.createElement("small",null,"Shadowmeld used to buff Rake"))))}},{key:"suggestions",value:function(e){var t=this;e(this.efficiencyThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You could be using ",V.a.createElement(de.a,{id:l.a.SHADOWMELD.id})," to increase your ",V.a.createElement(de.a,{id:l.a.RAKE.id})," damage more often. Activating ",V.a.createElement(de.a,{id:l.a.SHADOWMELD.id})," and immediately using ",V.a.createElement(de.a,{id:l.a.RAKE.id})," will cause it to deal double damage.")).icon(l.a.SHADOWMELD.icon).actual(X.i18n._({id:"druid.feral.suggetions.shadowmeld.efficiency",defaults:"{0}% cast efficiency.",values:{0:(100*t).toFixed(0)}})).recommended(">".concat((100*a).toFixed(0),"% is recommended"))})),e(this.wastedDuringStealthThresholds).addSuggestion((function(e,a,n){return e(V.a.createElement(V.a.Fragment,null,"You are wasting ",V.a.createElement(de.a,{id:l.a.SHADOWMELD.id})," by using it when you already have a stealth effect active.")).icon(l.a.SHADOWMELD.icon).actual(X.i18n._({id:"druid.feral.suggetions.shadowmeld.wasted",defaults:"{0} cast{1} when already stealthed.",values:{0:t.wastedDuringStealth,1:1===t.wastedDuringStealth?"":"s"}})).recommended("0 is recommended")}))}}]),a}(j.c);mt.dependencies={abilities:y.a};var gt=mt,ft=[l.a.FEROCIOUS_BITE,l.a.RIP,l.a.MAIM,l.a.PRIMAL_WRATH_TALENT,l.a.SAVAGE_ROAR_TALENT],Et=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).hasSabertooth=!1,e.totalFinishers=0,e.notFullComboFinishers=0,e.badFinishers=0,e.freshRips=0,e.upgradingRips=0,e.hasSabertooth=e.selectedCombatant.hasTalent(l.a.SABERTOOTH_TALENT.id),e.addEventListener(u.f.cast.by(j.a),e._castSpell),e}return Object(o.a)(a,[{key:"fractionBadFinishers",get:function(){return 0===this.totalFinishers?0:this.badFinishers/this.totalFinishers}},{key:"badFinishersThresholds",get:function(){return{actual:this.fractionBadFinishers,isGreaterThan:{minor:0,average:.05,major:.1},style:"percentage"}}}]),Object(o.a)(a,[{key:"_castSpell",value:function(e){var t=ft.find((function(t){return t.id===e.ability.guid}));if(t){this.totalFinishers+=1;var a=Ue(e);a&&5!==a&&(this.notFullComboFinishers+=1,t===l.a.RIP?e.feralSnapshotState&&(ze.wasStateFreshlyApplied(e.feralSnapshotState)?this.freshRips+=1:this.hasSabertooth&&ze.wasStatePowerUpgrade(e.feralSnapshotState)?this.upgradingRips+=1:this.badFinishers+=1):this.badFinishers+=1)}}},{key:"suggestions",value:function(e){e(this.badFinishersThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You are unnecessarily using finishers at less than full combo points. Generally the only finisher you should use without full combo points is ",V.a.createElement(de.a,{id:l.a.RIP.id})," when applying it to a target that doesn't have it active yet.")).icon("creatureportrait_bubble").actual(X.i18n._({id:"druid.feral.suggestions.finishers.efficiency",defaults:"{0}% of finishers were incorrectly used without full combo points",values:{0:(100*t).toFixed(0)}})).recommended("".concat((100*a).toFixed(0),"% is recommended"))}))}},{key:"statistic",value:function(){return V.a.createElement(Z.a,{position:S.a.CORE(6),size:"small",tooltip:V.a.createElement(V.a.Fragment,null,"All finisher abilities are most efficient when used at full combo points, but there are situations where that rule doesn't apply. Of the ",V.a.createElement("b",null,this.totalFinishers)," finishers you used, ",V.a.createElement("b",null,this.notFullComboFinishers)," ",1===this.notFullComboFinishers?"was":"were"," used without full combo points, and ",V.a.createElement("b",null,this.badFinishers)," appear not to have had a good reason for their low combo use.",V.a.createElement("br",null),V.a.createElement("ul",null,V.a.createElement("li",null,V.a.createElement("b",null,this.freshRips)," ",1===this.freshRips?"was a fresh Rip":"were fresh Rips"," applied to a target which didn't already have the DoT, where low combo point use is typically the right thing to do."),V.a.createElement("li",null,V.a.createElement("b",null,this.upgradingRips)," ",1===this.upgradingRips?"was an upgrading Rip":"were upgrading Rips"," where thanks to snapshotting the new DoT would do more damage than the existing. When combined with Sabertooth to extend the improved DoT this is a situation where low combo finisher use is of benefit.")))},V.a.createElement(Q.a,{resource:h.a.COMBO_POINTS,value:"".concat((100*this.fractionBadFinishers).toFixed(0),"%"),label:"Low Combo Finishers"}))}}]),a}(j.c);Et.dependencies={ripSnapshot:ze};var pt=Et,Tt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return V.a.createElement(ye,{combatant:this.combatants.selected,castEfficiency:this.castEfficiency,thresholds:Object(Y.a)(Object(Y.a)({},this.preparationRuleAnalyzer.thresholds),{},{rakeUptime:this.rakeUptime.suggestionThresholds,moonfireUptime:this.moonfireUptime.suggestionThresholds,swipeHitOne:this.swipeHitCount.hitJustOneThresholds,comboPointsWaste:this.comboPointDetails.wastingSuggestionThresholds,ripUptime:this.ripUptime.suggestionThresholds,savageRoarUptime:this.savageRoar.suggestionThresholds,ferociousBiteEnergy:this.ferociousBiteEnergy.suggestionThresholds,ripShouldBeBite:this.ripSnapshot.shouldBeBiteSuggestionThresholds,ripDurationReduction:this.ripSnapshot.durationReductionThresholds,badLowComboFinishers:this.finisherUse.badFinishersThresholds,energyCapped:this.energyCapTracker.suggestionThresholds,tigersFuryIgnoreEnergy:this.tigersFuryEnergy.shouldIgnoreEnergyWaste,tigersFuryEnergy:this.tigersFuryEnergy.suggestionThresholds,shadowmeld:this.shadowmeld.efficiencyThresholds,rakeDowngrade:this.rakeSnapshot.downgradeSuggestionThresholds,rakeProwlDowngrade:this.rakeSnapshot.prowlLostSuggestionThresholds,ripDowngrade:this.ripSnapshot.downgradeSuggestionThresholds,moonfireDowngrade:this.moonfireSnapshot.downgradeSuggestionThresholds,predatorySwiftnessWasted:this.predatorySwiftness.suggestionThresholds,bloodtalonsWasted:this.bloodtalons.suggestionThresholds,predatorWrongTalent:this.predator.suggestionThresholds})})}}]),a}(oe.a);Tt.dependencies={combatants:ce.a,castEfficiency:le.a,preparationRuleAnalyzer:ue.a,rakeUptime:ve,moonfireUptime:Ie,swipeHitCount:Ne,comboPointDetails:Be,ripUptime:De,savageRoar:ut,ferociousBiteEnergy:xe,energyCapTracker:ee,ripSnapshot:ze,rakeSnapshot:Ze,moonfireSnapshot:Qe,predatorySwiftness:$e,bloodtalons:it,predator:st,tigersFuryEnergy:ht,shadowmeld:gt,finisherUse:pt};var yt=Tt,bt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).active=e.selectedCombatant.hasTalent(l.a.BRUTAL_SLASH_TALENT.id),e}return Object(o.a)(a,[{key:"hitNoneThresholds",get:function(){return{actual:this.hitZeroPerMinute,isGreaterThan:{minor:0,average:.2,major:.5},style:"number"}}}]),Object(o.a)(a,[{key:"statistic",value:function(){return this.generateStatistic(S.a.OPTIONAL(10))}},{key:"suggestions",value:function(e){e(this.hitNoneThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You are using ",V.a.createElement(de.a,{id:l.a.BRUTAL_SLASH_TALENT.id})," out of range of any targets. Try to get familiar with the range of your area of effect abilities so you can avoid wasting charges and energy when they'll not hit anything.")).icon(l.a.BRUTAL_SLASH_TALENT.icon).actual(X.i18n._({id:"druid.feral.suggestions.brutalSlash.hitcount.outOfRange",defaults:"{0} uses per minute that hit nothing.",values:{0:t.toFixed(1)}})).recommended("".concat(a," is recommended"))}))}}]),a}(_e);bt.spell=l.a.BRUTAL_SLASH_TALENT;var Rt=bt,At=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"statistic",value:function(){return this.generateStatistic(S.a.OPTIONAL(11))}},{key:"suggestions",value:function(e){e(this.hitNoneThresholds).addSuggestion((function(e,t,a){return e(V.a.createElement(V.a.Fragment,null,"You are using ",V.a.createElement(de.a,{id:l.a.THRASH_FERAL.id})," out of range of any targets. Try to get familiar with the range of your area of effect abilities so you can avoid wasting energy when they'll not hit anything.")).icon(l.a.THRASH_FERAL.icon).actual(X.i18n._({id:"druid.feral.suggestions.thrash.hitcount.outOfRange",defaults:"{0} uses per minute that hit nothing.",values:{0:t.toFixed(1)}})).recommended("".concat(a," is recommended"))}))}},{key:"hitNoneThresholds",get:function(){return{actual:this.hitZeroPerMinute,isGreaterThan:{minor:0,average:.2,major:.5},style:"number"}}},{key:"hitJustOneThresholds",get:function(){return{actual:this.hitJustOnePerMinute,isGreaterThan:{minor:0,average:.5,major:3},style:"number"}}}]),a}(_e);At.spell=l.a.THRASH_FERAL;var Ot=At,vt=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(s.a);vt.specModules={rakeBleed:d,bleedDebuffEvents:T,comboPointsFromAoE:E,alwaysBeCasting:I,abilities:b,buffs:O,cooldownThroughputTracker:F,ferociousBiteEnergy:xe,spellUsable:H,spellEnergyCost:W,energyCapTracker:ee,energyTracker:ae,energyDetails:se,checklist:yt,rakeUptime:ve,ripUptime:De,rakeSnapshot:Ze,ripSnapshot:ze,moonfireSnapshot:Qe,predatorySwiftness:$e,thrashHitCount:Ot,swipeHitCount:Ne,tigersFuryEnergy:ht,shadowmeld:gt,moonfireUptime:Ie,savageRoar:ut,predator:st,bloodtalons:it,brutalSlashHitCount:Rt,comboPointTracker:Ce,comboPointDetails:Be,finisherUse:pt};t.default=vt},752:function(e,t,a){"use strict";function n(e,t){var a=(e.amount||0)+(e.absorbed||0);return a-a/(1+t)}a.d(t,"a",(function(){return n}))},760:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=function(e){var t=Object.assign({},e);return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"10 10 80 80",className:"icon"},t),i.a.createElement("path",{d:"M50,86.4865c17.4361,0,31.6216-14.1855,31.6216-31.6216c0-16.6168-12.8865-30.2714-29.1892-31.5189v-4.9677h7.2973v-4.8649  H40.2703v4.8649h7.2973v4.9677c-16.3027,1.2475-29.1892,14.902-29.1892,31.5189C18.3784,72.3009,32.5639,86.4865,50,86.4865z M52.4324,28.2236c3.1101,0.2817,6.0664,1.0982,8.7798,2.356l-8.7798,15.2073V28.2236z M47.5676,28.2236v26.6412 c0,1.1008,0.7393,2.0647,1.8029,2.3497c0.209,0.0561,0.4205,0.0827,0.6295,0.0827c0.8533,0,1.6642-0.4504,2.1065-1.2162 l13.3146-23.0616c6.8507,4.8503,11.3357,12.8315,11.3357,21.8454c0,14.7537-12.0031,26.7567-26.7568,26.7567 s-26.7568-12.003-26.7568-26.7567C23.2432,40.9315,33.9501,29.4573,47.5676,28.2236z"}))}},799:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(0),l=a.n(o),c=a(779),u=a(33),d=a(4),h=a(22),m=(a(817),function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"renderLegend",value:function(e){var t=e.reduce((function(e,t){return e+t.value}),0);return l.a.createElement("div",{className:"legend"},e.map((function(e,a){var n=e.color,i=e.label,r=e.tooltip,s=e.value,o=e.spellId,c=e.valueTooltip;return i=r?l.a.createElement(h.a,{content:r},i):i,i=o?l.a.createElement(d.a,{id:o},i):i,l.a.createElement("div",{key:a,className:"flex"},l.a.createElement("div",{className:"flex-sub"},l.a.createElement("div",{className:"circle",style:{background:n}})),l.a.createElement("div",{className:"flex-main"},i),l.a.createElement("div",{className:"flex-sub"},l.a.createElement(h.a,{content:c||s},Object(u.e)(s/t,0),"%")))})))}},{key:"renderChart",value:function(e,t,a){var n={items:e},i={data:{name:"items"},mark:{type:"arc",innerRadius:t*a},encoding:{theta:{field:"value",type:"quantitative"},color:{field:"label",type:"nominal",legend:null,scale:{domain:e.map((function(e){return e.label})),range:e.map((function(e){return e.color}))}}},view:{stroke:null}};return l.a.createElement("div",{className:"chart"},l.a.createElement(c.a,{width:t,height:t,spec:i,data:n}))}},{key:"render",value:function(){var e=this.props,t=e.items,a=e.chartSize,n=e.innerRadiusFactor;return l.a.createElement("div",{className:"donut-chart"},this.renderLegend(t),this.renderChart(t,a,n))}}]),a}(l.a.PureComponent));m.defaultProps={chartSize:90,innerRadiusFactor:.28},t.a=m},801:function(e,t,a){"use strict";var n=a(27),i=a(0),r=a.n(i),s=a(22),o=(a(858),a(58)),l=a(747);a.d(t,"a",(function(){return l.a}));var c=function(e){var t=e.title,a=e.tooltip,i=e.children,o=e.bodyStyle,l=Object(n.a)(e,["title","tooltip","children","bodyStyle"]);return delete l.category,delete l.position,r.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-12"},r.a.createElement("div",Object.assign({className:"panel statistic statistic-box statistic-box-list"},l),t&&r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h2",null,a?r.a.createElement(s.a,{content:a},t):t)),r.a.createElement("div",{className:"panel-body items",style:o},i)))};c.defaultProps={category:o.a.GENERAL},t.b=c},817:function(e,t,a){},839:function(e,t,a){"use strict";var n=a(8),i=a(9),r=a(10),s=a(11),o=a(43),l=a(800),c=a(123),u=a(832),d=a(766),h=a(15),m=[d.a.MISS,d.a.DODGE,d.a.PARRY],g=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];(e=t.call.apply(t,[this].concat(r))).atCap=0,e.missedRegen=0,e.naturalRegen=0,e.regenState=null,e.prevSpender=null,e.hasReportedBelowCap=!1,e.debugErrorSum=0,e.debugGreatestError=0,e.debugAccuracyCheckCount=0;var l=e.currentMaxResourceWithFallback();return e.regenState={amount:l||0,max:l,regen:e.naturalRegenRate(),timestamp:e.owner.fight.start_time},e.addEventListener(h.f.fightend,e.onFightend),e.addEventListener(h.f.energize.to(o.a),e.onEnergize),e.addEventListener(h.f.cast.by(o.a),e.onCast),e.addEventListener(h.f.damage.by(o.a),e.onDamage),e.addEventListener(h.f.drain.by(o.a),e.onDrain),e.addEventListener(h.f.applybuff.to(o.a),e.onApplyBuff),e.addEventListener(h.f.removebuff.to(o.a),e.onRemoveBuff),e.addEventListener(h.f.ChangeHaste.to(o.a),e.onChangeHaste),e}return Object(i.a)(a,[{key:"current",get:function(){return this.predictValue(this.owner.currentTimestamp)}},{key:"isCapped",get:function(){return this.current>=this.regenState.max}},{key:"cappedProportion",get:function(){return this.atCap/this.owner.fightDuration}},{key:"missedRegenPerMinute",get:function(){return this.missedRegen/this.owner.fightDuration*1e3*60}}]),Object(i.a)(a,[{key:"getReducedDrain",value:function(e){return e.resourceChange}},{key:"getBaseRegenRate",value:function(){return this.constructor.baseRegenRate}},{key:"naturalRegenRate",value:function(){var e=this.getBaseRegenRate()/1e3;return this.constructor.isRegenHasted&&(e*=1+this.haste.current),e}},{key:"currentMaxResource",value:function(){return null}},{key:"processInvisibleEnergize",value:function(e){if(null==e||isNaN(e))throw new Error("processInvisibleEnergize called without required parameter. amount: ".concat(e));if(0!==e){var t=this.current,a=Math.min(t+e,this.currentMaxResourceWithFallback())-t;this.applyEnergize(a)}}},{key:"getResource",value:function(e){var t=this;return e&&e.classResources?e.classResources.find((function(e){return e.type===t.constructor.resourceType.id})):null}},{key:"getCost",value:function(e){return void 0!==e.resourceCost[this.constructor.resourceType.id]?e.resourceCost[this.constructor.resourceType.id]:this.getResource(e).cost}},{key:"combatantHasBuffActive",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||isNaN(e))throw new Error("combatantHasBuffActive called without required parameter. buffId: ".concat(e));t||(t=this.owner.currentTimestamp);var a=this.selectedCombatant.getBuffHistory(e);return Boolean(a.find((function(e){return e.start<=t&&(!e.end||e.end>t)})))}},{key:"onFightend",value:function(){this.updateState(this.predictValue(this.owner.fight.end_time))}},{key:"onEnergize",value:function(e){if(e.resourceChangeType===this.constructor.resourceType.id&&e.resourceChange){var t=e.waste?e.waste:0,a=e.resourceChange-t,n=this.constructor.energizersToApplyCumulatively.includes(e.ability.guid);this.applyEnergize(a,e,n)}}},{key:"applyEnergize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||isNaN(e))throw new Error("applyEnergize called without required parameter. gain: ".concat(e));var n=t?t.timestamp:this.owner.currentTimestamp,i=t?this.getResource(t):null,r=a||this.isLastUpdateRecent(n)||!i||null==i.amount,s=r?this.predictValue(n)+e:i.amount;var o=this.currentMaxResourceWithFallback(t);this.updateState(s,o)}},{key:"onCast",value:function(e){var t=this.getResource(e);if(t){var a=this.getCost(e);if(a){this.constructor.exemptFromRefund.includes(e.ability.guid)||(this.prevSpender={id:e.ability.guid,cost:a,timestamp:e.timestamp});var n=null==t.amount||this.constructor.castsToApplyCumulatively.includes(e.ability.guid)||this.isLastUpdateRecent(e.timestamp),i=(n?this.predictValue(e.timestamp):t.amount)-a;0;var r=this.currentMaxResourceWithFallback(e);this.updateState(i,r)}}}},{key:"onDamage",value:function(e){if(!(!this.prevSpender||e.ability.guid!==this.prevSpender.id||e.timestamp-this.prevSpender.timestamp>500||e.tick)&&m.includes(e.hitType)){var t=Math.floor(this.prevSpender.cost*this.constructor.resourceRefundOnMiss),a=this.predictValue(e.timestamp)+t;this.updateState(a)}}},{key:"onDrain",value:function(e){if(e.resourceChangeType===this.constructor.resourceType.id&&e.resourceChange){var t=this.getResource(e),a=this.getReducedDrain(e),n=!t||null==t.amount||this.constructor.energizersToApplyCumulatively.includes(e.ability.guid)||this.isLastUpdateRecent(e.timestamp),i=(n?this.predictValue(e.timestamp):t.amount)-a;0;var r=this.currentMaxResourceWithFallback(e);this.updateState(i,r)}}},{key:"isLastUpdateRecent",value:function(e){return this.regenState.timestamp+this.constructor.cumulativeEventWindow>=e}},{key:"onApplyBuff",value:function(e){this.constructor.buffsChangeMax.includes(e.ability.guid)&&this.buffChangesResourceMax(e),this.constructor.buffsChangeRegen.includes(e.ability.guid)&&this.buffChangesRegen()}},{key:"onRemoveBuff",value:function(e){this.constructor.buffsChangeMax.includes(e.ability.guid)&&this.buffChangesResourceMax(e),this.constructor.buffsChangeRegen.includes(e.ability.guid)&&this.buffChangesRegen()}},{key:"onChangeHaste",value:function(){var e=this.naturalRegenRate();this.updateState(null,null,e)}},{key:"buffChangesResourceMax",value:function(e){var t=this.currentMaxResourceWithFallback(e);this.updateState(null,t)}},{key:"buffChangesRegen",value:function(){var e=this.naturalRegenRate();this.updateState(null,null,e)}},{key:"updateState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.owner.currentTimestamp;(null==e||isNaN(e))&&(e=this.predictValue(n)),(null==t||isNaN(t))&&(t=this.currentMaxResourceWithFallback()),(null==a||isNaN(a))&&(a=this.naturalRegenRate()),e=t?Math.min(t,e):e;var i=this.regenState,r={amount:e,max:t,regen:a,timestamp:n};if(this.regenState=r,i){var s=this.timeCappedBetweenStates(i,r);this.atCap+=s,this.missedRegen+=s*i.regen,this.naturalRegen+=(r.timestamp-i.timestamp)*i.regen}r.amount<r.max&&this.onBelowCap(r.timestamp)}},{key:"timeCappedBetweenStates",value:function(e,t){if(!e||!t)throw new Error("timeCappedBetweenStates called without required parameters. oldState: ".concat(e,", newState: ").concat(t));var a=e.max?this.predictReachValue(e.timestamp,e.amount,e.regen,e.max):1/0;return a>=t.timestamp?0:(this.onAtCap(a),t.timestamp-a)}},{key:"currentMaxResourceWithFallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.currentMaxResource();if(t)return t;var a=this.getResource(e);return a&&null!=a.max&&!isNaN(a.max)?a.max:this.regenState.max}},{key:"predictReachValue",value:function(e,t,a,n){if(null==t||isNaN(t)||null==a||isNaN(a)||null==n||isNaN(n)||null==e||isNaN(e))throw new Error("predictReachValue called without required parameters. startValue: ".concat(t,", regen: ").concat(a,", cap: ").concat(n,", startTime: ").concat(e));return t>=n?e:0===a?1/0:e+(n-t)/a}},{key:"predictValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e||(e=this.owner.currentTimestamp),e<this.regenState.timestamp)return this.regenState.amount;var t=e-this.regenState.timestamp,a=this.regenState.amount+this.regenState.regen*t;return this.regenState.max?Math.min(this.regenState.max,a):a}},{key:"onBelowCap",value:function(e){this.hasReportedBelowCap||(this.fabricateEndCap(e),this.hasReportedBelowCap=!0)}},{key:"onAtCap",value:function(e){this.hasReportedBelowCap&&(this.fabricateBeginCap(e),this.hasReportedBelowCap=!1)}},{key:"fabricateBeginCap",value:function(e){if(null==e||isNaN(e))throw new Error("fabricateBeginCap called without required parameter. time: ".concat(e));this.eventEmitter.fabricateEvent({type:"beginresourcecap",timestamp:e,sourceID:this.owner.playerId,targetID:this.owner.playerId,resourceType:this.constructor.resourceType.id})}},{key:"fabricateEndCap",value:function(e){if(null==e||isNaN(e))throw new Error("fabricateEndCap called without required parameter. time: ".concat(e));this.eventEmitter.fabricateEvent({type:"endresourcecap",timestamp:e,sourceID:this.owner.playerId,targetID:this.owner.playerId,resourceType:this.constructor.resourceType.id})}},{key:"debugActualVsPredicted",value:function(e,t){}},{key:"debugMeanPredictionError",get:function(){return this.debugErrorSum/this.debugAccuracyCheckCount}}]),a}(o.c);g.dependencies={eventEmitter:c.a,haste:l.a,spellResourceCost:u.a},g.baseRegenRate=0,g.isRegenHasted=!1,g.buffsChangeMax=[],g.buffsChangeRegen=[],g.energizersToApplyCumulatively=[],g.castsToApplyCumulatively=[],g.drainsToApplyCumulatively=[],g.cumulativeEventWindow=100,g.resourceRefundOnMiss=0,g.exemptFromRefund=[],t.a=g}}]);
//# sourceMappingURL=FeralDruid.d71f35dc.chunk.js.map