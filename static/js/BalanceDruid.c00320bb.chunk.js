(this.webpackJsonpwowanalyzer=this.webpackJsonpwowanalyzer||[]).push([[14],{728:function(e,t,a){"use strict";a.r(t);var n,s=a(8),i=a(10),r=a(11),l=a(776),c=a(12),o=a(7),u=a(3),d=a(800),h=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return a}(d.a);h.HASTE_BUFFS=Object(o.a)(Object(o.a)({},d.a.HASTE_BUFFS),{},(n={},Object(c.a)(n,u.a.STARLORD.id,{hastePerStack:.03}),Object(c.a)(n,u.a.INCARNATION_CHOSEN_OF_ELUNE_TALENT.id,.15),Object(c.a)(n,u.a.CELESTIAL_ALIGNMENT.id,.15),n));var E=h,f=a(9),m=a(120),g=a(66),T=a(811),b=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"getGlobalCooldownDuration",value:function(e){var t=Object(m.a)(Object(g.a)(a.prototype),"getGlobalCooldownDuration",this).call(this,e);return e===u.a.SOLAR_WRATH_MOONKIN.id&&this.selectedCombatant.hasBuff(u.a.SOLAR_EMP_BUFF.id)||e===u.a.LUNAR_STRIKE.id&&this.selectedCombatant.hasBuff(u.a.LUNAR_EMP_BUFF.id)?Math.max(.85*t,750):e===u.a.NEW_MOON_TALENT.id?Math.max(t*(2/3),750):t}}]),a}(T.a),p=a(768),O=a(15),L=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).empowermentBuff=null,e}return Object(f.a)(a,[{key:"normalize",value:function(e){var t=this,a=[];return e.forEach((function(e,n){if(a.push(e),e.type===O.b.Cast&&e.ability.guid===u.a.STARSURGE_MOONKIN.id)for(var s=e.timestamp,i=n;i>=0;i-=1){var r=a[i];if(s-r.timestamp>100)break;if((r.type===O.b.ApplyBuff||r.type===O.b.ApplyBuffStack)&&r.ability.guid===t.empowermentBuff.id){a.splice(i,1),a.push(r),r.__modified=!0;break}}})),a}}]),a}(p.a),A=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).empowermentBuff=u.a.LUNAR_EMP_BUFF,e}return a}(L),y=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).empowermentBuff=u.a.SOLAR_EMP_BUFF,e}return a}(L),R=a(0),S=a.n(R),_=a(203),v=a(767),I=a(757),N=a(777),C=a(869),w=a(33),F=a(750),j=a(13),k=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).statisticOrder=F.a.CORE(8),e}return Object(f.a)(a,[{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e("You cancelled ".concat(Object(w.e)(t),"% of your spells. While it is expected that you will have to cancel a few casts to react to a boss mechanic or to move, you should try to ensure that you are cancelling as few casts as possible.")).icon("inv_misc_map_01").actual(j.i18n._({id:"druid.balance.suggestions.castsCancelled",defaults:"{0}% casts cancelled",values:{0:Object(w.e)(t)}})).recommended("<".concat(Object(w.e)(a),"% is recommended"))}))}},{key:"suggestionThresholds",get:function(){return{actual:this.castsCancelled/this.totalCasts,isGreaterThan:{minor:.05,average:.075,major:.1},style:"percentage"}}}]),a}(C.a),D=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).statisticOrder=F.a.CORE(4),e}return Object(f.a)(a,[{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e("Your downtime can be improved. Try to Always Be Casting (ABC)...").icon("spell_mage_altertime").actual(j.i18n._({id:"druid.balance.suggestions.alwaysBeCasting.downtime",defaults:"{0}% downtime",values:{0:Object(w.e)(t)}})).recommended("".concat(Object(w.e)(a),"% or less is recommended"))}))}},{key:"suggestionThresholds",get:function(){return{actual:this.downtimePercentage,isGreaterThan:{minor:.05,average:.075,major:.1},style:"percentage"}}}]),a}(a(780).a),U=a(43),P=a(756),M=a(4),G=a(747),B=a(746),x=a(748),W=a(760),H=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).statisticOrder=G.a.CORE(4),e}return Object(f.a)(a,[{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(S.a.createElement(S.a.Fragment,null,"Your ",S.a.createElement(M.a,{id:u.a.MOONFIRE_BEAR.id})," uptime can be improved. Try to pay more attention to your Moonfire on the boss.")).icon(u.a.MOONFIRE_BEAR.icon).actual(j.i18n._({id:"druid.balance.suggestions.moonfire.uptime",defaults:"{0}% Moonfire uptime",values:{0:Object(w.e)(t)}})).recommended(">".concat(Object(w.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){var e=this.enemies.getBuffUptime(u.a.MOONFIRE_BEAR.id)/this.owner.fightDuration;return S.a.createElement(B.a,{position:G.a.CORE(4),size:"flexible"},S.a.createElement(x.a,{spell:u.a.MOONFIRE_BEAR},S.a.createElement(S.a.Fragment,null,S.a.createElement(W.a,null)," ",Object(w.e)(e)," % ",S.a.createElement("small",null,"uptime"))))}},{key:"suggestionThresholds",get:function(){return{actual:this.enemies.getBuffUptime(u.a.MOONFIRE_BEAR.id)/this.owner.fightDuration,isLessThan:{minor:.95,average:.9,major:.8},style:"percentage"}}}]),a}(U.c);H.dependencies={enemies:P.a};var Y=H,K=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).statisticOrder=G.a.CORE(7),e}return Object(f.a)(a,[{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(S.a.createElement(S.a.Fragment,null,"Your ",S.a.createElement(M.a,{id:u.a.SUNFIRE.id})," uptime can be improved. Try to pay more attention to your Sunfire on the boss.")).icon(u.a.SUNFIRE.icon).actual(j.i18n._({id:"druid.balance.suggestions.sunfire.uptime",defaults:"{0}% Sunfire uptime",values:{0:Object(w.e)(t)}})).recommended(">".concat(Object(w.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){var e=this.enemies.getBuffUptime(u.a.SUNFIRE.id)/this.owner.fightDuration;return S.a.createElement(B.a,{position:G.a.CORE(4),size:"flexible"},S.a.createElement(x.a,{spell:u.a.SUNFIRE},S.a.createElement(S.a.Fragment,null,S.a.createElement(W.a,null)," ",Object(w.e)(e)," % ",S.a.createElement("small",null,"uptime"))))}},{key:"suggestionThresholds",get:function(){return{actual:this.enemies.getBuffUptime(u.a.SUNFIRE.id)/this.owner.fightDuration,isLessThan:{minor:.95,average:.9,major:.8},style:"percentage"}}}]),a}(U.c);K.dependencies={enemies:P.a};var z=K,V=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).statisticOrder=G.a.OPTIONAL(),e.active=e.selectedCombatant.hasTalent(u.a.STELLAR_FLARE_TALENT.id),e}return Object(f.a)(a,[{key:"suggestionThresholds",get:function(){return{actual:this.enemies.getBuffUptime(u.a.STELLAR_FLARE_TALENT.id)/this.owner.fightDuration,isLessThan:{minor:.95,average:.9,major:.8},style:"percentage"}}}]),Object(f.a)(a,[{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(S.a.createElement(S.a.Fragment,null,"Your ",S.a.createElement(M.a,{id:u.a.STELLAR_FLARE_TALENT.id})," uptime can be improved. Try to pay more attention to your Stellar Flare on the boss.")).icon(u.a.STELLAR_FLARE_TALENT.icon).actual(j.i18n._({id:"druid.balance.suggestions.stellarFlare.uptime",defaults:"{0}% Stellar Flare uptime",values:{0:Object(w.e)(t)}})).recommended(">".concat(Object(w.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){var e=this.enemies.getBuffUptime(u.a.STELLAR_FLARE_TALENT.id)/this.owner.fightDuration;return S.a.createElement(B.a,{position:G.a.CORE(7),size:"flexible"},S.a.createElement(x.a,{spell:u.a.STELLAR_FLARE_TALENT},S.a.createElement(S.a.Fragment,null,S.a.createElement(W.a,null)," ",Object(w.e)(e)," % ",S.a.createElement("small",null,"uptime"))))}}]),a}(U.c);V.dependencies={enemies:P.a};var J=V,Z=a(88),X=a(761),q=a(53),$=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).empowermentBuff=null,n.empoweredSpell=null,n.empowermentPrefix=null,n.spellGenerateAmount=0,n.icon=null,n.resource=Z.a.ASTRAL_POWER,n.wasted=0,n.generated=0,n.addEventListener(O.f.cast.by(U.a).spell(u.a.STARSURGE_MOONKIN),n.onCast),n.addEventListener(O.f.applybuff.to(U.a).spell(n.empowermentBuff),n.onApplyBuff),n.addEventListener(O.f.applybuffstack.to(U.a).spell(n.empowermentBuff),n.onApplyBuffStack),n}return Object(f.a)(a,[{key:"wastedPercentage",get:function(){return this.wasted/this.generated}},{key:"suggestionThresholds",get:function(){return{actual:1-this.wastedPercentage,isLessThan:{minor:.98,average:.95,major:.9},style:"percentage"}}},{key:"suggestionThresholdsInverted",get:function(){return{actual:this.wastedPercentage,isGreaterThan:{minor:.02,average:.05,major:.1},style:"percentage"}}}]),Object(f.a)(a,[{key:"onCast",value:function(e){var t=this.selectedCombatant.getBuff(this.empowermentBuff.id);t&&(t.stacks<3||(this.wasted+=1,this.generated+=1))}},{key:"onApplyBuff",value:function(e){this.generated+=1}},{key:"onApplyBuffStack",value:function(e){this.generated+=1}},{key:"suggestions",value:function(e){var t=this;e(this.suggestionThresholdsInverted).addSuggestion((function(e,a,n){return e(S.a.createElement(S.a.Fragment,null,"You overcapped ",t.wasted," ",t.empowermentPrefix," Empowerments by casting ",S.a.createElement(M.a,{id:u.a.STARSURGE_MOONKIN.id})," while already at 3 stacks. Try to always spend your empowerments before casting ",S.a.createElement(M.a,{id:u.a.STARSURGE_MOONKIN.id})," if you are not going to overcap Astral Power.")).icon(t.icon).actual(j.i18n._({id:"druid.balance.suggestions.empowerment.overcapped",defaults:"{0}% overcapped {1} Empowerments",values:{0:Object(w.e)(a),1:t.empowermentPrefix}})).recommended("<".concat(Object(w.e)(n),"% is recommended"))}))}},{key:"statistic",value:function(){return S.a.createElement(B.a,{position:G.a.CORE(3),size:"flexible",tooltip:"".concat(this.wasted," out of ").concat(this.generated," ").concat(this.empowermentPrefix," Empowerments wasted. ").concat(this.empowermentPrefix," Empowerment overcapping should never occur when it is possible to cast a ").concat(this.empoweredSpell.name," without overcapping Astral Power.")},S.a.createElement(X.a,{label:S.a.createElement(S.a.Fragment,null,"Overcapped ",S.a.createElement(q.a,{id:this.empoweredSpell.id})," ",this.empowermentPrefix," Empowerments ")},S.a.createElement(S.a.Fragment,null,Object(w.e)(this.wastedPercentage)," % ",S.a.createElement("small",null,"wasted"))))}}]),a}(U.c),Q=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).empowermentBuff=u.a.LUNAR_EMP_BUFF,e.statisticOrder=F.a.CORE(5),e.empoweredSpell=u.a.LUNAR_STRIKE,e.empowermentPrefix="Lunar",e.spellGenerateAmount=12,e.icon="ability_druid_eclipse",e}return a}($),ee=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).empowermentBuff=u.a.SOLAR_EMP_BUFF,e.statisticOrder=F.a.CORE(6),e.empoweredSpell=u.a.SOLAR_WRATH_MOONKIN,e.empowermentPrefix="Solar",e.spellGenerateAmount=8,e.icon="ability_druid_eclipseorange",e}return a}($),te=a(881),ae=a(968),ne=[{name:"Stellar Flare",debuffId:u.a.STELLAR_FLARE_TALENT.id,castId:u.a.STELLAR_FLARE_TALENT.id,duration:24e3}],se=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).active=e.selectedCombatant.hasTalent(u.a.STELLAR_FLARE_TALENT.id),e}return Object(f.a)(a,[{key:"suggestionThresholdsStellarFlare",get:function(){return{spell:u.a.STELLAR_FLARE_TALENT,count:this.casts[ne[0].castId].badCasts,actual:this.badCastsPercent(ne[0].castId),isGreaterThan:{minor:1-.9,average:1-.8,major:.4},style:"percentage"}}},{key:"suggestionThresholdsStellarFlareEfficiency",get:function(){return{spell:u.a.STELLAR_FLARE_TALENT,actual:1-this.badCastsPercent(ne[0].castId),isLessThan:{minor:.9,average:.8,major:.6},style:"percentage"}}}]),Object(f.a)(a,[{key:"suggestions",value:function(e){Object(ae.a)(e,this.suggestionThresholdsStellarFlare)}}]),a}(te.a);se.dots=ne;var ie=se,re=a(122),le=a(764),ce=a(965),oe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"getLastBadCastText",value:function(e,t){var a="";this.movedSinceCast(e)||(a="".concat(t.name," was cast while it had more than 30% of its duration remaining on all targets hit and you were standing still."));var n=this.couldCastWhileMoving(this.lastCast,e);n&&(a="".concat(t.name," was cast while it had more than 30% of its duration remaining on all targets hit and you had ").concat(n," active, allowing you to cast better spells while moving."));var s=this.betterFillersAvailable(this.lastCast);if(s&&s.length>0){for(var i="",r=0;r<s.length;r+=1)i+=s[r],r+2<s.length?i+=", ":r+1<s.length&&(i+=" and ");a="".concat(t.name," was cast while it had more than 30% of its duration remaining on all targets hit and you had ").concat(i," available as a better filler.")}return a}},{key:"movedSinceCast",value:function(e){var t=e.timestamp-this.lastGCD.timestamp,a=this.distanceMoved.timeSinceLastMovement();return null!==a&&a<t}},{key:"couldCastWhileMoving",value:function(e,t){return!1}},{key:"betterFillersAvailable",value:function(e){var t=this,a=[];return this.constructor.dots.filter((function(t){return t.castId!==e.ability.guid})).forEach((function(n){(t.targets[n.debuffId][Object(le.b)(e.targetID,e.targetInstance)]||0)-e.timestamp<.3*n.duration&&a.push(n.name)})),a}},{key:"lastCastBuffer",get:function(){return this.lastGCD.duration-100}}]),a}(te.a);oe.dependencies=Object(o.a)(Object(o.a)({},te.a.dependencies),{},{distanceMoved:ce.a});var ue=oe;var de=function(e,t){e(t).addSuggestion((function(e,a,n){return e(S.a.createElement(S.a.Fragment,null,"You refreshed ",S.a.createElement(M.a,{id:t.spell.id})," early ",t.count," times when you had better spells to cast. See the highlighted casts on the timeline for more information.")).icon(t.spell.icon).actual(j.i18n._({id:"shared.suggestions.dots.badRefreshes",defaults:"{0}% bad dot refreshes",values:{0:Object(w.e)(a)}})).recommended("<".concat(Object(w.e)(n),"% is recommended"))}))},he=[{name:"Moonfire",debuffId:u.a.MOONFIRE_BEAR.id,castId:u.a.MOONFIRE.id,duration:22e3,movementFiller:!0},{name:"Sunfire",debuffId:u.a.SUNFIRE.id,castId:u.a.SUNFIRE_CAST.id,duration:18e3,movementFiller:!0}],Ee=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"couldCastWhileMoving",value:function(e,t){return!(!this.selectedCombatant.hasBuff(u.a.STELLAR_DRIFT.id,e.timestamp)||!this.selectedCombatant.hasBuff(u.a.STELLAR_DRIFT.id,t.timestamp))&&u.a.STELLAR_DRIFT.name}},{key:"suggestions",value:function(e){de(e,this.suggestionThresholdsMoonfire),de(e,this.suggestionThresholdsSunfire)}},{key:"suggestionThresholdsMoonfire",get:function(){return{spell:u.a.MOONFIRE_BEAR,count:this.casts[he[0].castId].badCasts,actual:this.badCastsPercent(he[0].castId),isGreaterThan:{minor:1-.9,average:1-.8,major:.4},style:"percentage"}}},{key:"suggestionThresholdsSunfire",get:function(){return{spell:u.a.SUNFIRE,count:this.casts[he[1].castId].badCasts,actual:this.badCastsPercent(he[1].castId),isGreaterThan:{minor:1-.9,average:1-.8,major:.4},style:"percentage"}}},{key:"suggestionThresholdsMoonfireEfficiency",get:function(){return{spell:u.a.MOONFIRE_BEAR,actual:1-this.badCastsPercent(he[0].castId),isLessThan:{minor:.9,average:.8,major:.6},style:"percentage"}}},{key:"suggestionThresholdsSunfireEfficiency",get:function(){return{spell:u.a.SUNFIRE,actual:1-this.badCastsPercent(he[1].castId),isLessThan:{minor:.9,average:.8,major:.6},style:"percentage"}}}]),a}(ue);Ee.dependencies=Object(o.a)(Object(o.a)({},ue.dependencies),{},{statTracker:re.a}),Ee.dots=he;var fe=Ee,me=a(49),ge=a(781),Te=a(808),be=a(773),pe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).resource=Z.a.ASTRAL_POWER,e}return Object(f.a)(a,[{key:"onEnergize",value:function(e){var t=e.ability.guid;if(t===u.a.LUNAR_STRIKE.id&&this.selectedCombatant.hasBuff(u.a.WARRIOR_OF_ELUNE_TALENT.id)){if(e.resourceChangeType===this.resource.id){var n=e.resourceChange,s=n-n/1.4,i=Math.min(e.waste,s),r=e.waste-i,l=n-s-r,c=s-i;this._applyBuilder(t,this.getResource(e),l,r),this._applyBuilder(u.a.WARRIOR_OF_ELUNE_TALENT.id,this.getResource(e),c,i)}}else Object(m.a)(Object(g.a)(a.prototype),"onEnergize",this).call(this,e)}},{key:"getReducedCost",value:function(e){if(!this.getResource(e).cost)return 0;var t=this.getResource(e).cost/10;return e.ability.guid===u.a.STARFALL_CAST.id&&this.selectedCombatant.hasTalent(u.a.SOUL_OF_THE_FOREST_TALENT_BALANCE.id)&&(t-=10),t}}]),a}(be.a),Oe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"suggestions",value:function(e){var t=this;e(this.suggestionThresholdsWasted).addSuggestion((function(e,a,n){return e("You overcapped ".concat(t.wasted," Astral Power. Always prioritize spending it over avoiding the overcap of any other ability.")).icon("ability_druid_cresentburn").actual(j.i18n._({id:"druid.balance.suggestions.astralPower.overcapped",defaults:"{0}% overcapped Astral Power",values:{0:Object(w.e)(a)}})).recommended("".concat(Object(w.e)(n),"% is recommended"))}))}},{key:"statistic",value:function(){return S.a.createElement(B.a,{position:G.a.CORE(1),size:"small",tooltip:"".concat(this.wasted," out of ").concat(this.total," Astral Power wasted.")},S.a.createElement(Te.a,{resource:Z.a.ASTRAL_POWER,value:"".concat(Object(w.e)(this.wastedPercent)," %"),label:"Overcapped Astral Power"}))}},{key:"tab",value:function(){var e=this;return{title:"Astral Power usage",url:"astral-power-usage",render:function(){return S.a.createElement(me.a,null,S.a.createElement(ge.a,{tracker:e.astralPowerTracker,showSpenders:!0}))}}}},{key:"wasted",get:function(){return this.astralPowerTracker.wasted||0}},{key:"total",get:function(){return this.astralPowerTracker.wasted+this.astralPowerTracker.generated||0}},{key:"wastedPerMinute",get:function(){return this.wasted/this.owner.fightDuration*1e3*60||0}},{key:"wastedPercent",get:function(){return this.wasted/this.total||0}},{key:"suggestionThresholdsWasted",get:function(){return{actual:this.wastedPercent,isGreaterThan:{minor:0,average:.02,major:.05},style:"percentage"}}},{key:"suggestionThresholds",get:function(){return{actual:1-this.wastedPercent,isLessThan:{minor:1,average:.98,major:.95},style:"percentage"}}}]),a}(U.c);Oe.dependencies={astralPowerTracker:pe};var Le=Oe,Ae=a(770),ye=a(762),Re=a(763),Se=a(771),_e=a(772),ve=function(e){var t=e.combatant,a=e.castEfficiency,n=e.thresholds,s=function(e){return S.a.createElement(_e.a,Object.assign({castEfficiency:a.getCastEfficiencyForSpellId(e.spell)},e))};return S.a.createElement(Ae.a,null,S.a.createElement(ye.c,{name:"Always be casting",description:S.a.createElement(S.a.Fragment,null,S.a.createElement("em",null,S.a.createElement("b",null,"Continuously chaining casts throughout an encounter is the single most important thing for achieving good DPS as a caster")),". There shoule be no delay at all between your spell casts, it's better to start casting the wrong spell than to think for a few seconds and then cast the right spell. You should be able to handle a fight's mechanics with the minimum possible interruption to your casting. Some fights (like Argus) have unavoidable downtime due to phase transitions and the like, so in these cases 0% downtime will not be possible.")},S.a.createElement(Re.a,{name:"Downtime",thresholds:n.downtime}),S.a.createElement(Re.a,{name:"Cancelled Casts",thresholds:n.cancelledCasts})),S.a.createElement(ye.c,{name:"Maintain your DoTs on the boss",description:"DoTs are a big part of your damage. You should try to keep as high uptime on them as possible."},S.a.createElement(Re.a,{name:S.a.createElement(S.a.Fragment,null,S.a.createElement(M.a,{id:u.a.MOONFIRE_BEAR.id})," uptime"),thresholds:n.moonfireUptime}),S.a.createElement(Re.a,{name:S.a.createElement(S.a.Fragment,null,S.a.createElement(M.a,{id:u.a.SUNFIRE.id})," uptime"),thresholds:n.sunfireUptime}),t.hasTalent(u.a.STELLAR_FLARE_TALENT.id)&&S.a.createElement(Re.a,{name:S.a.createElement(S.a.Fragment,null,S.a.createElement(M.a,{id:u.a.STELLAR_FLARE_TALENT.id})," uptime"),thresholds:n.stellarFlareUptime})),S.a.createElement(ye.c,{name:"Avoid refreshing your DoTs too early",description:"DoTs do very little direct damage, and you should avoid ever refreshing them with more than 30% duration remaining unless you have nothing else to cast while moving."},S.a.createElement(Re.a,{name:S.a.createElement(S.a.Fragment,null,S.a.createElement(M.a,{id:u.a.MOONFIRE_BEAR.id})," good refreshes"),thresholds:n.moonfireRefresh}),S.a.createElement(Re.a,{name:S.a.createElement(S.a.Fragment,null,S.a.createElement(M.a,{id:u.a.SUNFIRE.id})," good refreshes"),thresholds:n.sunfireRefresh}),t.hasTalent(u.a.STELLAR_FLARE_TALENT.id)&&S.a.createElement(Re.a,{name:S.a.createElement(S.a.Fragment,null,S.a.createElement(M.a,{id:u.a.STELLAR_FLARE_TALENT.id})," good refreshes"),thresholds:n.stellarFlareRefresh})),S.a.createElement(ye.c,{name:"Do not overcap your resources",description:"You should try to always avoid overcapping your Astral Power and your solar and lunar empowerments. Sometimes you can not avoid overcapping both of them. In that case, you should prioritize spending the Astral Power."},S.a.createElement(Re.a,{name:"Astral Power efficiency",thresholds:n.astralPowerEfficiency}),S.a.createElement(Re.a,{name:"Solar Empowerment efficiency",thresholds:n.solarEmpowermentEfficiency}),S.a.createElement(Re.a,{name:"Lunar Empowerment efficiency",thresholds:n.lunarEmpowermentEfficiency})),S.a.createElement(ye.c,{name:"Use your cooldowns",description:"Your cooldowns are a major contributor to your DPS, and should be used as frequently as possible throughout a fight. A cooldown should be held on to only if a priority DPS phase is coming soon. Holding cooldowns too long will hurt your DPS."},!t.hasTalent(u.a.INCARNATION_CHOSEN_OF_ELUNE_TALENT.id)&&S.a.createElement(s,{spell:u.a.CELESTIAL_ALIGNMENT.id}),t.hasTalent(u.a.INCARNATION_CHOSEN_OF_ELUNE_TALENT.id)&&S.a.createElement(s,{spell:u.a.INCARNATION_CHOSEN_OF_ELUNE_TALENT.id}),t.hasTalent(u.a.FORCE_OF_NATURE_TALENT.id)&&S.a.createElement(s,{spell:u.a.FORCE_OF_NATURE_TALENT.id}),t.hasTalent(u.a.WARRIOR_OF_ELUNE_TALENT.id)&&S.a.createElement(s,{spell:u.a.WARRIOR_OF_ELUNE_TALENT.id}),t.hasTalent(u.a.FURY_OF_ELUNE_TALENT.id)&&S.a.createElement(s,{spell:u.a.FURY_OF_ELUNE_TALENT.id}),t.hasTalent(u.a.NEW_MOON_TALENT.id)&&S.a.createElement(s,{spell:u.a.NEW_MOON_TALENT.id})),S.a.createElement(ye.c,{name:"Use your supportive abilities",description:"While you should not aim to cast defensives and externals on cooldown, be aware of them and try to use them whenever effective. Not using them at all indicates you might not be aware of them enough."},S.a.createElement(s,{spell:u.a.INNERVATE.id}),S.a.createElement(s,{spell:u.a.BARKSKIN.id}),t.hasTalent(u.a.RENEWAL_TALENT.id)&&S.a.createElement(s,{spell:u.a.RENEWAL_TALENT.id})),S.a.createElement(Se.a,{thresholds:n}))},Ie=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return S.a.createElement(ve,{combatant:this.combatants.selected,castEfficiency:this.castEfficiency,thresholds:Object(o.a)(Object(o.a)({},this.preparationRuleAnalyzer.thresholds),{},{downtime:this.alwaysBeCasting.suggestionThresholds,cancelledCasts:this.cancelledCasts.suggestionThresholds,moonfireUptime:this.moonfireUptime.suggestionThresholds,sunfireUptime:this.sunfireUptime.suggestionThresholds,stellarFlareUptime:this.stellarFlareUptime.suggestionThresholds,moonfireRefresh:this.earlyDotRefreshesInstants.suggestionThresholdsMoonfireEfficiency,sunfireRefresh:this.earlyDotRefreshesInstants.suggestionThresholdsSunfireEfficiency,stellarFlareRefresh:this.earlyDotRefreshes.suggestionThresholdsStellarFlareEfficiency,astralPowerEfficiency:this.astralPowerDetails.suggestionThresholds,solarEmpowermentEfficiency:this.solarEmpowerment.suggestionThresholds,lunarEmpowermentEfficiency:this.lunarEmpowerment.suggestionThresholds})})}}]),a}(_.a);Ie.dependencies={combatants:I.a,castEfficiency:v.a,preparationRuleAnalyzer:N.a,alwaysBeCasting:D,cancelledCasts:k,moonfireUptime:Y,sunfireUptime:z,stellarFlareUptime:J,lunarEmpowerment:Q,solarEmpowerment:ee,earlyDotRefreshes:ie,earlyDotRefreshesInstants:fe,astralPowerDetails:Le};var Ne=Ie,Ce=a(753),we=a(45),Fe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"spellbook",value:function(){var e=this.selectedCombatant;return[{spell:u.a.STARSURGE_MOONKIN,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500},timelineSortIndex:2},{spell:u.a.STARFALL_CAST,buffSpellId:u.a.STARFALL_CAST.id,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500},timelineSortIndex:3},{spell:u.a.SOLAR_WRATH_MOONKIN,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500},timelineSortIndex:4},{spell:u.a.LUNAR_STRIKE,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500},timelineSortIndex:5},{spell:u.a.MOONFIRE,buffSpellId:u.a.MOONFIRE_BEAR.id,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500},timelineSortIndex:6},{spell:u.a.SUNFIRE_CAST,buffSpellId:u.a.SUNFIRE.id,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{base:1500},timelineSortIndex:7},{spell:u.a.STELLAR_FLARE_TALENT,buffSpellId:u.a.STELLAR_FLARE_TALENT.id,category:a.SPELL_CATEGORIES.ROTATIONAL,enabled:e.hasTalent(u.a.STELLAR_FLARE_TALENT.id),gcd:{base:1500},timelineSortIndex:8},{spell:u.a.INCARNATION_CHOSEN_OF_ELUNE_TALENT,buffSpellId:u.a.INCARNATION_CHOSEN_OF_ELUNE_TALENT.id,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,enabled:e.hasTalent(u.a.INCARNATION_CHOSEN_OF_ELUNE_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.8},timelineSortIndex:9},{spell:u.a.CELESTIAL_ALIGNMENT,buffSpellId:u.a.CELESTIAL_ALIGNMENT.id,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,enabled:!e.hasTalent(u.a.INCARNATION_CHOSEN_OF_ELUNE_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.8},timelineSortIndex:9},{spell:u.a.WARRIOR_OF_ELUNE_TALENT,buffSpellId:u.a.WARRIOR_OF_ELUNE_TALENT.id,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:48,enabled:e.hasTalent(u.a.WARRIOR_OF_ELUNE_TALENT.id),castEfficiency:{suggestion:!0,recommendedEfficiency:.8},timelineSortIndex:10},{spell:u.a.FORCE_OF_NATURE_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:60,enabled:e.hasTalent(u.a.FORCE_OF_NATURE_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.8},timelineSortIndex:10},{spell:[u.a.NEW_MOON_TALENT,u.a.HALF_MOON,u.a.FULL_MOON],category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:25,enabled:e.hasTalent(u.a.NEW_MOON_TALENT.id),gcd:{base:1500},charges:3,castEfficiency:{suggestion:!0,recommendedEfficiency:.95,averageIssueEfficiency:.9,majorIssueEfficiency:.85,extraSuggestion:S.a.createElement(S.a.Fragment,null,"Your ",S.a.createElement(M.a,{id:u.a.NEW_MOON_TALENT.id}),", ",S.a.createElement(M.a,{id:u.a.HALF_MOON.id})," and ",S.a.createElement(M.a,{id:u.a.FULL_MOON.id})," cast efficiency can be improved, try keeping yourself at low Moon charges at all times; you should (almost) never be at max (3) charges.")},timelineSortIndex:11},{spell:u.a.FURY_OF_ELUNE_TALENT,buffSpellId:u.a.FURY_OF_ELUNE_TALENT.id,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:60,enabled:e.hasTalent(u.a.FURY_OF_ELUNE_TALENT.id),gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.8},timelineSortIndex:11},{spell:u.a.INNERVATE,category:a.SPELL_CATEGORIES.UTILITY,cooldown:180,gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.7,averageIssueEfficiency:.5,majorIssueEfficiency:.3},timelineSortIndex:12},{spell:u.a.BARKSKIN,buffSpellId:u.a.BARKSKIN.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:60,castEfficiency:{suggestion:!0,recommendedEfficiency:.5,averageIssueEfficiency:.35,majorIssueEfficiency:.25,importance:we.a.MINOR},timelineSortIndex:13},{spell:u.a.RENEWAL_TALENT,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:90,enabled:e.hasTalent(u.a.RENEWAL_TALENT.id),timelineSortIndex:14},{spell:u.a.TIGER_DASH_TALENT,buffSpellId:u.a.TIGER_DASH_TALENT.id,category:a.SPELL_CATEGORIES.UTILITY,cooldown:45,enabled:e.hasTalent(u.a.TIGER_DASH_TALENT.id),gcd:{base:1500},timelineSortIndex:14},{spell:[u.a.WILD_CHARGE_TALENT,u.a.WILD_CHARGE_MOONKIN,u.a.WILD_CHARGE_CAT,u.a.WILD_CHARGE_BEAR,u.a.WILD_CHARGE_TRAVEL],category:a.SPELL_CATEGORIES.UTILITY,cooldown:15,gcd:null,enabled:e.hasTalent(u.a.WILD_CHARGE_TALENT.id),timelineSortIndex:14},{spell:u.a.MIGHTY_BASH_TALENT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:50,enabled:e.hasTalent(u.a.MIGHTY_BASH_TALENT.id),gcd:{base:1500}},{spell:u.a.MASS_ENTANGLEMENT_TALENT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:30,enabled:e.hasTalent(u.a.MASS_ENTANGLEMENT_TALENT.id),gcd:{base:1500}},{spell:u.a.TYPHOON,category:a.SPELL_CATEGORIES.UTILITY,cooldown:30,enabled:e.hasTalent(u.a.TYPHOON_TALENT.id),gcd:{base:1500}},{spell:u.a.ENTANGLING_ROOTS,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.DASH,buffSpellId:u.a.DASH.id,category:a.SPELL_CATEGORIES.UTILITY,enabled:!e.hasTalent(u.a.TIGER_DASH_TALENT.id),cooldown:180,gcd:{base:1500}},{spell:u.a.SOLAR_BEAM,category:a.SPELL_CATEGORIES.UTILITY,cooldown:45},{spell:u.a.REMOVE_CORRUPTION,category:a.SPELL_CATEGORIES.UTILITY,cooldown:8,gcd:{base:1500}},{spell:u.a.REBIRTH,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.GROWL,category:a.SPELL_CATEGORIES.UTILITY,cooldown:8},{spell:u.a.BEAR_FORM,buffSpellId:u.a.BEAR_FORM.id,category:a.SPELL_CATEGORIES.DEFENSIVE,gcd:{base:1500}},{spell:u.a.CAT_FORM,buffSpellId:u.a.CAT_FORM.id,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.MOONKIN_FORM,buffSpellId:u.a.MOONKIN_FORM.id,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.TRAVEL_FORM,buffSpellId:u.a.TRAVEL_FORM.id,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.REGROWTH,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.FRENZIED_REGENERATION,buffSpellId:u.a.FRENZIED_REGENERATION.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:36,gcd:{base:1500},enabled:e.hasTalent(u.a.GUARDIAN_AFFINITY_TALENT_SHARED.id)},{spell:u.a.SWIFTMEND,category:a.SPELL_CATEGORIES.DEFENSIVE,enabled:e.hasTalent(u.a.RESTORATION_AFFINITY_TALENT.id),gcd:{base:1500}},{spell:u.a.REJUVENATION,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(u.a.RESTORATION_AFFINITY_TALENT.id),gcd:{base:1500}},{spell:u.a.WILD_GROWTH,category:a.SPELL_CATEGORIES.UTILITY,enabled:e.hasTalent(u.a.RESTORATION_AFFINITY_TALENT.id),gcd:{base:1500}},{spell:u.a.HIBERNATE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500}},{spell:u.a.SOOTHE,category:a.SPELL_CATEGORIES.UTILITY,cooldown:10,gcd:{base:1500}}]}}]),a}(Ce.a),je=a(26),ke=a(785),De=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return a}(ke.b);De.cooldownSpells=[].concat(Object(je.a)(ke.b.cooldownSpells),[{spell:u.a.INCARNATION_CHOSEN_OF_ELUNE_TALENT,summary:[ke.a.DAMAGE]},{spell:u.a.CELESTIAL_ALIGNMENT,summary:[ke.a.DAMAGE]}]);var Ue=De,Pe=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).badCasts=0,n.lastCast=null,n.lastCastBuffed=!1,n.hits=0,n.addEventListener(O.f.cast.by(U.a).spell(u.a.LUNAR_STRIKE),n.onCast),n.addEventListener(O.f.damage.by(U.a).spell(u.a.LUNAR_STRIKE),n.onDamage),n.addEventListener(O.f.fightend,n.onFightend),n}return Object(f.a)(a,[{key:"badCastsPerMinute",get:function(){return this.badCasts/(this.owner.fightDuration/1e3)*60}},{key:"suggestionThresholds",get:function(){return{actual:this.badCastsPerMinute,isGreaterThan:{minor:0,average:1,major:2},style:"number"}}}]),Object(f.a)(a,[{key:"checkCast",value:function(){this.lastCastBuffed||this.hits>=3||null===this.lastCast||(this.badCasts+=1,this.lastCast.meta=this.lastCast.meta||{},this.lastCast.meta.isInefficientCast=!0,this.lastCast.meta.inefficientCastReason="Lunar Strike was cast without Lunar Empowerment, Owlkin Frenzy and Warrior of Elune and hit less than ".concat(3," targets."))}},{key:"onCast",value:function(e){this.checkCast(),this.lastCast=e,this.lastCastBuffed=this.selectedCombatant.hasBuff(u.a.LUNAR_EMP_BUFF.id)||this.selectedCombatant.hasBuff(u.a.OWLKIN_FRENZY.id)||this.selectedCombatant.hasBuff(u.a.WARRIOR_OF_ELUNE_TALENT.id),this.hits=0}},{key:"onDamage",value:function(e){this.hits+=1}},{key:"onFightend",value:function(){this.checkCast()}},{key:"suggestions",value:function(e){var t=this;e(this.suggestionThresholds).addSuggestion((function(e,a,n){return e(S.a.createElement(S.a.Fragment,null,"You cast ",t.badCasts," unempowered and non instant cast ",S.a.createElement(M.a,{id:u.a.LUNAR_STRIKE.id})," that hit less than ",3," targets. Always prioritize ",S.a.createElement(M.a,{id:u.a.SOLAR_WRATH.id})," as a filler when none of those conditions are met.")).icon(u.a.LUNAR_STRIKE.icon).actual(j.i18n._({id:"druid.balance.suggestions.lunarStrike.efficiency",defaults:"{0} Unempowered Lunar Strikes per minute",values:{0:a.toFixed(1)}})).recommended("".concat(n," is recommended"))}))}}]),a}(U.c),Me=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).moonfireCasts=0,e.moonfireHits=0,e.statisticOrder=G.a.OPTIONAL(),e.active=e.selectedCombatant.hasTalent(u.a.TWIN_MOONS_TALENT.id),e.addEventListener(O.f.damage.by(U.a).spell(u.a.MOONFIRE_BEAR),e.onDamage),e.addEventListener(O.f.cast.by(U.a).spell(u.a.MOONFIRE),e.onCast),e}return Object(f.a)(a,[{key:"percentTwoHits",get:function(){return(this.moonfireHits-this.moonfireCasts)/this.moonfireCasts}}]),Object(f.a)(a,[{key:"onDamage",value:function(e){!0!==e.tick&&(this.moonfireHits+=1)}},{key:"onCast",value:function(e){this.moonfireCasts+=1}},{key:"statistic",value:function(){return S.a.createElement(B.a,{position:G.a.CORE(7),size:"flexible",tooltip:"You hit ".concat(this.moonfireHits," times with ").concat(this.moonfireCasts," casts.")},S.a.createElement(x.a,{spell:u.a.TWIN_MOONS_TALENT},S.a.createElement(S.a.Fragment,null,"$",Object(w.e)(this.percentTwoHits)," % ",S.a.createElement("small",null,"double hits"))))}}]),a}(U.c),Ge=a(752),Be=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).bonusDamage=0,e.statisticOrder=G.a.OPTIONAL(),e.active=e.selectedCombatant.hasTalent(u.a.STELLAR_DRIFT_TALENT.id),e.addEventListener(O.f.damage.by(U.a).spell(u.a.STARFALL),e.onDamage),e}return Object(f.a)(a,[{key:"damagePercent",get:function(){return this.owner.getPercentageOfTotalDamageDone(this.bonusDamage)}},{key:"perSecond",get:function(){return this.bonusDamage/(this.owner.fightDuration/1e3)}}]),Object(f.a)(a,[{key:"onDamage",value:function(e){this.bonusDamage+=Object(Ge.a)(e,.25)}},{key:"statistic",value:function(){return S.a.createElement(B.a,{position:G.a.CORE(7),size:"flexible",tooltip:"Contributed ".concat(Object(w.d)(this.perSecond)," DPS (").concat(Object(w.d)(this.bonusDamage)," total damage). This does not account for any extra damage gained from the increased radius or the ability to move while casting.")},S.a.createElement(x.a,{spell:u.a.STELLAR_DRIFT_TALENT},S.a.createElement(S.a.Fragment,null,Object(w.e)(this.damagePercent)," % ",S.a.createElement("small",null,"of total damage"))))}}]),a}(U.c),xe=a(831),We=a(126),He=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).buffStacks=[],e.lastStacks=0,e.lastUpdate=e.owner.fight.start_time,e.statisticOrder=G.a.OPTIONAL(5),e.active=e.selectedCombatant.hasTalent(u.a.STARLORD_TALENT.id),e.buffStacks=Array.from({length:4},(function(e){return[0]})),e.addEventListener(O.f.applybuff.by(U.a).spell(u.a.STARLORD),e.handleStacks),e.addEventListener(O.f.applybuffstack.by(U.a).spell(u.a.STARLORD),e.handleStacks),e.addEventListener(O.f.removebuff.by(U.a).spell(u.a.STARLORD),e.handleStacks),e.addEventListener(O.f.removebuffstack.by(U.a).spell(u.a.STARLORD),e.handleStacks),e.addEventListener(O.f.fightend,e.handleStacks),e}return Object(f.a)(a,[{key:"averageHaste",get:function(){var e=this,t=0;return this.buffStacks.forEach((function(a,n){t+=a.reduce((function(e,t){return e+t}))/e.owner.fightDuration*n})),(3*t).toFixed(2)}}]),Object(f.a)(a,[{key:"handleStacks",value:function(e){this.buffStacks[this.lastStacks].push(e.timestamp-this.lastUpdate),e.type!==O.b.FightEnd&&(this.lastUpdate=e.timestamp,this.lastStacks=Object(xe.a)(e))}},{key:"statistic",value:function(){var e=this;return S.a.createElement(B.a,{position:G.a.CORE(7),size:"flexible",dropdown:S.a.createElement(S.a.Fragment,null,S.a.createElement("table",{className:"table table-condensed"},S.a.createElement("thead",null,S.a.createElement("tr",null,S.a.createElement("th",null,"Haste-Bonus"),S.a.createElement("th",null,"Time (s)"),S.a.createElement("th",null,"Time (%)"))),S.a.createElement("tbody",null,this.buffStacks.map((function(t,a){return S.a.createElement("tr",{key:a},S.a.createElement("th",null,(3*a).toFixed(0),"%"),S.a.createElement("td",null,Object(w.a)(t.reduce((function(e,t){return e+t}),0)/1e3)),S.a.createElement("td",null,Object(w.e)(t.reduce((function(e,t){return e+t}),0)/e.owner.fightDuration),"%"))})))))},S.a.createElement(x.a,{spell:u.a.STARLORD_TALENT},S.a.createElement(S.a.Fragment,null,S.a.createElement(We.a,null)," ",this.averageHaste," % ",S.a.createElement("small",null,"average haste gained"))))}}]),a}(U.c),Ye=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return a}(l.a);Ye.specModules={haste:E,globalCooldown:b,lunarEmpowermentNormalizer:A,solarEmpowermentNormalizer:y,checklist:Ne,alwaysBeCasting:D,cancelledCasts:k,abilities:Fe,lunarEmpowerment:Q,solarEmpowerment:ee,cooldownThroughputTracker:Ue,moonfireUptime:Y,sunfireUptime:z,unempoweredLunarStrike:Pe,earlyDotRefreshes:ie,earlyDotRefreshesInstants:fe,stellarFlareUptime:J,twinMoons:Me,stellarDrift:Be,starlord:He,astralPowerTracker:pe,astralPowerDetails:Le};t.default=Ye},752:function(e,t,a){"use strict";function n(e,t){var a=(e.amount||0)+(e.absorbed||0);return a-a/(1+t)}a.d(t,"a",(function(){return n}))},760:function(e,t,a){"use strict";var n=a(0),s=a.n(n);t.a=function(e){var t=Object.assign({},e);return s.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"10 10 80 80",className:"icon"},t),s.a.createElement("path",{d:"M50,86.4865c17.4361,0,31.6216-14.1855,31.6216-31.6216c0-16.6168-12.8865-30.2714-29.1892-31.5189v-4.9677h7.2973v-4.8649  H40.2703v4.8649h7.2973v4.9677c-16.3027,1.2475-29.1892,14.902-29.1892,31.5189C18.3784,72.3009,32.5639,86.4865,50,86.4865z M52.4324,28.2236c3.1101,0.2817,6.0664,1.0982,8.7798,2.356l-8.7798,15.2073V28.2236z M47.5676,28.2236v26.6412 c0,1.1008,0.7393,2.0647,1.8029,2.3497c0.209,0.0561,0.4205,0.0827,0.6295,0.0827c0.8533,0,1.6642-0.4504,2.1065-1.2162 l13.3146-23.0616c6.8507,4.8503,11.3357,12.8315,11.3357,21.8454c0,14.7537-12.0031,26.7567-26.7568,26.7567 s-26.7568-12.003-26.7568-26.7567C23.2432,40.9315,33.9501,29.4573,47.5676,28.2236z"}))}},761:function(e,t,a){"use strict";var n=a(0),s=a.n(n);t.a=function(e){var t=e.label,a=e.children,n=e.className;return s.a.createElement("div",{className:"pad boring-text ".concat(n||"")},s.a.createElement("label",null,t),s.a.createElement("div",{className:"value"},a))}},831:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(15);function s(e){switch(e.type){case n.b.RemoveBuff:case n.b.RemoveDebuff:return 0;case n.b.ApplyBuff:case n.b.ApplyDebuff:return 1;case n.b.ApplyBuffStack:case n.b.RemoveBuffStack:case n.b.ApplyDebuffStack:case n.b.RemoveDebuffStack:return e.stack}throw new Error("Invalid event type for currentStacks")}},869:function(e,t,a){"use strict";var n=a(8),s=a(9),i=a(10),r=a(11),l=a(0),c=a.n(l),o=a(33),u=a(43),d=a(164),h=a(211),E=a(746),f=a(761),m=a(747),g=a(833),T=a(895),b=a(15),p=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).castsCancelled=0,s.castsFinished=0,s.beginCastSpell=void 0,s.wasCastStarted=!1,s.cancelledSpellList={},s.IGNORED_ABILITIES=[],s.addEventListener(b.f.begincast.by(u.a),s.onBeginCast),s.addEventListener(b.f.cast.by(u.a),s.onCast),s.addEventListener(b.f.fightend,s.onFightend),s}return Object(s.a)(a,[{key:"onBeginCast",value:function(e){var t=e.ability.guid;this.IGNORED_ABILITIES.includes(t)||g.a.includes(t)||T.a.includes(t)||(this.wasCastStarted&&void 0!==this.beginCastSpell&&e.timestamp-this.beginCastSpell.timestamp>100&&(this.castsCancelled+=1,this.addToCancelledList()),this.beginCastSpell=e,this.wasCastStarted=!0)}},{key:"onCast",value:function(e){var t=e.ability.guid,a=this.beginCastSpell&&this.beginCastSpell.ability;this.IGNORED_ABILITIES.includes(t)||g.a.includes(t)||T.a.includes(t)||!a||(a.guid!==t&&this.wasCastStarted&&(this.castsCancelled+=1,this.addToCancelledList()),a.guid===t&&this.wasCastStarted&&(this.castsFinished+=1),this.wasCastStarted=!1)}},{key:"addToCancelledList",value:function(){if(this.beginCastSpell){var e=this.beginCastSpell.ability;this.cancelledSpellList[e.guid]?this.cancelledSpellList[e.guid].amount+=1:this.cancelledSpellList[e.guid]={spellName:e.name,amount:1}}}},{key:"onFightend",value:function(){}},{key:"statistic",value:function(){return c.a.createElement(E.a,{position:m.a.CORE(10),size:"small",className:"value",tooltip:c.a.createElement(c.a.Fragment,null,"You cast ",this.totalCasts," spells.",c.a.createElement("ul",null,c.a.createElement("li",null,this.castsFinished," casts were completed"),c.a.createElement("li",null,this.castsCancelled," casts were cancelled")))},c.a.createElement(f.a,{label:"Cancelled Casts"},c.a.createElement(h.a,null)," ",Object(o.e)(this.cancelledPercentage),"% ",c.a.createElement("small",null,"Casts Cancelled")))}},{key:"totalCasts",get:function(){return this.castsCancelled+this.castsFinished}},{key:"cancelledPercentage",get:function(){return this.castsCancelled/this.totalCasts}},{key:"cancelledCastSuggestionThresholds",get:function(){return{actual:this.cancelledPercentage,isGreaterThan:{minor:.02,average:.05,major:.15},style:d.a.PERCENTAGE}}}]),a}(u.c);t.a=p},881:function(e,t,a){"use strict";var n=a(8),s=a(9),i=a(10),r=a(11),l=a(43),c=a(756),o=a(755),u=a(764),d=a(33),h=a(15),E=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).targets={},e.lastGCD=null,e.lastCast=null,e.lastCastGoodExtension=!1,e.lastCastMinWaste=Number.MAX_SAFE_INTEGER,e.lastCastMaxEffect=0,e.casts={},e.constructor.dots.forEach((function(t){e.targets[t.debuffId]={},e.casts[t.castId]={badCasts:0,addedDuration:0,wastedDuration:0}})),e.addEventListener(h.f.refreshdebuff.by(l.a),e.onRefreshDebuff),e.addEventListener(h.f.applydebuff.by(l.a),e.onApplyDebuff),e.addEventListener(h.f.GlobalCooldown.by(l.a),e.onGCD),e.addEventListener(h.f.cast.by(l.a),e.onCast),e}return Object(s.a)(a,[{key:"addBadCast",value:function(e,t){this.casts[this.lastCast.ability.guid].badCasts+=1,this.casts[this.lastCast.ability.guid].wastedDuration+=this.lastCastMinWaste,e.meta=e.meta||{},e.meta.isInefficientCast=!0,e.meta.inefficientCastReason=t}},{key:"onRefreshDebuff",value:function(e){var t=this.getDot(e.ability.guid);if(t){var a=Object(u.b)(e.targetID,e.targetInstance),n=this.extendDot(t.debuffId,a,t.duration,e.timestamp);this.lastCastGoodExtension||(this.lastCastGoodExtension=0===n.wasted,this.lastCastMinWaste=Math.min(this.lastCastMinWaste,n.wasted),this.lastCastMaxEffect=Math.max(this.lastCastMaxEffect,n.effective))}}},{key:"onApplyDebuff",value:function(e){var t=this.getDot(e.ability.guid);t&&(this.targets[t.debuffId][Object(u.b)(e.targetID,e.targetInstance)]=e.timestamp+t.duration,this.lastCastGoodExtension=!0,this.lastCastMinWaste=0,this.lastCastMaxEffect=t.duration)}},{key:"onGCD",value:function(e){this.getDotByCast(e.ability.guid)&&(this.lastGCD=e)}},{key:"onCast",value:function(e){this.checkLastCast(e),this.getDotByCast(e.ability.guid)&&(this.lastCast=e,this.lastCastGoodExtension=!1,this.lastCastMinWaste=Number.MAX_SAFE_INTEGER,this.lastCastMaxEffect=0,this.afterLastCastSet(e))}},{key:"afterLastCastSet",value:function(e){}},{key:"checkLastCast",value:function(e){this.lastGCD&&this.lastCast&&(e.timestamp-this.lastGCD.timestamp<this.lastCastBuffer||(this.casts[this.lastCast.ability.guid].addedDuration+=this.lastCastMaxEffect,this.isLastCastBad(e),this.lastGCD=null,this.lastCast=null))}},{key:"isLastCastBad",value:function(e){if(!this.lastCastGoodExtension){var t=this.getDotByCast(this.lastCast.ability.guid),a=this.getLastBadCastText(e,t);""!==a&&this.addBadCast(this.lastCast,a)}}},{key:"getLastBadCastText",value:function(e,t){return"".concat(t.name," was refreshed ").concat(Object(d.a)(this.lastCastMinWaste/1e3)," seconds before the pandemic window. It should be refreshed with at most ").concat(Object(d.a)(.3*t.duration/1e3)," left or part of the dot will be wasted.")}},{key:"getDot",value:function(e){return this.constructor.dots.find((function(t){return t.debuffId===e}))}},{key:"getDotByCast",value:function(e){return this.constructor.dots.find((function(t){return t.castId===e}))}},{key:"extendDot",value:function(e,t,a,n){var s=this.getDot(e);if(!s)throw new Error("The spellID ".concat(e," is not in the list of dots to track"));var i=(this.targets[s.debuffId][t]-n||0)+a,r=1.3*s.duration,l=i-r;return l<=0?(this.targets[s.debuffId][t]=n+i,{wasted:0,effective:a}):(this.targets[s.debuffId][t]=n+r,{wasted:l,effective:a-l})}},{key:"badCastsPercent",value:function(e){var t=this.abilityTracker.getAbility(e);return this.casts[e].badCasts/t.casts||0}},{key:"badCastsEffectivePercent",value:function(e){return this.casts[e].addedDuration?this.casts[e].addedDuration/(this.casts[e].addedDuration+this.casts[e].wastedDuration):1}},{key:"makeSuggestionThresholds",value:function(e,t,a,n){return{spell:e,count:this.casts[e.id].badCasts,wastedDuration:this.casts[e.id].wastedDuration,actual:this.badCastsEffectivePercent(e.id),isLessThan:{minor:t,average:a,major:n},style:"percentage"}}},{key:"lastCastBuffer",get:function(){return 2*this.lastGCD.duration-100}}]),a}(l.c);E.dependencies={enemies:c.a,abilityTracker:o.a},E.dots=[],t.a=E},968:function(e,t,a){"use strict";var n=a(0),s=a.n(n),i=a(33),r=a(4),l=a(13);t.a=function(e,t){e(t).addSuggestion((function(e,a,n){return e(s.a.createElement(s.a.Fragment,null,"You refreshed ",s.a.createElement(r.a,{id:t.spell.id})," early ",t.count," times. The individual casts are highlighted on the timeline.")).icon(t.spell.icon).actual(l.i18n._({id:"shared.suggestions.dots.countEarlyRefreshes",defaults:"{0}% effective duration",values:{0:Object(i.e)(a)}})).recommended("<".concat(Object(i.e)(n),"% is recommended"))}))}}}]);
//# sourceMappingURL=BalanceDruid.c00320bb.chunk.js.map