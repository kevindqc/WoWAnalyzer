(this.webpackJsonpwowanalyzer=this.webpackJsonpwowanalyzer||[]).push([[55],{740:function(e,t,a){"use strict";a.r(t);var n=a(8),i=a(10),s=a(11),r=a(776),c=a(9),l=a(120),o=a(66),u=a(811),d=a(3),m=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onCast",value:function(e){var t=e.ability.guid;t!==d.a.FISTS_OF_FURY_CAST.id&&(this.isOnGlobalCooldown(t)&&Object(l.a)(Object(o.a)(a.prototype),"onCast",this).call(this,e))}}]),a}(u.a),h=a(0),E=a.n(h),g=a(780),f=a(33),T=a(750),p=a(13),_=a(164),b=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).statisticOrder=T.a.CORE(10),e}return Object(c.a)(a,[{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(E.a.createElement("span",null,"Your downtime can be improved. Try to Always Be Casting (ABC), try to reduce the delay between casting spells.")).icon("spell_mage_altertime").actual(p.i18n._({id:"monk.windwalker.alwaysBeCasting.downtime",defaults:"{0}% downtime",values:{0:Object(f.e)(t)}})).recommended("<".concat(Object(f.e)(a),"% is recommended"))}))}},{key:"downtimePercentage",get:function(){return this.totalTimeWasted/this.owner.fightDuration}},{key:"suggestionThresholds",get:function(){return{actual:this.downtimePercentage,isGreaterThan:{minor:.2,average:.3,major:.4},style:_.a.PERCENTAGE}}}]),a}(g.a),y=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"spellbook",value:function(){var e=this.selectedCombatant;return[{spell:d.a.FISTS_OF_FURY_CAST,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:function(e){return 24/(1+e)},gcd:{static:1e3},castEfficiency:{suggestion:!0,recommendedEfficiency:.9,extraSuggestion:"Delaying the cast somewhat to line up with add spawns is acceptable, however."}},{spell:d.a.RISING_SUN_KICK,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:function(e){return 10/(1+e)},gcd:{static:1e3},castEfficiency:{suggestion:!0}},{spell:d.a.WHIRLING_DRAGON_PUNCH_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:function(e){return 24/(1+e)},gcd:{static:1e3},enabled:e.hasTalent(d.a.WHIRLING_DRAGON_PUNCH_TALENT.id),castEfficiency:{suggestion:!0,recommendedEfficiency:.85,extraSuggestion:"Delaying the cast somewhat to line up with add spawns is acceptable, however."}},{spell:d.a.FIST_OF_THE_WHITE_TIGER_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:30,gcd:{static:1e3},enabled:e.hasTalent(d.a.FIST_OF_THE_WHITE_TIGER_TALENT.id),castEfficiency:{suggestion:!0}},{spell:d.a.BLACKOUT_KICK,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{static:1e3}},{spell:d.a.TIGER_PALM,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{static:1e3}},{spell:d.a.EXPEL_HARM,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:15,gcd:{static:500},castEfficiency:{suggestion:!0}},{spell:d.a.CHI_WAVE_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:15,gcd:{base:1e3,minimum:750},enabled:e.hasTalent(d.a.CHI_WAVE_TALENT.id),castEfficiency:{suggestion:!0,recommendedEfficiency:.65}},{spell:d.a.SPINNING_CRANE_KICK,category:a.SPELL_CATEGORIES.ROTATIONAL,gcd:{static:1e3}},{spell:d.a.CHI_BURST_TALENT,category:a.SPELL_CATEGORIES.ROTATIONAL,cooldown:30,gcd:{base:1e3,minimum:750},enabled:e.hasTalent(d.a.CHI_BURST_TALENT.id),castEfficiency:{suggestion:!0}},{spell:d.a.RUSHING_JADE_WIND_TALENT_WINDWALKER,category:a.SPELL_CATEGORIES.ROTATIONAL_AOE,cooldown:function(e){return 6/(1+e)},gcd:{static:1e3},enabled:e.hasTalent(d.a.RUSHING_JADE_WIND_TALENT_WINDWALKER.id)},{spell:d.a.TOUCH_OF_KARMA_CAST,buffSpellId:d.a.TOUCH_OF_KARMA_CAST.id,category:a.SPELL_CATEGORIES.SEMI_DEFENSIVE,cooldown:90,gcd:null,castEfficiency:{suggestion:!0,recommendedEfficiency:.6,extraSuggestion:"Touch of Karma is typically used offensively as often as possible, but use changes a lot varying on the encounter"}},{spell:d.a.SERENITY_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:90,gcd:null,enabled:e.hasTalent(d.a.SERENITY_TALENT.id),castEfficiency:{suggestion:!0,recommendedEfficiency:.95}},{spell:d.a.STORM_EARTH_AND_FIRE_CAST,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:90,gcd:null,enabled:!e.hasTalent(d.a.SERENITY_TALENT.id),charges:2,castEfficiency:{suggestion:!0,recommendedEfficiency:.95}},{spell:d.a.INVOKE_XUEN_THE_WHITE_TIGER,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:120,gcd:{base:1e3,minimum:750},castEfficiency:{suggestion:!0,recommendedEfficiency:.95}},{spell:d.a.ENERGIZING_ELIXIR_TALENT,category:a.SPELL_CATEGORIES.COOLDOWNS,cooldown:60,gcd:null,enabled:e.hasTalent(d.a.ENERGIZING_ELIXIR_TALENT.id)},{spell:d.a.RING_OF_PEACE_TALENT,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1e3,minimum:750}},{spell:d.a.LEG_SWEEP,category:a.SPELL_CATEGORIES.UTILITY,gcd:{static:1e3}},{spell:d.a.PARALYSIS,category:a.SPELL_CATEGORIES.UTILITY,gcd:{static:1e3}},{spell:d.a.DISABLE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{static:1e3}},{spell:d.a.ROLL,category:a.SPELL_CATEGORIES.UTILITY,cooldown:e.hasTalent(d.a.CELERITY_TALENT.id)?15:20,gcd:null,charges:e.hasTalent(d.a.CELERITY_TALENT.id)?3:2,enabled:!e.hasTalent(d.a.CHI_TORPEDO_TALENT.id)},{spell:d.a.CHI_TORPEDO_TALENT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:20,gcd:null,charges:2,enabled:e.hasTalent(d.a.CHI_TORPEDO_TALENT.id)},{spell:d.a.FLYING_SERPENT_KICK,category:a.SPELL_CATEGORIES.UTILITY,cooldown:25,gcd:{static:1e3}},{spell:d.a.TIGERS_LUST_TALENT,category:a.SPELL_CATEGORIES.UTILITY,cooldown:30,gcd:{static:1e3},enabled:e.hasTalent(d.a.TIGERS_LUST_TALENT.id)},{spell:d.a.TRANSCENDENCE,category:a.SPELL_CATEGORIES.UTILITY,gcd:{static:1e3}},{spell:d.a.TRANSCENDENCE_TRANSFER,category:a.SPELL_CATEGORIES.UTILITY,cooldown:45,gcd:{base:1e3,minimum:750}},{spell:d.a.VIVIFY,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1500,minimum:750}},{spell:d.a.DETOX_ENERGY,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1e3,minimum:750}},{spell:d.a.SPEAR_HAND_STRIKE,category:a.SPELL_CATEGORIES.UTILITY,gcd:null},{spell:d.a.PROVOKE,category:a.SPELL_CATEGORIES.UTILITY,gcd:null},{spell:d.a.CRACKLING_JADE_LIGHTNING,category:a.SPELL_CATEGORIES.UTILITY,gcd:{base:1e3,minimum:750}},{spell:d.a.STORM_EARTH_AND_FIRE_FIXATE,category:a.SPELL_CATEGORIES.UTILITY,gcd:null},{spell:d.a.FORTIFYING_BREW,buffSpellId:d.a.FORTIFYING_BREW.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:120,gcd:null},{spell:d.a.DIFFUSE_MAGIC_TALENT,buffSpellId:d.a.DIFFUSE_MAGIC_TALENT.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:90,gcd:null,enabled:e.hasTalent(d.a.DIFFUSE_MAGIC_TALENT.id)},{spell:d.a.DAMPEN_HARM_TALENT,buffSpellId:d.a.DAMPEN_HARM_TALENT.id,category:a.SPELL_CATEGORIES.DEFENSIVE,cooldown:90,gcd:null,enabled:e.hasTalent(d.a.DAMPEN_HARM_TALENT.id)}]}}]),a}(a(753).a),S=a(810),C=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"buffs",value:function(){return[{spellId:d.a.STORM_EARTH_AND_FIRE_CAST.id,timelineHighlight:!0},{spellId:d.a.SERENITY_TALENT.id,timelineHighlight:!0},{spellId:d.a.TOUCH_OF_KARMA_CAST.id,timelineHighlight:!0},{spellId:d.a.DANCE_OF_CHIJI_BUFF.id,timelineHighlight:!0},{spellId:d.a.COMBO_BREAKER_BUFF.id,timelineHighlight:!0},{spellId:Object.keys(S.a).map((function(e){return Number(e)})),timelineHighlight:!0}]}}]),a}(a(797).a),I=a(26),R=a(785),O=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(R.b);O.cooldownSpells=[].concat(Object(I.a)(R.b.cooldownSpells),[{spell:d.a.SERENITY_TALENT,summary:[R.a.DAMAGE]}]),O.castCooldowns=[].concat(Object(I.a)(R.b.castCooldowns),[{spell:d.a.STORM_EARTH_AND_FIRE_CAST,summary:[R.a.DAMAGE]},{spell:d.a.INVOKE_XUEN_THE_WHITE_TIGER,summary:[R.a.DAMAGE]}]);var A=O,v=a(7),k=a(203),N=a(767),L=a(757),F=a(777),w=a(4),D=a(746),G=a(755),U=a(43),M=a(748),K=a(15),H=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).abilityTracker=void 0,i.CBProcsTotal=0,i.lastCBProcTime=null,i.consumedCBProc=0,i.overwrittenCBProc=0,i.addEventListener(K.f.applybuff.by(U.a).spell(d.a.COMBO_BREAKER_BUFF),i.onApplyBuff),i.addEventListener(K.f.refreshbuff.by(U.a).spell(d.a.COMBO_BREAKER_BUFF),i.onRefreshBuff),i.addEventListener(K.f.cast.by(U.a).spell(d.a.BLACKOUT_KICK),i.onCast),i}return Object(c.a)(a,[{key:"onApplyBuff",value:function(e){this.lastCBProcTime=e.timestamp,this.CBProcsTotal+=1}},{key:"onRefreshBuff",value:function(e){this.lastCBProcTime=e.timestamp,this.CBProcsTotal+=1,this.overwrittenCBProc+=1}},{key:"onCast",value:function(e){if(null!==this.lastCBProcTime&&this.lastCBProcTime!==e.timestamp){var t=this.lastCBProcTime+15e3;e.timestamp<=t&&(this.consumedCBProc+=1,this.lastCBProcTime=null)}}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(E.a.createElement("span",null,"Your ",E.a.createElement(w.a,{id:d.a.COMBO_BREAKER_BUFF.id})," procs should be used before you tiger palm again so they are not overwritten. While some will be overwritten due to higher priority of getting Chi for spenders, wasting ",E.a.createElement(w.a,{id:d.a.COMBO_BREAKER_BUFF.id})," procs is not optimal.")).icon(d.a.COMBO_BREAKER_BUFF.icon).actual(p.i18n._({id:"monk.windwalker.suggestions.comboBreaker.procsUsed",defaults:"{0}% used Combo Breaker procs",values:{0:Object(f.e)(t)}})).recommended(">".concat(Object(f.e)(a),"% used Combo Breaker Procs is recommended"))}))}},{key:"statistic",value:function(){var e=.08*this.abilityTracker.getAbility(d.a.TIGER_PALM.id).casts;return E.a.createElement(D.a,{position:T.a.CORE(6),size:"flexible",tooltip:E.a.createElement(E.a.Fragment,null,"You got a total of ",E.a.createElement("strong",null,this.CBProcsTotal," Combo Breaker procs")," and ",E.a.createElement("strong",null,"used ",this.consumedCBProc)," of them. The average expected number of procs from your Tiger Palms this fight is ",E.a.createElement("strong",null,e.toFixed(2)),", and you got ",E.a.createElement("strong",null,this.CBProcsTotal),".")},E.a.createElement(M.a,{spell:d.a.COMBO_BREAKER_BUFF},Object(f.e)(this.usedCBProcs,0),"% ",E.a.createElement("small",null,"Proc utilization")))}},{key:"usedCBProcs",get:function(){return this.consumedCBProc/this.CBProcsTotal}},{key:"suggestionThresholds",get:function(){return{actual:this.usedCBProcs,isLessThan:{minor:.9,average:.8,major:.7},style:_.a.PERCENTAGE}}}]),a}(U.c);H.dependencies={abilityTracker:G.a};var P=H,B=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).previousTickTimestamp=0,i.fistsTicks=0,i.abilityTracker=void 0,i.addEventListener(K.f.damage.by(U.a).spell(d.a.FISTS_OF_FURY_DAMAGE),i.onFistsDamage),i}return Object(c.a)(a,[{key:"isNewFistsTick",value:function(e){return!this.previousTickTimestamp||e-this.previousTickTimestamp>100}},{key:"onFistsDamage",value:function(e){this.isNewFistsTick(e.timestamp)&&(this.fistsTicks+=1,this.previousTickTimestamp=e.timestamp)}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(E.a.createElement("span",null," You are cancelling your ",E.a.createElement(w.a,{id:d.a.FISTS_OF_FURY_CAST.id})," casts early and losing ticks ")).icon(d.a.FISTS_OF_FURY_CAST.icon).actual(p.i18n._({id:"monk.windwalker.suggestions.fistOfFury.avgTicksPerCast",defaults:"{0} average ticks on each Fists of Fury cast",values:{0:t.toFixed(2)}})).recommended("Aim to get ".concat(a," ticks with each Fists of Fury cast."))}))}},{key:"statistic",value:function(){return E.a.createElement(D.a,{position:T.a.CORE(4),size:"flexible",tooltip:"Fists of Fury ticks 5 times over the duration of the channel"},E.a.createElement(M.a,{spell:d.a.FISTS_OF_FURY_CAST},this.averageTicks.toFixed(2)," ",E.a.createElement("small",null,"Average ticks per cast")))}},{key:"averageTicks",get:function(){return this.fistsTicks/this.casts}},{key:"casts",get:function(){return this.abilityTracker.getAbility(d.a.FISTS_OF_FURY_CAST.id).casts}},{key:"suggestionThresholds",get:function(){return{actual:this.averageTicks,isLessThan:{minor:5,average:4.75,major:4.5},style:_.a.DECIMAL}}}]),a}(U.c);B.dependencies={abilityTracker:G.a};var j=B,x=a(793),W=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).healingDone=void 0,i.totalPossibleAbsorb=0,i.addEventListener(K.f.cast.by(U.a).spell(d.a.TOUCH_OF_KARMA_CAST),i.onCast),i}return Object(c.a)(a,[{key:"onCast",value:function(e){this.totalPossibleAbsorb+=.5*(e.maxHitPoints||0)}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(E.a.createElement(E.a.Fragment,null," You consumed a low amount of your total ",E.a.createElement(w.a,{id:d.a.TOUCH_OF_KARMA_CAST.id})," absorb. It's best used when you can take enough damage to consume most of the absorb. Getting full absorb usage shouldn't be expected on lower difficulty encounters ")).icon(d.a.TOUCH_OF_KARMA_CAST.icon).actual(p.i18n._({id:"monk.windwalker.suggestions.touchOfKarma.absorbUsed",defaults:"{0}% Touch of Karma absorb used",values:{0:Object(f.e)(t)}})).recommended(">".concat(Object(f.e)(a),"% is recommended"))}))}},{key:"statistic",value:function(){return E.a.createElement(D.a,{position:T.a.OPTIONAL(2),size:"flexible",tooltip:"This does not account for possible absorbs from missed Touch of Karma casts"},E.a.createElement(M.a,{spell:d.a.TOUCH_OF_KARMA_CAST},Object(f.e)(this.absorbUsed,0),"% ",E.a.createElement("small",null,"Absorb used")))}},{key:"absorbUsed",get:function(){return this.healingDone.byAbility(d.a.TOUCH_OF_KARMA_CAST.id).effective/this.totalPossibleAbsorb}},{key:"suggestionThresholds",get:function(){return{actual:this.absorbUsed,isLessThan:{minor:.8,average:.65,major:.5},style:_.a.PERCENTAGE}}}]),a}(U.c);W.dependencies={healingDone:x.a};var Y=W,J=a(53),z=[d.a.MELEE,d.a.TIGER_PALM,d.a.BLACKOUT_KICK,d.a.FISTS_OF_FURY_CAST,d.a.FISTS_OF_FURY_DAMAGE,d.a.RISING_SUN_KICK,d.a.RISING_SUN_KICK_SECOND,d.a.SPINNING_CRANE_KICK,d.a.FLYING_SERPENT_KICK,d.a.CRACKLING_JADE_LIGHTNING,d.a.CHI_WAVE_TALENT,d.a.FIST_OF_THE_WHITE_TIGER_TALENT,d.a.WHIRLING_DRAGON_PUNCH_TALENT,d.a.RUSHING_JADE_WIND_TALENT_WINDWALKER,d.a.CHI_BURST_TALENT,d.a.EYE_OF_THE_TIGER_TALENT],V=[d.a.TIGER_PALM,d.a.BLACKOUT_KICK,d.a.FISTS_OF_FURY_CAST,d.a.RISING_SUN_KICK,d.a.CHI_WAVE_TALENT,d.a.FIST_OF_THE_WHITE_TIGER_TALENT,d.a.SPINNING_CRANE_KICK,d.a.FLYING_SERPENT_KICK,d.a.CRACKLING_JADE_LIGHTNING,d.a.WHIRLING_DRAGON_PUNCH_TALENT,d.a.TOUCH_OF_DEATH,d.a.CHI_BURST_TALENT,d.a.RUSHING_JADE_WIND_TALENT_WINDWALKER,d.a.EXPEL_HARM],X=[d.a.BLACKOUT_KICK.id,d.a.RISING_SUN_KICK.id,d.a.FISTS_OF_FURY_CAST.id,d.a.SPINNING_CRANE_KICK.id,d.a.RUSHING_JADE_WIND_TALENT_WINDWALKER.id],q=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e))._lastSpellUsed=null,i._lastThreeSpellsUsed=[],i.masteryDropSpellSequence=[],i.hasHitCombo=!1,i.hasHitCombo=i.selectedCombatant.hasTalent(d.a.HIT_COMBO_TALENT.id),i.addEventListener(K.f.cast.by(U.a).spell(V),i.onMasteryCast),i}return Object(c.a)(a,[{key:"onMasteryCast",value:function(e){var t=e.ability.guid,a=e.timestamp;this._lastThreeSpellsUsed.length<3||(this._lastThreeSpellsUsed=this._lastThreeSpellsUsed.slice(1)),this._lastThreeSpellsUsed.push({ability:t,timestamp:a}),this._lastSpellUsed===t&&this.masteryDropSpellSequence.push(this._lastThreeSpellsUsed),this._lastSpellUsed=t}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(E.a.createElement("span",null,"You ignored your ",E.a.createElement(w.a,{id:d.a.COMBO_STRIKES.id})," buff by casting the same spell twice in a row, missing out on the damage increase from your mastery"," and dropping the Hit Combo damage buff",".")).icon(d.a.COMBO_STRIKES.icon).actual(p.i18n._({id:"monk.windwalker.comboStrikes.masteryBreaksPerMinute",defaults:"{0} mastery breaks per minute.",values:{0:t.toFixed(2)}})).recommended("mastery should be broken ".concat(a," times"))}))}},{key:"statistic",value:function(){var e=this;return E.a.createElement(D.a,{position:T.a.CORE(2),size:"flexible",tooltip:"This is the number of times you incorrectly cast the same spell twice in a row, missing out on the damage increase from your mastery".concat(" and dropping the Hit Combo damage buff","."),dropdown:this.masteryDropEvents>0?E.a.createElement(E.a.Fragment,null,E.a.createElement("div",null,E.a.createElement("span",{style:{padding:"1.3em"}},"Spell sequence when mastery dropped.")),E.a.createElement("table",{className:"table table-condensed"},E.a.createElement("thead",null,E.a.createElement("tr",null,E.a.createElement("th",null,"Timestamp"),E.a.createElement("th",null,"1"),E.a.createElement("th",null,"2"),E.a.createElement("th",null,"3"))),E.a.createElement("tbody",null,this.masteryDropSpellSequence.map((function(t,a){return E.a.createElement("tr",{key:a},E.a.createElement("th",{scope:"row"},Object(f.a)((t[0].timestamp-e.owner.fight.start_time)/1e3)),E.a.createElement("td",null,E.a.createElement(J.a,{id:t[0].ability,style:{height:"2.4em"}})),E.a.createElement("td",null,E.a.createElement(J.a,{id:t[1].ability,style:{height:"2.4em"}})),t[2]&&t[2].ability&&E.a.createElement("td",null,E.a.createElement(J.a,{id:t[2].ability,style:{height:"2.4em"}})))}))))):null},E.a.createElement(M.a,{spell:d.a.COMBO_STRIKES},Object(f.d)(this.masteryDropEvents)," ",E.a.createElement("small",null,"Mastery benefit mistakes")))}},{key:"masteryDropEvents",get:function(){return this.masteryDropSpellSequence.length}},{key:"masteryDropsPerMinute",get:function(){return this.masteryDropEvents/this.owner.fightDuration*1e3*60}},{key:"suggestionThresholds",get:function(){var e=this.hasHitCombo?1:2;return{actual:this.masteryDropsPerMinute,isGreaterThan:{minor:0,average:.5*e,major:Number(e)},style:_.a.NUMBER}}}]),a}(U.c),Z=a(754),Q=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).spellUsable=void 0,i.IMPORTANT_SPELLS=[d.a.RISING_SUN_KICK.id,d.a.FISTS_OF_FURY_CAST.id],i.effectiveRisingSunKickReductionMs=0,i.wastedRisingSunKickReductionMs=0,i.effectiveFistsOfFuryReductionMs=0,i.wastedFistsOfFuryReductionMs=0,i.selectedCombatant.hasTalent(d.a.WHIRLING_DRAGON_PUNCH_TALENT.id)&&i.IMPORTANT_SPELLS.push(d.a.WHIRLING_DRAGON_PUNCH_TALENT.id),i.addEventListener(K.f.cast.by(U.a).spell(d.a.BLACKOUT_KICK),i.onCast),i}return Object(c.a)(a,[{key:"onCast",value:function(e){var t=this,a=this.IMPORTANT_SPELLS.some((function(e){return t.spellUsable.isAvailable(e)})),n=1e3*(this.selectedCombatant.hasBuff(d.a.SERENITY_TALENT.id)?.5:1);if(a&&(e.meta=e.meta||{},e.meta.isInefficientCast=!0,e.meta.inefficientCastReason="You cast this Blackout Kick while more important spells were available"),this.spellUsable.isOnCooldown(d.a.RISING_SUN_KICK.id)){var i=this.spellUsable.reduceCooldown(d.a.RISING_SUN_KICK.id,n);this.effectiveRisingSunKickReductionMs+=i,this.wastedRisingSunKickReductionMs+=n-i}else this.wastedRisingSunKickReductionMs+=n;if(this.spellUsable.isOnCooldown(d.a.FISTS_OF_FURY_CAST.id)){var s=this.spellUsable.reduceCooldown(d.a.FISTS_OF_FURY_CAST.id,n);this.effectiveFistsOfFuryReductionMs+=s,this.wastedFistsOfFuryReductionMs+=n-s}else this.wastedFistsOfFuryReductionMs+=n}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e("You are wasting cooldown reduction by casting Blackout Kick while having important casts available").icon(d.a.BLACKOUT_KICK.icon).actual(p.i18n._({id:"monk.windwalker.suggestions.blackoutKick.cdrWasted",defaults:"{0} seconds of wasted cooldown reduction per minute",values:{0:t.toFixed(2)}})).recommended("".concat(a," is recommended"))}))}},{key:"statistic",value:function(){return E.a.createElement(D.a,{position:T.a.CORE(3),size:"flexible"},E.a.createElement(M.a,{spell:d.a.BLACKOUT_KICK},E.a.createElement("span",{style:{fontSize:"75%"}},E.a.createElement(J.a,{id:d.a.RISING_SUN_KICK.id,style:{height:"1.3em",marginTop:"-1.em"}})," ",(this.effectiveRisingSunKickReductionMs/1e3).toFixed(1)," ",E.a.createElement("small",null,"Seconds reduced"),E.a.createElement("br",null),E.a.createElement(J.a,{id:d.a.FISTS_OF_FURY_CAST.id,style:{height:"1.3em",marginTop:"-1.em"}})," ",(this.effectiveFistsOfFuryReductionMs/1e3).toFixed(1)," ",E.a.createElement("small",null,"Seconds reduced"))))}},{key:"totalWastedReductionPerMinute",get:function(){return(this.wastedFistsOfFuryReductionMs+this.wastedRisingSunKickReductionMs)/this.owner.fightDuration*60}},{key:"suggestionThresholds",get:function(){return{actual:this.totalWastedReductionPerMinute,isGreaterThan:{minor:0,average:2,major:4},style:_.a.DECIMAL}}}]),a}(U.c);Q.dependencies={spellUsable:Z.b};var $=Q,ee=a(760),te=a(18),ae=a(752),ne=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).totalDamage=0,i.active=i.selectedCombatant.hasTalent(d.a.HIT_COMBO_TALENT.id),i.active&&i.addEventListener(K.f.damage.by(te.a|te.b).spell(z),i.onAffectedDamage),i}return Object(c.a)(a,[{key:"onAffectedDamage",value:function(e){var t=this.selectedCombatant.getBuff(d.a.HIT_COMBO_BUFF.id);if(t){var a=.01*t.stacks,n=Object(ae.a)(e,a);this.totalDamage+=n}}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(E.a.createElement("span",null,"You let your ",E.a.createElement(w.a,{id:d.a.HIT_COMBO_TALENT.id})," buff drop by casting a spell twice in a row. Dropping this buff is a large DPS decrease so be mindful of the spells being cast.")).icon(d.a.HIT_COMBO_TALENT.icon).actual(p.i18n._({id:"monk.windwalker.suggestions.hitCombo.uptime",defaults:"{0} % uptime",values:{0:Object(f.e)(t)}})).recommended(">".concat(Object(f.e)(a)," % is recommended"))}))}},{key:"statistic",value:function(){return E.a.createElement(D.a,{position:T.a.CORE(11),size:"flexible",tooltip:E.a.createElement(E.a.Fragment,null,"Total damage increase: ",Object(f.d)(this.totalDamage),E.a.createElement("br",null),"Uptime is weighted so less stacks count less towards 100% uptime")},E.a.createElement(M.a,{spell:d.a.HIT_COMBO_TALENT},E.a.createElement(ee.a,null)," ",Object(f.e)(this.uptime),"% ",E.a.createElement("small",null,"Weighted uptime"),E.a.createElement("br",null),E.a.createElement("img",{src:"/img/sword.png",alt:"Damage",className:"icon"})," ",Object(f.d)(this.dps)," DPS ",E.a.createElement("small",null,Object(f.e)(this.owner.getPercentageOfTotalDamageDone(this.totalDamage))," % of total")))}},{key:"uptime",get:function(){return this.selectedCombatant.getStackWeightedBuffUptime(d.a.HIT_COMBO_BUFF.id)/(6*this.owner.fightDuration)}},{key:"dps",get:function(){return this.totalDamage/this.owner.fightDuration*1e3}},{key:"suggestionThresholds",get:function(){return{actual:this.uptime,isLessThan:{minor:.95,average:.9,major:.85},style:_.a.PERCENTAGE}}}]),a}(U.c),ie=a(49),se=a(781),re=a(88),ce=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).maxResource=5,e.resource=re.a.CHI,e.selectedCombatant.hasTalent(d.a.ASCENSION_TALENT.id)&&(e.maxResource=6),e}return Object(c.a)(a,[{key:"getReducedCost",value:function(e){if(!this.getResource(e).cost)return 0;var t=this.getResource(e).cost;return e.ability.guid===d.a.BLACKOUT_KICK.id&&(t=1),t}}]),a}(a(773).a),le=a(808),oe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"suggestions",value:function(e){var t=this;e(this.suggestionThresholds).addSuggestion((function(e,a,n){return e("You are wasting Chi. Try to use it and not let it cap and go to waste").icon("creatureportrait_bubble").actual(p.i18n._({id:"monk.windwalker.suggestions.chi.wastedPerMinute",defaults:"{0} Chi wasted ({1} per minute)",values:{0:t.chiWasted,1:a.toFixed(2)}})).recommended("".concat(n," Chi wasted is recommended"))}))}},{key:"statistic",value:function(){return E.a.createElement(D.a,{size:"small",position:T.a.CORE(1),tooltip:E.a.createElement(E.a.Fragment,null,Object(f.e)(this.chiWastedPercent),"% wasted")},E.a.createElement(le.a,{resource:re.a.CHI,value:this.chiWasted,label:"Wasted Chi"}))}},{key:"tab",value:function(){var e=this;return{title:"Chi",url:"chi",render:function(){return E.a.createElement(ie.a,null,E.a.createElement(se.a,{tracker:e.chiTracker,resourceName:"Chi",showSpenders:!0}))}}}},{key:"chiWasted",get:function(){return this.chiTracker.wasted}},{key:"chiWastedPercent",get:function(){return this.chiWasted/(this.chiWasted+this.chiTracker.generated)||0}},{key:"chiWastedPerMinute",get:function(){return this.chiWasted/this.owner.fightDuration*1e3*60}},{key:"suggestionThresholds",get:function(){return{actual:this.chiWastedPerMinute,isGreaterThan:{minor:0,average:1,major:2},style:"decimal"}}}]),a}(U.c);oe.dependencies={chiTracker:ce};var ue=oe,de=a(119),me=a(6),he=a(58),Ee=a(751),ge=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).abilityTracker=void 0,i.totalStacks=0,i.currentStacks=0,i.stacksUsed=0,i.stacksWasted=0,i.damage=0,i.buffedCast=!1,i.active=i.selectedCombatant.hasLegendaryByBonusID(d.a.LAST_EMPERORS_CAPACITOR.bonusID),i.active?(i.addEventListener(K.f.applybuff.by(U.a).spell(d.a.LAST_EMPERORS_CAPACITOR_BUFF),i.applyBuff),i.addEventListener(K.f.applybuffstack.by(U.a).spell(d.a.LAST_EMPERORS_CAPACITOR_BUFF),i.applyBuffStack),i.addEventListener(K.f.cast.by(U.a).spell(X),i.castChiSpender),i.addEventListener(K.f.cast.by(U.a).spell(d.a.CRACKLING_JADE_LIGHTNING),i.castCracklingJadeLightning),i.addEventListener(K.f.damage.by(U.a).spell(d.a.CRACKLING_JADE_LIGHTNING),i.cracklingJadeLightningDamage),i):Object(de.a)(i)}return Object(c.a)(a,[{key:"applyBuff",value:function(){this.totalStacks+=1,this.currentStacks+=1}},{key:"applyBuffStack",value:function(){this.totalStacks+=1,this.currentStacks+=1}},{key:"castChiSpender",value:function(){20===this.currentStacks&&(this.stacksWasted+=1)}},{key:"castCracklingJadeLightning",value:function(){this.currentStacks>0&&(this.buffedCast=!0,this.stacksUsed+=this.currentStacks,this.currentStacks=0)}},{key:"cracklingJadeLightningDamage",value:function(e){this.buffedCast&&(this.damage+=e.amount+(e.absorbed||0),this.buffedCast=!1)}},{key:"statistic",value:function(){return E.a.createElement(D.a,{position:T.a.CORE(),size:"flexible",category:he.a.ITEMS,tooltip:E.a.createElement(me.Trans,{id:"monk.windwalker.modules.items.lastEmperorsCapacitor.tooltip",values:{0:this.totalStacks,1:this.stacksUsed,2:this.stacksWasted,3:this.averageStacksUsed.toFixed(2)},components:[E.a.createElement("br",null),E.a.createElement("b",null),E.a.createElement("br",null),E.a.createElement("b",null),E.a.createElement("br",null),E.a.createElement("b",null),E.a.createElement("br",null),E.a.createElement("b",null)]})},E.a.createElement(M.a,{spell:d.a.LAST_EMPERORS_CAPACITOR},E.a.createElement(Ee.a,{amount:this.damage})))}},{key:"suggestions",value:function(e){e(this.wastedStacksSuggestionThresholds).addSuggestion((function(e,t,a){return e(E.a.createElement(me.Trans,{id:"monk.windwalker.modules.items.lastEmperorsCapacitor.wastedStacks",components:[E.a.createElement(w.a,{id:d.a.LAST_EMPERORS_CAPACITOR_BUFF.id})]})).icon(d.a.LAST_EMPERORS_CAPACITOR.icon).actual({id:"monk.windwalker.modules.items.lastEmperorsCapacitor.wastedStacks.actual",defaults:"{0} Wasted stacks per minute",values:{0:t.toFixed(2)}}).recommended({id:"monk.windwalker.modules.items.lastEmperorsCapacitor.wastedStacks.recommended",defaults:"{recommended} Wasted stacks per minute is recommended",values:{recommended:a}})})),e(this.averageStacksSuggestionThresholds).addSuggestion((function(e,t){return e(E.a.createElement(me.Trans,{id:"monk.windwalker.modules.items.lastEmperorsCapacitor.averageStacks",components:[E.a.createElement(w.a,{id:d.a.LAST_EMPERORS_CAPACITOR_BUFF.id}),E.a.createElement(w.a,{id:d.a.CRACKLING_JADE_LIGHTNING.id})]})).icon(d.a.LAST_EMPERORS_CAPACITOR.icon).actual({id:"monk.windwalker.modules.items.lastEmperorsCapacitor.averageStacks.actual",defaults:"{0} average stacks used",values:{0:t.toFixed(2)}}).recommended({id:"monk.windwalker.modules.items.lastEmperorsCapacitor.averageStacks.recommended",defaults:"Try to cast Crackling Jade Lightning while as close to 20 stacks as possible"})}))}},{key:"averageStacksUsed",get:function(){return this.stacksUsed/this.abilityTracker.getAbility(d.a.CRACKLING_JADE_LIGHTNING.id).casts}},{key:"stacksWastedPerMinute",get:function(){return this.stacksWasted/this.owner.fightDuration*1e3/60}},{key:"averageStacksSuggestionThresholds",get:function(){return{actual:this.averageStacksUsed,isLessThan:{minor:18,average:16,major:14},style:_.a.NUMBER}}},{key:"wastedStacksSuggestionThresholds",get:function(){return{actual:this.stacksWastedPerMinute,isGreaterThan:{minor:0,average:2,major:4},style:_.a.NUMBER}}}]),a}(U.c);ge.dependencies={abilityTracker:G.a};var fe=ge,Te=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).totalStacks=0,i.currentStacks=0,i.stacksWasted=0,i.abilityTracker=void 0,i.active=i.selectedCombatant.hasLegendaryByBonusID(d.a.JADE_IGNITION.bonusID),i.active?(i.addEventListener(K.f.applybuff.by(U.a).spell(d.a.JADE_IGNITION_BUFF),i.applyBuff),i.addEventListener(K.f.applybuffstack.by(U.a).spell(d.a.JADE_IGNITION_BUFF),i.applyBuffStack),i.addEventListener(K.f.damage.by(U.a).spell(d.a.FISTS_OF_FURY_DAMAGE),i.onFistsDamage),i.addEventListener(K.f.cast.by(U.a).spell(d.a.SPINNING_CRANE_KICK),i.castSpinningCraneKick),i):Object(de.a)(i)}return Object(c.a)(a,[{key:"applyBuff",value:function(){this.currentStacks+=1}},{key:"applyBuffStack",value:function(){this.currentStacks+=1}},{key:"onFistsDamage",value:function(){this.totalStacks+=1,30===this.currentStacks&&(this.stacksWasted+=1)}},{key:"castSpinningCraneKick",value:function(){this.currentStacks=0}},{key:"statistic",value:function(){return E.a.createElement(D.a,{position:T.a.CORE(),size:"flexible",category:he.a.ITEMS},E.a.createElement(M.a,{spell:d.a.JADE_IGNITION},E.a.createElement(Ee.a,{amount:this.damageDone}),E.a.createElement("br",null),Object(f.e)(this.stackUsage,0),"% ",E.a.createElement("small",null,"Stacks used")))}},{key:"suggestions",value:function(e){e(this.suggestionThresholds).addSuggestion((function(e,t,a){return e(E.a.createElement(me.Trans,{id:"monk.windwalker.suggestions.jadeIgnitionWastedStacks",components:[E.a.createElement(w.a,{id:d.a.JADE_IGNITION_BUFF.id})]})).icon(d.a.JADE_IGNITION.icon).actual("".concat(Object(f.e)(t,0),"% Stacks used")).recommended("".concat(Object(f.e)(a,0),"% Stacks used is recommended"))}))}},{key:"damageDone",get:function(){return this.abilityTracker.getAbility(d.a.JADE_IGNITION_DAMAGE.id).damageEffective}},{key:"stackUsage",get:function(){return 1-this.stacksWasted/this.totalStacks}},{key:"suggestionThresholds",get:function(){return{actual:this.stackUsage,isLessThan:{minor:1,average:.95,major:.9},style:_.a.PERCENTAGE}}}]),a}(U.c);Te.dependencies={abilityTracker:G.a};var pe=Te,_e=a(770),be=a(762),ye=a(763),Se=a(771),Ce=a(772),Ie=function(e){var t=e.combatant,a=e.castEfficiency,n=e.thresholds,i=function(e){return E.a.createElement(Ce.a,Object.assign({castEfficiency:a.getCastEfficiencyForSpellId(e.spell)},e))};return E.a.createElement(_e.a,null,E.a.createElement(be.c,{name:"Use core abilities as often as possible",description:E.a.createElement(E.a.Fragment,null,"Spells with short cooldowns like ",E.a.createElement(w.a,{id:d.a.RISING_SUN_KICK.id})," and ",E.a.createElement(w.a,{id:d.a.FISTS_OF_FURY_CAST.id})," should be used as often as possible.")},E.a.createElement(i,{spell:d.a.RISING_SUN_KICK.id}),E.a.createElement(i,{spell:d.a.FISTS_OF_FURY_CAST.id}),t.hasTalent(d.a.WHIRLING_DRAGON_PUNCH_TALENT.id)&&E.a.createElement(i,{spell:d.a.WHIRLING_DRAGON_PUNCH_TALENT.id}),t.hasTalent(d.a.CHI_WAVE_TALENT.id)&&E.a.createElement(i,{spell:d.a.CHI_WAVE_TALENT.id}),t.hasTalent(d.a.CHI_BURST_TALENT.id)&&E.a.createElement(i,{spell:d.a.CHI_BURST_TALENT.id})),E.a.createElement(be.c,{name:"Use your procs and short CDs",description:E.a.createElement(E.a.Fragment,null,"Make sure to use your procs and spells at the correct time. Wasting ",E.a.createElement(w.a,{id:d.a.COMBO_BREAKER_BUFF.id})," procs and not hitting all your ",E.a.createElement(w.a,{id:d.a.FISTS_OF_FURY_CAST.id})," ticks is a loss of potential damage.")},E.a.createElement(ye.a,{name:E.a.createElement(E.a.Fragment,null,E.a.createElement(w.a,{id:d.a.COMBO_BREAKER_BUFF.id})," procs used"),thresholds:n.comboBreaker}),E.a.createElement(ye.a,{name:E.a.createElement(E.a.Fragment,null,"Average ticks hit with ",E.a.createElement(w.a,{id:d.a.FISTS_OF_FURY_CAST.id})),thresholds:n.fistsofFury}),t.hasLegendaryByBonusID(d.a.JADE_IGNITION.bonusID)&&E.a.createElement(ye.a,{name:E.a.createElement(E.a.Fragment,null,E.a.createElement(w.a,{id:d.a.JADE_IGNITION_BUFF.id})," stacks used"),thresholds:n.jadeIgnition})),E.a.createElement(be.c,{name:"Use your cooldowns effectively",description:E.a.createElement(E.a.Fragment,null,"Your cooldowns have a big impact on your damage output. Make sure you use them as much as possible. ",E.a.createElement(w.a,{id:d.a.TOUCH_OF_KARMA_CAST.id,icon:!0})," is both a defensive and offensive cooldown, but is mostly used offensively.")},E.a.createElement(i,{spell:d.a.TOUCH_OF_DEATH.id}),E.a.createElement(i,{spell:d.a.TOUCH_OF_KARMA_CAST.id}),!t.hasTalent(d.a.SERENITY_TALENT.id)&&E.a.createElement(i,{spell:d.a.STORM_EARTH_AND_FIRE_CAST.id}),t.hasTalent(d.a.SERENITY_TALENT.id)&&E.a.createElement(i,{spell:d.a.SERENITY_TALENT.id}),E.a.createElement(i,{spell:d.a.INVOKE_XUEN_THE_WHITE_TIGER.id}),E.a.createElement(ye.a,{name:E.a.createElement(E.a.Fragment,null,"Absorb from ",E.a.createElement(w.a,{id:d.a.TOUCH_OF_KARMA_CAST.id})," used"),thresholds:n.touchOfKarma})),E.a.createElement(be.c,{name:"Manage your resources",description:E.a.createElement(E.a.Fragment,null,"Windwalker is heavily dependent on having enough Chi to cast your core spells on cooldown. Wasting Chi either by generating while capped or using ",E.a.createElement(w.a,{id:d.a.BLACKOUT_KICK.id,icon:!0})," and ",E.a.createElement(w.a,{id:d.a.SPINNING_CRANE_KICK.id,icon:!0})," too much will cause you to delay your hard hitting Chi spenders and lose damage.")},E.a.createElement(i,{spell:d.a.EXPEL_HARM.id}),t.hasTalent(d.a.ENERGIZING_ELIXIR_TALENT.id)&&E.a.createElement(i,{spell:d.a.ENERGIZING_ELIXIR_TALENT.id}),t.hasTalent(d.a.FIST_OF_THE_WHITE_TIGER_TALENT.id)&&E.a.createElement(i,{spell:d.a.FIST_OF_THE_WHITE_TIGER_TALENT.id}),E.a.createElement(ye.a,{name:E.a.createElement(E.a.Fragment,null,"Wasted cooldown reduction from ",E.a.createElement(w.a,{id:d.a.BLACKOUT_KICK.id})," per minute"),thresholds:n.blackoutKick}),E.a.createElement(ye.a,{name:"Chi wasted per minute",thresholds:n.chiDetails})),E.a.createElement(be.c,{name:"Don't break mastery",description:E.a.createElement(E.a.Fragment,null,"Using the same damaging ability twice in a row will lose mastery benefit on the second cast and drop the ",E.a.createElement(w.a,{id:d.a.HIT_COMBO_TALENT.id,icon:!0})," buff if specced.")},E.a.createElement(ye.a,{name:E.a.createElement(E.a.Fragment,null,"Times ",E.a.createElement(w.a,{id:d.a.COMBO_STRIKES.id})," was broken"),thresholds:n.comboStrikes}),t.hasTalent(d.a.HIT_COMBO_TALENT)&&E.a.createElement(ye.a,{name:E.a.createElement(E.a.Fragment,null,E.a.createElement(w.a,{id:d.a.HIT_COMBO_TALENT.id})," uptime"),thresholds:n.hitCombo})),t.hasLegendaryByBonusID(d.a.LAST_EMPERORS_CAPACITOR.bonusID)&&E.a.createElement(be.c,{name:E.a.createElement(E.a.Fragment,null,"Utilize ",E.a.createElement(w.a,{id:d.a.LAST_EMPERORS_CAPACITOR.id})," effectively"),description:E.a.createElement(E.a.Fragment,null,"Use ",E.a.createElement(w.a,{id:d.a.CRACKLING_JADE_LIGHTNING.id})," with high stacks and avoid wasting stacks by using Chi spenders at cap")},E.a.createElement(ye.a,{name:E.a.createElement(E.a.Fragment,null,"Average stacks used per ",E.a.createElement(w.a,{id:d.a.CRACKLING_JADE_LIGHTNING.id})," cast "),thresholds:n.lastEmperorsCapacitorAverageStacks}),E.a.createElement(ye.a,{name:"Stacks wasted per minute",thresholds:n.lastEmperorsCapacitorWastedStacks})),E.a.createElement(be.c,{name:"Use your defensive cooldowns effectively",description:E.a.createElement(E.a.Fragment,null,"Make sure you use your defensive cooldowns at appropriate times throughout the fight. Make sure to use ",E.a.createElement(w.a,{id:d.a.TOUCH_OF_KARMA_CAST.id})," as much as possible to maximize its offensive benefit and use ",E.a.createElement(w.a,{id:d.a.DIFFUSE_MAGIC_TALENT.id}),"/",E.a.createElement(w.a,{id:d.a.DAMPEN_HARM_TALENT.id,icon:!0})," for dangerous periods of damage intake.")},E.a.createElement(i,{spell:d.a.TOUCH_OF_KARMA_CAST.id}),t.hasTalent(d.a.DIFFUSE_MAGIC_TALENT.id)&&E.a.createElement(i,{spell:d.a.DIFFUSE_MAGIC_TALENT.id}),t.hasTalent(d.a.DAMPEN_HARM_TALENT.id)&&E.a.createElement(i,{spell:d.a.DAMPEN_HARM_TALENT.id}),E.a.createElement(ye.a,{name:E.a.createElement(E.a.Fragment,null,"Absorb from ",E.a.createElement(w.a,{id:d.a.TOUCH_OF_KARMA_CAST.id})," used"),thresholds:n.touchOfKarma})),E.a.createElement(Se.a,{thresholds:n}))},Re=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).combatants=void 0,e.castEfficiency=void 0,e.preparationRuleAnalyzer=void 0,e.comboBreaker=void 0,e.fistsofFury=void 0,e.touchOfKarma=void 0,e.comboStrikes=void 0,e.blackoutKick=void 0,e.hitCombo=void 0,e.chiDetails=void 0,e.lastEmperorsCapacitor=void 0,e.jadeIgnition=void 0,e}return Object(c.a)(a,[{key:"render",value:function(){return E.a.createElement(Ie,{combatant:this.combatants.selected,castEfficiency:this.castEfficiency,thresholds:Object(v.a)(Object(v.a)({},this.preparationRuleAnalyzer.thresholds),{},{comboBreaker:this.comboBreaker.suggestionThresholds,fistsofFury:this.fistsofFury.suggestionThresholds,touchOfKarma:this.touchOfKarma.suggestionThresholds,comboStrikes:this.comboStrikes.suggestionThresholds,blackoutKick:this.blackoutKick.suggestionThresholds,hitCombo:this.hitCombo.suggestionThresholds,chiDetails:this.chiDetails.suggestionThresholds,lastEmperorsCapacitorAverageStacks:this.lastEmperorsCapacitor.averageStacksSuggestionThresholds,lastEmperorsCapacitorWastedStacks:this.lastEmperorsCapacitor.wastedStacksSuggestionThresholds,jadeIgnition:this.jadeIgnition.suggestionThresholds})})}}]),a}(k.a);Re.dependencies={combatants:L.a,castEfficiency:N.a,preparationRuleAnalyzer:F.a,comboBreaker:P,fistsofFury:j,touchOfKarma:Y,comboStrikes:q,blackoutKick:$,hitCombo:ne,chiDetails:ue,lastEmperorsCapacitor:fe,jadeIgnition:pe};var Oe=Re,Ae=a(28),ve=a(839),ke=a(22),Ne=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"naturalRegenRate",value:function(){var e=Object(l.a)(Object(o.a)(a.prototype),"naturalRegenRate",this).call(this);return this.selectedCombatant.hasTalent(d.a.ASCENSION_TALENT.id)&&(e*=1.1),this.combatantHasBuffActive(d.a.ENERGIZING_ELIXIR_TALENT.id)&&(e+=15),e}},{key:"currentMaxResource",value:function(){var e=100;return this.selectedCombatant.hasTalent(d.a.ASCENSION_TALENT.id)&&(e+=20),Math.floor(e)}},{key:"statistic",value:function(){return E.a.createElement(T.b,{position:T.a.CORE(8),icon:E.a.createElement(Ae.a,{icon:"spell_shadow_shadowworddominate",alt:"Capped Energy"}),value:"".concat(Object(f.e)(this.cappedProportion),"%"),label:"Time with capped energy",tooltip:E.a.createElement(E.a.Fragment,null,"Although it can be beneficial to wait and let your energy pool ready to be used at the right time, you should still avoid letting it reach the cap.",E.a.createElement("br",null),"You spent ",E.a.createElement("b",null,Object(f.e)(this.cappedProportion),"%")," of the fight at capped energy, causing you to miss out on ",E.a.createElement("b",null,this.missedRegenPerMinute.toFixed(1))," energy per minute from regeneration."),footer:E.a.createElement("div",{className:"statistic-box-bar"},E.a.createElement(ke.b,{content:"Not at capped energy for ".concat(Object(f.a)((this.owner.fightDuration-this.atCap)/1e3))},E.a.createElement("div",{className:"stat-healing-bg",style:{width:"".concat(100*(1-this.cappedProportion),"%")}},E.a.createElement("img",{src:"/img/sword.png",alt:"Uncapped Energy"}))),E.a.createElement(ke.b,{content:"At capped energy for ".concat(Object(f.a)(this.atCap/1e3))},E.a.createElement("div",{className:"remainder DeathKnight-bg"},E.a.createElement("img",{src:"/img/overhealing.png",alt:"Capped Energy"}))))})}}]),a}(ve.a);Ne.resourceType=re.a.ENERGY,Ne.baseRegenRate=10,Ne.isRegenHasted=!0,Ne.cumulativeEventWindow=400,Ne.resourceRefundOnMiss=.8,Ne.buffsChangeRegen=[d.a.ENERGIZING_ELIXIR_TALENT.id];var Le=Ne,Fe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).addEventListener(K.f.applybuff.by(U.a).spell(d.a.FISTS_OF_FURY_CAST),i.onApplyBuff),i.addEventListener(K.f.removebuff.by(U.a).spell(d.a.FISTS_OF_FURY_CAST),i.onRemoveBuff),i.addEventListener(K.f.applydebuff.by(U.a).spell(d.a.CRACKLING_JADE_LIGHTNING),i.onApplyDebuff),i.addEventListener(K.f.removedebuff.by(U.a).spell(d.a.CRACKLING_JADE_LIGHTNING),i.onRemoveDebuff),i}return Object(c.a)(a,[{key:"onCast",value:function(e){e.ability.guid!==d.a.CRACKLING_JADE_LIGHTNING.id&&e.ability.guid!==d.a.FISTS_OF_FURY_CAST.id&&Object(l.a)(Object(o.a)(a.prototype),"onCast",this).call(this,e)}},{key:"cancelChannel",value:function(e,t){this.isChannelingSpell(d.a.CRACKLING_JADE_LIGHTNING.id)||this.isChannelingSpell(d.a.FISTS_OF_FURY_CAST.id)?(this.log("Marking",this._currentChannel.ability.name,"as ended since we started casting something else"),this.endChannel(e)):Object(l.a)(Object(o.a)(a.prototype),"cancelChannel",this).call(this,e,t)}},{key:"onApplyBuff",value:function(e){this.beginChannel(e)}},{key:"onApplyDebuff",value:function(e){this.beginChannel(e)}},{key:"onRemoveDebuff",value:function(e){this.isChannelingSpell(d.a.CRACKLING_JADE_LIGHTNING.id)&&this.endChannel(e)}},{key:"onRemoveBuff",value:function(e){this.isChannelingSpell(d.a.FISTS_OF_FURY_CAST.id)&&this.endChannel(e)}}]),a}(a(814).a),we=a(122),De=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).abilityTracker=void 0,i.statTracker=void 0,i.cycloneStrikesMarks=[],i.spinningCraneKickHits=0,i.totalMarksDuringHits=0,i.addEventListener(K.f.applydebuff.by(U.a|U.b).spell(d.a.MARK_OF_THE_CRANE),i.onMarkApplication),i.addEventListener(K.f.refreshdebuff.by(U.a|U.b).spell(d.a.MARK_OF_THE_CRANE),i.onMarkRefresh),i.addEventListener(K.f.cast.by(U.a|U.b).spell(d.a.SPINNING_CRANE_KICK),i.onSCKCast),i.addEventListener(K.f.damage.by(U.a|U.b).spell(d.a.SPINNING_CRANE_KICK_DAMAGE),i.onSCKDamage),i}return Object(c.a)(a,[{key:"_verifyTargetInstance",value:function(e){return void 0===e?1:e}},{key:"onMarkApplication",value:function(e){var t=this._verifyTargetInstance(e.targetInstance),a={target:{id:e.targetID,instance:t},timestamp:e.timestamp};this.cycloneStrikesMarks.push(a)}},{key:"onMarkRefresh",value:function(e){var t=this._verifyTargetInstance(e.targetInstance),a={target:{id:e.targetID,instance:t},timestamp:e.timestamp};this.cycloneStrikesMarks.forEach((function(e){var t,n;t=e.target,n=a.target,t.id===n.id&&t.instance===n.instance&&(e.timestamp=a.timestamp)}))}},{key:"onSCKCast",value:function(e){this.cycloneStrikesMarks=this.cycloneStrikesMarks.filter((function(t){return e.timestamp-t.timestamp<=15e3})),this.selectedCombatant.hasBuff(d.a.DANCE_OF_CHIJI_BUFF.id)&&(e.meta=e.meta||{},e.meta.isEnhancedCast=!0,e.meta.enhancedCastReason="This cast was empowered by Dance of Chi-Ji")}},{key:"onSCKDamage",value:function(){this.spinningCraneKickHits+=1,this.totalMarksDuringHits+=this.cycloneStrikesMarks.length}},{key:"statistic",value:function(){return this.casts>0?E.a.createElement(D.a,{position:T.a.CORE(7),size:"flexible",tooltip:"Spinning Crane Kick hits all nearby enemies 4 times over its duration. Mark of the crane, which increases the damage of your Spinning Crane Kick, is applied by your single target abilities and is capped at 5 targets."},E.a.createElement(M.a,{spell:d.a.SPINNING_CRANE_KICK},this.averageMarks.toFixed(2)," ",E.a.createElement("small",null,"Average marks"),E.a.createElement("br",null),this.averageEnemiesHit.toFixed(2)," ",E.a.createElement("small",null,"Average enemies hit"))):null}},{key:"casts",get:function(){return this.abilityTracker.getAbility(d.a.SPINNING_CRANE_KICK.id).casts}},{key:"averageEnemiesHit",get:function(){return this.spinningCraneKickHits/(4*(this.casts>0?this.casts:1))}},{key:"averageMarks",get:function(){return this.totalMarksDuringHits/this.spinningCraneKickHits}}]),a}(U.c);De.dependencies={abilityTracker:G.a,statTracker:we.a};var Ge=De,Ue=a(916),Me=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).spellUsable=void 0,i.damageGain=0,i.effectiveRisingSunKickReductionMs=0,i.effectiveFistsOfFuryReductionMs=0,i.active=i.selectedCombatant.hasTalent(d.a.SERENITY_TALENT.id),i.addEventListener(K.f.cast.by(U.a).spell(d.a.RISING_SUN_KICK),i.onRSK),i.addEventListener(K.f.cast.by(U.a).spell(d.a.FISTS_OF_FURY_CAST),i.onFoF),i.addEventListener(K.f.applybuff.by(U.a).spell(d.a.SERENITY_TALENT),i.onSerenityStart),i.addEventListener(K.f.removebuff.by(U.a).spell(d.a.SERENITY_TALENT),i.onSerenityEnd),i.addEventListener(K.f.damage.by(U.a).spell(z),i.onAffectedDamage),i}return Object(c.a)(a,[{key:"_reduceRSK",value:function(){if(this.spellUsable.isOnCooldown(d.a.RISING_SUN_KICK.id)){var e=.5*this.spellUsable.cooldownRemaining(d.a.RISING_SUN_KICK.id);this.spellUsable.reduceCooldown(d.a.RISING_SUN_KICK.id,e),this.effectiveRisingSunKickReductionMs+=e}}},{key:"_reduceFoF",value:function(){if(this.spellUsable.isOnCooldown(d.a.FISTS_OF_FURY_CAST.id)){var e=.5*this.spellUsable.cooldownRemaining(d.a.FISTS_OF_FURY_CAST.id);this.spellUsable.reduceCooldown(d.a.FISTS_OF_FURY_CAST.id,e),this.effectiveFistsOfFuryReductionMs+=e}}},{key:"onRSK",value:function(){this.selectedCombatant.hasBuff(d.a.SERENITY_TALENT.id)&&this._reduceRSK()}},{key:"onFoF",value:function(){this.selectedCombatant.hasBuff(d.a.SERENITY_TALENT.id)&&this._reduceFoF()}},{key:"onSerenityStart",value:function(){this._reduceRSK(),this._reduceFoF()}},{key:"onSerenityEnd",value:function(){if(this.spellUsable.isOnCooldown(d.a.RISING_SUN_KICK.id)){var e=this.spellUsable.cooldownRemaining(d.a.RISING_SUN_KICK.id);this.spellUsable.extendCooldown(d.a.RISING_SUN_KICK.id,e),this.effectiveRisingSunKickReductionMs-=e}if(this.spellUsable.isOnCooldown(d.a.FISTS_OF_FURY_CAST.id)){var t=this.spellUsable.cooldownRemaining(d.a.FISTS_OF_FURY_CAST.id);this.spellUsable.extendCooldown(d.a.FISTS_OF_FURY_CAST.id,t),this.effectiveFistsOfFuryReductionMs-=t}}},{key:"onAffectedDamage",value:function(e){this.selectedCombatant.hasBuff(d.a.SERENITY_TALENT.id)&&(this.damageGain+=Object(ae.a)(e,.2))}},{key:"statistic",value:function(){return E.a.createElement(D.a,{position:T.a.CORE(3),size:"flexible",tooltip:E.a.createElement(E.a.Fragment,null,"Total damage increase: ",Object(f.d)(this.damageGain),".",E.a.createElement("br",null),"The damage increase is calculated from the ",Object(f.e)(.2),"% damage bonus and doesn't count raw damage from extra casts gained from cooldown reduction.")},E.a.createElement(M.a,{spell:d.a.SERENITY_TALENT},E.a.createElement("img",{src:"/img/sword.png",alt:"Damage",className:"icon"})," ",Object(f.d)(this.dps)," DPS ",E.a.createElement("small",null,Object(f.e)(this.owner.getPercentageOfTotalDamageDone(this.damageGain))," % of total"),E.a.createElement("br",null),E.a.createElement("span",{style:{fontSize:"75%"}},E.a.createElement(J.a,{id:d.a.RISING_SUN_KICK.id,style:{height:"1.3em",marginTop:"-1.em"}})," ",(this.effectiveRisingSunKickReductionMs/1e3).toFixed(1)," ",E.a.createElement("small",null,"Seconds reduced"),E.a.createElement("br",null),E.a.createElement(J.a,{id:d.a.FISTS_OF_FURY_CAST.id,style:{height:"1.3em",marginTop:"-1.em"}})," ",(this.effectiveFistsOfFuryReductionMs/1e3).toFixed(1)," ",E.a.createElement("small",null,"Seconds reduced"))))}},{key:"dps",get:function(){return this.damageGain/this.owner.fightDuration*1e3}}]),a}(U.c);Me.dependencies={spellUsable:Z.b};var Ke=Me,He=a(917),Pe=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(r.a);Pe.specModules={channeling:Fe,globalCooldown:m,alwaysBeCasting:b,abilities:y,buffs:C,cooldownThroughputTracker:A,checklist:Oe,chiTracker:ce,chiDetails:ue,energyCapTracker:Le,hitCombo:ne,serenity:Ke,comboBreaker:P,fistsofFury:j,spinningCraneKick:Ge,touchOfKarma:Y,touchOfDeath:Ue.a,comboStrikes:q,blackoutKick:$,lastEmperorsCapacitor:fe,jadeIgnition:pe,fallenOrder:He.a};t.default=Pe},752:function(e,t,a){"use strict";function n(e,t){var a=(e.amount||0)+(e.absorbed||0);return a-a/(1+t)}a.d(t,"a",(function(){return n}))},760:function(e,t,a){"use strict";var n=a(0),i=a.n(n);t.a=function(e){var t=Object.assign({},e);return i.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"10 10 80 80",className:"icon"},t),i.a.createElement("path",{d:"M50,86.4865c17.4361,0,31.6216-14.1855,31.6216-31.6216c0-16.6168-12.8865-30.2714-29.1892-31.5189v-4.9677h7.2973v-4.8649  H40.2703v4.8649h7.2973v4.9677c-16.3027,1.2475-29.1892,14.902-29.1892,31.5189C18.3784,72.3009,32.5639,86.4865,50,86.4865z M52.4324,28.2236c3.1101,0.2817,6.0664,1.0982,8.7798,2.356l-8.7798,15.2073V28.2236z M47.5676,28.2236v26.6412 c0,1.1008,0.7393,2.0647,1.8029,2.3497c0.209,0.0561,0.4205,0.0827,0.6295,0.0827c0.8533,0,1.6642-0.4504,2.1065-1.2162 l13.3146-23.0616c6.8507,4.8503,11.3357,12.8315,11.3357,21.8454c0,14.7537-12.0031,26.7567-26.7568,26.7567 s-26.7568-12.003-26.7568-26.7567C23.2432,40.9315,33.9501,29.4573,47.5676,28.2236z"}))}},816:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),c=a(15),l=a(43),o=(a(33),a(752)),u=a(754),d=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).spellUsable=void 0,i.inExecuteWindow=!1,i.inHealthExecuteWindow=!1,i.executeWindowStart=0,i.lastExecuteHitTimestamp=0,i.totalExecuteWindowDuration=0,i.damage=0,i.casts=0,i.castsWithExecute=0,i.addEventListener(c.f.damage.by(i.executeSources),i.onGeneralDamage),i.addEventListener(c.f.cast.by(i.executeSources).spell(i.executeSpells),i.onExecuteCast),i.addEventListener(c.f.damage.by(i.executeSources).spell(i.executeSpells),i.onExecuteDamage),i.addEventListener(c.f.applybuff.to(i.executeSources).spell(i.executeOutsideRangeEnablers),i.applyExecuteEnablerBuff),i.addEventListener(c.f.removebuff.to(i.executeSources).spell(i.executeOutsideRangeEnablers),i.removeExecuteEnablerBuff),i.addEventListener(c.f.fightend,i.onFightEnd),i}return Object(i.a)(a,[{key:"isTargetInExecuteRange",value:function(e){return!(!e.hitPoints||!e.maxHitPoints)&&e.hitPoints/e.maxHitPoints<this.lowerThreshold}},{key:"isTargetInReverseExecuteRange",value:function(e){return!(!e.hitPoints||!e.maxHitPoints)&&e.hitPoints/e.maxHitPoints>this.upperThreshold}},{key:"isTargetInHealthExecuteWindow",value:function(e){return!(!e.hitPoints||!e.maxHitPoints)&&(this.isTargetInExecuteRange(e)||this.isTargetInReverseExecuteRange(e))}},{key:"isExecuteUsableOutsideExecuteRange",get:function(){var e=this,t=!1;return this.executeOutsideRangeEnablers.forEach((function(a){e.selectedCombatant.hasBuff(a.id)&&(t=!0)})),t}},{key:"areExecuteSpellsOnCD",get:function(){var e=this,t=!0;return this.executeSpells.forEach((function(a){e.spellUsable.isOnCooldown(a.id)||(t=!1)})),t}}]),Object(i.a)(a,[{key:"onGeneralDamage",value:function(e){e.targetIsFriendly||(this.areExecuteSpellsOnCD||this.isExecuteUsableOutsideExecuteRange||this.isTargetInHealthExecuteWindow(e)?(this.lastExecuteHitTimestamp=e.timestamp,this.inExecuteWindow||(this.inExecuteWindow=!0,this.inHealthExecuteWindow=!0,this.executeWindowStart=e.timestamp)):this.inExecuteWindow&&e.timestamp>this.lastExecuteHitTimestamp+500&&(this.inExecuteWindow=!1,this.inHealthExecuteWindow=!1,this.totalExecuteWindowDuration+=e.timestamp-this.executeWindowStart))}},{key:"onExecuteCast",value:function(){this.casts+=1,(this.inExecuteWindow||this.inHealthExecuteWindow)&&(this.castsWithExecute+=1)}},{key:"onExecuteDamage",value:function(e){(this.inExecuteWindow||this.inHealthExecuteWindow)&&(this.modifiesDamage?this.damage+=Object(o.a)(e,this.damageModifier):this.damage+=e.amount+(e.absorbed||0))}},{key:"applyExecuteEnablerBuff",value:function(e){this.inExecuteWindow||this.inHealthExecuteWindow||(this.executeWindowStart=e.timestamp),this.inExecuteWindow=!0,this.lastExecuteHitTimestamp=e.timestamp}},{key:"removeExecuteEnablerBuff",value:function(e){this.inHealthExecuteWindow||(this.inExecuteWindow=!1,this.totalExecuteWindowDuration+=e.timestamp-this.executeWindowStart)}},{key:"onFightEnd",value:function(e){this.inExecuteWindow&&(this.totalExecuteWindowDuration+=e.timestamp-this.executeWindowStart,this.inExecuteWindow=!1)}},{key:"executeSources",get:function(){return this.constructor.executeSources}},{key:"executeSpells",get:function(){return this.constructor.executeSpells}},{key:"executeOutsideRangeEnablers",get:function(){return this.constructor.executeOutsideRangeEnablers}},{key:"lowerThreshold",get:function(){return this.constructor.lowerThreshold}},{key:"upperThreshold",get:function(){return this.constructor.upperThreshold}},{key:"modifiesDamage",get:function(){return this.constructor.modifiesDamage}},{key:"damageModifier",get:function(){return this.constructor.damageModifier}},{key:"executeDamage",get:function(){return this.damage}},{key:"totalExecuteDuration",get:function(){return this.totalExecuteWindowDuration}},{key:"totalCasts",get:function(){return this.casts}},{key:"totalExecuteCasts",get:function(){return this.castsWithExecute}}]),a}(l.c);d.dependencies={spellUsable:u.b},d.executeSpells=[],d.executeSources=void 0,d.executeOutsideRangeEnablers=[],d.lowerThreshold=void 0,d.upperThreshold=void 0,d.modifiesDamage=void 0,d.damageModifier=void 0,t.a=d},839:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(10),r=a(11),c=a(43),l=a(800),o=a(123),u=a(832),d=a(766),m=a(15),h=[d.a.MISS,d.a.DODGE,d.a.PARRY],E=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];(e=t.call.apply(t,[this].concat(s))).atCap=0,e.missedRegen=0,e.naturalRegen=0,e.regenState=null,e.prevSpender=null,e.hasReportedBelowCap=!1,e.debugErrorSum=0,e.debugGreatestError=0,e.debugAccuracyCheckCount=0;var l=e.currentMaxResourceWithFallback();return e.regenState={amount:l||0,max:l,regen:e.naturalRegenRate(),timestamp:e.owner.fight.start_time},e.addEventListener(m.f.fightend,e.onFightend),e.addEventListener(m.f.energize.to(c.a),e.onEnergize),e.addEventListener(m.f.cast.by(c.a),e.onCast),e.addEventListener(m.f.damage.by(c.a),e.onDamage),e.addEventListener(m.f.drain.by(c.a),e.onDrain),e.addEventListener(m.f.applybuff.to(c.a),e.onApplyBuff),e.addEventListener(m.f.removebuff.to(c.a),e.onRemoveBuff),e.addEventListener(m.f.ChangeHaste.to(c.a),e.onChangeHaste),e}return Object(i.a)(a,[{key:"current",get:function(){return this.predictValue(this.owner.currentTimestamp)}},{key:"isCapped",get:function(){return this.current>=this.regenState.max}},{key:"cappedProportion",get:function(){return this.atCap/this.owner.fightDuration}},{key:"missedRegenPerMinute",get:function(){return this.missedRegen/this.owner.fightDuration*1e3*60}}]),Object(i.a)(a,[{key:"getReducedDrain",value:function(e){return e.resourceChange}},{key:"getBaseRegenRate",value:function(){return this.constructor.baseRegenRate}},{key:"naturalRegenRate",value:function(){var e=this.getBaseRegenRate()/1e3;return this.constructor.isRegenHasted&&(e*=1+this.haste.current),e}},{key:"currentMaxResource",value:function(){return null}},{key:"processInvisibleEnergize",value:function(e){if(null==e||isNaN(e))throw new Error("processInvisibleEnergize called without required parameter. amount: ".concat(e));if(0!==e){var t=this.current,a=Math.min(t+e,this.currentMaxResourceWithFallback())-t;this.applyEnergize(a)}}},{key:"getResource",value:function(e){var t=this;return e&&e.classResources?e.classResources.find((function(e){return e.type===t.constructor.resourceType.id})):null}},{key:"getCost",value:function(e){return void 0!==e.resourceCost[this.constructor.resourceType.id]?e.resourceCost[this.constructor.resourceType.id]:this.getResource(e).cost}},{key:"combatantHasBuffActive",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||isNaN(e))throw new Error("combatantHasBuffActive called without required parameter. buffId: ".concat(e));t||(t=this.owner.currentTimestamp);var a=this.selectedCombatant.getBuffHistory(e);return Boolean(a.find((function(e){return e.start<=t&&(!e.end||e.end>t)})))}},{key:"onFightend",value:function(){this.updateState(this.predictValue(this.owner.fight.end_time))}},{key:"onEnergize",value:function(e){if(e.resourceChangeType===this.constructor.resourceType.id&&e.resourceChange){var t=e.waste?e.waste:0,a=e.resourceChange-t,n=this.constructor.energizersToApplyCumulatively.includes(e.ability.guid);this.applyEnergize(a,e,n)}}},{key:"applyEnergize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||isNaN(e))throw new Error("applyEnergize called without required parameter. gain: ".concat(e));var n=t?t.timestamp:this.owner.currentTimestamp,i=t?this.getResource(t):null,s=a||this.isLastUpdateRecent(n)||!i||null==i.amount,r=s?this.predictValue(n)+e:i.amount;var c=this.currentMaxResourceWithFallback(t);this.updateState(r,c)}},{key:"onCast",value:function(e){var t=this.getResource(e);if(t){var a=this.getCost(e);if(a){this.constructor.exemptFromRefund.includes(e.ability.guid)||(this.prevSpender={id:e.ability.guid,cost:a,timestamp:e.timestamp});var n=null==t.amount||this.constructor.castsToApplyCumulatively.includes(e.ability.guid)||this.isLastUpdateRecent(e.timestamp),i=(n?this.predictValue(e.timestamp):t.amount)-a;0;var s=this.currentMaxResourceWithFallback(e);this.updateState(i,s)}}}},{key:"onDamage",value:function(e){if(!(!this.prevSpender||e.ability.guid!==this.prevSpender.id||e.timestamp-this.prevSpender.timestamp>500||e.tick)&&h.includes(e.hitType)){var t=Math.floor(this.prevSpender.cost*this.constructor.resourceRefundOnMiss),a=this.predictValue(e.timestamp)+t;this.updateState(a)}}},{key:"onDrain",value:function(e){if(e.resourceChangeType===this.constructor.resourceType.id&&e.resourceChange){var t=this.getResource(e),a=this.getReducedDrain(e),n=!t||null==t.amount||this.constructor.energizersToApplyCumulatively.includes(e.ability.guid)||this.isLastUpdateRecent(e.timestamp),i=(n?this.predictValue(e.timestamp):t.amount)-a;0;var s=this.currentMaxResourceWithFallback(e);this.updateState(i,s)}}},{key:"isLastUpdateRecent",value:function(e){return this.regenState.timestamp+this.constructor.cumulativeEventWindow>=e}},{key:"onApplyBuff",value:function(e){this.constructor.buffsChangeMax.includes(e.ability.guid)&&this.buffChangesResourceMax(e),this.constructor.buffsChangeRegen.includes(e.ability.guid)&&this.buffChangesRegen()}},{key:"onRemoveBuff",value:function(e){this.constructor.buffsChangeMax.includes(e.ability.guid)&&this.buffChangesResourceMax(e),this.constructor.buffsChangeRegen.includes(e.ability.guid)&&this.buffChangesRegen()}},{key:"onChangeHaste",value:function(){var e=this.naturalRegenRate();this.updateState(null,null,e)}},{key:"buffChangesResourceMax",value:function(e){var t=this.currentMaxResourceWithFallback(e);this.updateState(null,t)}},{key:"buffChangesRegen",value:function(){var e=this.naturalRegenRate();this.updateState(null,null,e)}},{key:"updateState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.owner.currentTimestamp;(null==e||isNaN(e))&&(e=this.predictValue(n)),(null==t||isNaN(t))&&(t=this.currentMaxResourceWithFallback()),(null==a||isNaN(a))&&(a=this.naturalRegenRate()),e=t?Math.min(t,e):e;var i=this.regenState,s={amount:e,max:t,regen:a,timestamp:n};if(this.regenState=s,i){var r=this.timeCappedBetweenStates(i,s);this.atCap+=r,this.missedRegen+=r*i.regen,this.naturalRegen+=(s.timestamp-i.timestamp)*i.regen}s.amount<s.max&&this.onBelowCap(s.timestamp)}},{key:"timeCappedBetweenStates",value:function(e,t){if(!e||!t)throw new Error("timeCappedBetweenStates called without required parameters. oldState: ".concat(e,", newState: ").concat(t));var a=e.max?this.predictReachValue(e.timestamp,e.amount,e.regen,e.max):1/0;return a>=t.timestamp?0:(this.onAtCap(a),t.timestamp-a)}},{key:"currentMaxResourceWithFallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.currentMaxResource();if(t)return t;var a=this.getResource(e);return a&&null!=a.max&&!isNaN(a.max)?a.max:this.regenState.max}},{key:"predictReachValue",value:function(e,t,a,n){if(null==t||isNaN(t)||null==a||isNaN(a)||null==n||isNaN(n)||null==e||isNaN(e))throw new Error("predictReachValue called without required parameters. startValue: ".concat(t,", regen: ").concat(a,", cap: ").concat(n,", startTime: ").concat(e));return t>=n?e:0===a?1/0:e+(n-t)/a}},{key:"predictValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e||(e=this.owner.currentTimestamp),e<this.regenState.timestamp)return this.regenState.amount;var t=e-this.regenState.timestamp,a=this.regenState.amount+this.regenState.regen*t;return this.regenState.max?Math.min(this.regenState.max,a):a}},{key:"onBelowCap",value:function(e){this.hasReportedBelowCap||(this.fabricateEndCap(e),this.hasReportedBelowCap=!0)}},{key:"onAtCap",value:function(e){this.hasReportedBelowCap&&(this.fabricateBeginCap(e),this.hasReportedBelowCap=!1)}},{key:"fabricateBeginCap",value:function(e){if(null==e||isNaN(e))throw new Error("fabricateBeginCap called without required parameter. time: ".concat(e));this.eventEmitter.fabricateEvent({type:"beginresourcecap",timestamp:e,sourceID:this.owner.playerId,targetID:this.owner.playerId,resourceType:this.constructor.resourceType.id})}},{key:"fabricateEndCap",value:function(e){if(null==e||isNaN(e))throw new Error("fabricateEndCap called without required parameter. time: ".concat(e));this.eventEmitter.fabricateEvent({type:"endresourcecap",timestamp:e,sourceID:this.owner.playerId,targetID:this.owner.playerId,resourceType:this.constructor.resourceType.id})}},{key:"debugActualVsPredicted",value:function(e,t){}},{key:"debugMeanPredictionError",get:function(){return this.debugErrorSum/this.debugAccuracyCheckCount}}]),a}(c.c);E.dependencies={eventEmitter:o.a,haste:l.a,spellResourceCost:u.a},E.baseRegenRate=0,E.isRegenHasted=!1,E.buffsChangeMax=[],E.buffsChangeRegen=[],E.energizersToApplyCumulatively=[],E.castsToApplyCumulatively=[],E.drainsToApplyCumulatively=[],E.cumulativeEventWindow=100,E.resourceRefundOnMiss=0,E.exemptFromRefund=[],t.a=E},916:function(e,t,a){"use strict";var n=a(7),i=a(8),s=a(9),r=a(120),c=a(66),l=a(10),o=a(11),u=a(43),d=a(753),m=a(3),h=a(15),E=a(816),g=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).maxCasts=0,n.cooldown=18e5,n.addEventListener(h.f.fightend,n.adjustMaxCasts),e.abilities.add({spell:m.a.TOUCH_OF_DEATH,category:d.a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{static:1e3},castEfficiency:{suggestion:!0,recommendedEfficiency:.85,maxCasts:function(){return n.maxCasts||0}}}),n}return Object(s.a)(a,[{key:"adjustMaxCasts",value:function(e){Object(r.a)(Object(c.a)(a.prototype),"onFightEnd",this).call(this,e),this.maxCasts+=Math.ceil(this.totalExecuteDuration/this.cooldown)}}]),a}(E.a);g.executeSpells=[m.a.TOUCH_OF_DEATH],g.executeSources=u.a,g.lowerThreshold=.15,g.executeOutsideRangeEnablers=[],g.modifiesDamage=!1,g.dependencies=Object(n.a)(Object(n.a)({},E.a.dependencies),{},{abilities:d.a}),t.a=g},917:function(e,t,a){"use strict";var n=a(8),i=a(9),s=a(119),r=a(10),c=a(11),l=a(43),o=a(753),u=a(3),d=a(15),m=a(746),h=a(747),E=a(58),g=a(751),f=a(765),T=a(0),p=a.n(T),_=a(748),b=a(33),y=a(121),S=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).windDamage=0,i.brewDamage=0,i.mistDamage=0,i.mistHealing=0,i.mistOverhealing=0,i.cloneMap=new Map,i.abilities=void 0,i.active=i.selectedCombatant.hasCovenant(y.a.VENTHYR.id),i.active?(i.abilities.add({spell:u.a.FALLEN_ORDER_CAST,category:o.a.SPELL_CATEGORIES.COOLDOWNS,cooldown:180,gcd:{base:1500},castEfficiency:{suggestion:!0,recommendedEfficiency:.8}}),i.addEventListener(d.f.summon.by(l.a).spell([u.a.FALLEN_ORDER_OX_CLONE,u.a.FALLEN_ORDER_TIGER_CLONE,u.a.FALLEN_ORDER_CRANE_CLONE]),i.trackSummons),i.addEventListener(d.f.heal.by(l.b).spell([u.a.FALLEN_ORDER_ENVELOPING_MIST,u.a.FALLEN_ORDER_SOOTHING_MIST]),i.mistHealingTracker),i.addEventListener(d.f.damage.by(l.b).spell([u.a.FALLEN_ORDER_KEG_SMASH,u.a.FALLEN_ORDER_BREATH_OF_FIRE,u.a.BREATH_OF_FIRE_DEBUFF]),i.brewDamageTracker),i.addEventListener(d.f.damage.by(l.b).spell([u.a.FALLEN_ORDER_SPINNING_CRANE_KICK,u.a.FISTS_OF_FURY_DAMAGE]),i.windDamageTracker),i.addEventListener(d.f.damage.by(l.b).spell(u.a.MELEE),i.handleMelee),i):Object(s.a)(i)}return Object(i.a)(a,[{key:"trackSummons",value:function(e){this.cloneMap.set(e.targetID,e.ability.guid)}},{key:"mistHealingTracker",value:function(e){this.mistHealing+=(e.amount||0)+(e.absorbed||0),this.mistOverhealing+=e.overheal||0}},{key:"brewDamageTracker",value:function(e){this.brewDamage+=e.amount||0}},{key:"windDamageTracker",value:function(e){this.windDamage+=e.amount||0}},{key:"mistDamageTracker",value:function(e){this.mistDamage+=e.amount||0}},{key:"handleMelee",value:function(e){if(e.sourceID){var t=e.sourceID,a=this.cloneMap.get(t);void 0!==a&&(a===u.a.FALLEN_ORDER_OX_CLONE.id?this.brewDamageTracker(e):a===u.a.FALLEN_ORDER_TIGER_CLONE.id?this.windDamageTracker(e):this.mistDamageTracker(e))}}},{key:"statistic",value:function(){var e=this.brewDamage+this.mistDamage+this.windDamage;return p.a.createElement(m.a,{position:h.a.CORE(),size:"flexible",category:E.a.COVENANTS,tooltip:p.a.createElement(p.a.Fragment,null,p.a.createElement("ul",null,p.a.createElement("li",null,"Damage from Brewmaster clones: ",Object(b.d)(this.brewDamage)),p.a.createElement("li",null,"Damage from Mistweaver clones: ",Object(b.d)(this.mistDamage)),p.a.createElement("li",null,"Damage from Windwalker clones: ",Object(b.d)(this.windDamage))))},p.a.createElement(_.a,{spell:u.a.FALLEN_ORDER_CAST},p.a.createElement(f.a,{amount:this.mistHealing}),p.a.createElement("br",null),p.a.createElement(g.a,{amount:e})))}}]),a}(l.c);S.dependencies={abilities:o.a},t.a=S}}]);
//# sourceMappingURL=WindwalkerMonk.480ac87b.chunk.js.map